var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(){function t(i,e,n){function s(a,o){if(!e[a]){if(!i[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[a]={exports:{}};i[a][0].call(c.exports,function(t){var e=i[a][1][t];return s(e||t)},c,c.exports,t,i,e,n)}return e[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}return t}()({1:[function(){var t=window.Laya=function(t){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?i.__presubstr.call(this,t):i.__presubstr.call(this,t,e>0?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,i){var e=[];e.length=t;for(var n=0;t>n;n++)e[n]=i;return e},__extend:function(t,e){function n(){i.un(this,"constructor",t)}for(var s in e)if(e.hasOwnProperty(s)){var r=Object.getOwnPropertyDescriptor(e,s),a=r.get,o=r.set;a||o?a&&o?Object.defineProperty(t,s,r):(a&&Object.defineProperty(t,s,a),o&&Object.defineProperty(t,s,o)):t[s]=e[s]}n.prototype=e.prototype,t.prototype=new n,i.un(t.prototype,"__imps",i.__copy({},e.prototype.__imps))},__copy:function(t,i){if(!i)return null;t=t||{};for(var e in i)t[e]=i[e];return t},__package:function(e,n){if(!i.__packages[e]){i.__packages[e]=!0;var s=t,r=e.split(".");if(r.length>1)for(var a=0,o=r.length-1;o>a;a++){var h=s[r[a]];s=h?h:s[r[a]]={}}s[r[r.length-1]]||(s[r[r.length-1]]=n||{})}},__hasOwnProperty:function(t,i){function e(t,i){if(Object.hasOwnProperty.call(i.prototype,t))return!0;var n=i.prototype.__super;return null==n?null:e(t,n)}return i=i||this,Object.hasOwnProperty.call(i,t)||e(t,i.__class)},__typeof:function(t,i){if(!t||!i)return!1;if(i===String)return"string"==typeof t;if(i===Number)return"number"==typeof t;if(i.__interface__)i=i.__interface__;else if("string"!=typeof i)return t instanceof i;return t.__imps&&t.__imps[i]||t.__class==i},__as:function(t,i){return this.__typeof(t,i)?t:null},__int:function(t){return t?parseInt(t):0},"interface":function(e,n){i.__package(e,{});var s=i.__internals,r=s[e]=s[e]||{self:e};if(n){var a=n.split(",");r.extend=[];for(var o=0;o<a.length;o++){var h=a[o];s[h]=s[h]||{self:h},r.extend.push(s[h])}}for(var l=t,c=e.split("."),o=0;o<c.length-1;o++)l=l[c[o]];l[c[c.length-1]]={__interface__:e}},"class":function(e,n,s,r){if(s&&i.__extend(e,s),n)if(i.__package(n,e),i.__classmap[n]=e,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var a=n.split(".");r=r||a[a.length-1],i[r]&&console.log("Warning!,this class["+r+"] already exist:",i[r]),i[r]=e}}else"Main"==n?t.Main=e:(i[n]&&console.log("Error!,this class["+n+"] already exist:",i[n]),i[n]=e);var o=i.un,h=e.prototype;o(h,"hasOwnProperty",i.__hasOwnProperty),o(h,"__class",e),o(h,"__super",s),o(h,"__className",n),o(e,"__super",s),o(e,"__className",n),o(e,"__isclass",!0),o(e,"super",function(t){this.__super.call(t)})},imps:function(t,e){function n(t){var e,r;if((e=i.__internals[t])&&(s[t]=!0,r=e.extend))for(var a=0;a<r.length;a++)n(r[a].self)}if(!e)return null;var s=t.__imps||i.un(t,"__imps",{});for(var r in e)n(r)},superSet:function(t,i,e,n){var s=t.prototype["_$set_"+e];s&&s.call(i,n)},superGet:function(t,i,e){var n=t.prototype["_$get_"+e];return n?n.call(i):null},getset:function(t,e,n,s,r){t?(s&&(e["_$GET_"+n]=s),r&&(e["_$SET_"+n]=r)):(s&&i.un(e,"_$get_"+n,s),r&&i.un(e,"_$set_"+n,r)),s&&r?Object.defineProperty(e,n,{get:s,set:r,enumerable:!1,configurable:!0}):(s&&Object.defineProperty(e,n,{get:s,enumerable:!1,configurable:!0}),r&&Object.defineProperty(e,n,{set:r,enumerable:!1,configurable:!0}))},"static":function(t,i){function e(){var e=i[n],s=i[n+1];Object.defineProperty(t,e,{get:function(){return delete this[e],this[e]=s.call(this)},set:function(t){delete this[e],this[e]=t},enumerable:!0,configurable:!0})}for(var n=0,s=i.length;s>n;n+=2)"length"==i[n]?t.length=i[n+1].call(t):e()},un:function(t,e,n){return n||(n=t[e]),i.__propun.value=n,Object.defineProperty(t,e,i.__propun),n},uns:function(t,e){e.forEach(function(e){i.un(t,e)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document);!function(t,i,e){{var n=(e.un,e.uns,e.static),s=e.class,r=e.getset;e.__newvec}e.interface("laya.ui.IItem"),e.interface("laya.ui.IRender"),e.interface("laya.ui.ISelect"),e.interface("laya.runtime.IMarket"),e.interface("laya.filters.IFilter"),e.interface("laya.html.utils.ILayout"),e.interface("laya.webgl.submit.ISubmit"),e.interface("laya.runtime.ICPlatformClass"),e.interface("laya.resource.ICreateResource"),e.interface("laya.webgl.canvas.save.ISaveData");var a=(function(){return r(1,e,"alertGlobalError",null,function(t){var i=0;Ti.window.onerror=t?function(t,e,n,s,r){i++<5&&r&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+r.stack)}:null}),e.init=function(i,n){for(var s=[],r=2,a=arguments.length;a>r;r++)s.push(arguments[r]);if(!e._isinit){e._isinit=!0,ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=e._arrayBufferSlice),Ti.__init__(),gi.isConchApp||Ui.__init__(),e.systemTimer=new Yi(!1),e.startTimer=new Yi(!1),e.physicsTimer=new Yi(!1),e.updateTimer=new Yi(!1),e.lateTimer=new Yi(!1),e.timer=new Yi(!1),e.loader=new Gn,ne.__init__();for(var o=!1,r=0,h=s.length;h>r;r++)s[r]&&s[r].enable&&(s[r].enable(),"WebGL"==typeof s[r]&&(o=!0));return gi.isConchApp&&(o||laya.webgl.WebGL.enable(),Oi.enableNative()),Ce.__init__(),me.beginCheck(),e._currentStage=e.stage=new ea,e._getUrlPath(),e.render=new gi(0,0),e.stage.size(i,n),t.stage=e.stage,li.__init__(),mn.__init__(),ri.instance.__init__(e.stage,gi.canvas),ka.__init__(),Pi.autoStopMusic=!0,gi.canvas}},e._getUrlPath=function(){var t=Ti.window.location,i=t.pathname;i=":"==i.charAt(2)?i.substring(1):i,Li.rootPath=Li.basePath=Li.getPath("file:"==t.protocol?i:t.protocol+"//"+t.host+t.pathname)},e._arrayBufferSlice=function(t,i){var e=this,n=new Uint8Array(e,t,i-t),s=new Uint8Array(n.length);return s.set(n),s.buffer},e._runScript=function(t){return Ti.window[e._evcode](t)},e.enableDebugPanel=function(t){if(void 0===t&&(t="libs/laya.debugtool.js"),e.DebugPanel)e.DebugPanel.enable();else{var i=Ti.createElement("script");i.onload=function(){e.DebugPanel.enable()},i.src=t,Ti.document.body.appendChild(i)}},e.stage=null,e.systemTimer=null,e.startTimer=null,e.physicsTimer=null,e.updateTimer=null,e.lateTimer=null,e.timer=null,e.loader=null,e.version="2.0.0beta5",e.render=null,e._currentStage=null,e._isinit=!1,e.isWXOpenDataContext=!1,e.isWXPosMsg=!1,n(e,["conchMarket",function(){return this.conchMarket=t.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=t.PlatformClass},"_evcode",function(){return this._evcode="eval"}]),e}(),function(){function t(){}return s(t,"laya.renders.LayaGLQuickRunner"),t.__init__=function(){t.map[515]=t.alpha_transform_drawLayaGL,t.map[513]=t.alpha_drawLayaGL,t.map[514]=t.transform_drawLayaGL,t.map[8194]=t.transform_drawNodes,t.map[259]=t.alpha_transform_drawTexture,t.map[257]=t.alpha_drawTexture,t.map[258]=t.transform_drawTexture,t.map[8704]=t.drawLayaGL_drawNodes},t.transform_drawTexture=function(i,e,n,s){var r=(i._style,i.texture);e.saveTransform(t.curMat),e.transformByMatrix(i.transform,n,s),e.drawTexture(r,-i.pivotX,-i.pivotY,i._width||r.width,i._height||r.height),e.restoreTransform(t.curMat)},t.alpha_drawTexture=function(t,i,e,n){var s=t._style,r=0/0,a=t.texture;if((r=s.alpha)>.01||t._needRepaint()){var o=i.globalAlpha;i.globalAlpha*=r,i.drawTexture(a,e-s.pivotX+a.offsetX,n-s.pivotY+a.offsetY,t._width||a.width,t._height||a.height),i.globalAlpha=o}},t.alpha_transform_drawTexture=function(i,e,n,s){var r=i._style,a=0/0,o=i.texture;if((a=r.alpha)>.01||i._needRepaint()){var h=e.globalAlpha;e.globalAlpha*=a,e.saveTransform(t.curMat),e.transformByMatrix(i.transform,n,s),e.drawTexture(o,-r.pivotX+o.offsetX,-r.pivotY+o.offsetY,i._width||o.width,i._height||o.height),e.restoreTransform(t.curMat),e.globalAlpha=h}},t.alpha_transform_drawLayaGL=function(i,e,n,s){var r=i._style,a=0/0;if((a=r.alpha)>.01||i._needRepaint()){var o=e.globalAlpha;e.globalAlpha*=a,e.saveTransform(t.curMat),e.transformByMatrix(i.transform,n,s),i._graphics&&i._graphics._render(i,e,-r.pivotX,-r.pivotY),e.restoreTransform(t.curMat),e.globalAlpha=o}},t.alpha_drawLayaGL=function(t,i,e,n){var s=t._style,r=0/0;if((r=s.alpha)>.01||t._needRepaint()){var a=i.globalAlpha;i.globalAlpha*=r,t._graphics&&t._graphics._render(t,i,e-s.pivotX,n-s.pivotY),i.globalAlpha=a}},t.transform_drawLayaGL=function(i,e,n,s){var r=i._style;e.saveTransform(t.curMat),e.transformByMatrix(i.transform,n,s),i._graphics&&i._graphics._render(i,e,-r.pivotX,-r.pivotY),e.restoreTransform(t.curMat)},t.transform_drawNodes=function(i,e,n,s){var r=i._style;e.saveTransform(t.curMat),e.transformByMatrix(i.transform,n,s),n=-r.pivotX,s=-r.pivotY;var a,o=i._children,h=o.length;if(r.viewport){var l=r.viewport,c=l.x,u=l.y,d=l.right,_=l.bottom,p=0/0,f=0/0;for(m=0;h>m;++m)(a=o[m])._visible&&(p=a._x)<d&&p+a.width>c&&(f=a._y)<_&&f+a.height>u&&a.render(e,n,s)}else for(var m=0;h>m;++m)(a=o[m])._visible&&a.render(e,n,s);e.restoreTransform(t.curMat)},t.drawLayaGL_drawNodes=function(t,i,e,n){var s=t._style;e-=s.pivotX,n-=s.pivotY,t._graphics&&t._graphics._render(t,i,e,n);var r,a=t._children,o=a.length;if(s.viewport){var h=s.viewport,l=h.x,c=h.y,u=h.right,d=h.bottom,_=0/0,p=0/0;for(f=0;o>f;++f)(r=a[f])._visible&&(_=r._x)<u&&_+r.width>l&&(p=r._y)<d&&p+r.height>c&&r.render(i,e,n)}else for(var f=0;o>f;++f)(r=a[f])._visible&&r.render(i,e,n)},t.map={},n(t,["curMat",function(){return this.curMat=new $e}]),t}()),o=function(){function t(i){if(this.arrColor=[],null==i)return this.strColor="#00000000",this.numColor=0,this.arrColor=[0,0,0,0],void 0;var e=0,n=0,s=0;if("string"==typeof i)if(i.indexOf("rgba(")>=0||i.indexOf("rgb(")>=0){var r=i,a=0,o=0;for(a=r.indexOf("("),o=r.indexOf(")"),r=r.substring(a+1,o),this.arrColor=r.split(","),n=this.arrColor.length,e=0;n>e;e++)this.arrColor[e]=parseFloat(this.arrColor[e]),3>e&&(this.arrColor[e]=Math.round(this.arrColor[e]));s=4==this.arrColor.length?256*(256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2])+Math.round(255*this.arrColor[3]):256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2],this.strColor=i}else{if(this.strColor=i,"#"===i.charAt(0)&&(i=i.substr(1)),n=i.length,3===n||4===n){var h="";for(e=0;n>e;e++)h+=i[e]+i[e];i=h}s=parseInt(i,16)}else s=i,this.strColor=en.toHexColor(s);this.strColor.indexOf("rgba")>=0||9===this.strColor.length?(this.arrColor=[((4278190080&s)>>>24)/255,((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255],this.numColor=(4278190080&s)>>>24|(16711680&s)>>8|(65280&s)<<8|(255&s)<<24):(this.arrColor=[((16711680&s)>>16)/255,((65280&s)>>8)/255,(255&s)/255,1],this.numColor=4278190080|(16711680&s)>>16|65280&s|(255&s)<<16),this.arrColor.__id=++t._COLODID}return s(t,"laya.utils.ColorUtils"),t._initDefault=function(){t._DEFAULT={};for(var i in t._COLOR_MAP)t._SAVE[i]=t._DEFAULT[i]=new t(t._COLOR_MAP[i]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var i in t._DEFAULT)t._SAVE[i]=t._DEFAULT[i]},t.create=function(i){var e=i+"",n=t._SAVE[e];return null!=n?n:(t._SAVE_SIZE<1e3&&t._initSaveMap(),t._SAVE[e]=new t(i))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={purple:"#800080",orange:"#ffa500",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#808080"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),h=function(){function t(){}s(t,"laya.webgl.canvas.save.SaveBase");var i=t.prototype;return e.imps(i,{"laya.webgl.canvas.save.ISaveData":!0}),i.isSaveMark=function(){return!1},i.restore=function(i){this._dataObj[this._valueName]=this._value,t.POOL[t.POOL._length++]=this,this._newSubmit&&(i._curSubmit=oi.RENDERBASE)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var i=t._namemap={};return i[1]="ALPHA",i[2]="fillStyle",i[8]="font",i[256]="lineWidth",i[512]="strokeStyle",i[8192]="_mergeID",i[1024]=i[2048]=i[4096]=[],i[16384]="textBaseline",i[32768]="textAlign",i[65536]="_nBlendType",i[1048576]="shader",i[2097152]="filters",i[8388608]="_colorFiler",i},t.save=function(i,e,n,s){if((i._saveMark._saveuse&e)!==e){i._saveMark._saveuse|=e;var r=t.POOL,a=r._length>0?r[--r._length]:new t;a._value=n[a._valueName=t._namemap[e]],a._dataObj=n,a._newSubmit=s;var o=i._save;o[o._length++]=a}},t.POOL=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),l=function(){function t(){this._events=null}var i;s(t,"laya.events.EventDispatcher");var e=t.prototype;return e.hasListener=function(t){var i=this._events&&this._events[t];return!!i},e.event=function(t,i){if(!this._events||!this._events[t])return!1;var e=this._events[t];if(e.run)e.once&&delete this._events[t],null!=i?e.runWith(i):e.run();else{for(var n=0,s=e.length;s>n;n++){var r=e[n];r&&(null!=i?r.runWith(i):r.run()),(!r||r.once)&&(e.splice(n,1),n--,s--)}0===e.length&&this._events&&delete this._events[t]}return!0},e.on=function(t,i,e,n){return this._createListener(t,i,e,n,!1)},e.once=function(t,i,e,n){return this._createListener(t,i,e,n,!0)},e._createListener=function(t,e,n,s,r,a){void 0===a&&(a=!0),a&&this.off(t,e,n,r);var o=i.create(e||this,n,s,r);this._events||(this._events={});var h=this._events;return h[t]?h[t].run?h[t]=[h[t],o]:h[t].push(o):h[t]=o,this},e.off=function(t,i,e,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var s=this._events[t];if(null!=s)if(s.run)i&&s.caller!==i||null!=e&&s.method!==e||n&&!s.once||(delete this._events[t],s.recover());else{for(var r=0,a=0,o=s.length;o>a;a++){var h=s[a];h?!h||i&&h.caller!==i||null!=e&&h.method!==e||n&&!h.once||(r++,s[a]=null,h.recover()):r++}r===o&&delete this._events[t]}return this},e.offAll=function(t){var i=this._events;if(!i)return this;if(t)this._recoverHandlers(i[t]),delete i[t];else{for(var e in i)this._recoverHandlers(i[e]);this._events=null}return this},e.offAllCaller=function(t){if(t&&this._events)for(var i in this._events)this.off(i,t,null);return this},e._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var i=t.length-1;i>-1;i--)t[i]&&(t[i].recover(),t[i]=null)},e.isMouseEvent=function(i){return t.MOUSE_EVENTS[i]||!1},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),i=function(t){function i(t,e,n,s){i.__super.call(this,t,e,n,s)}s(i,"",t);var e=i.prototype;return e.recover=function(){this._id>0&&(this._id=0,i._pool.push(this.clear()))},i.create=function(t,e,n,s){return void 0===s&&(s=!0),i._pool.length?i._pool.pop().setTo(t,e,n,s):new i(t,e,n,s)},i._pool=[],i}(c)},t}(),c=function(){function t(t,i,e,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,i,e,n)}s(t,"laya.utils.Handler");var i=t.prototype;return i.setTo=function(i,e,n,s){return this._id=t._gid++,this.caller=i,this.method=e,this.args=n,this.once=s,this},i.run=function(){if(null==this.method)return null;var t=this._id,i=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),i},i.runWith=function(t){if(null==this.method)return null;var i=this._id;if(null==t)var e=this.method.apply(this.caller,this.args);else e=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===i&&this.once&&this.recover(),e},i.clear=function(){return this.caller=null,this.method=null,this.args=null,this},i.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(i,e,n,s){return void 0===s&&(s=!0),t._pool.length?t._pool.pop().setTo(i,e,n,s):new t(i,e,n,s)},t._pool=[],t._gid=1,t}(),u=function(){function t(){this._id=en.getGID(),this._resetComp()}s(t,"laya.components.Component");var i=t.prototype;return e.imps(i,{"laya.resource.ISingletonElement":!0,"laya.resource.IDestroy":!0}),i._resetComp=function(){this._indexInList=-1,this._enabled=!0,this._active=!1,this._awaked=!1,this.owner=null},i._getIndexInList=function(){return this._indexInList},i._setIndexInList=function(t){this._indexInList=t},i._onAdded=function(){},i._onAwake=function(){},i._onEnable=function(){},i._onDisable=function(){},i._onEnableInScene=function(){},i._onDisableInScene=function(){},i._onDestroy=function(){},i.onReset=function(){},i._parse=function(){},i._cloneTo=function(){},i._setActive=function(t){this._active!==t&&this.owner.activeInHierarchy&&(this._active=t,t?(this._awaked||(this._awaked=!0,this._onAwake()),this._enabled&&this._onEnable()):this._enabled&&this._onDisable())},i._setActiveInScene=function(t){t?this._onEnableInScene():this._onDisableInScene()},i.destroy=function(){this.owner&&this.owner._destroyComponent(this)},i._destroy=function(){this._active&&this._setActive(!1),this.owner._scene&&this._setActiveInScene(!1),this._onDestroy(),this._destroyed=!0,this.onReset!==laya.components.Component.prototype.onReset?(this.onReset(),this._resetComp(),ee.recoverByClass(this)):this._resetComp()},r(0,i,"id",function(){return this._id}),r(0,i,"enabled",function(){return this._enabled},function(t){this._enabled=t,this.owner&&(t?this.owner.activeInHierarchy&&this._onEnable():this._active&&this._onDisable())}),r(0,i,"isSingleton",function(){return!0}),r(0,i,"destroyed",function(){return this._destroyed}),t}(),d=function(){function t(t){this.delivery_code="",this.delivery_name="",this.start_weight=0,this.post_weight=0,this.first_volume=0,this.post_volume=0,this.factor=0,this.limit_weight=0,this.limit_length=0,this.limit_width=0,this.limit_height=0,this.deliverynet_code="",this.deliverynet_name="",this._firstweight_price=0,this.addedweight_price=0,this.firstvol_price=0,this.addedvol_price=0,this.shitf1_dateList=[],this.shitf1_time=null,this.shitf2_dateList=[],this.shitf2_time=null,this.shitf3_dateList=[],this.shitf3_time=null,this.belongManuCode=null;for(var i in t)this[i]=t[i];null!=t.shift1Date&&""!=t.shift1Date&&(this.shitf1_dateList=t.shift1Date.split(",")),null!=t.shift1Time&&""!=t.shift1Time&&(this.shitf1_time=t.shift1Time),null!=t.shift2Date&&""!=t.shift2Date&&(this.shitf2_dateList=t.shift2Date.split(",")),null!=t.shift2Time&&""!=t.shift2Time&&(this.shitf2_time=t.shift2Time),null!=t.shift3Date&&""!=t.shift3Date&&(this.shitf3_dateList=t.shift3Date.split(",")),null!=t.shift3Time&&""!=t.shift3Time&&(this.shitf3_time=t.shift3Time)}s(t,"model.orderModel.DeliveryTypeVo");var i=t.prototype;return i.canbeslected=function(t){if("送货上门"!=this.delivery_name)return!0;var i=t.getDay().toString();"0"==i&&(i="7");var e=[];if(this.shitf1_dateList.length>0&&this.shitf1_dateList.indexOf(i)>=0&&null!=this.shitf1_time&&e.push(this.shitf1_time),this.shitf2_dateList.length>0&&this.shitf2_dateList.indexOf(i)>=0&&null!=this.shitf2_time&&e.push(this.shitf2_time),this.shitf3_dateList.length>0&&this.shitf3_dateList.indexOf(i)>=0&&null!=this.shitf3_time&&e.push(this.shitf3_time),0==e.length)return!1;for(var n=parseInt(e[0].split(":")[0]),s=parseInt(e[0].split(":")[1]),r=1;r<e.length;r++){var a=parseInt(e[r].split(":")[0]);a>n&&(n=a,s=parseInt(e[r].split(":")[1]))}var o=n>9?n.toString():"0"+n.toString(),h=s>9?s.toString():"0"+s.toString(),l=T.formatFullDateTime(t,!1).replace("-","/")+" "+o+":"+h+":00",c=new Date(Date.parse(l));return(c.getTime()-t.getTime())/1e3>7200?!0:!1},r(0,i,"deliveryDesc",function(){return this.delivery_name+"，"+this.deliverynet_name+"，首重:"+this.start_weight+"kg,续重"+this.post_weight+"kg，首重价格:"+this.deliveryPrice+"元/kg，续重价格:"+this.addedweight_price+"元/kg。"}),r(0,i,"deliveryPrice",function(){var t=k.instance.getTotalWeightByManuCode(this.belongManuCode),i=this._firstweight_price;return t>this.start_weight&&(i+=Math.ceil((t-this.start_weight)/this.post_weight)*this.addedweight_price),"送货上门"!=this.delivery_name?i:i+k.instance.getDeliveryFeeByManuCode(this.belongManuCode)}),r(0,i,"firstweight_price",null,function(t){this._firstweight_price=t}),t}(),_=function(){function t(){this.fcId=null,this.fcName=null,this.amount=0/0,this.startTime=null,this.endTime=null,this.selected=!1}return s(t,"model.users.FactoryBillData"),t}(),p=function(){function t(t,i){if(this.picType=0,this.directName="",this.directId="",this.fid="",this.picWidth=0,this.picHeight=0,this.picPhysicWidth=0,this.picPhysicHeight=0,this.fsize=0,this.colorspace="",this.picClass="",this.dpi=0/0,this.isProcessing=!1,this.isCdr=!1,this.roadNum=0,this.roadLength=0,this.yixingFid="",this.backFid="",this.partWhiteFid="",this.yixingPicClass="",this.backPicClass="",this.partWhitePicClass="",this.relatedRoadNum=0,this.relatedRoadLength=0,this.relatedPicWidth=0,this.connectnum=0,this.area=0,this.leftDeleteDays=0,this.tiaofuwidth=100,this.iswhitebg=!1,this.unwhiteratio=1,this.partWhiteUnWhiteRatio=1,this.aiPicDeadline=null,this.hasTifAi=!1,this.relatedTimes=0,this.picType=i,0==this.picType)this.directName=t.dirName,this.directId=t.dirId;else if(null!=t){this.fid=t.fileId;try{var e=JSON.parse(t.properties);if(this.picWidth=Number(e.width),this.picHeight=Number(e.height),this.colorspace=e.colorspace,this.dpi=T.oneCutNineAdd(e.dpi),this.picPhysicWidth=T.oneCutNineAdd(this.picWidth/this.dpi*2.54),this.picPhysicHeight=T.oneCutNineAdd(this.picHeight/this.dpi*2.54),this.fsize=t.fsize,this.hasTifAi=2==t.approach,this.yixingFid=null==t.maskId?"0":t.maskId,this.backFid=null==t.backId?"0":t.backId,this.partWhiteFid=null==t.partWhiteId?"0":t.partWhiteId,this.aiPicDeadline=t.preTime,null!=t.usedAt){var n=new Date(Date.parse(T.convertDateStr(t.usedAt))),s=Math.ceil(((new Date).getTime()-n.getTime()+288e5)/864e5);this.leftDeleteDays=30-s,this.leftDeleteDays<0&&(this.leftDeleteDays=0)}if(e.hasOwnProperty("whitebg")&&e.hasOwnProperty("vsize")&&e.hasOwnProperty("hsize")&&(this.iswhitebg=e.whitebg,this.iswhitebg)){var r=Math.max(this.picWidth,this.picHeight);this.tiaofuwidth=this.picHeight>this.picWidth?e.hsize/this.picWidth*r/1e3*this.picPhysicWidth:e.vsize/this.picHeight*r/1e3*this.picPhysicHeight}if(e.hasOwnProperty("roadnum")){this.roadNum=e.roadnum;var r=Math.max(this.picWidth,this.picHeight);this.roadLength=Math.floor(e.totallen*r/1e3)}if(e.hasOwnProperty("whiteratio")&&""!=e.whiteratio&&(this.unwhiteratio=1-parseFloat(e.whiteratio)),e.hasOwnProperty("connectnum")){this.connectnum=e.connectnum;var r=Math.max(this.picWidth,this.picHeight);this.area=Math.floor(e.area*r/1e3*r/1e3)/(this.picWidth*this.picHeight)*this.picPhysicWidth*this.picPhysicHeight/1e4}null!=e&&1==e.flag&&(this.picWidth=Math.round(Number(e.width)*this.dpi/2.54),this.picHeight=Math.round(Number(e.height)*this.dpi/2.54),this.picPhysicWidth=parseFloat(parseFloat(e.width).toFixed(2)),this.picPhysicHeight=parseFloat(parseFloat(e.height).toFixed(2)),this.roadLength=parseInt(e.totallen),this.area=parseFloat(e.area)/1e4,this.tiaofuwidth=Math.min(e.vsize,e.hsize),this.isCdr=!0)}catch(a){this.isProcessing=!0}this.picClass=t.fileType,this.isCdr&&(this.picClass="zip"),this.directName=null!=e&&1==e.flag?t.name+".cdr":t.name}}s(t,"model.picmanagerModel.PicInfoVo");var i=t.prototype;return i.initYixingData=function(){if("0"!=this.yixingFid){var t=H.instance.getQiegeData(this.yixingFid);this.relatedRoadNum=t[0],this.relatedRoadLength=t[1],this.relatedPicWidth=t[2],this.yixingPicClass=t[3]}if("0"!=this.backFid){var t=H.instance.getQiegeData(this.backFid);this.backPicClass=t[3]}if("0"!=this.partWhiteFid){var t=H.instance.getQiegeData(this.partWhiteFid);this.partWhitePicClass=t[3],this.partWhiteUnWhiteRatio=t[4]}},r(0,i,"dpath",function(){return this.directId}),r(0,i,"tailFix",function(){return"PNG"==this.picClass.toUpperCase()?".png":"TIF"!=this.picClass.toUpperCase()&&"TIFF"!=this.picClass.toUpperCase()||!this.hasTifAi?".jpg":".png"}),t}(),f=function(){function t(t){if(this.receiverName="",this.phone="",this.zoneid="",this.searchZoneid="",this.address="",this.id=null,this.preAddName=null,this.status=0,this.customerId="0",this.defaultDeliveryType="",this.customerName=null,this.defaultPayType=null,this.receiverName=t.cnee,this.phone=t.mobileNumber,this.address=t.addr,this.id=t.id,this.preAddName=t.regionName,this.status=t.status,null!=t.region){var i=t.region.split("|");this.zoneid=i[0],this.searchZoneid=i[1]}this.defaultDeliveryType=t.defaultDelivery}s(t,"model.users.AddressVo");var i=t.prototype;return r(0,i,"proCityArea",function(){return this.preAddName+" "+this.address}),r(0,i,"addressDetailNoState",function(){return this.receiverName+"-"+this.phone+" "+this.preAddName+this.address}),r(0,i,"addressDetail",function(){return this.receiverName+"-"+this.phone+" "+this.preAddName+this.address}),t.ADDRESS_DELETE="delete",t.ADDRESS_UPDATE="update",t.ADDRESS_INSERT="insert",t.ADDRESS_LIST="list",t}(),m=function(){function t(){}return s(t,"model.Constast"),t.ACCOUNT_CREATER=1,t.ACCOUNT_EMPLOYEE=0,t.PRIVILEGE_PAYORDER_BY_SCAN=1,t.PRIVILEGE_PAYORDER_BY_AMOUNT=2,t.PRIVILEGE_HIDE_PRICE=3,t.PRIVILEGE_CHECK_ORDERS=4,t.PRIVILEGE_CHECK_TRANSACTION=5,t.ORDER_TIME_PREFER_URGENT=1,t.ORDER_TIME_PREFER_EARLY=2,t.STORAGE_DAY_PRICE=.5,t.CMYK_GREEN="#003DC6",t.CMYK_BLACK="#0",t.CMYK_WHITE="#FFFFFF",t.FRESH_DISCOUNT=24,t.ADMIN_PREVILIGE="admin:org:manage",t.DISPLAY_ORDER_PRICE="order:price:display",t.PAY_ORDER_ONLINE="order:submit",t.PAY_ORDER_BY_MONEY="order:submit-with-balances",n(t,["TYPE_NAME",function(){return this.TYPE_NAME={0:"",1:"充值",2:"账户余额支付订单",3:"退款",5:"取消异常订单",6:"直接支付订单",7:"撤单退款",8:"活动充值",10:"活动余额支付订单",11:"11扫码支付扩容",12:"余额支付扩容",13:"活动余额支付扩容",17:"撤单退款",77:"活动充值退款",100:"代客充值",101:"代充余额支付订单"}},"STORAGE_PRICE",function(){return this.STORAGE_PRICE={50:300,60:360,70:420,80:480,90:540,100:600}},"PREVILIGE_LIST",function(){return this.PREVILIGE_LIST=["order:submit","order:submit-with-balances","order:price:display","order:list:self","order:list:org","asset:log:list"]},"PAY_TYPE_NAME",function(){return this.PAY_TYPE_NAME=["预充","月结","现金"]}]),t}(),g=function(){function t(){this.version="",this.curRandomStr=null,this.userId=0,this.userSession=null,this.userAccount=null,this.token="",this.founderPhone=null,this.userName="",this.company=null,this.companyShort=null,this.isVipCompany=!1,this.dirId=null,this.addressList=[],this.defaultAddId="",this.money=0/0,this.actMoney=0/0,this.frezeMoney=0/0,this.factoryMoney=0/0,this.isLogin=!1,this.defaultAddrid="0",this.loginTime=0,this.privilege=null,this.hashowact=!1,this.hasBuySorage=60,this.storageBuyDate=0,this.storageExpiredDate=0,this.orderAmoutRatio=0,this.ignoreDelivery=!1,this.shrinkState=0,this.inOrdering=!1,this.step="0",this.firstOrder="0",this.configVersion=null,this.clientCode=null,this.webCode=null}s(t,"model.Userdata");var i=t.prototype;return i.resetData=function(){this.addressList=[],this.isLogin=!1,this.money=0,this.actMoney=0,this.frezeMoney=0,this.accountType=0,this.company=null,this.companyShort=null,this.token="",this.inOrdering=!1,this.privilege=[]},i.initMyAddress=function(t){this.addressList=[];for(var i=0;i<t.length;i++)this.addressList.push(new f(t[i])),this.addressList[i].customerId=0},i.canAddNewAddress=function(){return!0},i.addNewAddress=function(t){null==this.addressList&&(this.addressList=[]),this.addressList.push(new f(t))},i.updateAddress=function(t){for(var i=0;i<this.addressList.length;i++)if(this.addressList[i].id==t.id){this.addressList[i]=new f(t);break}},i.deleteAddr=function(t){for(var i=0;i<this.addressList.length;i++)if(this.addressList[i].id==t){this.addressList.splice(i,1);break}},i.getDefaultAddress=function(){var t=this.passedAddress;if(null==t||0==t.length)return null;for(var i=0;i<t.length;i++)if(t[i].id==this.defaultAddId)return t[i];return t[0]},i.isHidePrice=function(){return this.privilege.indexOf("admin:org:manage")>=0?!1:this.privilege.indexOf("order:price:display")>=0?!1:!0},i.storageNoDel=function(){return this.hasBuySorage>0&&this.storageBuyDate+31536e6>(new Date).getTime()},i.getLastMonthRatio=function(t,i){W.instance.Request(W.httpUrl+"group/get-delivery-fee?",this,function(e){var n=JSON.parse(e);"0"==n.code&&(model.Userdata.instance.orderAmoutRatio=0!=parseFloat(n.zone_last_month)?parseFloat(n.group_last_month)/parseFloat(n.zone_last_month)*100:0,t&&i&&i.call(t))},null,null)},i.checkJumpUrl=function(){var t=Ti.window.location.href;t.indexOf("cmyk")<0||(t.indexOf("super")<0&&model.Userdata.instance.isVipCompany&&(E.showAlert("超级企业账号请前往www.cmyk.vip/super下单"),Ti.window.open("about:self","_self").location.href="https://cmyk.vip/super"),t.indexOf("super")>=0&&!model.Userdata.instance.isVipCompany&&(E.showAlert("普通企业账号请前往www.cmyk.vip下单"),Ti.window.open("about:self","_self").location.href="https://cmyk.vip/"))},r(0,i,"accountType",function(){return this.privilege.indexOf("admin:org:manage")>=0?1:0},function(){}),r(0,i,"passedAddress",function(){return(null==this.addressList||0==this.addressList.length)&&(this.addressList=[]),this.addressList}),r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),v=function(){function t(t){this.prodCode="",this.prodName="",this.minLength=0,this.maxLength=0,this.minWidth=0,this.maxWidth=0,this.materialCode="",this.materialName="",this.materialColor="",this.materialBrand="",this.materialSupplier="",this.measureUnit="",this.unitWeight=0,this.manufacturerCode="",this.manufacturerName="",this.unitPrice=0,this.taxFee=0,this.isAssembledProd=!1,this.manufacturerId=0,this.prodNumber=0,this.prodImage=null,this.materialWidth=0,this.materialLength=0,this.materialThickness=0,this.priceLvl1=-1,this.priceLvl2=0,this.priceLvl3=0,this.priceLvl4=0,this.priceLvl5=0,this.discount1=1,this.discount2=1,this.discount3=1,this.discount4=1,this.discount5=1,this.uniqueCode="",this.isClientProd=!1,this.procFeeRatio=1,this.measure_method=null,this.districtPriceRatio=1,this.customerPriceRatio=1,this.isFixedCustomerRatio=!1,this.procTreeList=null,this.hasDoublePrint=1,this.merchanList=[],this.priority=0;for(var i in t)this[i]=t[i]}s(t,"model.orderModel.ProductVo");var i=t.prototype;return i.cloneData=function(i){for(var e=new t(this),n=[],s=0;s<this.procTreeList.length;s++)n.push(this.procTreeList[s].cloneData(this,i));return e.procTreeList=n,e},i.getTechDes=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=0),null==this.procTreeList)return"";for(var n="",s=0;s<this.procTreeList.length;s++)if(this.procTreeList[s].selected){n+=this.procTreeList[s].procName+"-";var r=this.getTechStr(this.procTreeList[s].nextMatList,t,i,e);""!=r&&(n+=r.substr(0,r.length-1)),n+="-"}return n.length>0?n.substring(0,n.length-1):""},i.getAllSelectedTech=function(){for(var t=[],i=0;i<this.procTreeList.length;i++)if(this.procTreeList[i].selected){t.push(this.procTreeList[i]);var e=this.getChildSelectedTech(this.procTreeList[i].nextMatList);t=t.concat(e)}return t},i.getChildSelectedTech=function(t){for(var i=[],e=0;e<t.length;e++)t[e].selected&&(i.push(t[e]),i=i.concat(this.getChildSelectedTech(t[e].nextMatList)));return i},i.getTechStr=function(t,i,e,n){for(var s=T.getBorderDistance(this.getAllSelectedTech()),r=0;r<t.length;r++)if(t[r].selected){if(t[r].attachmentList.indexOf("SPpj")<0||i||t[r].attachmentList.indexOf("SPpj")>=0&&e+s>this.materialWidth&&n+s>this.materialWidth){var a="";if(null!=t[r].selectAttachVoList)for(var o=0;o<t[r].selectAttachVoList.length;o++)a+=t[r].selectAttachVoList[o].accessory_name+",";
return""!=a?t[r].procName+"("+a.substr(0,a.length-1)+")-"+this.getTechStr(t[r].nextMatList,i,e,n):t[r].procName+T.getAttachDesc(t[r])+"-"+this.getTechStr(t[r].nextMatList,i,e,n)}return this.getTechStr(t[r].nextMatList,i,e,n)}return""},i.getTotalPrice=function(t,i,e,n,s){void 0===e&&(e=!1),void 0===s&&(s=!1);for(var r=T.getProcessPrice(t,i,this.measureUnit,this.unitPrice,0),a=[],o=this.getAllSelectedTech(),h=0;h<this.procTreeList.length;h++)if(this.procTreeList[h].selected){var l=[];l.push(this.procTreeList[h]),a=a.concat(this.getTechPrice(l,t,i,e,n,o))}var c=this.getDiscount(k.instance.getProductTotalPrice(this.manufacturerCode,this.prodCode));for(s&&(c=1),h=0;h<a.length;h++)r+=a[h].processPrice,""!=a[h].unitGross&&null!=a[h].unitGross&&(r+=this.isFixedCustomerRatio?a[h].unitGross*this.customerPriceRatio:a[h].unitGross*c*this.districtPriceRatio*this.customerPriceRatio);for(var u=[],h=0;h<this.procTreeList.length;h++)if(this.procTreeList[h].selected){var l=[];l.push(this.procTreeList[h]),u=u.concat(this.getTechnoDiscountPrice(l,t,i,e,n,o))}for(h=0;h<u.length;h++)r+=u[h];return r*=1+this.taxFee,.15>r&&(r=.15),parseFloat(r.toFixed(2))},i.getDiscountProcessPrice=function(t,i,e,n){void 0===e&&(e=!1);for(var s=0,r=[],a=this.getAllSelectedTech(),o=0;o<this.procTreeList.length;o++)if(this.procTreeList[o].selected){var h=[];h.push(this.procTreeList[o]),r=r.concat(this.getTechPrice(h,t,i,e,n,a))}var l=this.getDiscount(k.instance.getProductTotalPrice(this.manufacturerCode,this.prodCode));for(this.isFixedCustomerRatio&&(l=1),o=0;o<r.length;o++)""!=r[o].unitGross&&null!=r[o].unitGross&&(s+=r[o].unitGross*l);return s=this.isFixedCustomerRatio?s*(1+this.taxFee)*this.customerPriceRatio:s*(1+this.taxFee)*this.districtPriceRatio*this.customerPriceRatio,parseFloat(s.toFixed(2))},i.getProcessPrice=function(t,i,e){for(var n=0,s=[],r=this.getAllSelectedTech(),a=0;a<this.procTreeList.length;a++)if(this.procTreeList[a].selected){var o=[];o.push(this.procTreeList[a]),s=s.concat(this.getNeedDiscountTechPrice(o,t,i,!1,e,r))}for(a=0;a<s.length;a++)""!=s[a].unitGross&&null!=s[a].unitGross&&(n+=s[a].unitGross);return n},i.getDiscount=function(t){1>t&&(t=1);for(var i=1;5>i;i++)if(t>=this["priceLvl"+i]&&t<this["priceLvl"+(i+1)]){var e=this["discount"+i]+(t-this["priceLvl"+i])*(this["discount"+(i+1)]-this["discount"+i])/(this["priceLvl"+(i+1)]-this["priceLvl"+i]);return e}return t<this.priceLvl1?this.discount1:this.discount5},i.getTechPrice=function(t,i,e,n,s,r){var a=[];if(null==t)return[];for(var o=T.getBorderDistance(this.getAllSelectedTech()),h=0;h<t.length;h++)if(t[h].selected){if(t[h].attachmentList.indexOf("SPpj")<0||t[h].attachmentList.indexOf("SPpj")>=0&&100*i+o>this.materialWidth&&100*e+o>this.materialWidth){var l,c=0,u=0;null!=t[h].selectAttachVoList&&t[h].selectAttachVoList.length>0&&(l=t[h].selectAttachVoList[0]);var d=k.instance.getProcePriceUnit(this.manufacturerCode,t[h].procCode,this.materialCode,l,r),_=k.instance.getProdProceessDate(this.manufacturerCode,t[h].procCode);null!=d&&4==d.length&&null!=_&&_.has_discount&&(t[h].measure_unit=d[0],t[h].baseprice=d[1],t[h].preProc_Price=d[2],"Penyin"==k.instance.orderType?K.yiXingCutProcess(t[h].procCode)?(c=T.getYixingPrice(s.picinfo,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getYixingPrice(s.picinfo,0,d[3],i,e))):"SPTE10160"==t[h].procCode?(c=T.getAvgCutPrice(s,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getAvgCutPrice(s,0,d[3],i,e))):t[h].attachmentList.indexOf("SPpymj")>=0?(c=K.whitePartProcess(t[h].procCode)?T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.partWhiteUnWhiteRatio,i,e):T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.unwhiteratio,i,e),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):(c=T.getProcessPrice(i,e,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):c=T.getCarvingPrice(s.picinfo.area,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice)),a.push({processPrice:c*this.procFeeRatio,unitGross:u*this.procFeeRatio})}a=a.concat(this.getTechPrice(t[h].nextMatList,i,e,n,s,r))}return a},i.getTechnoDiscountPrice=function(t,i,e,n,s,r){var a=[];if(null==t)return[];for(var o=T.getBorderDistance(this.getAllSelectedTech()),h=0;h<t.length;h++)if(t[h].selected){if(t[h].attachmentList.indexOf("SPpj")<0||t[h].attachmentList.indexOf("SPpj")>=0&&100*i+o>this.materialWidth&&100*e+o>this.materialWidth){var l,c=0;null!=t[h].selectAttachVoList&&t[h].selectAttachVoList.length>0&&(l=t[h].selectAttachVoList[0]);var u=k.instance.getProcePriceUnit(this.manufacturerCode,t[h].procCode,this.materialCode,l,r),d=k.instance.getProdProceessDate(this.manufacturerCode,t[h].procCode);null!=u&&4==u.length&&(t[h].measure_unit=u[0],t[h].baseprice=u[1],t[h].preProc_Price=u[2],"Penyin"!=k.instance.orderType||null==d||d.has_discount?"Zipai"==k.instance.orderType&&(c=T.getCarvingPrice(s.picinfo.area,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice)):K.yiXingCutProcess(t[h].procCode)?(c=T.getYixingPrice(s.picinfo,t[h].baseprice,t[h].preProc_Price,i,e),null!=u[3]&&""!=u[3]&&(c+=T.getYixingPrice(s.picinfo,0,u[3],i,e))):"SPTE10160"==t[h].procCode?(c=T.getAvgCutPrice(s,t[h].baseprice,t[h].preProc_Price,i,e),null!=u[3]&&""!=u[3]&&(c+=T.getAvgCutPrice(s,0,u[3],i,e))):t[h].attachmentList.indexOf("SPpymj")>=0?(c=K.whitePartProcess(t[h].procCode)?T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.partWhiteUnWhiteRatio,i,e):T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.unwhiteratio,i,e),null!=u[3]&&""!=u[3]&&(c+=T.getProcessPrice(i,e,t[h].measure_unit,u[3],0))):(c=T.getProcessPrice(i,e,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice),null!=u[3]&&""!=u[3]&&(c+=T.getProcessPrice(i,e,t[h].measure_unit,u[3],0))),c*=this.procFeeRatio,null!=t[h].selectAttachVoList&&t[h].selectAttachVoList.length>0&&!t[h].selectAttachVoList[0].is_belongtoClient&&(T.isMeasureUnitByNum(t[h].selectAttachVoList[0].measure_unit)?n||(c+=T.getProcessPrice(i,e,t[h].selectAttachVoList[0].measure_unit,t[h].selectAttachVoList[0].accessory_price,0)):c+=T.getProcessPrice(i,e,t[h].measure_unit,t[h].selectAttachVoList[0].accessory_price,0))),a.push(c)}a=a.concat(this.getTechnoDiscountPrice(t[h].nextMatList,i,e,n,s,r))}return a},i.getNeedDiscountTechPrice=function(t,i,e,n,s,r){var a=[];if(null==t)return[];for(var o=T.getBorderDistance(this.getAllSelectedTech()),h=0;h<t.length;h++)if(t[h].selected){if(t[h].attachmentList.indexOf("SPpj")<0||t[h].attachmentList.indexOf("SPpj")>=0&&100*i+o>this.materialWidth&&100*e+o>this.materialWidth){var l,c=0,u=0;null!=t[h].selectAttachVoList&&t[h].selectAttachVoList.length>0&&(l=t[h].selectAttachVoList[0]);var d=k.instance.getProcePriceUnit(this.manufacturerCode,t[h].procCode,this.materialCode,l,r),_=k.instance.getProdProceessDate(this.manufacturerCode,t[h].procCode);null!=d&&4==d.length&&null!=_&&_.has_discount&&(t[h].measure_unit=d[0],t[h].baseprice=d[1],t[h].preProc_Price=d[2],"Penyin"==k.instance.orderType?K.yiXingCutProcess(t[h].procCode)?(c=T.getYixingPrice(s.picinfo,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getYixingPrice(s.picinfo,0,d[3],i,e))):"SPTE10160"==t[h].procCode?(c=T.getAvgCutPrice(s,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getAvgCutPrice(s,0,d[3],i,e))):t[h].attachmentList.indexOf("SPpymj")?(c=K.whitePartProcess(t[h].procCode)?T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.partWhiteUnWhiteRatio,i,e):T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.unwhiteratio,i,e),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):(c=T.getProcessPrice(i,e,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):c=T.getCarvingPrice(s.picinfo.area,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))),a.push({processPrice:c*this.procFeeRatio,unitGross:u*this.procFeeRatio})}a=a.concat(this.getNeedDiscountTechPrice(t[h].nextMatList,i,e,n,s,r))}return a},i.getMaterialProInfoList=function(t,i,e,n,s){var r=[];if(null==t)return[];for(var a=T.getBorderDistance(this.getAllSelectedTech()),o=0;o<t.length;o++)if(t[o].selected){if(t[o].attachmentList.indexOf("SPpj")<0||t[o].attachmentList.indexOf("SPpj")>=0&&100*e+a>this.materialWidth&&100*n+a>this.materialWidth){var h=t[o].procName+T.getAttachDesc(t[o]);if(null!=t[o].selectAttachVoList&&t[o].selectAttachVoList.length>0&&(h+="("+t[o].selectAttachVoList[0].accessory_name+")"),K.yiXingCutProcess(t[o].procCode))r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:W.originPicPicUrl+i.yixingFid+"."+i.yixingPicClass});else if(K.backSideUnSame(t[o].procCode))r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:W.originPicPicUrl+i.backFid+"."+i.backPicClass});else if(K.whitePartProcess(t[o].procCode))r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:W.originPicPicUrl+i.partWhiteFid+"."+i.partWhitePicClass});else if(t[o].attachmentList.indexOf("SPpj")>=0){var h=t[o].procName+"("+["V","H"][s.cuttype]+"-"+s.cutnum+"-"+s.eachCutLength.join(";")+")";r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:t[o].attchMentFileId})}else if(t[o].attachmentList.indexOf("SPdfcq")>=0){var h=h+"(H-"+s.horiCutNum+",V-"+s.verCutNum+")";r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:t[o].attchMentFileId})}else if(t[o].attachmentList.indexOf("SPFBdakou")>=0){for(var l="",c=0;c<s.holeList.length;c++)l+="("+s.holeList[c].x.toFixed(1)+","+s.holeList[c].y.toFixed(1)+");";h+=l,r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:t[o].attchMentFileId})}else r.push({procCode:t[o].procCode,procDescription:h,procAttachPath:t[o].attchMentFileId})}r=r.concat(this.getMaterialProInfoList(t[o].nextMatList,i,e,n,s))}return r},i.getProInfoList=function(t,i,e,n){for(var s=[],r=0;r<this.procTreeList.length;r++)if(this.procTreeList[r].selected){var a=[];a.push(this.procTreeList[r]),s=s.concat(this.getMaterialProInfoList(a,t,i,e,n))}return s},i.getOrderSingleWeight=function(t,i,e){var n=T.getMaterialWight(t,i,this.measureUnit,this.unitWeight),s=[],r=this.getAllSelectedTech();s=s.concat(this.getAttachWeight(this.procTreeList,t,i,e,r));for(var a=0;a<s.length;a++)n+=s[a];return parseFloat(n.toFixed(2))},i.getAttachWeight=function(t,i,e,n,s){var r=[];if(null==t)return[];for(var a=T.getBorderDistance(this.getAllSelectedTech()),o=0;o<t.length;o++)if(t[o].selected){if(t[o].attachmentList.indexOf("SPpj")<0||t[o].attachmentList.indexOf("SPpj")>=0&&100*i+a>this.materialWidth&&100*e+a>this.materialWidth){var h;if(null!=t[o].selectAttachVoList&&t[o].selectAttachVoList.length>0){h=t[o].selectAttachVoList[0];var l=T.getMaterialWight(i,e,h.measure_unit,h.unit_weight);r.push(l)}}r=r.concat(this.getAttachWeight(t[o].nextMatList,i,e,n,s))}return r},i.checkCurTechValid=function(){for(var t=this.getAllSelectedTech(),i=0;i<t.length;i++)if(null!=t[i].preProc_attachmentTypeList&&""!=t[i].preProc_attachmentTypeList&&"SPno"!=t[i].preProc_attachmentTypeList.toLocaleUpperCase()&&"SPpeijian"!=t[i].preProc_attachmentTypeList.toLocaleUpperCase()&&(null==t[i].attchFileId||""==t[i].attchFileId))return E.showAlert("有工艺未选择合适的附件图片"),!1;return!0},i.getMaterialPrice=function(t,i,e,n){void 0===e&&(e=!1);for(var s=T.getProcessPrice(t,i,this.measureUnit,this.unitPrice,0),r=[],a=this.getAllSelectedTech(),o=0;o<this.procTreeList.length;o++)if(this.procTreeList[o].selected){var h=[];h.push(this.procTreeList[o]),r=r.concat(this.getAttachPrice(h,t,i,e,n,a))}for(o=0;o<r.length;o++)s+=r[o];return s},i.getAllAttachPrice=function(t,i,e,n){void 0===e&&(e=!1);for(var s=[],r=this.getAllSelectedTech(),a=0,o=0;o<this.procTreeList.length;o++)if(this.procTreeList[o].selected){var h=[];h.push(this.procTreeList[o]),s=s.concat(this.getAttachPrice(h,t,i,e,n,r,!0))}for(o=0;o<s.length;o++)a+=s[o];return a},i.getAttachPrice=function(t,i,e,n,s,r,a){void 0===a&&(a=!1);var o=[];if(null==t)return[];for(var h=T.getBorderDistance(this.getAllSelectedTech()),l=0;l<t.length;l++)if(t[l].selected&&(!a||t[l].attachmentList.indexOf("SPMat")>=0)){if(t[l].attachmentList.indexOf("SPpj")<0||t[l].attachmentList.indexOf("SPpj")>=0&&100*i+h>this.materialWidth&&100*e+h>this.materialWidth){var c,u=0;null!=t[l].selectAttachVoList&&t[l].selectAttachVoList.length>0&&(c=t[l].selectAttachVoList[0]);var d=k.instance.getProcePriceUnit(this.manufacturerCode,t[l].procCode,this.materialCode,c,r);null!=d&&4==d.length&&(t[l].measure_unit=d[0],t[l].baseprice=d[1],t[l].preProc_Price=d[2],null!=t[l].selectAttachVoList&&t[l].selectAttachVoList.length>0&&!t[l].selectAttachVoList[0].is_belongtoClient&&(T.isMeasureUnitByNum(t[l].selectAttachVoList[0].measure_unit)?n||(u+=T.getProcessPrice(i,e,t[l].selectAttachVoList[0].measure_unit,t[l].selectAttachVoList[0].accessory_price,0)):u+=T.getProcessPrice(i,e,t[l].measure_unit,t[l].selectAttachVoList[0].accessory_price,0))),o.push(u)}o=o.concat(this.getAttachPrice(t[l].nextMatList,i,e,n,s,r))}return o},i.getProcessAndGrossPrices=function(t,i,e,n){void 0===e&&(e=!1);var s=0,r=0,a=0,o=[],h=this.getAllSelectedTech(),l=this.getDiscount(k.instance.getProductTotalPrice(this.manufacturerCode,this.prodCode));this.isFixedCustomerRatio&&(l=1);for(var c=0;c<this.procTreeList.length;c++)if(this.procTreeList[c].selected){var u=[];u.push(this.procTreeList[c]),o=o.concat(this.getProcPrice(u,t,i,e,n,h))}for(c=0;c<o.length;c++)s+=o[c].processPrice,""!=o[c].unitGross&&null!=o[c].unitGross&&o[c].discount?r+=o[c].unitGross*l:""==o[c].unitGross||null==o[c].unitGross||o[c].discount||(a+=o[c].unitGross);return this.isFixedCustomerRatio?r*=this.customerPriceRatio:r=r*this.districtPriceRatio*this.customerPriceRatio,[s,r,a]},i.getProcPrice=function(t,i,e,n,s,r){var a=[];if(null==t)return[];for(var o=T.getBorderDistance(this.getAllSelectedTech()),h=0;h<t.length;h++)if(t[h].selected){if(t[h].attachmentList.indexOf("SPpj")<0||t[h].attachmentList.indexOf("SPpj")>=0&&100*i+o>this.materialWidth&&100*e+o>this.materialWidth){var l,c=0,u=0;null!=t[h].selectAttachVoList&&t[h].selectAttachVoList.length>0&&(l=t[h].selectAttachVoList[0]);var d=k.instance.getProcePriceUnit(this.manufacturerCode,t[h].procCode,this.materialCode,l,r),_=k.instance.getProdProceessDate(this.manufacturerCode,t[h].procCode);null!=d&&4==d.length&&null!=_&&(t[h].measure_unit=d[0],t[h].baseprice=d[1],t[h].preProc_Price=d[2],"Penyin"==k.instance.orderType?K.yiXingCutProcess(t[h].procCode)?(c=T.getYixingPrice(s.picinfo,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getYixingPrice(s.picinfo,0,d[3],i,e))):"SPTE10160"==t[h].procCode?(c=T.getAvgCutPrice(s,t[h].baseprice,t[h].preProc_Price,i,e),null!=d[3]&&""!=d[3]&&(u=T.getAvgCutPrice(s,0,d[3],i,e))):t[h].attachmentList.indexOf("SPpymj")>=0?(c=K.whitePartProcess(t[h].procCode)?T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.partWhiteUnWhiteRatio,i,e):T.getPaintingPrice(t[h].preProc_Price,t[h].baseprice,s.picinfo.unwhiteratio,i,e),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):(c=T.getProcessPrice(i,e,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice),null!=d[3]&&""!=d[3]&&(u=T.getProcessPrice(i,e,t[h].measure_unit,d[3],0))):c=T.getCarvingPrice(s.picinfo.area,t[h].measure_unit,t[h].preProc_Price,t[h].baseprice)),null!=_?a.push({processPrice:c*this.procFeeRatio,unitGross:u*this.procFeeRatio,discount:_.has_discount}):a.push({processPrice:c*this.procFeeRatio,unitGross:u*this.procFeeRatio,discount:0})}a=a.concat(this.getProcPrice(t[h].nextMatList,i,e,n,s,r))}return a},i.getProductDiscount=function(t,i){if(-1==this.priceLvl1){var e="prodCode="+this.prodCode+"&customerCode="+g.instance.userAccount+"&manufacturerCode="+this.manufacturerCode+"&addressId="+k.instance.selectAddress.zoneid+"&clientCode="+g.instance.clientCode;W.instance.Request(W.httpUrl+"business/getProdDiscount?webCode=001&"+e,this,function(e){var n=JSON.parse(e);if(!n.hasOwnProperty("status"))for(var s in n)this[s]=n[s];null!=t&&t.call(i)},null,null)}else null!=t&&t.call(i)},i.resetData=function(){if(null!=this.procTreeList)for(var t=0;t<this.procTreeList.length;t++)this.procTreeList[t].resetData()},i.getFirstTechMeasureUnit=function(){for(var t=0;t<this.procTreeList.length;t++)if(this.procTreeList[t].selected)return this.procTreeList[t].measure_unit.indexOf("平方米")>=0?"平方米":"米";return"平方米"},i.getTotalMeasureNum=function(t,i){for(var e=0;e<this.procTreeList.length;e++)if(this.procTreeList[e].selected)return T.getMaterialWight(t,i,this.procTreeList[e].measure_unit,1);return 1},t}(),S=function(){function t(){}return s(t,"GameConfig"),t.init=function(){var t=he.regClass;t("script.prefabScript.OderTopFlowController",gs),t("script.characterpaint.CharacterMainControl",Ds),t("script.characterpaint.CharacterTypeChooseControl",Ws),t("utils.PicturePopUpController",dr),t("laya.html.dom.HTMLDivElement",ta),t("script.uiTool.ButtonEffect",Ks),t("laya.display.Text",na),t("script.prefabScript.LinkTextControl",ws),t("script.dengxiang.DengxiangOrderController",As),t("script.uiTool.BtnMouseCusor",yr),t("script.FirstPageController",ar),t("script.prefabScript.CmykInputControl",kr),t("script.picUpload.CreateFolderController",Wr),t("script.workpanel.EffectPreviewController",Vs),t("script.workpanel.ImageEffectControlller",Qs),t("script.workpanel.MatAndProcFlowController",cr),t("script.workpanel.MaterialChooseController",ps),t("script.uiTool.AvgLayHBox",cs),t("script.uiTool.GlowButton",Ts),t("script.workpanel.MyWorkController",Os),t("script.prefabScript.CustomListController",ks),t("script.workpanel.OrderSelectPicController",xs),t("script.order.OrderTypeChooseController",js),t("script.picUpload.PicManagerController",fs),t("script.workpanel.ProcListController",ys),t("script.workpanel.RelatedChooseController",tr),t("script.workpanel.PaintOrderSettingController",ir),t("script.picUpload.SetRelatedConfirmContoller",Rr),t("script.workpanel.VideoPlayPanel",br),t("script.lailiao.LailiaoOrderController",Ar),t("utils.LoadingPrgControl",Hs),t("script.login.LogPanelControl",us),t("script.login.RegisterCntrol",Dr),t("script.login.ResetPwdControl",Ns),t("script.MainPageControl",Js),t("utils.AddMsgControl",Hr),t("script.order.AvgCutPanelControl",hr),t("script.order.CbcPreviewController",_s),t("script.order.ChooseDeliveryTimeControl",Fs),t("script.order.PayTypeSelectControl",Cr),t("script.order.DakouSettingController",Nr),t("script.order.InputCutNumControl",Bs),t("script.order.MoreProductController",lr),t("script.order.PackageVipController",Or),t("script.order.PackageOrderControl",Rs),t("script.order.SelectAddressControl",wr),t("script.order.SelectAttchesControl",xr),t("script.order.SelectDeliveryControl",rr),t("script.order.SelectFactoryControl",Ur),t("script.order.SelectMaterialControl",mr),t("script.order.SelectPackAddressController",pr),t("script.order.SelectPicControl",$s),t("script.usercenter.CustomerTransactController",_r),t("script.usercenter.MyOrderControl",Ms),t("script.usercenter.StatisticalAnalyController",gr),t("script.usercenter.WriteOffController",Ss),t("script.picUpload.BuyStorageController",ur),t("script.picUpload.PictureCheckControl",Vr),t("utils.PopUpWindowControl",bs),t("script.prodCustomer.CustomerEditController",Fr),t("script.prodCustomer.CustomerProdCategoryController",Ys),t("script.prodCustomer.ProdChooseController",Er),t("script.prodCustomer.ProdEditController",fr),t("script.product.BuyProductControl",or),t("script.prefabScript.TopBannerControl",Ir),t("script.product.ProductMarketControl",qs),t("script.product.ProductMainControl",nr),t("script.picUpload.UpLoadAndOrderContrl",Mr),t("script.usercenter.OrganizeMrgControl",Es),t("script.usercenter.AddressGroupController",Cs),t("script.usercenter.AddressListController",Br),t("script.usercenter.AddrGroupMgrController",ds),t("script.usercenter.ApplyJoinMgrControl",Ls),t("script.usercenter.ChargeActivityController",vr),t("script.usercenter.ChargeControl",ms),t("script.usercenter.CompanyEditController",Is),t("script.usercenter.CustomManagerController",Ps),t("script.usercenter.DeliveryQueryController",Lr),t("script.usercenter.EnterPrizeInfoControl",vs),t("script.usercenter.InvoiceHistoryController",Us),t("script.usercenter.InvoiceManager",er),t("script.usercenter.AddressEditControl",sr),t("script.usercenter.OrderDetailControl",Gs),t("script.usercenter.PublicChargeRecordController",zs),t("script.usercenter.OrderPriceSettingController",Pr),t("script.usercenter.TransactionControl",Zs),t("script.usercenter.UserMainControl",Xs)},t.width=640,t.height=1136,t.scaleMode="fixedwidth",t.screenMode="none",t.alignV="top",t.alignH="left",t.startScene="characterpaint/BackImgItem.scene",t.sceneRoot="",t.debug=!1,t.stat=!1,t.physicsDebug=!1,t.exportSceneToJson=!0,t.__init$=function(){t.init()},t}(),y=function(){function t(i){if(this.procCode="",this.procName="",this.attachmentList=[],this.preProc_Price=0,this.baseprice=0,this.nextProcRequired=0,this.measure_unit="",this.procLvl=0,this.accessoryConditionList=null,this.constraintList=null,this.fileTupleList=null,this.procConditionList=null,this._nextMatList=null,this._selected=!1,this.attchMentFileId="",this.attchFileId="",this.has_discount=!0,this.unit_capacity=0,this.unit_urgentCapacity=0,this.cap_uit="",this.attachList=null,this.selectAttachVoList=null,this.picInfoVo=null,this.hasFinishChoose=!1,this.belognproductVo=null,this.picorderItem=null,this.finalNextMaterialList=null,this.parentMaterialVo=null,this.procImage=null,this.showType="4",null!=i){for(var e in i)this.hasOwnProperty(e)&&(this[e]=i[e]);var n=i.children;if(this._nextMatList=[],n&&n.length>0)for(var s=0;s<n.length;s++){var r=new t(n[s]);r.parentMaterialVo=this,this._nextMatList.push(r)}}}s(t,"model.orderModel.MaterialItemVo");var i=t.prototype;return i.cloneData=function(i,e){var n=new t(null);for(var s in this)n[s]=this[s];n.hasFinishChoose=!0,n.belognproductVo=i,n.picorderItem=e;for(var r=[],a=0;a<this._nextMatList.length;a++)r.push(this._nextMatList[a].cloneData(i,e));if(n._nextMatList=r,null!=this.selectAttachVoList){for(var o=[],a=0;a<this.selectAttachVoList.length;a++)o.push(this.selectAttachVoList[a].cloneData());n.selectAttachVoList=o}return n},i.onAccCatlistBack=function(t){var i=JSON.parse(t);i.hasOwnProperty("status")||null!=i[0]&&W.instance.Request(W.httpUrl+"business/accessorylist?manufacturer_code="+k.instance.curSelectMat.manufacturerCode+"&accessoryCat_name="+i[0].accessoryCat_Name,this,this.onGetAccessorylistBack,null,null)},i.onGetAccessorylistBack=function(t){var i=JSON.parse(t);if(i){this.attachList=[];for(var e=0;e<i.length;e++){var n=new O(i[e]);n.materialItemVo=this,this.attachList.push(n)}}},i.resetData=function(){if(this.selected=!1,this.attchMentFileId="",this.attchFileId="",null!=this.nextMatList)for(var t=0;t<this.nextMatList.length;t++)this.nextMatList[t].resetData()},r(0,i,"nextMatList",function(){var t=k.instance.curSelectOrderItem;this.hasFinishChoose&&(t=this.picorderItem);var i=[];null!=t?i.push(t):i=k.instance.batchChangeMatItems;var e=!1,n=[],s=this;for(n.push(s);null!=s.parentMaterialVo;)s.parentMaterialVo.selected&&n.push(s.parentMaterialVo),s=s.parentMaterialVo;for(var r=0;r<n.length;r++)if("SPTE11160"==n[r].procCode){e=!0;break}if(null!=i&&i.length>0&&this._nextMatList.length>0){var a=[];a.push(this);for(var o=T.getBorderDistance(a),h=0;h<this._nextMatList.length;h++){for(var l="1",r=0;r<i.length;r++){e&&(o=0);var c=j.procShowType(this._nextMatList[h].accessoryConditionList,this._nextMatList[h].constraintList,this._nextMatList[h].procConditionList,i[r],n,o);"4"!=l&&(l=c)}if(this._nextMatList[h].showType=l,"1"==l)return this._nextMatList[h].nextMatList}return this._nextMatList}return this._nextMatList}),r(0,i,"selected",function(){return this._selected},function(t){if(null!=this.parentMaterialVo&&t)for(var i=0;i<this.parentMaterialVo.nextMatList.length;i++)this.parentMaterialVo.nextMatList[i].selected=!1;this._selected=t}),t}(),C=function(){function t(){this.tipspanel=null,this.tipsMsg="",this.tipspanel=new Wa,this.tipspanel.htmltxt.style.fontSize=18,this.tipspanel.htmltxt.style.font="SimHei";var t=new os("#B1B1B1",5,2,2);this.tipspanel.filters=[t]}s(t,"utils.TipsUtil");var i=t.prototype;return i.addTips=function(t,i){t.on("mouseover",this,this.showTips),t.on("mousemove",this,this.showTips),t.on("mouseout",this,this.removeTips),this.tipspanel.htmltxt.innerHTML=i,this.tipspanel.backimg.width=this.tipspanel.htmltxt.contextWidth+20,this.tipspanel.backimg.height=this.tipspanel.htmltxt.contextHeight+20},i.addGlobalTips=function(t){e.stage.on("mouseover",this,this.showTips),e.stage.on("mousemove",this,this.showTips),e.stage.on("mouseout",this,this.removeTips),this.tipspanel.htmltxt.innerHTML=t,this.tipspanel.backimg.width=this.tipspanel.htmltxt.contextWidth+20,this.tipspanel.backimg.height=this.tipspanel.htmltxt.contextHeight+20},i.stopGlobalTips=function(){e.stage.off("mouseover",this,this.showTips),e.stage.off("mousemove",this,this.showTips),e.stage.off("mouseout",this,this.removeTips),this.removeTips(null)},i.updateTips=function(t){this.tipspanel.htmltxt.innerHTML=t,this.tipspanel.backimg.width=this.tipspanel.htmltxt.contextWidth+20,this.tipspanel.backimg.height=this.tipspanel.htmltxt.contextHeight+20},i.showTips=function(t){null==this.tipspanel.parent&&e.stage.addChild(this.tipspanel),this.tipspanel.x=t.stageX+10,this.tipspanel.y=t.stageY+10},i.removeTips=function(){null!=this.tipspanel.parent&&this.tipspanel.removeSelf()},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t._instance=null,t}(),E=function(){function t(){this.viewContainer=null,this.openViewList=null,this.viewDict=null,this.curZorder=0,this.viewContainer=new ls,e.stage.addChild(this.viewContainer),this.openViewList={},this.viewDict=new Object,this.viewDict.VIEW_FIRST_PAGE=ca,"undefined"!=typeof Ti.window.orientation?(this.viewDict.VIEW_lOGPANEL=Ja,this.viewDict.VIEW_REGPANEL=Go,this.viewDict.VIEW_POPUPDIALOG=Ha):(this.viewDict.VIEW_lOGPANEL=lo,this.viewDict.VIEW_REGPANEL=So,this.viewDict.VIEW_POPUPDIALOG=Uh),this.viewDict.VIEW_CHANGEPWD=mh,this.viewDict.VIEW_MYPICPANEL=sh,this.viewDict.VIEW_USERCENTER=Jh,this.viewDict.VIEW_PICTURE_CHECK=Uo,this.viewDict.VIEW_POPUPDIALOG_WITH_PICTURE=Oh,this.viewDict.VIEW_SELECT_ADDRESS=Zo,this.viewDict.VIEW_SELECT_FACTORY=lh,this.viewDict.VIEW_SELECT_PIC_TO_ORDER=zh,this.viewDict.VIEW_SELECT_MATERIAL=tl,this.viewDict.VIEW_SELECT_DELIVERY_TYPE=Xh,this.viewDict.VIEW_SELECT_ATTACH=xh,this.viewDict.INPUT_CUT_NUM=hh,this.viewDict.AVG_CUT_VIEW=ph,this.viewDict.VIEW_ADD_MESSAGE=Za,this.viewDict.VIEW_ADD_NEW_ADDRESS=bh,this.viewDict.VIEW_LOADING_PRO=qh,this.viewDict.VIEW_PRODUCT_VIEW=no,this.viewDict.VIEW_BUY_PRODUCT_VIEW=vh,this.viewDict.VIEW_ORDER_DETAIL_PANEL=jh,this.viewDict.VIEW_SELECT_PAYTYPE_PANEL=Do,this.viewDict.VIEW_CHOOSE_DELIVERY_TIME_PANEL=gh,this.viewDict.VIEW_PACKAGE_ORDER_PANEL=Ph,this.viewDict.VIEW_DAKOU_PANEL=nh,this.viewDict.VIEW_BUY_STORAGE_PANEL=Fo,this.viewDict.VIEW_INVOICE_HISTORY_PANEL=kh,this.viewDict.VIEW_ADDRESS_GROUP_MGR_PANEL=_a,this.viewDict.VIEW_PACKAGE_ORDER_VIP_PANEL=vo,this.viewDict.VIEW_ADDRESS_LIST_PANEL=da,this.viewDict.VIEW_SELECT_PACK_ADDRESS_PANEL=fa,this.viewDict.VIEW_PUBLIC_CHARGE_RECORD_PANEL=Eh,this.viewDict.VIEW_MORE_PRODUCT_PANEL=To,this.viewDict.VIEW_CBC_PREVIEW_PANEL=Bh,this.viewDict.VIEW_CREATE_FOLDER_PANEL=Yo,this.viewDict.VIEW_ORDER_TYPE_PANEL=Th,this.viewDict.VIEW_SET_RELATED_CONFIRM_PANEL=$a,this.viewDict.VIEW_SET_MATERIAL_PROCESS_PANEL=fh,this.viewDict.VIEW_EDIT_COMPANY_INFO_PANEL=Mh,this.viewDict.VIEW_PLAY_VIDEO_PANEL=ga,this.viewDict.EFFECT_PREVIEW_PANEL=za,this.viewDict.DELIVERY_PACKAGE_PANEL=zo,this.viewDict.APPLY_JOIN_LIST_PANEL=wh,this.viewDict.RELATED_PIC_CHOOSE_PANEL=to,this.viewDict.PRODUCT_PROC_EFFECT_PANEL=Ga,this.viewDict.ORDER_PRICE_SETTING_PANEL=Hh,this.viewDict.WRITE_OFF_ORDER_PANEL=Vh}s(t,"script.ViewManager");var i=t.prototype;return i.openView=function(t,i,e){if(void 0===i&&(i=!1),i){var n;for(var s in this.openViewList)n=this.openViewList[s],null!=n&&(this.viewContainer.removeChild(n),n.destroy(!0));this.openViewList={}}if(null!=this.viewDict[t]){Ln.instance.event("OPEN_PANEL_VIEW",t),null!=this.openViewList[t]&&this.closeView(t);var r=new this.viewDict[t];r.param=e,r.zOrder=this.curZorder++,this.viewContainer.addChild(r),this.openViewList[t]=r}},i.closeView=function(t){null!=this.openViewList[t]&&(this.viewContainer.removeChild(this.openViewList[t]),this.openViewList[t].destroy(!0),this.openViewList[t]=null,delete this.openViewList[t],Ln.instance.event("COMMON_CLOSE_PANEL_VIEW",t))},i.setViewVisible=function(t,i){null!=this.openViewList[t]&&(this.openViewList[t].visible=i)},i.getTopViewName=function(){var t=this.viewContainer.getChildAt(this.viewContainer.numChildren-1),i="";for(var e in this.openViewList)if(this.openViewList[e]==t){i=e;break}return i},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t.showAlert=function(t){script.ViewManager.instance.openView("VIEW_POPUPDIALOG",!1,{msg:t,noCancel:!0})},t._instance=null,t.VIEW_FIRST_PAGE="VIEW_FIRST_PAGE",t.VIEW_lOGPANEL="VIEW_lOGPANEL",t.VIEW_REGPANEL="VIEW_REGPANEL",t.VIEW_CHANGEPWD="VIEW_CHANGEPWD",t.VIEW_MYPICPANEL="VIEW_MYPICPANEL",t.VIEW_PICMANAGER="VIEW_PICMANAGER",t.VIEW_PICTURE_CHECK="VIEW_PICTURE_CHECK",t.VIEW_PAINT_ORDER="VIEW_PAINT_ORDER",t.VIEW_USERCENTER="VIEW_USERCENTER",t.VIEW_SELECT_ADDRESS="VIEW_SELECT_ADDRESS",t.VIEW_SELECT_FACTORY="VIEW_SELECT_FACTORY",t.VIEW_SELECT_PIC_TO_ORDER="VIEW_SELECT_PIC_TO_ORDER",t.VIEW_SELECT_MATERIAL="VIEW_SELECT_MATERIAL",t.VIEW_ADD_MESSAGE="VIEW_ADD_MESSAGE",t.VIEW_SELECT_DELIVERY_TYPE="VIEW_SELECT_DELIVERY_TYPE",t.VIEW_SELECT_ATTACH="VIEW_SELECT_ATTACH",t.INPUT_CUT_NUM="INPUT_CUT_NUM",t.AVG_CUT_VIEW="AVG_CUT_VIEW",t.VIEW_PRODUCT_VIEW="VIEW_PRODUCT_VIEW",t.VIEW_BUY_PRODUCT_VIEW="VIEW_BUY_PRODUCT_VIEW",t.VIEW_LOADING_PRO="VIEW_LOADING_PRO",t.VIEW_ADD_NEW_ADDRESS="VIEW_ADD_NEW_ADDRESS",t.VIEW_ORDER_DETAIL_PANEL="VIEW_ORDER_DETAIL_PANEL",t.VIEW_SELECT_PAYTYPE_PANEL="VIEW_SELECT_PAYTYPE_PANEL",t.VIEW_CHARACTER_DEMONSTRATE_PANEL="VIEW_CHARACTER_DEMONSTRATE_PANEL",t.VIEW_CHARACTER_TYPE_PANEL="VIEW_CHARACTER_TYPE_PANEL",t.VIEW_CHOOSE_DELIVERY_TIME_PANEL="VIEW_CHOOSE_DELIVERY_TIME_PANEL",t.VIEW_PACKAGE_ORDER_PANEL="VIEW_PACKAGE_ORDER_PANEL",t.VIEW_DAKOU_PANEL="VIEW_DAKOU_PANEL",t.VIEW_CARVING_ORDER_PANEL="VIEW_CARVING_ORDER_PANEL",t.VIEW_ACTIVITY_ADVETISE_PANEL="VIEW_ACTIVITY_ADVETISE_PANEL",t.VIEW_POPUPDIALOG="VIEW_POPUPDIALOG",t.VIEW_POPUPDIALOG_WITH_PICTURE="VIEW_POPUPDIALOG_WITH_PICTURE",t.VIEW_CHARGE_RECORD_PANEL="VIEW_CHARGE_RECORD_PANEL",t.VIEW_BUY_STORAGE_PANEL="VIEW_BUY_STORAGE_PANEL",t.VIEW_INVOICE_HISTORY_PANEL="VIEW_INVOICE_HISTORY_PANEL",t.VIEW_ADDRESS_GROUP_MGR_PANEL="VIEW_ADDRESS_GROUP_MGR_PANEL",t.VIEW_PACKAGE_ORDER_VIP_PANEL="VIEW_PACKAGE_ORDER_VIP_PANEL",t.VIEW_ADDRESS_LIST_PANEL="VIEW_ADDRESS_LIST_PANEL",t.VIEW_SELECT_PACK_ADDRESS_PANEL="VIEW_SELECT_PACK_ADDRESS_PANEL",t.VIEW_PUBLIC_CHARGE_RECORD_PANEL="VIEW_PUBLIC_CHARGE_RECORD_PANEL",t.VIEW_MORE_PRODUCT_PANEL="VIEW_MORE_PRODUCT_PANEL",t.VIEW_CBC_PREVIEW_PANEL="VIEW_CBC_PREVIEW_PANEL",t.VIEW_PRODUCT_CATEGORY_PANEL="VIEW_PRODUCT_CATEGORY_PANEL",t.VIEW_PRODUCT_CHOOSE_PANEL="VIEW_PRODUCT_CHOOSE_PANEL",t.VIEW_PRODUCT_CUSTOMIZATION_PANEL="VIEW_PRODUCT_CUSTOMIZATION_PANEL",t.VIEW_CREATE_FOLDER_PANEL="VIEW_CREATE_FOLDER_PANEL",t.VIEW_ORDER_TYPE_PANEL="VIEW_ORDER_TYPE_PANEL",t.VIEW_SET_RELATED_CONFIRM_PANEL="VIEW_SET_RELATED_CONFIRM_PANEL",t.VIEW_SET_MATERIAL_PROCESS_PANEL="VIEW_SET_MATERIAL_PROCESS_PANEL",t.VIEW_EDIT_COMPANY_INFO_PANEL="VIEW_EDIT_COMPANY_INFO_PANEL",t.VIEW_PLAY_VIDEO_PANEL="VIEW_PLAY_VIDEO_PANEL",t.EFFECT_PREVIEW_PANEL="EFFECT_PREVIEW_PANEL",t.DELIVERY_PACKAGE_PANEL="DELIVERY_PACKAGE_PANEL",t.APPLY_JOIN_LIST_PANEL="APPLY_JOIN_LIST_PANEL",t.RELATED_PIC_CHOOSE_PANEL="RELATED_PIC_CHOOSE_PANEL",t.PRODUCT_PROC_EFFECT_PANEL="PRODUCT_PROC_EFFECT_PANEL",t.ORDER_PRICE_SETTING_PANEL="ORDER_PRICE_SETTING_PANEL",t.WRITE_OFF_ORDER_PANEL="WRITE_OFF_ORDER_PANEL",t
}(),b=function(){function t(t){this.addr="",this.name="",this.org_code="",this.contactor="",this.contact_phone="",this.manu_priority=0,this.isSelected=!0,this.promotion_desc="";var i=this;for(var e in t)this[e]=t[e];null==k.instance.allManuFacutreMatProcPrice[this.org_code]&&W.instance.Request(W.httpUrl+"business/getmatprocprice?manufacturer_code="+this.org_code,this,function(t){k.instance.initManuFacuturePrice(i.org_code,t)},null,null)}return s(t,"model.users.FactoryInfoVo"),t}(),I=function(){function t(){}return s(t,"model.ErrorCode"),n(t,["ErrorTips",function(){return this.ErrorTips={0:"操作成功",100:"内部错误",101:"验证码空",102:"验证码超时",103:"验证码不对",104:"参数错误",201:"用户已存在",202:"用户不存在",203:"未登录",204:"密码错误",205:"用户未加入公司",206:"邀请用户不存在",207:"被邀请用户已加入公司",208:"邀请已发送",209:"更新失败",210:"用户已退出，请重新登录",255:"公司被冻结，请联系客服",301:"上传失败",302:"目录已存在",303:"文件不存在",305:"您有异常上传操作，请10分钟后重试",401:"您已加入公司",402:"公司已存在",403:"已发送创建公司请求",404:"您尚未加入公司",405:"您不是公司创立者",501:"参数非法",601:"权限错误",666:"数据异常",667:"数据异常",701:"设置默认地址失败",801:"订单正在支付中或已经支付成功，请勿重复支付",751:"名字重复",211:"你已加入公司",754:"该公司不存在",753:"你已申请过加入公司",758:"组织里有用户不能删除",1001:"活动不存在",1002:"活动已结束",1003:"充值金额必须是1000的倍数",1004:"活动余额不足",1005:"充值金额超过公司上限",806:"维护打开",759:"发票信息不全，请检查",760:"您有未处理的充值请求，请等待工作人员审核"}}]),t}(),x=function(){function t(t){if(this.name=null,this.id=null,this.mobileNumber=null,null!=t)for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i])}return s(t,"model.users.BusinessManVo"),t}(),P=(function(){function t(){this.id="",this.parentid="",this.areaName=null,this.childArea=null}return s(t,"model.users.CityAreaVo"),t}(),function(){function t(t){if(this.prod_code=null,this.prod_name=null,this.measure_unit=null,this.manufacturer_code=null,this.manufacturer_name=null,this.mer_volume=null,this.mer_weight=0/0,this.mer_price=0/0,null!=t)for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i])}return s(t,"model.productModel.MerchanVo"),t}()),D=function(){function t(){this.lblName=null,this.value=null,this.selected=!1}return s(t,"model.prodCustomerModel.ProdCondtionVo"),t}(),A=function(){function t(){this.curOriginFile=null,this.curRelatedFile=null}s(t,"model.picmanagerModel.RelatedChooseModel");var i=t.prototype;return i.resetData=function(){this.curOriginFile=null,this.curRelatedFile=null},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),L=function(){function t(t){if(this.id=null,this.customerName=null,this.mobileNumber=null,this.salesmanId=null,this.businessManId=null,this.businessManName=null,this.businessManPhone=null,this.defaultPayment=0,this.dirId=null,this.balance=null,this.salerName=null,this.salerId=null,this.balanceMoney=0/0,null!=t){for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i]);this.balanceMoney=parseFloat(this.balance)}}return s(t,"model.users.CustomVo"),t}(),k=function(){function t(){this.curSelectOrderItem=null,this.curSelectCarvingItem=null,this.selectAddress=null,this.selectFactoryAddress=null,this.selectFactoryInMat=null,this.curSelectPic=null,this.curSelectMat=null,this.outPutAddr=null,this.productList=null,this.deliveryList=null,this.selectDelivery=null,this.curSelectProcList=null,this.batchChangeMatItems=null,this.packageList=null,this.finalOrderData=null,this.allManuFacutreMatProcPrice={},this.availableDeliveryDates={},this.orderType=null,this.curTimePrefer=0,this.curCommmonDeliveryType=null,this.curUrgentDeliveryType=null,this.currentDayStr="",this.batchOrders={},this.dynamicDeliveryFeeCfg=null,this.productDisount=null,this.rawPrice="0",this.tempPicOrderItemVoList=null,this.curOrderCustomer=null}s(t,"model.orderModel.PaintOrderModel");var i=t.prototype;return i.resetData=function(){this.selectAddress=null,this.selectFactoryAddress=null,this.curSelectMat=null,this.outPutAddr=null,this.productList=null,this.deliveryList=null,this.selectDelivery=null,this.allManuFacutreMatProcPrice={},this.packageList=[],this.finalOrderData=[],this.availableDeliveryDates={},this.dynamicDeliveryFeeCfg=null,this.productDisount=null,this.batchOrders={},model.orderModel.PaintOrderModel.instance.rawPrice="0",this.tempPicOrderItemVoList=[],this.curOrderCustomer=null},i.initOutputAddr=function(t){this.outPutAddr=[];for(var i=0;i<t.length;i++){var e=new b(t[i]);this.outPutAddr.push(e)}this.outPutAddr.sort(function(t,i){var e=parseInt(t.manu_priority.toString()),n=parseInt(i.manu_priority.toString());return e-n})},i.getContactPhone=function(t){for(var i=0;i<this.outPutAddr.length;i++)if(this.outPutAddr[i].org_code==t)return this.outPutAddr[i].contact_phone;return""},i.getManufactureCodeList=function(){for(var t=[],i=0;i<this.outPutAddr.length;i++)t.push(this.outPutAddr[i].org_code);return t},i.getProcDataByProcName=function(t){if(null==this.curSelectProcList)return null;for(var i=0;i<this.curSelectProcList.length;i++)if(this.curSelectProcList[i].preProc_Name==t)return this.curSelectProcList[i];return null},i.initManuFacuturePrice=function(t,i){try{if(this.allManuFacutreMatProcPrice[t]=JSON.parse(i),null!=this.allManuFacutreMatProcPrice[t].code)return E.showAlert("获取生产商工艺价格出错！"),E.instance.openView("VIEW_FIRST_PAGE",!0),void 0}catch(e){E.showAlert("获取生产商材料工艺价格失败")}},i.getSelectedOutPutCenter=function(){if(null==this.outPutAddr||0==this.outPutAddr.length)return[];for(var t=[],i=0;i<this.outPutAddr.length;i++)this.outPutAddr[i].isSelected&&t.push(this.outPutAddr[i].org_code);return t},i.getProcePriceUnit=function(t,i,e,n,s){if(null==this.allManuFacutreMatProcPrice||null==this.allManuFacutreMatProcPrice[t])return[];var r=this.allManuFacutreMatProcPrice[t];if(null==r)return[];if(K.yiXingCutProcess(i))return this.getYixingProcPrice(t,i,e,s);for(var a,o=0;o<r.length;o++)if(r[o].proc_code==i&&r[o].mat_code==e){a=[r[o].measure_unit,r[o].baseprice,r[o].unit_procprice,r[o].unit_grossmargin];break}if(null!=n)for(var o=0;o<r.length;o++)if(r[o].proc_code==i&&r[o].mat_code==n.accessory_code){(null==a||r[o].unit_procprice>a[2])&&(a=[r[o].measure_unit,r[o].baseprice,r[o].unit_procprice,r[o].unit_grossmargin]);break}if(null!=a)return a;for(var o=0;o<r.length;o++)if(r[o].proc_code==i&&""==r[o].mat_code){a=[r[o].measure_unit,r[o].baseprice,r[o].unit_procprice,r[o].unit_grossmargin];break}return a||[]},i.getProdProceessDate=function(t,i){if(null==this.allManuFacutreMatProcPrice||null==this.allManuFacutreMatProcPrice[t])return null;var e=this.allManuFacutreMatProcPrice[t];if(null==e)return null;for(var n=0;n<e.length;n++)if(e[n].proc_code==i)return e[n];return null},i.getCapacityData=function(t,i,e){if(null==this.allManuFacutreMatProcPrice||null==this.allManuFacutreMatProcPrice[t])return[];var n=this.allManuFacutreMatProcPrice[t];if(null==n)return[0,0,0];for(var s=0;s<n.length;s++)if(n[s].proc_code==i&&n[s].mat_code==e)return[n[s].cap_unit,n[s].unit_capacity,n[s].unit_urgentcapacity];for(var s=0;s<n.length;s++)if(n[s].proc_code==i&&""==n[s].mat_code)return[n[s].cap_unit,n[s].unit_capacity,n[s].unit_urgentcapacity];return[0,0,0]},i.getYixingProcPrice=function(t,i,e,n){var s=[],r=[];r.push(e);for(var a=0;a<n.length;a++){var o=n[a].selectAttachVoList;null!=o&&o.length>0&&r.push(o[0].accessory_code)}var h=this.allManuFacutreMatProcPrice[t];if(null==h)return[];for(var a=0;a<h.length;a++)if(h[a].proc_code==i){0==s.length&&(s=[h[a].measure_unit,h[a].baseprice,h[a].unit_procprice,h[a].unit_grossmargin]);for(var l=0;l<r.length;l++)h[a].mat_code==r[l]&&h[a].unit_procprice>s[2]&&(s=[h[a].measure_unit,h[a].baseprice,h[a].unit_procprice,h[a].unit_grossmargin]);""==h[a].mat_code&&h[a].unit_procprice>s[2]&&(s=[h[a].measure_unit,h[a].baseprice,h[a].unit_procprice,h[a].unit_grossmargin])}return s},i.getManuFacturePriority=function(t){var i=this.outPutAddr;if(null!=i)for(var e=0;e<i.length;e++)if(i[e].org_code==t)return parseInt(i[e].manu_priority);return 0},i.checkCanSelYixing=function(){var t=this.batchChangeMatItems;if(null!=t&&t.length>0){for(var i=0;i<t.length;i++){var e=t[i].ordervo.picinfo;if("0"==e.yixingFid||""==e.yixingFid)return!1}return!0}return null!=this.curSelectOrderItem&&this.curSelectOrderItem.ordervo.picinfo.relatedRoadNum>=0&&"0"!=this.curSelectOrderItem.ordervo.picinfo.yixingFid&&""!=this.curSelectOrderItem.ordervo.picinfo.yixingFid?!0:!1},i.checkCanDoubleSide=function(){var t=this.batchChangeMatItems;if(null!=t&&t.length>0){for(var i=0;i<t.length;i++){var e=t[i].ordervo.picinfo;if("0"==e.backFid||""==e.backFid)return!1}return!0}return null!=this.curSelectOrderItem&&"0"!=this.curSelectOrderItem.ordervo.picinfo.backFid&&""!=this.curSelectOrderItem.ordervo.picinfo.backFid?!0:!1},i.checkCanPartWhite=function(){var t=this.batchChangeMatItems;if(null!=t&&t.length>0){for(var i=0;i<t.length;i++){var e=t[i].ordervo.picinfo;if("0"==e.partWhiteFid||""==e.partWhiteFid)return!1}return!0}return null!=this.curSelectOrderItem&&"0"!=this.curSelectOrderItem.ordervo.picinfo.partWhiteFid&&""!=this.curSelectOrderItem.ordervo.picinfo.partWhiteFid?!0:!1},i.checkIslongerForDfcq=function(){var t=[];null!=this.curSelectOrderItem?t.push(this.curSelectOrderItem):t=this.batchChangeMatItems;for(var i=0;i<t.length;i++){var e=Math.min(t[i].finalWidth,t[i].finalHeight),n=Math.max(t[i].finalWidth,t[i].finalHeight);if(e>120||n>240)return!0}return!1},i.checkNeedReChooseCfpj=function(){var t=model.orderModel.PaintOrderModel.instance.curSelectMat.getAllSelectedTech(),i=[];null!=model.orderModel.PaintOrderModel._instance.curSelectOrderItem?i.push(model.orderModel.PaintOrderModel._instance.curSelectOrderItem):i=model.orderModel.PaintOrderModel._instance.batchChangeMatItems;for(var e=!1,n=0;n<t.length;n++)if(t[n].attachmentList.indexOf("SPpj")>=0){e=!0;break}if(e)for(var n=0;n<i.length;n++){var s=i[n].ordervo.eachCutLength;if(null!=s)for(var r=0;r<s.length;r++)if(s[r]>120)return!0}return!1},i.getCurPicOrderItems=function(){var t=[];return null!=model.orderModel.PaintOrderModel._instance.curSelectOrderItem?t.push(model.orderModel.PaintOrderModel._instance.curSelectOrderItem):t=model.orderModel.PaintOrderModel._instance.batchChangeMatItems,t},i.checkExceedMaterialSize=function(t){var i=this.getCurPicOrderItems();if(null==i)return!1;for(var e=0;e<i.length;e++){var n=Math.min(i[e].finalWidth,i[e].finalHeight),s=Math.max(i[e].finalWidth,i[e].finalHeight);if(n>t.maxWidth||s>t.maxLength)return!0;if(n<t.minWidth||s<t.minLength)return!0}return!1},i.checkUnFitFileType=function(t,i){void 0===i&&(i=!0);var e=this.getCurPicOrderItems(),n=0;if("MPR230402103702134"==t.prodCode)for(var s=0;s<e.length;s++)if("GRAY"!=e[s].ordervo.picinfo.colorspace.toUpperCase())return i&&E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"图片不符合切割字下单要求，必须是灰度图"}),!0;if("SPPR60100"==t.prodCode||"SPPR60110"==t.prodCode){n="SPPR60100"==t.prodCode?42.5:52.5;for(var s=0;s<e.length;s++){if("GRAY"!=e[s].ordervo.picinfo.colorspace.toUpperCase())return i&&E.instance.openView("VIEW_POPUPDIALOG_WITH_PICTURE",!1,{msg:"图片不符合条幅材料下单要求",picurl:"bigpic/tiaofutp.jpg"}),!0;if(0==e[s].ordervo.picinfo.iswhitebg)return i&&E.instance.openView("VIEW_POPUPDIALOG_WITH_PICTURE",!1,{msg:"图片不符合条幅材料下单要求",picurl:"bigpic/tiaofutp.jpg"}),!0;if(e[s].ordervo.picinfo.iswhitebg){var r=0;return r=e[s].ordervo.picinfo.picHeight>e[s].ordervo.picinfo.picWidth?e[s].ordervo.picinfo.tiaofuwidth*e[s].finalWidth/e[s].ordervo.picinfo.picPhysicWidth:e[s].ordervo.picinfo.tiaofuwidth*e[s].finalHeight/e[s].ordervo.picinfo.picPhysicHeight,r>n&&i&&E.instance.openView("VIEW_POPUPDIALOG_WITH_PICTURE",!1,{msg:"图片不符合条幅材料下单要求",picurl:"bigpic/tiaofutp.jpg"}),r>n}}}return!1},i.getManuFactureIndex=function(t){if(null!=this.outPutAddr&&this.outPutAddr.length>0)for(var i=0;i<this.outPutAddr.length;i++)if(t==this.outPutAddr[i].org_code)return i;return 0},i.hasExistAddress=function(t){for(var i=0;i<this.packageList.length;i++)if(this.packageList[i].address.id==t)return!0;return!1},i.addPackage=function(t,i){null==this.packageList&&(this.packageList=[]);var e=new J;e.packageName="包裹"+(this.packageList.length+1),e.address=t,e.itemlist=[];for(var n=0;n<i.length;n++){var s=new M;s.itemId=i[n].orderItemSn,s.itemCount=0==this.packageList.length?i[n].itemNumber:0,e.itemlist.push(s)}this.packageList.push(e)},i.getPackageVoByItemSn=function(t){if(null==this.packageList)return null;for(var i=0;i<this.packageList.length;i++)if(this.packageList[i].itemlist[0].itemId==t)return this.packageList[i];return null},i.setPackageData=function(){if(null!=this.finalOrderData)for(var t=0;t<this.finalOrderData.length;t++){this.finalOrderData[t].packageList=[];for(var i=0;i<this.packageList.length;i++){var e={};e.package_name=this.packageList[i].packageName,e.consignee="",e.tel="",e.addr="",e.itemList=[];for(var n=0;n<this.finalOrderData[t].orderItemList.length;n++)if(this.finalOrderData[t].orderItemList[n].numlist[i]>0){var s={};s.orderItemSn=this.finalOrderData[t].orderItemList[n].orderItemSn,s.count=this.finalOrderData[t].orderItemList[n].numlist[i],e.itemList.push(s)}this.finalOrderData[t].packageList.push(e)}for(var n=0;n<this.finalOrderData[t].orderItemList.length;n++)delete this.finalOrderData[t].orderItemList[n].numlist}},i.setVipPackageData=function(){if(null==this.finalOrderData||0==this.finalOrderData.length)return!1;for(var t=0;t<this.finalOrderData.length;t++){this.finalOrderData[t].packageList=[];for(var i=0;i<this.packageList.length;i++){var e=this.packageList[i],n={};n.packageName=e.packageName,n.consignee=1==this.packageList.length?null!=this.curOrderCustomer&&"0"!=this.curOrderCustomer.id?this.curOrderCustomer.customerName+"#"+e.address.receiverName:g.instance.companyShort+"#"+e.address.receiverName:e.address.receiverName,n.tel=e.address.phone,n.addr=e.address.proCityArea,n.addrId=e.address.zoneid,n.shippingFee=0,n.itemList=[];for(var s=0;s<e.itemlist.length;s++)if(e.itemlist[s].itemCount>0)for(var r=0;r<this.finalOrderData[t].orderItemList.length;r++)if(this.finalOrderData[t].orderItemList[r].orderItemSn==e.itemlist[s].itemId){var a={};a.orderItemSn=e.itemlist[s].itemId,a.count=e.itemlist[s].itemCount,n.itemList.push(a);break}if(0==n.itemList.length)return E.showAlert("包裹产品项数量不能都是0"),!1;this.finalOrderData[t].packageList.push(n)}for(var s=0;s<this.finalOrderData[t].orderItemList.length;s++)delete this.finalOrderData[t].orderItemList[s].numlist}return!0},i.getOrderCapcaityData=function(t,i){var e={};e.manufacturer_code=t.manufacturerCode,this.finalOrderData.length>0&&(e.addr_id=this.finalOrderData[0].addressId),e.orderItemList=[],e.delivery_prefer=i;for(var n=t.orderItemList,s={},r=0;r<n.length;r++){var a={};a.orderItem_sn=n[r].orderItemSn,a.prod_code=n[r].conponent.prodCode;var o=a.prod_code+"-";a.processList=[];for(var h=0;h<n[r].conponent.procInfoList.length;h++){var l={};l.proc_code=n[r].conponent.procInfoList[h].procCode;var c=n[r].conponent.LWH.split("/"),u=parseFloat(c[0]),d=parseFloat(c[1]);o+=l.proc_code+"-",l.cap_occupy=n[r].itemNumber*this.getProcessNeedCapacity(t.manufacturerCode,n[r].material_code,u,d,n[r].conponent.procInfoList[h].procCode),l.proc_seq=h+1,a.processList.push(l)}if(s.hasOwnProperty(o)){for(var _=s[o].processList,p=0;p<_.length;p++)_[p].cap_occupy+=a.processList[p].cap_occupy;n[r].batchOrderItemSn=s[o].orderItem_sn,this.batchOrders[s[o].orderItem_sn]++}else s[o]=a,e.orderItemList.push(a),this.batchOrders[n[r].orderItemSn]=1,n[r].batchOrderItemSn=n[r].orderItemSn}for(r=0;r<n.length;r++)1==this.batchOrders[n[r].batchOrderItemSn]&&(n[r].batchOrderItemSn="");return JSON.stringify(e)},i.getSingleOrderItemCapcaityData=function(t){var i={};i.manufacturer_code=this.getManufacturerCode(t.orderItemSn),i.orderItemList=[],i.delivery_prefer=0;var e={};e.orderItem_sn=t.orderItemSn,e.prod_code=t.conponent.prodCode,e.processList=[];for(var n=0;n<t.conponent.procInfoList.length;n++){var s={};s.proc_code=t.conponent.procInfoList[n].procCode;var r=t.conponent.LWH.split("/"),a=parseFloat(r[0]),o=parseFloat(r[1]);s.cap_occupy=t.itemNumber*this.getProcessNeedCapacity(i.manufacturer_code,t.material_code,a,o,t.conponent.procInfoList[n].procCode),s.proc_seq=n+1,e.processList.push(s)}return i.orderItemList.push(e),JSON.stringify(i)},i.getProcessNeedCapacity=function(t,i,e,n,s){var r=this.getCapacityData(t,s,i);if(r.length<3)return 0;if(0==r[1]||null==r[1])return 0;var a=T.getAmoutByUnit(e/100,n/100,r[0]);return r[1]>0?parseFloat((a/r[1]).toFixed(4)):0},i.hasUrgentOrderItem=function(t){if(null==this.finalOrderData)return!1;for(var i=0;i<this.finalOrderData.length;i++)for(var e=this.finalOrderData[i].orderItemList,n=0;n<e.length;n++){var s=model.orderModel.PaintOrderModel.instance.getManufacturerCode(e[n].orderItemSn);if(1==e[n].isUrgent&&null!=e[n].deliveryDate&&s==t)return!0}return!1},i.hasCommonOrderItem=function(t){if(null==this.finalOrderData)return!1;for(var i=0;i<this.finalOrderData.length;i++)for(var e=this.finalOrderData[i].orderItemList,n=0;n<e.length;n++){var s=model.orderModel.PaintOrderModel.instance.getManufacturerCode(e[n].orderItemSn);if(0==e[n].isUrgent&&null!=e[n].deliveryDate&&s==t)return!0}return!1},i.getManufacturerCode=function(t){for(var i=this.finalOrderData,e=0;e<i.length;e++)for(var n=i[e].orderItemList,s=0;s<n.length;s++)if(n[s].orderItemSn==t)return i[e].manufacturerCode;return""},i.getManufacturerNameBySn=function(t){for(var i=this.finalOrderData,e=0;e<i.length;e++)for(var n=i[e].orderItemList,s=0;s<n.length;s++)if(n[s].orderItemSn==t)return i[e].manufacturerName;return""},i.getSingleProductOrderData=function(t){for(var i=this.finalOrderData,e=0;e<i.length;e++)for(var n=i[e].orderItemList,s=0;s<n.length;s++)if(n[s].orderItemSn==t)return n[s];return null},i.getProductOrderDataList=function(t){for(var i=this.finalOrderData,e=[],n=0;n<i.length;n++)for(var s=i[n].orderItemList,r=0;r<s.length;r++)(s[r].batchOrderItemSn==t||s[r].orderItemSn==t)&&e.push(s[r]);return e},i.getDeliveryList=function(){var t=this.finalOrderData,i=[];this.curCommmonDeliveryType={},this.curUrgentDeliveryType={};for(var e=0;e<t.length;e++)i.push({manufacturer_code:t[e].manufacturerCode,manufacturer_name:t[e].manufacturerName,deliveryVoArr:this.deliveryList[t[e].manufacturerCode]});return i},i.getDeliveryTypeStr=function(t,i){if(null==t||t.length<=0)return"";for(var e,n="",s=new Date(1e3*R.instance.serverDate),r=0;r<this.finalOrderData.length;r++)if(this.finalOrderData[r].manufacturerCode==t[r].belongManuCode){e=this.finalOrderData[r].orderItemList;break}for(var r=0;r<t.length;r++){var a=t[r],o=!1;if(0!=t[r].limit_length&&0!=t[r].limit_width&&0!=t[r].limit_height)for(var h=0;h<e.length;h++)if(parseFloat(e[h].minSideLength)>t[r].limit_length&&parseFloat(e[h].minSideLength)>t[r].limit_width){o=!0;break}o||(!i||a.canbeslected(s))&&(n+=r<t.length-1?a.delivery_name+"("+a.deliveryPrice.toFixed(1)+"元),":a.delivery_name+"("+a.deliveryPrice.toFixed(1)+"元)")}return n},i.isValidDeliveryType=function(t,i){if(i.indexOf("送货上门")<0)return!0;for(var e=new Date(1e3*R.instance.serverDate),n=0;n<t.length;n++){var s=t[n];if(s.delivery_name==i&&s.canbeslected(e))return!0}return!1},i.getDeliveryPrice=function(t,i,e){if(void 0===e&&(e=""),g.instance.ignoreDelivery)return 0;if(""==i||null==t)return 0;for(var n=0;n<t.length;n++){var s=t[n];if(s.delivery_name==i)return s.deliveryPrice}return 0},i.getDeliveryOrgCode=function(t){return!g.instance.ignoreDelivery&&t.length>0?t[0].deliverynet_code:""},i.getDynamicDeliveryFeeCfg=function(t,i){return null!=this.dynamicDeliveryFeeCfg?(t&&i&&i.call(t),void 0):(W.instance.Request(W.httpUrl+"business/dynamicdeliveryfee?customer_code="+g.instance.userAccount+"&client_code="+g.instance.clientCode,this,function(e){var n=JSON.parse(e);n.hasOwnProperty("status")||(this.dynamicDeliveryFeeCfg=n.deliveryFeeList),t&&i&&i.call(t)},null,null),void 0)},i.onGetDynamicDeliveryFeeBack=function(t){var i=JSON.parse(t);i.hasOwnProperty("status")||(this.dynamicDeliveryFeeCfg=i.deliveryFeeList)},i.getDeliveryFeeByManuCode=function(){if(null==this.finalOrderData||0==this.finalOrderData.length)return 0;for(var t=0,i=0;i<this.finalOrderData.length;i++)for(var e=this.finalOrderData[i].orderItemList,n=0;n<e.length;n++){var s=Number(e[n].itemPrice)*Number(e[n].itemNumber);(1==e[n].isUrgent||null!=e[n].deliveryDate)&&(s*=e[n].discount),s=parseFloat(s.toFixed(1)),t+=s}return this.getDeliveryFee(t)},i.getTotalWeightByManuCode=function(t){if(null==this.finalOrderData||0==this.finalOrderData.length)return 0;for(var i=0,e=0;e<this.finalOrderData.length;e++)if(this.finalOrderData[e].manufacturerCode==t)for(var n=this.finalOrderData[e].orderItemList,s=0;s<n.length;s++)i+=parseFloat(n[s].conponent.weight)*n[s].itemNumber;return i},i.getDeliveryFee=function(t){if(null!=this.dynamicDeliveryFeeCfg){for(var i=0;i<this.dynamicDeliveryFeeCfg.length;i++)if(t>=this.dynamicDeliveryFeeCfg[i].moreOrEqual_than&&t<this.dynamicDeliveryFeeCfg[i].less_than)return this.dynamicDeliveryFeeCfg[i].delivery_fee;return 0}return this.getDynamicDeliveryFeeCfg(),0},i.calculateProductDiscount=function(t){this.productDisount={};for(var i=0;i<t.length;i++){var e=t[i];if(null!=e.ordervo.orderData){null==this.productDisount[e.ordervo.manufacturer_code]&&(this.productDisount[e.ordervo.manufacturer_code]={}),null==this.productDisount[e.ordervo.manufacturer_code][e.ordervo.orderData.conponent.prodCode]&&(this.productDisount[e.ordervo.manufacturer_code][e.ordervo.orderData.conponent.prodCode]=0);var n=e.getProcessPrice();this.productDisount[e.ordervo.manufacturer_code][e.ordervo.orderData.conponent.prodCode]+=n}}},i.getProductTotalPrice=function(t,i){return null!=this.productDisount&&null!=this.productDisount[t]&&null!=this.productDisount[t][i]?this.productDisount[t][i]:1},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t.getOrderSn=function(){for(var i="",e=0;20>e;e++){var n=Math.round(Math.random()*t.VOCABURARY.length);i+=t.VOCABURARY.charAt(n)}return i},t._instance=null,t.VOCABURARY="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t}(),T=(function(){function t(){this.key=null,this.operator=null,this.result=null,this.value=null,this.matCode=null,this.group=null,this.procCode=null}return s(t,"model.orderModel.ProcConstainVo"),t}(),function(){function t(){this.tipspanel=null,this._serverTime=0}s(t,"utils.UtilTool");var i=t.prototype;return i.startTimeTick=function(){e.timer.loop(1e3,this,this.timeTick)},i.stopTimeTick=function(){e.timer.clear(this,this.timeTick)},i.timeTick=function(){this._serverTime+=1},i.getSerVerDay=function(){var t=new Date(1e3*this._serverTime);return t.getDay()},r(0,i,"unixSeverTime",function(){return this._serverTime},function(t){this._serverTime=t}),t.oneCutNineAdd=function(t){var i=t.toFixed(1),e=parseInt(i.split(".")[1]);return 1==e?parseInt(i.split(".")[0]):9==e?parseInt(i.split(".")[0])+1:parseFloat(i)},t.getLocalVar=function(t,i){var e=Ki.getItem(t);if(null===e)return null==i?null:(e=i,Ki.setItem(t,e+""),e);if(null!=i){if(Math.floor(i)===i)return""==e&&(e="0"),parseInt(e);if(parseFloat(i+"")===i)return""==e&&(e="0"),parseFloat(e)}return e},t.setLocalVar=function(i,e){return null==e?(t.removeLocalVar(i),void 0):(Ki.setItem(i,e+""),void 0)},t.removeLocalVar=function(t){Ki.removeItem(t)},t.formatFullDateTime=function(t,i){void 0===i&&(i=!0);var e="";return e+=t.getFullYear()+"-",e+=t.getMonth()+1>=10?t.getMonth()+1+"-":"0"+(t.getMonth()+1)+"-",e+=t.getDate()>=10?t.getDate():"0"+t.getDate(),0==i?e:(e+=" ",e+=t.getHours()>=10?t.getHours()+":":"0"+t.getHours()+":",e+=t.getMinutes()>=10?t.getMinutes()+":":"0"+t.getMinutes()+":",e+=t.getSeconds()>=10?t.getSeconds():"0"+t.getSeconds())},t.checkFileIsImg=function(t){return 0==t.picType||"JPEG"!=t.picClass.toLocaleUpperCase()&&"JPG"!=t.picClass.toLocaleUpperCase()&&"TIF"!=t.picClass.toLocaleUpperCase()&&"TIFF"!=t.picClass.toLocaleUpperCase()&&"PNG"!=t.picClass.toLocaleUpperCase()&&0==t.isCdr?!1:!0},t.getYixingImageCount=function(i){Ti.window.picProcess=t,Ti.window.getImagePixels(i)},t.getYixingImageInfo=function(i){for(var e=i.data,n=i.width,s=i.height,r=new Array(s),a=new Array(s),o=new Array(s),h=1,l=[],c={},u=0,d=0;s>d;d++){r[d]=new Array(n),a[d]=new Array(n),o[d]=[];for(var _=0;n>_;_++){var p=4*(d*n+_);r[d][_]=e[p]+e[p+1]+e[p+2],r[d][_]>200?r[d][_]=1:(r[d][_]=0,u++),a[d][_]=r[d][_],0==r[d][_]&&(0==o[d].length?(o[d].push({start:_,end:_,blot:h}),h++):_-1==o[d][o[d].length-1].end?o[d][o[d].length-1].end=_:(o[d].push({start:_,end:_,blot:h}),h++))}for(f=0;f<o[d].length;f++)l.push(o[d][f].blot);if(d>0&&o[d].length>0&&o[d-1].length>0)for(var f=0;f<o[d].length;f++){for(var m=o[d][f].start,g=o[d][f].end,v=[],S=0;S<o[d-1].length;S++)m>o[d-1][S].end+1||g<o[d-1][S].start-1||v.indexOf(o[d-1][S].blot)<0&&v.push(o[d-1][S].blot);if(v.length>0&&(l.indexOf(o[d][f].blot)>=0&&l.splice(l.indexOf(o[d][f].blot),1),v.sort(),o[d][f].blot=v[0],v.length>1))for(c.hasOwnProperty(v[0])||(c[v[0]]=[]),S=1;S<v.length;S++)c[v[0]].indexOf(v[S])<0&&c[v[0]].push(v[S])}}for(var d=1;s-1>d;d++)for(var _=1;n-1>_;_++)if(0==r[d][_]){var y=r[d-1][_-1]+r[d-1][_]+r[d-1][_+1]+r[d][_+1]+r[d][_-1]+r[d+1][_-1]+r[d+1][_]+r[d+1][_+1];0==y&&(a[d][_]=1)}var C=[];for(var E in c){for(var b=!1,I=Number(E),x=-1,d=0;d<C.length;d++){var P=C[d];if(P.indexOf(I)>=0){b=!0;break}for(var D=c[E],_=0;_<D.length;_++)if(P.indexOf(D[_])>=0){b=!0,x=d;break}}if(!b||-1!=x){var A;A=-1!=x?C[x]:[],A.indexOf(I)<0&&A.push(I);var L=t.getEqualBlot(c[E],c);-1==x?C.push(A.concat(L)):C[x]=A.concat(L)}}for(var k=0,d=0;d<l.length;d++){for(var T=!1,_=0;_<C.length;_++)if(C[_].indexOf(l[d])>=0){T=!0;break}0==T&&k++}console.log("面积："+u),console.log("连通域数量:"+(k+C.length))},t.getCutCountLength=function(i){for(var e=i.data,n=i.width,s=i.height,r=new Array(s),a=new Array(s),o="",h=0;2e4>h;h++)o+=e[h]+" ";console.log(o);for(var h=0;s>h;h++){r[h]=new Array(n),a[h]=new Array(n);for(var l=0;n>l;l++){var c=4*(h*n+l);r[h][l]=e[c]+e[c+1]+e[c+2],r[h][l]=r[h][l]>200?1:0,a[h][l]=r[h][l]}}for(var h=1;s-1>h;h++)for(var l=1;n-1>l;l++)if(0==r[h][l]){var u=r[h-1][l-1]+r[h-1][l]+r[h-1][l+1]+r[h][l+1]+r[h][l-1]+r[h+1][l-1]+r[h+1][l]+r[h+1][l+1];0==u&&(a[h][l]=1)}for(var d=0,_=3,p={},f=0,m=0,h=0;s>h;h++)for(var l=0;n>l;l++)if(0==a[h][l]){p={},d++;for(var g=0,v=[],S=t.getNextCutPoint(h,l,a,n,s,p);null!=S&&(S.x!=h||S.y!=l);){if(null==p[S.x+"_"+S.y]&&(p[S.x+"_"+S.y]=1,v.push(S)),S=t.getNextCutPoint(S.x,S.y,a,n,s,p),null==S){g++;var y=v[v.length-1];a[y.x][y.y]=1,v.splice(v.length-1,1),v.length>0&&(S=v[v.length-1])}else g=0;if(g>30)break}if(null!=S&&S.x==h&&S.y==l&&v.length>5){a[h][l]=_;for(var C=0;C<v.length;C++)a[v[C].x][v[C].y]=_;f++,m+=v.length;var E=v[v.length-1];console.log("找到路径："+_+"，起始点["+h+","+l+"]终点:["+E.x+","+E.y+"]"),console.log("路径长度:"+(v.length-1)),_++}}console.log("边缘数量："+m+",路径数："+f)},t.getNextCutPoint=function(t,i,e,n,s,r){var a=-1,o=-1,h=-1,l=-1,c=-1,u=-1,d=-1,_=-1;t>0&&(a=e[t-1][i],n-1>i&&(o=e[t-1][i+1]),i>0&&(_=e[t-1][i-1])),s-1>t&&(c=e[t+1][i],n-1>i&&(l=e[t+1][i+1]),i>0&&(u=e[t+1][i-1])),i>0&&(d=e[t][i-1]),n-1>i&&(h=e[t][i+1]);var p;return 0==o&&0==r.hasOwnProperty(t-1+"_"+(i+1))?p=new Oe(t-1,i+1):0==a&&0==r.hasOwnProperty(t-1+"_"+i)?p=new Oe(t-1,i):0==h&&0==r.hasOwnProperty(t+"_"+(i+1))?p=new Oe(t,i+1):0==l&&0==r.hasOwnProperty(t+1+"_"+(i+1))?p=new Oe(t+1,i+1):0==c&&0==r.hasOwnProperty(t+1+"_"+i)?p=new Oe(t+1,i):0==u&&0==r.hasOwnProperty(t+1+"_"+(i-1))?p=new Oe(t+1,i-1):0==d&&0==r.hasOwnProperty(t+"_"+(i-1))?p=new Oe(t,i-1):0==_&&0==r.hasOwnProperty(t-1+"_"+(i-1))?p=new Oe(t-1,i-1):null},t.getEightNeighbourSum=function(t,i,e,n,s){var r=-1,a=-1,o=-1,h=-1,l=-1,c=-1,u=-1,d=-1;return t>0&&(r=e[t-1][i],n-1>i&&(a=e[t-1][i+1]),i>0&&(d=e[t-1][i-1])),s-1>t&&(l=e[t+1][i],n-1>i&&(h=e[t+1][i+1]),i>0&&(c=e[t+1][i-1])),i>0&&(u=e[t][i-1]),n-1>i&&(o=e[t][i+1]),r+h+o+u+c+d+l+a},t.getEqualBlot=function(i,e){for(var n=[],s=0;s<i.length;s++)n.push(i[s]),e.hasOwnProperty(i[s])&&(n=n.concat(t.getEqualBlot(e[i[s]],e)));return n},t.getPaintingPrice=function(t,i,e,n,s){return 0/0!=e?i+t*e*n*s:i+1*t*n*s},t.getProcessPrice=function(i,e,n,s,r){if(0>s)return 0;if("周长米"==n){var a=2*(i+e);return r+s*a}if("长度米"==n){var o=Math.max(i,e);return r+s*o}if("上下米"==n){var h=i+i;return r+s*h}if("左右米"==n){var l=e+e;return r+s*l}if("宽边米"==n){var o=Math.max(i,e);return r+s*o}if("米"==n)return a=2*(i+e),r+s*a;if("平方米"==n){var c=i*e;return r+s*c}if("左边米"==n||"右边米"==n){var u=e;return r+s*u}if("上边米"==n||"下边米"==n){var u=i;return r+s*u}return t.isMeasureUnitByNum(n)?s:0},t.getMaterialWight=function(i,e,n,s){if(0>=s)return 0;if("周长米"==n){var r=2*(i+e);return s*r}if("长度米"==n){var a=Math.max(i,e);return s*a}if("上下米"==n){var o=i+i;return s*o}if("左右米"==n){var h=e+e;return s*h}if("宽边米"==n){var a=Math.max(i,e);return s*a*2}if("米"==n)return r=2*(i+e),s*r;if("平方米"==n){var l=i*e;return s*l}return t.isMeasureUnitByNum(n)?s:0},t.getCarvingPrice=function(t,i,e,n){return n+e*t},t.getYixingPrice=function(t,i,e,n){var s=t.relatedRoadLength/t.relatedPicWidth*n;return i*t.relatedRoadNum+s*e},t.getAvgCutPrice=function(t,i,e,n,s){var r=t.horiCutNum*n+t.verCutNum*s;return i*t.horiCutNum*t.verCutNum+r*e},t.isMeasureUnitByNum=function(t){return"个"==t||"件"==t||"套"==t},t.isValidPic=function(t){if("CMYK"!=t.colorspace.toUpperCase()&&"GRAY"!=t.colorspace.toUpperCase()&&"SRGB"!=t.colorspace.toUpperCase())return!1;var i=["JPG","JPEG","TIF","TIFF","ZIP","PNG"];return i.indexOf(t.picClass.toLocaleUpperCase())<0?!1:"ZIP"==t.picClass.toLocaleUpperCase()&&t.directName.indexOf(".cdr")<0?!1:!0},t.isUnNormalPic=function(t){var i=["JPG","TIF","TIFF"];if(i.indexOf(t.picClass.toLocaleUpperCase())<0)return!1;var e=3*(t.picWidth*t.picHeight*3+1048576);return t.fsize>e},t.isValidPicZipai=function(t){return"ZIP"==t.picClass.toLocaleUpperCase()&&t.isCdr?!0:!1},t.isFitYixing=function(t,i,e){if(void 0===e&&(e=1),null!=t&&null!=i){var n=Math.abs(t.picPhysicWidth-i.picPhysicWidth)/t.picPhysicWidth,s=Math.abs(t.picPhysicHeight-i.picPhysicHeight)/t.picPhysicHeight;return n>.01||s>.01?!1:"GRAY"==i.colorspace.toLocaleUpperCase()||i.isCdr?!0:!1}return!1},t.isFitFanmain=function(t,i){if(null!=t&&null!=i){if("CMYK"!=i.colorspace)return!1;var e=Math.abs(t.picPhysicWidth-i.picPhysicWidth)/t.picPhysicWidth,n=Math.abs(t.picPhysicHeight-i.picPhysicHeight)/t.picPhysicHeight;return e>.01||n>.01?!1:!0}return!1},t.getBorderDistance=function(t){for(var i=0;i<t.length;i++){if(t[i].attachmentList.indexOf("SPlb-5")>=0)return 10;if(t[i].attachmentList.indexOf("SPlb-10")>=0)return 20;if(t[i].attachmentList.indexOf("SPlb-15")>=0)return 30}return 0},t.getAttachDesc=function(t){for(var i=0;i<t.attachmentList.length;i++)if(t.attachmentList[i].indexOf("SPlb")>=0)return"("+t.attachmentList+")";return""},t.hasChaofuProcess=function(t){for(var i=0;i<t.length;i++)if(t[i].attachmentList.indexOf("SPpj")>=0)return!0;return!1},t.getNextFiveDays=function(i){for(var e=new Date(Date.parse(t.convertDateStr(i))),n=[],s=1;5>=s;s++){var r=new Date(e.getTime()+86400*s*1e3),a=r.getMonth()+1,o=a>9?a.toString():"0"+a.toString();o+="-",o+=r.getDate()>9?r.getDate():"0"+r.getDate(),n.push(o)}return n},t.getNextDayStr=function(i){var e=new Date(Date.parse(t.convertDateStr(i))),n=new Date(e.getTime()+864e5),s=t.formatFullDateTime(n,!1);return s.substr(5,5)},t.getAmoutByUnit=function(i,e,n){return"周长米"==n?2*(i+e):"长度米"==n?Math.max(i,e):"上下米"==n?i+i:"左右米"==n?e+e:"宽边米"==n?Math.max(i,e):"米"==n?2*(i+e):"平方米"==n?i*e:"左边米"==n?e:t.isMeasureUnitByNum(n)?1:0},t.needChooseAttachPic=function(t){return t.attachmentList.indexOf("SPzz")>=0||t.attachmentList.indexOf("SPsm")>=0?!0:!1},t.convertDateStr=function(i){var e=i.split(" "),n="{0} {1} {2}";return t.format(n,e[0].split("-").join("/"),e[1],"GMT+0800")},t.getCountDownString=function(t){var i=Math.floor(t/60),e=t%60,n="";return n+=i>9?i:"0"+i,n+=e>9?":"+e:":0"+e},t.format=function(t){for(var i=[],e=1,n=arguments.length;n>e;e++)i.push(arguments[e]);for(var e=0;e<i.length;e++)t=t.replace(new RegExp("\\{"+e+"\\}","gm"),i[e]);return t},t.stringIsEmpty=function(t){return null==t||""==t},t.hasForbidenChars=function(t){return t.indexOf("/")>=0||t.indexOf("\\")>=0||t.indexOf("*")>=0||t.indexOf('"')>=0||t.indexOf("	")>=0},t.uuid=function(){for(var t=[],i="0123456789abcdef",e=0;36>e;e++)t[e]=i.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var n=t.join("");return n},t.getVerifyCodes=function(t){for(var i=["a","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","J","K","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"],e=[],n=0;t>n;n++)e.push(i[Math.floor(Math.random()*i.length)]);
return e},t.isValidString=function(t){return!0},t.isEmojiCharacter=function(t){if(t){var i=new RegExp("[~#^$@%&!?%*]","g");if(t.match(i))return!0;if(i=/[\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/,i.test(t))return!0;for(var e=0;e<t.length;e++){var n=t.charCodeAt(e);if(n>=55296&&56319>=n){if(t.length>1){var s=t.charCodeAt(e+1),r=1024*(n-55296)+(s-56320)+65536;if(r>=118784&&128895>=r)return!0}}else if(t.length>1){var s=t.charCodeAt(e+1);if(8419==s)return!0}else{if(n>=8448&&10239>=n)return!0;if(n>=11013&&11015>=n)return!0;if(n>=10548&&10549>=n)return!0;if(n>=12951&&12953>=n)return!0;if(169==n||174==n||12349==n||12336==n||11093==n||11036==n||11035==n||11088==n)return!0}}}},n(t,["grayscaleMat",function(){return this.grayscaleMat=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]},"grayscaleFilter",function(){return this.grayscaleFilter=new hs(t.grayscaleMat)},"blackscaleMat",function(){return this.blackscaleMat=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]},"blackscaleFilter",function(){return this.blackscaleFilter=new hs(t.blackscaleMat)}]),t}()),R=function(){function t(){this._timer=null,this._serverDate=0,this.init()}var i;s(t,"utils.TimeManager");var n=t.prototype;return n.init=function(){this._serverDate=Math.floor((new Date).getTime()/1e3),e.timer.loop(1e3,this,this.onSecondUpdate)},n.onSecondUpdate=function(){this._serverDate++},r(0,n,"timer",function(){return this._timer}),r(0,n,"serverDate",function(){return this._serverDate},function(t){this._serverDate=t}),r(1,t,"unixtime",function(){return(new Date).getTime()}),r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t(new i)),t._instance}),r(1,t,"unixtimeSecond",function(){return Math.floor(t.unixtime/1e3)}),t._instance=null,t.__init$=function(){i=function(){function t(){}return s(t,""),t}()},t}(),w=function(){function t(t){if(this.id=null,this.customerId=null,this.customerName=null,this.userName=null,this.amount=null,this.transactionId=null,this.transactionSn=null,this.transactionType=null,this.transactionTypeName=null,this.transactionChannel=null,this.transactionTime=null,this.comment=null,null!=t)for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i])}return s(t,"model.users.CustomerTransactionVo"),t}(),O=function(){function t(t){if(this.accessory_code="",this.accessory_name="",this.accessory_color="",this.accessory_brand="",this.accessory_ssupplier="",this.measure_unit="",this.unit_weight=0,this.accessory_price=0,this.unique_code="",this.is_belongtoClient=!1,this.materialItemVo=null,null!=t)for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i])}s(t,"model.orderModel.AttchCatVo");var i=t.prototype;return i.cloneData=function(){var i=new t(this);return i},t}(),M=function(){function t(){this.itemId=null,this.itemCount=0}return s(t,"model.orderModel.PackageItem"),t}(),B=function(){function t(t){this.groupId=0,this.groupName=null,this.count=0,this.customerId=null,this.selected=!1,this.groupId=t.id,this.groupName=t.name,this.count=parseInt(t.expressCount),this.customerId=t.customerId}return s(t,"model.users.AddressGroupVo"),t}(),N=function(){function t(){this.finalWidth=0/0,this.finalHeight=0/0,this.fid=null,this.orderitemvo=null,this.holeMargin=1,this.leftHoles=[],this.rightHoles=[],this.upHoles=[],this.bottomHoles=[]}return s(t,"model.orderModel.DakouVo"),t}(),F=function(){function t(){this.finalWidth=0/0,this.finalHeighth=0/0,this.imageUrl=null,this.yixingImageUrl=null,this.partWhiteImageUrl=null,this.matType=1,this.backImageUrl=null,this.whiteFillType=0,this.colorType=0,this.imageType=0,this.mirrorImage=1}return s(t,"model.orderModel.MatProcEffectVo"),t.WHITE_FILL_TYPE_NONE=0,t.WHITE_FILL_TYPE_FULL_WHITE=1,t.WHITE_FILL_TYPE_PART_WHITE=2,t.WHITE_FILL_TYPE_COLOR_WHITE=3,t.COLOR_TYPE_NONE=0,t.COLOR_TYPE_FULL_COLOR=1,t.COLOR_TYPE_COLOR_WHITE=2,t.COLOR_TYPE_COLOR_WHITE_COLOR=3,t.COLOR_TYPE_WHITE_COLOR=4,t.COLOR_TYPE_PURE_WHITE=5,t.IMAGE_TYPE_NONE=0,t.IMAGE_TYPE_JPG=1,t.IMAGE_TYPE_JPEG=2,t.IMAGE_TYPE_PNG=3,t}(),V=function(){function t(t,i){this.indexNum=0,this.picinfo=null,this.materialID=0,this.materialName=null,this.orderData=null,this.orderPrice=0,this.noDiscountOrderPrice=0,this.manufacturer_code=null,this.manufacturer_name=null,this.productVo=null,this.techStr="",this.comment="",this.cuttype=0,this.cutnum=0,this.eachCutLength=null,this.horiCutNum=1,this.verCutNum=1,this.holeList=[],this.type=0,void 0===i&&(i=0),this.picinfo=t,this.type=i}return s(t,"model.orderModel.PicOrderItemVo"),t.PAINT_ITEM=0,t.LAILIAO_ITEM=1,t.DENGXIANG_ITEM=2,t}(),U=function(){function t(){}s(t,"utils.WaitingRespond");var i=t.prototype;return i.showWaitingView=function(i){void 0===i&&(i=15e3),null==t.gui.parent&&e.stage.addChild(t.gui),e.timer.clear(t,t.rotatecircle),e.timer.clear(t,t.requestTimeOut),e.timer.loop(10,t,t.rotatecircle),e.timer.once(i,t,t.requestTimeOut),t.gui.height=1920*Ti.clientHeight/Ti.clientWidth},i.hideWaitingView=function(){null!=t.gui.parent&&e.stage.removeChild(t.gui),e.timer.clear(t,t.rotatecircle),e.timer.clear(t,t.requestTimeOut)},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t,t.initView()),t._instance}),t.initView=function(){t.gui=new ma},t.rotatecircle=function(){t.gui.zhuanq.rotation+=10},t.requestTimeOut=function(){null!=t.gui.parent&&e.stage.removeChild(t.gui),e.timer.clear(t,t.rotatecircle)},t._instance=null,t.gui=null,t}(),W=function(){function t(){}s(t,"model.HttpRequestUtil");var i=t.prototype;return i.newRequest=function(t,i,n,s,r,a,o){function h(t,i,e,n,s,r){l.onHttpRequestError(t,i,e,n,s,r)}var l=this;void 0===r&&(r="text");var c=new Wn;if(c.on("progress",this,function(t){null!=a&&a(t)}),c.on("complete",this,this.onRequestCompete,[i,n,c]),e.timer.once(6e4,c,h,[t,i,n,s,r,c]),c.on("error",this,this.onHttpRequestError,[t,i,n,s,r,c]),null!=s)if("string"==typeof s);else if(s instanceof ArrayBuffer);else{var u=[];for(var d in s)u.push(d+"="+encodeURIComponent(s[d]));s=u.join("&")}console.log(t+s),c.retrytime=0,c.send(t,s,r?"post":"get","text",o)},i.onHttpRequestError=function(t,i,e){var n={status:10001};i&&e&&e.call(i,JSON.stringify(n))},i.onHttpRequestProgress=function(t){console.log(t)},i.onRequestCompete=function(t,i,n,s){U.instance.hideWaitingView();try{var r=JSON.parse(s);r&&r.hasOwnProperty("code")&&"0"!=r.code&&(null!=r.message?E.instance.openView("VIEW_POPUPDIALOG",!1,{tips:r.message,msg:"请求错误"}):E.showAlert(I.ErrorTips[r.status]),("203"==r.code||"210"==r.code)&&E.instance.openView("VIEW_lOGPANEL",!0))}catch(a){return E.instance.openView("VIEW_lOGPANEL",!0),void 0}e.timer.clearAll(n),t&&i&&i.call(t,s),n.offAll()},i.Request=function(t,i,e,n,s,r,a,o){void 0===s&&(s="get"),void 0===a&&(a=!0);var h=T.getLocalVar("loginTime","");return 0!=g.instance.loginTime&&h!=g.instance.loginTime.toString()?(E.showAlert("不能同时登陆两个账号，请重新登录"),g.instance.isLogin=!1,T.setLocalVar("useraccount",""),T.setLocalVar("userpwd",""),Ti.window.location.reload(),void 0):(a&&U.instance.showWaitingView(),this.newRequest(t,i,e,n,s,r,o),void 0)},i.RequestBin=function(t,i,e,n){this.newRequest(t,i,e,n,"arraybuffer")},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t.httpUrl="http://www.cmyk.com.cn/scfy/",t.registerUrl="sys/registerUser?",t.loginInUrl="sys/login?",t.enterUrl="sys/userEnter?",t.loginOutUrl="sys/logout?",t.getVerifyCode="sys/getMobileSmsCode?",t.createDirectory="fs/dir/create?",t.deleteDirectory="fs/dir/delete?",t.getDirectoryList="fs/list?",t.deletePic="fs/file/delete?",t.getChangePwdCode="account/getcode?",t.changePwdReqUrl="sys/updatePassword?",t.createGroup="sys/registerOrg?",t.addressManageUrl="group/opt-group-express?",t.addressListUrl="org/express/list?",t.addressAddUrl="org/express/add?",t.addressUpdateUrl="org/express/list?",t.addressDeleteUrl="org/express/delete?",t.setDefaultaddress="org/express/setDefault?",t.biggerPicUrl="https://pfyg-thumbnail-large-img.oss-cn-hangzhou.aliyuncs.com/",t.smallerrPicUrl="https://pfyg-thumbnail-small-img.oss-cn-hangzhou.aliyuncs.com/",t.originPicPicUrl="https://pfyg-normal-image.oss-cn-hangzhou.aliyuncs.com/",t.addCompanyInfo="group/create?",t.getAuditInfo="group/get-request?",t.getOuputAddr="business/manufacturers?",t.getProdCategory="business/prodcategory?",t.getProcessFlow="business/procflowlist?manufacturer_code=",t.GetAccCatlist="business/acccatlist?",t.GetAccessorylist="business/accessorylist?",t.getDeliveryList="business/deliverylist?",t.placeOrder="order/submit",t.updateOrder="order/update?",t.cancelOrder="order/cancel?",t.authorUploadUrl="fs/sts",t.noticeServerPreUpload="fs/file/prepareUpload?",t.getAddressFromServer="sys/areaInfo?",t.abortUpload="file/abortadd?",t.getMerchandiseList="business/merchandiselist?client_code=CL10600&",t.getManuFactureMatProcPrice="business/getmatprocprice?manufacturer_code=",t.getOrderState="business/getOrderItemStatus?",t.getOrderDeliveryState="business/getDeliveryOrder?",t.getCompanyInfo="org/getInfo",t.cancelExceptOrder="group/cancel-exception-order?",t.payExceptOrder="group/pay-exception-order?",t.chargeRequest="order/pay?",t.recharge="org/recharge?",t.publicChargeRequest="org/corporateRecharge?",t.getpublicChargeRequestList="org/getCorporateRechargeList?",t.payOrderByMoney="order/payWithBal?",t.getOrderRecordList="order/list?",t.deleteOrderList="account/delete-unpaid-order?",t.changeCompanyName="group/update_group?",t.getMyOrganize="org/dept/list?",t.createOrganize="org/dept/add?",t.deleteOrganize="org/dept/del?",t.joinOrganize="sys/joinOrg?",t.getJoinOrganizeRequest="org/getJoinList?",t.handleJoinOrganizeRequest="org/handleJoinReq?",t.getOrganizeMembers="org/dept/listMember?",t.moveOrganizeMembers="org/dept/setMember?",t.setOrganizeMemberAuthority="org/setPrivilege?",t.getOrganizeMemberAuthority="org/getPrivilege?",t.setYixingRelated="fs/img/setMask",t.setFanmianRelated="fs/img/setBack",t.setPartWhiteRelated="fs/img/setPartWhite",t.queryTransaction="account/listmoneylog",t.getChargeActivity="group/get-activities?",t.joinChargeActivity="group/join-activity?",t.payChargeActivity="group/pay-activity?",t.getChargeActivityRecord="group/get-joined-activities?",t.groupChargeActivity="account/recharge-activity-confirm-before?",t.cancelChargeActivityRecord="group/refund-activity?",t.getDeliveryTimeList="business/getAvailebleDeliveryDates?",t.preOccupyCapacity="business/setCapacityPreOccupy?",t.getProductUids="order/reserveItemSn?",t.extendStorage="fs/payForStorage?",t.extendStoragePrice="fs/getStoragePrice?",t.payextendStorage="fs/payForStorage?",t.getMaintainMsg="account/getnotice?",t.getDeliveryFee="group/get-delivery-fee?",t.getDeliveryFeeConfig="business/dynamicdeliveryfee?customer_code=",t.getDailyCost="group/get-factory-bill",t.getInvoiceEnterInfo="group/get-invoice-info",t.updateInvoiceEnterInfo="group/update-invoice-info",t.applyInvoice="group/apply-invoice",t.listInvoice="group/list-invoice",t.cancelInvoice="group/cancel-invoice",t.vipAddressManageUrl="org/express/group/pagingExpress?",t.vipAddressGroupManageUrl="org/express/group/add?",t.vipAddressGroupManageList="org/express/group/paging?",t.vipAddressGroupManageDelete="org/express/group/delete?",t.insertGroupAddress="org/express/group/addExpress?",t.removeGroupAddress="org/express/group/deleteExpress?",t.listGroupAddress="group/get-group-addr?",t.listGroupsAddress="org/express/group/listExpress?",t.addErrorLog="group/add-error-log?",t.getProductCategoryDefault="account/get-product-default-category?",t.updateProductCategoryDefault="account/update-product-default-category?",t.leaveGroupUrl="account/leave-group?",t.getFactoryFreezeBalance="business/getToBeTopupAmount?customer_code=",t.getProdListNew="business/listProduct?webCode=001&addressId=",t.getProcFlowNew="business/getProcFlow?prodCode=",t.getProdDiscount="business/getProdDiscount?webCode=001&",t.getProdAttribute="business/getProdAttributes?prod_code=",t.updateCompanyInfo="org/update?",t.getLatestPictures="fs/getLatestFile?",t.updateUserName="sys/updateUserName?",t.getAllAiFiles="fs/getAiFile?",t.queryDeliveryMap="order/delivery?",t.queryDeliverySn="order/deliveryRecord?",t.sendInvoiceRequest="sys/requestInvoice?",t.getClientOrderSource="business/getClientOrderSources?",t.getModelProducts="business/getModelProduct?",t.getModelProductData="business/getModelProdData?",t.photoAiHttpUrl="http://139.224.203.146:8083",t.getModelDetail="/model/modelDetail?",t.getTemplateInfo="/template/getTemplateById?",t.uploadMaterial="/material/uploadMaterial?",t.replaceMaterials="/template/replaceMaterials?",t.getModelOrderDetail="/model/getModelOrderDetail?",t.addCustomer="org/customer/add?",t.updateCustomer="org/customer/update?",t.listCustomer="org/customer/paging?",t.deleteCustomer="org/customer/delete?",t.addCustomerAddress="org/customer/express/add?",t.updateCustomerAddress="org/customer/express/update?",t.deleteCustomerAddress="org/customer/express/delete?",t.listCustomerAddress="org/customer/express/paging?",t.updateOrderSellPrice="order/updateSalesPrice?",t.addCollection="org/collection/add?",t.deleteCollection="org/collection/delete?",t.collectionList="org/customer/transaction/paging?",t.addBusinessMan="org/saler/add?",t.updateBusinessMan="org/customer/update?",t.listBusinessMan="org/saler/list?",t.deleteBusinessMan="org/saler/delete?",t.listOrderMakers="org/user/list?",t.writeOffOrders="order/clear?",t.tifAiSetting="fs/file/changeImg?",t.getDeaultDeliveryList="business/getDeliveryType?",t}(),H=function(){function t(){this.directoryList=null,this.curFileList=[],this.curSelectDir=null,this.haselectPic={},this.selectFolders=null,this.rootDir=null,this.curOperateFile=null,this.curOperateSelType=0,this.rootDir=new p({dirName:"根目录",dpath:"",dirId:"0"},0)}s(t,"model.picmanagerModel.DirectoryFileModel");var i=t.prototype;return i.addNewTopDir=function(t){this.curFileList.push(new p(t,0))},i.initCurDirFiles=function(t){this.curFileList=[];for(var i=t.data.subDir,e=0;e<i.length;e++)this.curFileList.push(new p(i[e],0));var n=t.data.files;for(e=0;e<n.length;e++)this.curFileList.push(new p(n[e],1));for(e=0;e<this.curFileList.length;e++)this.curFileList[e].initYixingData();for(var s in this.haselectPic)for(var r=0;r<this.curFileList.length;r++)this.curFileList[r].fid==s&&(this.haselectPic[s]=this.curFileList[r])},i.hasUnDealPic=function(){if(null!=this.curFileList)for(var t=0;t<this.curFileList.length;t++)if(1==this.curFileList[t].picType&&this.curFileList[t].isProcessing)return!0;return!1},i.getQiegeData=function(t){var i=this.curFileList;if(null!=i)for(var e=0;e<i.length;e++)if(i[e].fid==t)return[i[e].roadNum,i[e].roadLength,i[e].picWidth,i[e].picClass,i[e].unwhiteratio];return[0,0]},i.setYingxingImg=function(t,i){null==this.curOperateFile||this.haselectPic.hasOwnProperty(this.curOperateFile.fid)||(this.haselectPic[this.curOperateFile.fid]=this.curOperateFile);var e=!1,n={};null!=i?n[i.fid]=i:n=this.haselectPic;var s;for(var r in n)if(s=n[r],s.fid!=t.fid)if(0!=model.picmanagerModel.DirectoryFileModel.instance.curOperateSelType||!T.isFitYixing(s,t)||"0"!=s.yixingFid&&""!=s.yixingFid)if(1!=model.picmanagerModel.DirectoryFileModel.instance.curOperateSelType||!T.isFitFanmain(s,t)||"0"!=s.backFid&&""!=s.backFid){if(2==model.picmanagerModel.DirectoryFileModel.instance.curOperateSelType&&T.isFitYixing(s,t,2)&&("0"==s.partWhiteFid||""==s.partWhiteFid)){var a={fileId:s.fid,targetId:t.fid};W.instance.Request(W.httpUrl+"fs/img/setPartWhite",this,this.onSetRelatedBack,JSON.stringify(a),"post"),model.picmanagerModel.DirectoryFileModel.instance.curOperateFile=null,e=!0}}else{var a={fileId:s.fid,targetId:t.fid};W.instance.Request(W.httpUrl+"fs/img/setBack",this,this.onSetRelatedBack,JSON.stringify(a),"post"),model.picmanagerModel.DirectoryFileModel.instance.curOperateFile=null,e=!0}else{var a={fileId:s.fid,targetId:t.fid};W.instance.Request(W.httpUrl+"fs/img/setMask",this,this.onSetRelatedBack,JSON.stringify(a),"post"),model.picmanagerModel.DirectoryFileModel.instance.curOperateFile=null,e=!0}e||E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"图片尺寸不匹配"})},i.onSetRelatedBack=function(t){var i=JSON.parse(t);"0"==i.code&&(console.log("设置成功"),Ln.instance.event("UPDATE_FILE_LIST"))},r(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),G=function(){function t(){this.paramName=null,this.paramList=null,this.multypleType=!1}return s(t,"model.prodCustomerModel.ProdParamVo"),t}(),z=function(){function t(){this.tipspanel=null,this.tipsMsg="",this.tipspanel=new co,this.tipspanel.htmltxt.style.fontSize=18,this.tipspanel.htmltxt.style.font="SimHei";var t=new os("#B1B1B1",5,2,2);this.tipspanel.filters=[t]}s(t,"utils.TipImgUtils");var i=t.prototype;return i.setTipsContent=function(t,i){this.tipspanel.htmltxt.innerHTML=t,this.tipspanel.img.skin=i},i.showTips=function(t){null==this.tipspanel.parent&&e.stage.addChild(this.tipspanel),this.tipspanel.x=t.stageX+10,this.tipspanel.y=t.stageY+10},i.removeTips=function(){null!=this.tipspanel.parent&&this.tipspanel.removeSelf()},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t._instance=null,t}(),Y=function(){function t(i){this.matclassname="喷绘材料",this.childMatList=null,this.isMerchan=!1,this.nodeId=0,this.childCategoryList=null,this.defaultProductId=null,this.matclassname=i.prodCat_name,this.nodeId=i.node_id;var e=i.children;this.childCategoryList=[];for(var n=0;n<e.length;n++)this.childCategoryList.push(new t(e[n]))}return s(t,"model.orderModel.MatetialClassVo"),t}(),X=function(){function i(){this.tt=0/0,t.Laya3D?t.Laya3D.init(1280,832):"undefined"!=typeof Ti.window.orientation?e.init(1080,1920,e.WebGL):e.init(1920,1080,e.WebGL),e.stage.scaleMode="fixedwidth",e.stage.screenMode=S.screenMode,e.stage.alignV="top",e.stage.alignH="left",e.stage.alignH=Ti.width>e.stage.width?"center":"left",Li.exportSceneToJson=S.exportSceneToJson,(S.debug||"true"==en.getQueryString("debug"))&&e.enableDebugPanel(),S.physicsDebug&&e.PhysicsDebugDraw&&e.PhysicsDebugDraw.enable(),S.stat&&Ri.show(),e.alertGlobalError=!0,g.instance.curRandomStr="version.json?"+(new Date).getTime().toString(),Gi.enable(g.instance.curRandomStr,c.create(this,this.onVersionLoaded),2),e.stage.on("resize",this,this.onResizeBrower)}s(i,"Main");var n=i.prototype;return n.changeAligh=function(){Ti.width>e.stage.width&&"center"!=e.stage.alignH?e.stage.alignH="center":Ti.width<=e.stage.width&&"left"!=e.stage.alignH&&(e.stage.alignH="left")},n.startInit=function(){t.Laya3D?t.Laya3D.init(Ti.width,Ti.height):e.init(288,1620,e.WebGL),e.stage.scaleMode="noscale",e.stage.screenMode=S.screenMode,e.stage.alignV=S.alignV,e.stage.alignH="center",Li.exportSceneToJson=S.exportSceneToJson,(S.debug||"true"==en.getQueryString("debug"))&&e.enableDebugPanel(),S.physicsDebug&&e.PhysicsDebugDraw&&e.PhysicsDebugDraw.enable(),S.stat&&Ri.show(),e.alertGlobalError=!0,Gi.enable("version.json?"+(new Date).getTime().toString(),c.create(this,this.onVersionLoaded),2),e.stage.on("resize",this,this.onResizeBrower)},n.onVersionLoaded=function(){g.instance.version=e.loader.getRes(g.instance.curRandomStr),console.log("版本号:"+g.instance.version),e.loader.load([{url:"res/atlas/comp.atlas",type:"atlas"},{url:"res/atlas/commers.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/order1.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/upload1.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/usercenter1.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/mainpage.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/chargeact.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/uiCommonUpdate.atlas?"+g.instance.version,type:"atlas"},{url:"res/atlas/iconsNew.atlas?"+g.instance.version,type:"atlas"}],c.create(this,this.onLoadedComp),null,"atlas",1)},n.onLoadedComp=function(){this.onConfigLoaded()},n.onConfigLoaded=function(){var t=new Ti.window.URL(Ti.window.location.href),i=t.searchParams.get("orderID");console.log("id:"+i),W.httpUrl="../v2/",g.instance.configVersion=(new Date).getTime().toString(),e.loader.load([{url:"config.json?"+g.instance.configVersion,type:"json"}],c.create(this,this.onLoadedJsonConfigComp),null,"json")},n.onLoadedJsonConfigComp=function(){var t=e.loader.getRes("config.json?"+g.instance.configVersion);Ti.window.document.title=t.title,W.biggerPicUrl=t.biggerPicUrl,W.smallerrPicUrl=t.smallPicUrl,W.originPicPicUrl=t.originPicPicUrl,W.httpUrl=t.httpUrl,g.instance.clientCode=t.clientCode,E.instance.openView("VIEW_lOGPANEL")},n.onResizeBrower=function(){Ln.instance.event("BROWER_WINDOW_RESIZE"),e.timer.once(50,this,this.changeAligh)},i}(),q=function(){function t(t){this.procCat_Seq=0,this.procCat_Name="",this.selected=!1,this.nextMatList=null;for(var i in t)this.hasOwnProperty(i)&&(this[i]=t[i])}s(t,"model.orderModel.ProcessCatVo");var i=t.prototype;return i.cloneData=function(i,e){for(var n=new t(this),s=[],r=0;r<this.nextMatList.length;r++)s.push(this.nextMatList[r].cloneData(i,e));return n.nextMatList=s,n},i.initProcFlow=function(t){var i=t;this.nextMatList=[];for(var e=0;e<i.length;e++)"是"==i[e].is_startProc&&this.nextMatList.push(new y(i[e]))},i.resetData=function(){if(this.selected=!1,null!=this.nextMatList)for(var t=0;t<this.nextMatList.length;t++)this.nextMatList[t].resetData()},r(0,i,"isMandatory",function(){if(null==this.nextMatList)return!1;for(var t=0;t<this.nextMatList.length;t++)if(1==this.nextMatList[t].nextProcRequired)return!0;return!1}),t}(),J=function(){function t(){this.packageName="",this.address=null,this.itemlist=null,this.itemlist=[]}return s(t,"model.orderModel.PackageVo"),t}(),j=function(){function t(){}return s(t,"model.orderModel.ConstraintTool"),t.procShowType=function(i,e,n,s,r,a){void 0===a&&(a=0);var o=-1;i.length>0&&(o=t.getConditionResult(i,1,s,r,a)?1:0);var h=-1;n.length>0&&(h=t.getConditionResult(n,2,s,r,a)?1:0);var l=-1;return e.length>0&&(l=t.getConditionResult(e,3,s,r,a)?1:0),o+h+l==-3?"4":1==o?i[0].result:1==h?n[0].result:1==l?e[0].result:0==o&&"4"==i[0].result?"2":0==h&&"4"==n[0].result?"2":0==l&&"4"==e[0].result?"2":"4"},t.getConditionResult=function(i,e,n,s,r){void 0===r&&(r=0);for(var a={},o=0;o<i.length;o++){var h=t.getSingleConditionResult(i[o],e,n,s,r);a.hasOwnProperty(i[o].group)?a[i[o].group].push(h):(a[i[o].group]=[],a[i[o].group].push(h))}var l,c=[];for(var u in a)l=a[u],c.push(l.indexOf(!1)<0);return c.indexOf(!0)>=0},t.getSingleConditionResult=function(i,e,n,s,r){if(void 0===r&&(r=0),"img_file_type"==i.key)return"3"==i.operator?n.ordervo.picinfo.picClass.toUpperCase()==i.value.toUpperCase():n.ordervo.picinfo.picClass.toUpperCase()!=i.value.toUpperCase();var a=t.getValue(i.key,n,s)+r;return"1"==i.operator?a>=Number(i.value):"2"==i.operator?a<=Number(i.value):"3"==i.operator?a==Number(i.value):"4"==i.operator?a!=Number(i.value):"5"==i.operator&&1==e?t.containAttachOrMaterial(i.matCode,s):"6"==i.operator&&1==e?!t.containAttachOrMaterial(i.matCode,s):"5"==i.operator&&2==e?t.containProcess(i.procCode,s):"6"==i.operator&&2==e?!t.containProcess(i.procCode,s):!1},t.containAttachOrMaterial=function(i,e){var n=t.getAttach(e);return n.indexOf(i)>=0},t.getAttach=function(t){for(var i=[],e=0;e<t.length;e++)null!=t[e].selectAttachVoList&&t[e].selectAttachVoList.length>0&&i.push(t[e].selectAttachVoList[0].accessory_code);return i},t.containProcess=function(i,e){var n=t.getProcess(e);return n.indexOf(i)>=0},t.getProcess=function(t){for(var i=[],e=0;e<t.length;e++)i.push(t[e].procCode);return i},t.getValue=function(t,i){return"long_side"==t?Math.max(i.finalWidth,i.finalHeight):"width"==t?i.finalWidth:"height"==t?i.finalHeight:"length"==t?2*(i.finalWidth+i.finalHeight):"area"==t?i.finalWidth*i.finalHeight:"short_side"==t?Math.min(i.finalWidth,i.finalHeight):0},t.PIC_WIDTT="width",t.PIC_HEIGHT="height",t.PIC_LENGTH="length",t.PIC_AREA="area",t.LONG_SIDE="long_side",t.SHORT_SIDE="short_side",t.IMAGE_FILE_TYPE="img_file_type",t.GREATER="1",t.LESS="2",t.EQUAL="3",t.UNEQUAL="4",t.CONTAIN="5",t.UNCONTAIN="6",t.RESULT_VALUE_HIDE="1",t.RESULT_VALUE_FREEZE="2",t.RESULT_VALUE_SELETED="3",t.RESULT_VALUE_NORMAL="4",t.CONSTRAINT_TYPE_MATERIAL=1,t.CONSTRAINT_TYPE_PROCESS=2,t.CONSTRAINT_TYPE_PIC=3,t}(),K=(function(){function t(){this.prodImg=null,this.maskImg=null,this.customerImg=null,this.imgWidth=0/0,this.imgHeight=0/0,this.offsetX=0/0,this.offsetY=0/0,this.rotationAngle=0/0,this.prodWidth=0/0,this.prodHeight=0/0}return s(t,"model.prodCustomerModel.ProdCutomerItemVo"),t}(),function(){function t(){}return s(t,"model.orderModel.OrderConstant"),t.backSideUnSame=function(t){return"SPTE10330"==t||"1050"==t||"1136"==t||"SPTE230414160849011"==t?!0:!1},t.yiXingCutProcess=function(t){return"SPTE10420"==t||"1053"==t||"1055"==t||"SPTE230428161108291"==t?!0:!1},t.whitePartProcess=function(t){return"SPTE12530"==t||"1125"==t||"1130"==t||"SPTE231020150654326"==t||"SPTE221209161833556"==t?!0:!1},t.MEASURE_UNIT_AREA="平方米",t.MEASURE_UNIT_PERIMETER="米",t.MEASURE_UNIT_LONG_SIDE="长度米",t.MEASURE_UNIT_TOP_BOTTOM="上下米",t.MEASURE_UNIT_LEFT_RIGHT="左右米",t.MEASURE_UNIT_LEFT_HEIGHT="左边米",t.MEASURE_UNIT_RIGHT_HEIGHT="右边米",t.MEASURE_UNIT_TOP_LEN="上边米",t.MEASURE_UNIT_BOTTOM_LEN="下边米",t.MEASURE_UNIT_FOUR_SIDE="周长米",t.MEASURE_UNIT_LONG_TWO_SIDE="宽边米",t.MEASURE_UNIT_SHORT_SIDE="窄边米",t.MEASURE_UNIT_KILOMETER="千克",t.MEASURE_UNIT_KILO="克",t.MEASURE_UNIT_SINGLE_NUM="个",t.MEASURE_UNIT_SINGLE_SUIT="件",t.MEASURE_UNIT_SINGLE_TAO="套",t.ATTACH_NO="SPno",t.ATTACH_JPG="SPjpg",t.ATTACH_PNG="SPpng",t.ATTACH_PEIJIAN="SPpeijian",t.ATTACH_PEIJIAN_MAT="SPMat",t.ATTACH_PJZZ="SPzz",t.ATTACH_PJSM="SPsm",t.CUTOFF_H_V="SPpj",t.AVERAGE_CUTOFF="SPdfcq",t.RIGHTUP_DAKOU="SPDKWZ",t.FEIBIAO_DAKOU="SPFBdakou",t.DOUBLE_SIDE_SAME_TECHNO="SPTE10320",t.DOUBLE_SIDE_SAME_TECHNO_UV="SPTE230414160834510",t.DOUBLE_SIDE_UNSAME_TECHNO="SPTE10330",t.DOUBLE_SIDE_UNSAME_TECHNO_UV="SPTE230414160849011",t.DOUBLE_SIDE_UNSAME_TECHNO_1050="1050",t.DOUBLE_SIDE_UNSAME_TECHNO_1136="1136",t.UNNORMAL_CUT_TECHNO="SPTE10420",t.UNNORMAL_CUT_TECHNO_UV="SPTE230428161108291",t.UNNORMAL_CUT_TECHNO_1053="1053",t.UNNORMAL_CUT_TECHNO_1055="1055",t.AVGCUT_TECHNO="SPTE10160",t.PART_LAYOUT_WHITE="SPTE12530",t.PART_LAYOUT_WHITE_UV="SPTE221209161833556",t.PART_LAYOUT_WHITE_PINFU="SPTE231020150654326",t.PART_LAYOUT_WHITE_1125="1125",t.PART_LAYOUT_WHITE_1130="1130",t.NEED_PAITING_AREA="SPpymj",t.MANUFACTURE_TYPE_PAINT=2,t.MANUFACTURE_TYPE_TEXT_PAINT=5,t.PAINTING="Penyin",t.CUTTING="Zipai",t.MODEL_ORDER="Moxing",t.KAILIAO_ORDER="Kailiao",t.CHENGPIN_ORDER="Chengpin",t.CLOTHES_ORDER="Fuzhuang",t.BIAOPIN_ORDER="Biaopin",t.DENGXIANG_ORDER="Dengxiang",t.MAX_CUT_THRESHOLD=160,t.FUBAI_WOOD_MAX_WIDTH=120,t.DFCQ_MAX_WIDTH=240,t.DFCQ_MAX_HEIGHT=120,t.CUT_PRIOR_WIDTH=120,t.packagemaxCout=21,t.OCCUPY_CAPACITY_COUNTDOWN=150,t.DELIVERY_TYPE_BY_MANUFACTURER="送货上门",t.DELIVERY_TYPE_BY_SELF="工厂自提",t.DELIVERY_TYPE_BY_OTHER="专车配送",t.DELIVERY_TYPE_BY_NORMAL_DELIVERY="普通快递",t.MAX_ORDER_NUMER=100,n(t,["orderName",function(){return this.orderName={Penyin:"喷印",Kailiao:"开料",Biaopin:"标品",Dengxiang:"灯箱"}},"OUTPUT_ICON",function(){return this.OUTPUT_ICON=["star.png","circle.png","square.png"]},"OUTPUT_COLOR",function(){return this.OUTPUT_COLOR=["#98FB98","#BBFFFF","#FFE1FF"]}]),t}()),Z=function(){function t(t){this._color=null,this.setValue(t)}s(t,"laya.webgl.canvas.DrawStyle");var i=t.prototype;return i.setValue=function(t){this._color=t?t instanceof laya.utils.ColorUtils?t:o.create(t):o.create("#000000")},i.reset=function(){this._color=o.create("#000000")},i.toInt=function(){return this._color.numColor},i.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.ColorUtils?this._color.numColor===t.numColor:!1},i.toColorStr=function(){return this._color.strColor},t.create=function(i){if(i){var e=i instanceof laya.utils.ColorUtils?i:o.create(i);return e._drawStyle||(e._drawStyle=new t(i))}return t.DEFAULT},n(t,["DEFAULT",function(){return this.DEFAULT=new t("#000000")}]),t}(),$=function(){function t(){this.data=null}s(t,"laya.filters.ColorFilterAction");var i=t.prototype;return i.apply=function(t){var i=t.canvas,e=i.context;if(0==i.width||0==i.height)return i;for(var n,s=e.getImageData(0,0,i.width,i.height),r=s.data,a=0,o=r.length;o>a;a+=4)n=this.getColor(r[a],r[a+1],r[a+2],r[a+3]),0!=r[a+3]&&(r[a]=n[0],r[a+1]=n[1],r[a+2]=n[2],r[a+3]=n[3]);return e.putImageData(s,0,0),t},i.getColor=function(t,i,e,n){var s=[];if(this.data._mat&&this.data._alpha){var r=this.data._mat,a=this.data._alpha;s[0]=r[0]*t+r[1]*i+r[2]*e+r[3]*n+a[0],s[1]=r[4]*t+r[5]*i+r[6]*e+r[7]*n+a[1],s[2]=r[8]*t+r[9]*i+r[10]*e+r[11]*n+a[2],s[3]=r[12]*t+r[13]*i+r[14]*e+r[15]*n+a[3]}return s},t}(),Q=function(){function t(t,i,e){this._value=0,this._name2int=t,this._int2name=i,this._int2nameMap=e}s(t,"laya.webgl.shader.ShaderDefinesBase");var i=t.prototype;return i.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},i.addInt=function(t){return this._value|=t,this._value},i.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},i.isDefine=function(t){return(this._value&t)===t},i.getValue=function(){return this._value},i.setValue=function(t){this._value=t},i.toNameDic=function(){var i=this._int2nameMap[this._value];return i?i:t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,i,e,n){e[t]=i,n[i]=t},t._toText=function(t,i,e){var n=e[t];if(n)return n;for(var s={},r=1,a=0;32>a&&(r=1<<a,!(r>t));a++)if(t&r){var o=i[r];o&&(s[o]="")}return e[t]=s,s},t._toInt=function(t,i){for(var e=t.split("."),n=0,s=0,r=e.length;r>s;s++){var a=i[e[s]];if(!a)throw new Error("Defines to int err:"+t+"/"+e[s]);n|=a}return n},t}(),ti=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(12,!0)}s(t,"laya.layagl.cmdNative.RotateCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("RotateCmd",this)},r(0,i,"cmdID",function(){return"Rotate"}),r(0,i,"angle",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotX",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotY",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n){var s=ee.getItemByClass("RotateCmd",t),r=s._graphicsCmdEncoder=this._commandEncoder,a=s._paramData._float32Data;a[0]=i,a[1]=e,a[2]=n;var o=s._paramData.getPtrID();return ki.syncBufferToRenderThread(s._paramData),r.setGlobalValueEx(ei.GLOBALVALUE_MATRIX32,13,o,0),ki.syncBufferToRenderThread(r),s},t.ID="Rotate",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._line_vertNum=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_ibArray=[],this._line_vbArray=[]}s(t,"laya.layagl.cmdNative.DrawRectCmdNative");var i=t.prototype;return i.recover=function(){this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,this._graphicsCmdEncoder=null,ee.recover("DrawRectCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(i){this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=i;for(var e=this._paramData._int32Data,n=o.create(i),s=n.numColor,r=t._PARAM_LINE_VB_POS_,a=0;a<this._line_vertNum;a++)r++,r++,e[r++]=s;ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawRect"}),r(0,i,"fillColor",function(){return this._fillColor},function(i){if(this._fillColor=i,"string"==typeof i){var e=o.create(this._fillColor),n=e.numColor,s=this._paramData._int32Data;s[t._PARAM_VB_POS_+4]=n,s[t._PARAM_VB_POS_+10]=n,s[t._PARAM_VB_POS_+16]=n,s[t._PARAM_VB_POS_+22]=n}else s=this._paramData._int32Data,s[t._PARAM_VB_POS_+4]=i,s[t._PARAM_VB_POS_+10]=i,s[t._PARAM_VB_POS_+16]=i,s[t._PARAM_VB_POS_+22]=i;
ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"width",function(){return this._width},function(i){this._width=i;var e=this._paramData._float32Data;if(e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var n=t._PARAM_LINE_VB_POS_,s=0;s<this._line_vertNum;s++)e[n++]=this._line_vbArray[2*s],e[n++]=this._line_vbArray[2*s+1],n++}ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"x",function(){return this._x},function(i){this._x=i;var e=this._paramData._float32Data;if(e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[0]=this._x,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,this._linePoints[6]=this._x,this._linePoints[8]=this._x,Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,s=0;s<this._line_vertNum;s++)e[n++]=this._line_vbArray[2*s],e[n++]=this._line_vbArray[2*s+1],n++}ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"y",function(){return this._y},function(i){this._y=i;var e=this._paramData._float32Data;if(e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[1]=this._y,this._linePoints[3]=this._y,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,this._linePoints[9]=this._y-this._lineWidth/2,Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,s=0;s<this._line_vertNum;s++)e[n++]=this._line_vbArray[2*s],e[n++]=this._line_vbArray[2*s+1],n++}ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"height",function(){return this._height},function(i){this._height=i;var e=this._paramData._float32Data;if(e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,s=0;s<this._line_vertNum;s++)e[n++]=this._line_vbArray[2*s],e[n++]=this._line_vbArray[2*s+1],n++}ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(i){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=i,this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[9]=this._y-this._lineWidth/2,Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var e=this._paramData._float32Data,n=t._PARAM_LINE_VB_POS_,s=0;s<this._line_vertNum;s++)e[n++]=this._line_vbArray[2*s],e[n++]=this._line_vbArray[2*s+1],n++;ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r,a,h){var l=ee.getItemByClass("DrawRectCmd",t);l._graphicsCmdEncoder=this._commandEncoder,t._DRAW_RECT_LINE_CMD_ENCODER_||(t._DRAW_RECT_LINE_CMD_ENCODER_=ki.instance.createCommandEncoder(300,32,!0),t._DRAW_RECT_LINE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_IBELEMENT_OFFSET_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_RECT_LINE_CMD_ENCODER_)),t._DRAW_RECT_CMD_ENCODER_||(t._DRAW_RECT_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_RECT_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_RECT_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_RECT_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_RECT_CMD_ENCODER_)),l._paramData||(l._paramData=new ParamData(292,!0)),l._x=i,l._y=e,l._width=n,l._height=s,l._fillColor=r,l._lineColor=a,l._lineWidth=h;var c=o.create(r),u=c.numColor,d=l._paramData._float32Data,_=l._paramData._int32Data;_[t._PARAM_RECT_NUM_POS_]=1,_[t._PARAM_VB_SIZE_POS_]=96;var p=t._PARAM_VB_POS_;if(d[p++]=i,d[p++]=e,d[p++]=0,d[p++]=0,_[p++]=u,d[p++]=4294967295,d[p++]=i+n,d[p++]=e,d[p++]=0,d[p++]=0,_[p++]=u,d[p++]=4294967295,d[p++]=i+n,d[p++]=e+s,d[p++]=0,d[p++]=0,_[p++]=u,d[p++]=4294967295,d[p++]=i,d[p++]=e+s,d[p++]=0,d[p++]=0,_[p++]=u,d[p++]=4294967295,l._linePoints.push(i),l._linePoints.push(e),l._linePoints.push(i+n),l._linePoints.push(e),l._linePoints.push(i+n),l._linePoints.push(e+s),l._linePoints.push(i),l._linePoints.push(e+s),l._linePoints.push(i),l._linePoints.push(e-h/2),a){Di.createLine2(l._linePoints,l._line_ibArray,h,0,l._line_vbArray,!1),l._line_vertNum=l._linePoints.length,_[t._PARAM_LINE_VB_SIZE_POS_]=120;var f=o.create(a),m=f.numColor;p=t._PARAM_LINE_VB_POS_;for(var g=0;g<l._line_vertNum;g++)d[p++]=l._line_vbArray[2*g],d[p++]=l._line_vbArray[2*g+1],_[p++]=m;_[t._PARAM_LINE_IB_SIZE_POS_]=2*l._line_ibArray.length;var v=l._paramData._int16Data;p=2*t._PARAM_LINE_IB_POS_;for(var S=0;S<l._line_ibArray.length;S++)v[p++]=l._line_ibArray[S]}else{l._lineWidth=1;var y="#ffffff";for(Di.createLine2(l._linePoints,l._line_ibArray,l._lineWidth,0,l._line_vbArray,!1),l._line_vertNum=l._linePoints.length,_[t._PARAM_LINE_VB_SIZE_POS_]=120,f=o.create(y),m=f.numColor,p=t._PARAM_LINE_VB_POS_,g=0;g<l._line_vertNum;g++)d[p++]=l._line_vbArray[2*g],d[p++]=l._line_vbArray[2*g+1],_[p++]=m;for(_[t._PARAM_LINE_IB_SIZE_POS_]=2*l._line_ibArray.length,v=l._paramData._int16Data,p=2*t._PARAM_LINE_IB_POS_,S=0;S<l._line_ibArray.length;S++)v[p++]=l._line_ibArray[S]}return _[t._PARAM_LINE_VB_OFFSET_POS_]=0,_[t._PARAM_LINE_IB_OFFSET_POS_]=0,_[t._PARAM_LINE_IBELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(l._paramData),l._cmdCurrentPos=a?l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1):l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(l._graphicsCmdEncoder),l},t.ID="DrawRect",t._DRAW_RECT_CMD_ENCODER_=null,t._DRAW_RECT_LINE_CMD_ENCODER_=null,t._PARAM_RECT_NUM_POS_=0,t._PARAM_VB_SIZE_POS_=1,t._PARAM_VB_POS_=2,t._PARAM_LINE_VB_SIZE_POS_=26,t._PARAM_LINE_VB_POS_=27,t._PARAM_LINE_IB_SIZE_POS_=57,t._PARAM_LINE_IB_POS_=58,t._PARAM_LINE_VB_OFFSET_POS_=70,t._PARAM_LINE_IB_OFFSET_POS_=71,t._PARAM_LINE_IBELEMENT_OFFSET_POS_=72,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._textAlign=null,this._draw_texture_cmd_encoder_=ki.instance.createCommandEncoder(64,32,!0)}s(t,"laya.layagl.cmdNative.FillTextCmdNative");var i=t.prototype;return i.createFillText=function(i,e,n,s,r,a,h){var l=o.create(a),c=(l.numColor,{});c._curMat=new $e,c._italicDeg=0,c._drawTextureUseColor=4294967295,c.fillStyle=a,c._fillColor=4294967295,c.setFillColor=function(t){c._fillColor=t},c.getFillColor=function(){return c._fillColor},c.mixRGBandAlpha=function(t){return t},c._drawTextureM=function(t,e,n,s,r,a,o,h){i.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),i.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),i.useVDO(ei.VDO_MESHQUADTEXTURE),i.uniformEx(ei.GLOBALVALUE_VIEWS,0),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),i.uniformTexture(3,33984,t.bitmap._glTexture);var l=new Float32Array([e,n,h[0],h[1],0,0,e+s,n,h[2],h[3],0,0,e+s,n+r,h[4],h[5],0,0,e,n+r,h[6],h[7],0,0]),c=new Int32Array(l.buffer);c[4]=c[10]=c[16]=c[22]=4294967295,c[5]=c[11]=c[17]=c[23]=4294967295,i.setRectMesh(1,l,l.length),i.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),i.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(i)},t.cbook.filltext_native(c,e,null,n,s,r,a,null,0,h)},i.recover=function(){this._graphicsCmdEncoder=null,ee.recover("FillTextCmd",this)},r(0,i,"text",function(){return this._text},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._text=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"cmdID",function(){return"FillText"}),r(0,i,"font",function(){return this._font},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._font=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"color",function(){return this._color},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._color=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"textAlign",function(){return this._textAlign},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._textAlign=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"x",function(){return this._x},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._x=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"y",function(){return this._y},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._y=t,this.createFillText(i,this._text,this._x,this._y,this._font,this._color,this._textAlign),ki.syncBufferToRenderThread(i)}),t.create=function(i,e,n,s,r,a){t.cbook||new Error("Error:charbook not create!");var o=ee.getItemByClass("FillTextCmd",t),h=o._graphicsCmdEncoder=this._commandEncoder;return o._text=i,o._x=e,o._y=n,o._font=s,o._color=r,o._textAlign=a,o._draw_texture_cmd_encoder_.clearEncoding(),o.createFillText(o._draw_texture_cmd_encoder_,i,e,n,s,r,a),ki.syncBufferToRenderThread(o._draw_texture_cmd_encoder_),h.useCommandEncoder(o._draw_texture_cmd_encoder_.getPtrID(),-1,-1),ki.syncBufferToRenderThread(h),o},t.ID="FillText",n(t,["cbook",function(){return this.cbook=Cn.charbookInst}]),t}(),function(){function t(){this._commandEncoder=null}s(t,"laya.layagl.ConchGraphicsAdpt");var i=t.prototype;return i._createData=function(){this._commandEncoder=ki.instance.createCommandEncoder(128,64,!0)},i._clearData=function(){this._commandEncoder&&this._commandEncoder.clearEncoding()},i._destroyData=function(){this._commandEncoder&&(this._commandEncoder.clearEncoding(),this._commandEncoder=null)},t.__init__=function(){var i=te.prototype,e=t.prototype,n=["_createData","_clearData","_destroyData"],s=0,r=0;r=n.length;var a;for(s=0;r>s;s++)a=n[s],i[a]=e[a]},t}()),ii=function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}s(t,"laya.utils.StringKey");var i=t.prototype;return i.add=function(t){var i=this._strsToID[t];return null!=i?i:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},i.getID=function(t){var i=this._strsToID[t];return null==i?-1:i},i.getName=function(t){var i=this._idToStrs[t];return null==i?void 0:i},t}(),ei=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}s(t,"laya.layagl.cmdNative.ClipRectCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("ClipRectCmd",this)},r(0,i,"cmdID",function(){return"ClipRect"}),r(0,i,"width",function(){return 0},function(){}),r(0,i,"x",function(){return 0},function(){}),r(0,i,"y",function(){return 0},function(){}),r(0,i,"height",function(){return 0},function(){}),t.create=function(i,e,n,s){var r=ee.getItemByClass("ClipRectCmd",t);r._graphicsCmdEncoder=this._commandEncoder;var a=r._graphicsCmdEncoder,o=r._paramData._float32Data;o[0]=i,o[1]=e,o[2]=n,o[3]=s;var h=r._paramData.getPtrID();return ki.syncBufferToRenderThread(r._paramData),a.setClipValueEx(ei.GLOBALVALUE_CLIP_MAT_DIR,ei.GLOBALVALUE_CLIP_MAT_POS,ei.GLOBALVALUE_MATRIX32,h),ki.syncBufferToRenderThread(a),r},t.ID="ClipRect",t}(),function(){function t(){}return s(t,"laya.layagl.LayaNative2D"),t._init_simple_texture_cmdEncoder_=function(){t._SIMPLE_TEXTURE_CMDENCODER_=ki.instance.createCommandEncoder(172,32,!0),t._SIMPLE_TEXTURE_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_TEXTURE_CMDENCODER_.uniformTextureByParamData(0,4,8),t._SIMPLE_TEXTURE_CMDENCODER_.blendFuncByGlobalValue(laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_SRC,laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_DEST),t._SIMPLE_TEXTURE_CMDENCODER_.setRectMeshByParamData(12,20,16),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._SIMPLE_TEXTURE_CMDENCODER_)},t._init_simple_rect_cmdEncoder_=function(){t._SIMPLE_RECT_CMDENCODER_=ki.instance.createCommandEncoder(136,32,!0),t._SIMPLE_RECT_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_RECT_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_RECT_CMDENCODER_.setRectMeshByParamData(0,8,4),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._SIMPLE_RECT_CMDENCODER_)},t._init_rect_border_cmdEncoder_=function(){t._RECT_BORDER_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._RECT_BORDER_CMD_ENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWVG),t._RECT_BORDER_CMD_ENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHVG),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._RECT_BORDER_CMD_ENCODER_.setMeshByParamData(20,0,4,140,8,12,16),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._RECT_BORDER_CMD_ENCODER_)},t.__init__=function(){if(gi.isConchApp){var i=ki.instance;t.GLOBALVALUE_MATRIX32=i.addGlobalValueDefine(0,5126,6,new Float32Array([1,0,0,1,0,0])),t.GLOBALVALUE_DRAWTEXTURE_COLOR=i.addGlobalValueDefine(0,5124,1,new Uint32Array([4294967295])),t.GLOBALVALUE_ITALICDEG=i.addGlobalValueDefine(0,5126,1,new Float32Array([0])),t.GLOBALVALUE_CLIP_MAT_DIR=i.addGlobalValueDefine(0,5126,4,new Float32Array([1e6,0,0,1e6])),t.GLOBALVALUE_CLIP_MAT_POS=i.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_BLENDFUNC_SRC=i.addGlobalValueDefine(0,5124,1,new Int32Array([1])),t.GLOBALVALUE_BLENDFUNC_DEST=i.addGlobalValueDefine(0,5124,1,new Int32Array([771])),t.GLOBALVALUE_COLORFILTER_COLOR=i.addGlobalValueDefine(0,5126,16,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),t.GLOBALVALUE_COLORFILTER_ALPHA=i.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,1])),t.GLOBALVALUE_BLURFILTER_STRENGTH=i.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_BLURFILTER_BLURINFO=i.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_GLOWFILTER_COLOR=i.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO1=i.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO2=i.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),i.endGlobalValueDefine(),t.PROGRAMEX_DRAWTEXTURE=ki.instance.createProgramEx("/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}","/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;\nuniform vec4 u_blurInfo2;\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\n//FILLTEXTURE\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n#ifdef FILLTEXTURE	\n   vec4 color= texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n#else\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n#endif\n\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}","posuv,attribColor,attribFlags","size,clipMatDir,clipMatPos,texture,colorMat,colorAlpha,strength_sig2_2sig2_gauss1,blurInfo,u_color,u_blurInfo1,u_blurInfo2"),t.PROGRAMEX_DRAWVG=ki.instance.createProgramEx("attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}","precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}","position,attribColor","size,clipMatDir,clipMatPos"),t.PROGRAMEX_DRAWPARTICLE=ki.instance.createProgramEx("attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\nuniform vec2 size;\nuniform mat4 u_mmat;\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n	\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n   return  vec4(position,1.0);\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    return size;\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n	vec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n	\n    mat4 mat=u_mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n    gl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n","#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{	\n	gl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n	gl_FragColor.xyz *= v_Color.w;\n}","a_CornerTextureCoordinate,a_Position,a_Velocity,a_StartColor,a_EndColor,a_SizeRotation,a_Radius,a_Radian,a_AgeAddScale,a_Time","u_CurrentTime,u_Duration,u_EndVelocity,u_Gravity,size,u_mmat,u_texture"),t.VDO_MESHQUADTEXTURE=i.createVDO(new Int32Array([5126,0,4,24,5121,16,4,24,5121,20,4,24])),t.VDO_MESHVG=i.createVDO(new Int32Array([5126,0,2,12,5121,8,4,12])),t.VDO_MESHPARTICLE=i.createVDO(new Int32Array([5126,0,4,116,5126,16,3,116,5126,28,3,116,5126,40,4,116,5126,56,4,116,5126,72,3,116,5126,84,2,116,5126,92,4,116,5126,108,1,116,5126,112,1,116])),t._init_simple_texture_cmdEncoder_(),t._init_simple_rect_cmdEncoder_(),t._init_rect_border_cmdEncoder_(),t.SHADER_MACRO_COLOR_FILTER=ki.instance.defineShaderMacro("#define COLOR_FILTER",[{uname:4,id:t.GLOBALVALUE_COLORFILTER_COLOR},{uname:5,id:t.GLOBALVALUE_COLORFILTER_ALPHA}]),t.SHADER_MACRO_BLUR_FILTER=ki.instance.defineShaderMacro("#define BLUR_FILTER",[{uname:6,id:t.GLOBALVALUE_BLURFILTER_STRENGTH},{uname:7,id:t.GLOBALVALUE_BLURFILTER_BLURINFO}]),t.SHADER_MACRO_GLOW_FILTER=ki.instance.defineShaderMacro("#define GLOW_FILTER",[{uname:8,id:t.GLOBALVALUE_GLOWFILTER_COLOR},{uname:9,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO1},{uname:10,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO2}]),$i.__init__(),$i.__init_END_(),new Cn,Si.charRender=new Zn}},t._SIMPLE_TEXTURE_CMDENCODER_=null,t._SIMPLE_RECT_CMDENCODER_=null,t._RECT_BORDER_CMD_ENCODER_=null,t.PROGRAMEX_DRAWTEXTURE=0,t.PROGRAMEX_DRAWVG=0,t.PROGRAMEX_DRAWRECT=0,t.PROGRAMEX_DRAWPARTICLE=0,t.VDO_MESHQUADTEXTURE=0,t.VDO_MESHVG=0,t.VDO_MESHPARTICLE=0,t.GLOBALVALUE_VIEWS=0,t.GLOBALVALUE_MATRIX32=0,t.GLOBALVALUE_DRAWTEXTURE_COLOR=0,t.GLOBALVALUE_ITALICDEG=0,t.GLOBALVALUE_CLIP_MAT_DIR=0,t.GLOBALVALUE_CLIP_MAT_POS=0,t.GLOBALVALUE_BLENDFUNC_SRC=0,t.GLOBALVALUE_BLENDFUNC_DEST=0,t.GLOBALVALUE_COLORFILTER_COLOR=0,t.GLOBALVALUE_COLORFILTER_ALPHA=0,t.GLOBALVALUE_BLURFILTER_STRENGTH=0,t.GLOBALVALUE_BLURFILTER_BLURINFO=0,t.SHADER_MACRO_COLOR_FILTER=0,t.SHADER_MACRO_BLUR_FILTER=0,t.SHADER_MACRO_GLOW_FILTER=0,t.GLOBALVALUE_GLOWFILTER_COLOR=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO1=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO2=0,t}()),ni=(function(){function t(){this._draw_texture_cmd_encoder_=ki.instance.createCommandEncoder(64,32,!0)}s(t,"laya.layagl.cmdNative.FillBorderWordsCmdNative");var i=t.prototype;return i.createFillBorderText=function(i,e,n,s,r,a,h,l){var c=o.create(a),u=(c.numColor,{});u._curMat=new $e,u._italicDeg=0,u._drawTextureUseColor=4294967295,u.fillStyle=a,u._fillColor=4294967295,u.setFillColor=function(t){u._fillColor=t},u.getFillColor=function(){return u._fillColor},u.mixRGBandAlpha=function(t){return t},u._drawTextureM=function(t,e,n,s,r,a,o,h){i.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),i.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),i.useVDO(ei.VDO_MESHQUADTEXTURE),i.uniformEx(ei.GLOBALVALUE_VIEWS,0),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),i.uniformTexture(3,33984,t.bitmap._glTexture);var l=new Float32Array([e,n,h[0],h[1],0,0,e+s,n,h[2],h[3],0,0,e+s,n+r,h[4],h[5],0,0,e,n+r,h[6],h[7],0,0]),c=new Int32Array(l.buffer);c[4]=c[10]=c[16]=c[22]=4294967295,c[5]=c[11]=c[17]=c[23]=4294967295,i.setRectMesh(1,l,l.length),i.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),i.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(i)},t.cbook.filltext_native(u,null,e,n,s,r,a,h,l,null,0)},i.recover=function(){this._graphicsCmdEncoder=null,this.words=null,ee.recover("FillBorderWordsCmd",this)},r(0,i,"cmdID",function(){return"FillBorderWords"}),t.create=function(i,e,n,s,r,a,o){t.cbook||new Error("Error:charbook not create!");var h=ee.getItemByClass("FillBorderWordsCmd",t),l=h._graphicsCmdEncoder=this._commandEncoder;return h.words=i,h.x=e,h.y=n,h.font=s,h.color=r,h.strokeColor=a,h.strokeWidth=o,h._draw_texture_cmd_encoder_.clearEncoding(),h.createFillBorderText(h._draw_texture_cmd_encoder_,i,e,n,s,r,a,o),ki.syncBufferToRenderThread(h._draw_texture_cmd_encoder_),l.useCommandEncoder(h._draw_texture_cmd_encoder_.getPtrID(),-1,-1),ki.syncBufferToRenderThread(l),h
},t.ID="FillBorderWords",n(t,["cbook",function(){return this.cbook=Cn.charbookInst}]),t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this.vbBuffer=null,this._template=null,this._floatCountPerVertex=29,this._firstNewElement=0,this._firstFreeElement=0,this._firstActiveElement=0,this._firstRetiredElement=0,this._maxParticleNum=0}s(t,"laya.layagl.cmdNative.DrawParticleCmdNative");var i=t.prototype;return i.updateParticle=function(){if(this._template.texture){this._template.updateParticleForNative();var i=this._template.sv,e=this._paramData._int32Data,n=this._paramData._float32Data;n[t._PARAM_CURRENTTIME_POS_]=i.u_CurrentTime,n[t._PARAM_DURATION_POS_]=i.u_Duration,n[t._PARAM_ENDVEL_POS_]=i.u_EndVelocity,n[t._PARAM_GRAVITY_POS_]=i.u_Gravity[0],n[t._PARAM_GRAVITY_POS_+1]=i.u_Gravity[1],n[t._PARAM_GRAVITY_POS_+2]=i.u_Gravity[2],i.size[0]=fn.width,i.size[1]=fn.height,n[t._PARAM_SIZE_POS_]=i.size[0],n[t._PARAM_SIZE_POS_+1]=i.size[1],n[t._PARAM_MAT_POS_]=1,n[t._PARAM_MAT_POS_+1]=0,n[t._PARAM_MAT_POS_+2]=0,n[t._PARAM_MAT_POS_+3]=0,n[t._PARAM_MAT_POS_+4]=0,n[t._PARAM_MAT_POS_+5]=1,n[t._PARAM_MAT_POS_+6]=0,n[t._PARAM_MAT_POS_+7]=0,n[t._PARAM_MAT_POS_+8]=0,n[t._PARAM_MAT_POS_+9]=0,n[t._PARAM_MAT_POS_+10]=1,n[t._PARAM_MAT_POS_+11]=0,n[t._PARAM_MAT_POS_+12]=0,n[t._PARAM_MAT_POS_+13]=0,n[t._PARAM_MAT_POS_+14]=0,n[t._PARAM_MAT_POS_+15]=1,e[t._PARAM_TEXTURE_LOC_POS_]=33984,e[t._PARAM_TEXTURE_POS_]=this._template.texture.bitmap._glTexture.id,this.vbBuffer=this._template.getConchMesh(),this._firstNewElement=this._template.getFirstNewElement(),this._firstFreeElement=this._template.getFirstFreeElement(),this._firstActiveElement=this._template.getFirstActiveElement(),this._firstRetiredElement=this._template.getFirstRetiredElement();var s=0,r=0,a=0,o=0,h=0,l=0;this._firstActiveElement!=this._firstFreeElement&&(this._firstActiveElement<this._firstFreeElement?(e[t._PARAM_REGDATA_POS_]=1,h=this._firstFreeElement-this._firstActiveElement,s=(this._firstFreeElement-this._firstActiveElement)*this._floatCountPerVertex*4*4,a=this._firstActiveElement*this._floatCountPerVertex*4*4):(e[t._PARAM_REGDATA_POS_]=0,h=this._maxParticleNum-this._firstActiveElement,s=(this._maxParticleNum-this._firstActiveElement)*this._floatCountPerVertex*4*4,a=this._firstActiveElement*this._floatCountPerVertex*4*4,this._firstFreeElement>0?(l=this._firstFreeElement,r=this._firstFreeElement*this._floatCountPerVertex*4*4,o=0):e[t._PARAM_REGDATA_POS_]=1)),e[t._PARAM_VB1_POS_]=this.vbBuffer.getPtrID(),e[t._PARAM_RECT1_NUM_POS_]=h,e[t._PARAM_VB1_SIZE_POS_]=s,e[t._PARAM_VB1_OFFSET_POS_]=a,ki.syncBufferToRenderThread(this.vbBuffer),r>0&&(e[t._PARAM_VB2_POS_]=this.vbBuffer.getPtrID(),e[t._PARAM_RECT2_NUM_POS_]=l,e[t._PARAM_VB2_SIZE_POS_]=r,e[t._PARAM_VB2_OFFSET_POS_]=o),ki.syncBufferToRenderThread(this._paramData),this._template.addDrawCounter()}},i.recover=function(){this._template=null,ee.recover("DrawParticleCmd",this)},r(0,i,"cmdID",function(){return"DrawParticleCmd"}),t.create=function(i){var e=ee.getItemByClass("DrawParticleCmd",t);e._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PARTICLE_CMD_ENCODER_||(t._DRAW_PARTICLE_CMD_ENCODER_=ki.instance.createCommandEncoder(284,32,!0),t._DRAW_PARTICLE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PARTICLE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.useVDO(ei.VDO_MESHPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(0,4*t._PARAM_CURRENTTIME_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(1,4*t._PARAM_DURATION_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(2,4*t._PARAM_ENDVEL_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(3,4*t._PARAM_GRAVITY_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(4,4*t._PARAM_SIZE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(5,4*t._PARAM_MAT_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_TEXTURE_UNIFORMLOC_POS_,4*t._PARAM_TEXTURE_LOC_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT1_NUM_POS_,4*t._PARAM_VB1_POS_,4*t._PARAM_VB1_SIZE_POS_,4*t._PARAM_VB1_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,1,7),t._DRAW_PARTICLE_CMD_ENCODER_.loadDataToRegByParamData(0,4*t._PARAM_REGDATA_POS_,4),t._DRAW_PARTICLE_CMD_ENCODER_.ifGreater0(0,2),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT2_NUM_POS_,4*t._PARAM_VB2_POS_,4*t._PARAM_VB2_SIZE_POS_,4*t._PARAM_VB2_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,1,7),ki.syncBufferToRenderThread(t._DRAW_PARTICLE_CMD_ENCODER_)),e._paramData||(e._paramData=new ParamData(144,!0)),e._template=i,e._maxParticleNum=i.settings.maxPartices;var n=e._paramData._int32Data,s=(i._sv,e._paramData._float32Data),r=0;for(s[t._PARAM_CURRENTTIME_POS_]=-1,s[t._PARAM_DURATION_POS_]=-1,s[t._PARAM_ENDVEL_POS_]=-1,s[t._PARAM_GRAVITY_POS_]=-1,s[t._PARAM_GRAVITY_POS_+1]=-1,s[t._PARAM_GRAVITY_POS_+2]=-1,s[t._PARAM_SIZE_POS_]=-1,s[t._PARAM_SIZE_POS_+1]=-1,r=0;16>r;r++)s[t._PARAM_MAT_POS_+r]=-1;return n[t._PARAM_TEXTURE_LOC_POS_]=-1,n[t._PARAM_TEXTURE_POS_]=-1,n[t._PARAM_TEXTURE_UNIFORMLOC_POS_]=6,n[t._PARAM_REGDATA_POS_]=0,n[t._PARAM_VB1_POS_]=-1,n[t._PARAM_VB2_POS_]=-1,n[t._PARAM_VB1_SIZE_POS_]=-1,n[t._PARAM_VB2_SIZE_POS_]=-1,n[t._PARAM_RECT1_NUM_POS_]=-1,n[t._PARAM_RECT2_NUM_POS_]=-1,ki.syncBufferToRenderThread(e._paramData),e._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PARTICLE_CMD_ENCODER_.getPtrID(),e._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(e._graphicsCmdEncoder),e},t.ID="DrawParticleCmd",t._DRAW_PARTICLE_CMD_ENCODER_=null,t._PARAM_VB1_POS_=0,t._PARAM_VB2_POS_=1,t._PARAM_VB1_SIZE_POS_=2,t._PARAM_VB2_SIZE_POS_=3,t._PARAM_CURRENTTIME_POS_=4,t._PARAM_DURATION_POS_=5,t._PARAM_ENDVEL_POS_=6,t._PARAM_GRAVITY_POS_=7,t._PARAM_SIZE_POS_=10,t._PARAM_MAT_POS_=12,t._PARAM_TEXTURE_LOC_POS_=28,t._PARAM_TEXTURE_POS_=29,t._PARAM_REGDATA_POS_=30,t._PARAM_TEXTURE_UNIFORMLOC_POS_=31,t._PARAM_RECT1_NUM_POS_=32,t._PARAM_RECT2_NUM_POS_=33,t._PARAM_VB1_OFFSET_POS_=34,t._PARAM_VB2_OFFSET_POS_=35,t}(),function(){function t(){this._cacheBoundsType=!1}s(t,"laya.display.GraphicsBounds");var i=t.prototype;return i.destroy=function(){this._graphics=null,this._cacheBoundsType=!1,this._temp&&(this._temp.length=0),this._rstBoundPoints&&(this._rstBoundPoints.length=0),this._bounds&&this._bounds.recover(),this._bounds=null,ee.recover("GraphicsBounds",this)},i.reset=function(){this._temp&&(this._temp.length=0)},i.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=on._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},i.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=en.copyArray(this._rstBoundPoints,this._temp)},i._getCmdPoints=function(i){void 0===i&&(i=!1);var e,n=(gi._context,this._graphics.cmds);if(e=this._temp||(this._temp=[]),e.length=0,n||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),n=t._tempCmds),!n)return e;var s=t._tempMatrixArrays;s.length=0;var r=t._initMatrix;r.identity();for(var a,o,h=t._tempMatrix,l=0,c=n.length;c>l;l++)switch(a=n[l],a.cmdID){case"Alpha":s.push(r),r=r.clone();break;case"Restore":r=s.pop();break;case"Scale":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.scale(a.scaleX,a.scaleY),h.translate(a.pivotX,a.pivotY),this._switchMatrix(r,h);break;case"Rotate":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.rotate(a.angle),h.translate(a.pivotX,a.pivotY),this._switchMatrix(r,h);break;case"Translate":h.identity(),h.translate(a.tx,a.ty),this._switchMatrix(r,h);break;case"Transform":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.concat(a.matrix),h.translate(a.pivotX,a.pivotY),this._switchMatrix(r,h);break;case"DrawImage":case"FillTexture":t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),r);break;case"DrawTexture":r.copyTo(h),a.matrix&&h.concat(a.matrix),t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),h);break;case"DrawImage":if(o=a.texture,i)a.width&&a.height?t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),r):t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,o.width,o.height),r);else{var u=(a.width||o.sourceWidth)/o.width,d=(a.height||o.sourceHeight)/o.height,_=u*o.sourceWidth,p=d*o.sourceHeight,f=o.offsetX>0?o.offsetX:0,m=o.offsetY>0?o.offsetY:0;f*=u,m*=d,t._addPointArrToRst(e,on._getBoundPointS(a.x-f,a.y-m,_,p),r)}break;case"FillTexture":a.width&&a.height?t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),r):(o=a.texture,t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,o.width,o.height),r));break;case"DrawTexture":var g;a.matrix?(r.copyTo(h),h.concat(a.matrix),g=h):g=r,i?a.width&&a.height?t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),g):(o=a.texture,t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,o.width,o.height),g)):(o=a.texture,u=(a.width||o.sourceWidth)/o.width,d=(a.height||o.sourceHeight)/o.height,_=u*o.sourceWidth,p=d*o.sourceHeight,f=o.offsetX>0?o.offsetX:0,m=o.offsetY>0?o.offsetY:0,f*=u,m*=d,t._addPointArrToRst(e,on._getBoundPointS(a.x-f,a.y-m,_,p),g));break;case"DrawRect":t._addPointArrToRst(e,on._getBoundPointS(a.x,a.y,a.width,a.height),r);break;case"DrawCircle":t._addPointArrToRst(e,on._getBoundPointS(a.x-a.radius,a.y-a.radius,a.radius+a.radius,a.radius+a.radius),r);break;case"DrawLine":t._tempPoints.length=0;var v=0/0;v=.5*a.lineWidth,a.fromX==a.toX?t._tempPoints.push(a.fromX+v,a.fromY,a.toX+v,a.toY,a.fromX-v,a.fromY,a.toX-v,a.toY):a.fromY==a.toY?t._tempPoints.push(a.fromX,a.fromY+v,a.toX,a.toY+v,a.fromX,a.fromY-v,a.toX,a.toY-v):t._tempPoints.push(a.fromX,a.fromY,a.toX,a.toY),t._addPointArrToRst(e,t._tempPoints,r);break;case"DrawCurves":t._addPointArrToRst(e,bn.I.getBezierPoints(a.points),r,a.x,a.y);break;case"DrawLines":case"DrawPoly":t._addPointArrToRst(e,a.points,r,a.x,a.y);break;case"DrawPath":t._addPointArrToRst(e,this._getPathPoints(a.paths),r,a.x,a.y);break;case"DrawPie":t._addPointArrToRst(e,this._getPiePoints(a.x,a.y,a.radius,a.startAngle,a.endAngle),r)}return e.length>200?e=en.copyArray(e,on._getWrapRec(e)._getBoundPoints()):e.length>8&&(e=Ei.scanPList(e)),e},i._switchMatrix=function(t,i){i.concat(t),i.copyTo(t)},i._getPiePoints=function(i,e,n,s,r){var a=t._tempPoints;t._tempPoints.length=0,a.push(i,e);var o=Math.PI/10,h=0/0;for(h=s;r>h;h+=o)a.push(i+n*Math.cos(h),e+n*Math.sin(h));return r!=h&&a.push(i+n*Math.cos(r),e+n*Math.sin(r)),a},i._getPathPoints=function(i){var e=0,n=0,s=t._tempPoints;s.length=0,n=i.length;var r;for(e=0;n>e;e++)r=i[e],r.length>1&&(s.push(r[1],r[2]),r.length>3&&s.push(r[3],r[4]));return s},t.create=function(){return ee.getItemByClass("GraphicsBounds",t)},t._addPointArrToRst=function(i,e,n,s,r){void 0===s&&(s=0),void 0===r&&(r=0);var a=0,o=0;for(o=e.length,a=0;o>a;a+=2)t._addPointToRst(i,e[a]+s,e[a+1]+r,n)},t._addPointToRst=function(t,i,e,n){var s=Oe.TEMP;s.setTo(i?i:0,e?e:0),n.transformPoint(s),t.push(s.x,s.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],n(t,["_tempMatrix",function(){return this._tempMatrix=new $e},"_initMatrix",function(){return this._initMatrix=new $e}]),t}()),si=function(){function t(){this.reset()}s(t,"laya.display.css.SpriteStyle");var i=t.prototype;return i.reset=function(){return this.scaleX=this.scaleY=1,this.skewX=this.skewY=0,this.pivotX=this.pivotY=this.rotation=0,this.alpha=1,this.scrollRect&&this.scrollRect.recover(),this.scrollRect=null,this.viewport&&this.viewport.recover(),this.viewport=null,this.hitArea=null,this.dragging=null,this.blendMode=null,this},i.recover=function(){this!==t.EMPTY&&ee.recover("SpriteStyle",this.reset())},t.create=function(){return ee.getItemByClass("SpriteStyle",t)},t.EMPTY=new t,t}(),ri=function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new ue,this._matrix=new $e,this._point=new Oe,this._rect=new on,this._prePoint=new Oe,this._curTouchID=0/0}s(t,"laya.events.MouseManager");var i=t.prototype;return i.__init__=function(i,e){var n=this;this._stage=i;var s=this;e.oncontextmenu=function(){return t.enabled?!1:void 0},e.addEventListener("mousedown",function(i){t.enabled&&(Ti.onIE||i.preventDefault(),s.mouseDownTime=Ti.now(),n.runEvent(i))}),e.addEventListener("mouseup",function(i){t.enabled&&(i.preventDefault(),s.mouseDownTime=-Ti.now(),n.runEvent(i))},!0),e.addEventListener("mousemove",function(i){if(t.enabled){i.preventDefault();var e=Ti.now();if(e-s._lastMoveTimer<10)return;s._lastMoveTimer=e,n.runEvent(i)}},!0),e.addEventListener("mouseout",function(i){t.enabled&&n.runEvent(i)}),e.addEventListener("mouseover",function(i){t.enabled&&n.runEvent(i)}),e.addEventListener("touchstart",function(i){t.enabled&&(t._isFirstTouch||ka.isInputting||i.preventDefault(),s.mouseDownTime=Ti.now(),n.runEvent(i))}),e.addEventListener("touchend",function(i){t.enabled?(t._isFirstTouch||ka.isInputting||i.preventDefault(),t._isFirstTouch=!1,s.mouseDownTime=-Ti.now(),n.runEvent(i)):n._curTouchID=0/0},!0),e.addEventListener("touchmove",function(i){t.enabled&&(i.preventDefault(),n.runEvent(i))},!0),e.addEventListener("touchcancel",function(i){t.enabled?(i.preventDefault(),n.runEvent(i)):n._curTouchID=0/0},!0),e.addEventListener("mousewheel",function(i){t.enabled&&n.runEvent(i)}),e.addEventListener("DOMMouseScroll",function(i){t.enabled&&n.runEvent(i)})},i.initEvent=function(t,i){var e=this;e._event._stoped=!1,e._event.nativeEvent=i||t,e._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),e.mouseX=this._point.x,e.mouseY=this._point.y,e._event.touchId=t.identifier||0,this._tTouchID=e._event.touchId;var n;n=In.I._event,n._stoped=!1,n.nativeEvent=e._event.nativeEvent,n.touchId=e._event.touchId},i.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var i=In.I.getLastOvers(),e=0,n=i.length;n>e;e++){var s=i[e];s.event("mousewheel",this._event.setTo("mousewheel",s,this._target))}},i.onMouseMove=function(t){In.I.onMouseMove(t,this._tTouchID)},i.onMouseDown=function(t){if(ka.isInputting&&e.stage.focus&&e.stage.focus.focus&&!e.stage.focus.contains(this._target)){var i=e.stage.focus._tf||e.stage.focus,n=t._tf||t;n instanceof laya.display.Input&&n.multiline==i.multiline?i._focusOut():i.focus=!1}In.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},i.onMouseUp=function(t){In.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},i.check=function(t,i,e,n){this._point.setTo(i,e),t.fromParentPoint(this._point),i=this._point.x,e=this._point.y;var s=t._style.scrollRect;if(s&&(this._rect.setTo(s.x,s.y,s.width,s.height),!this._rect.contains(i,e)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,i,e))return!1;for(var r=t._children.length-1;r>-1;r--){var a=t._children[r];if(!a.destroyed&&a._mouseState>1&&a._visible&&this.check(a,i,e,n))return!0}}var o=!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent?this.hitTest(t,i,e):!0;return o?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),o},i.hitTest=function(t,i,e){var n=!1;t.scrollRect&&(i-=t._style.scrollRect.x,e-=t._style.scrollRect.y);var s=t._style.hitArea;return s&&s._hit?s.contains(i,e):((t.width>0&&t.height>0||t.mouseThrough||s)&&(n=t.mouseThrough?t.getGraphicBounds().contains(i,e):(s?s:this._rect.setTo(0,0,t.width,t.height)).contains(i,e)),n)},i.runEvent=function(i){var e,n=this,s=0,r=0;switch("mousemove"!==i.type&&(this._prePoint.x=this._prePoint.y=-1e6),i.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(n._isLeftMouse=0===i.button,n.initEvent(i),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"mouseup":n._isLeftMouse=0===i.button,n.initEvent(i),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-i.clientX)+Math.abs(this._prePoint.y-i.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=i.clientX,this._prePoint.y=i.clientY,n.initEvent(i),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,n._isLeftMouse=!0;var a=i.changedTouches;for(s=0,r=a.length;r>s;s++)e=a[s],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=e.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[e.identifier]=this._id++,n.initEvent(e,i),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"touchend":case"touchcancel":t._isTouchRespond=!0,n._isLeftMouse=!0;var o=i.changedTouches;for(s=0,r=o.length;r>s;s++)if(e=o[s],t.multiTouchEnabled||e.identifier==this._curTouchID){this._curTouchID=0/0,n.initEvent(e,i);var h=!1;h=n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp),h||n.onMouseUp(null)}break;case"touchmove":var l=i.changedTouches;for(s=0,r=l.length;r>s;s++)e=l[s],(t.multiTouchEnabled||e.identifier==this._curTouchID)&&(n.initEvent(e,i),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":n.checkMouseWheel(i);break;case"mouseout":In.I.stageMouseOut();break;case"mouseover":n._stage.event("mouseover",n._event.setTo("mouseover",n._stage,n._stage))}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,t._isFirstTouch=!0,n(t,["instance",function(){return this.instance=new t}]),t}(),ai=function(){function t(i,e){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this.ref=1,this._cacheID=0,this.clipMatDir=[99999999,0,0,99999999],this.clipMatPos=[0,0],this.defines=new zn,this.mainID=i,this.subID=e,this.textureHost=null,this.texture=null,this.color=null,this.colorAdd=null,this.u_mmat2=null,this._cacheID=i|e,this._inClassCache=t._cache[this._cacheID],i>0&&!this._inClassCache&&(this._inClassCache=t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}s(t,"laya.webgl.shader.d2.value.Value2D");var i=t.prototype;return i.setValue=function(){},i._ShaderWithCompile=function(){var t=oa.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Oa.create,this._attribLocation);return t},i.upload=function(){var t=fn;fn.worldMatrix4===fn.TEMPMAT4_ARRAY||this.defines.addInt(128),this.mmat=t.worldMatrix4;var i=oa.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();i._shaderValueWidth!==t.width||i._shaderValueHeight!==t.height?(this.size[0]=t.width,this.size[1]=t.height,i._shaderValueWidth=t.width,i._shaderValueHeight=t.height,i.upload(this,null)):i.upload(this,i._params2dQuick2||i._make2dQuick2())},i.setFilters=function(t){if(this.filters=t,t)for(var i,e=t.length,n=0;e>n;n++)i=t[n],i&&(this.defines.add(i.type),i.action.setValue(this))},i.clear=function(){this.defines._value=this.subID+(ge.shaderHighPrecision?1024:0)},i.release=function(){--this.ref<1&&(this._inClassCache&&(this._inClassCache[this._inClassCache._length++]=this),this.clear(),this.filters=null,this.ref=1)},t._initone=function(i,e){t._typeClass[i]=e,t._cache[i]=[],t._cache[i]._length=0},t.__init__=function(){t._initone(4,Kn),t._initone(512,jn),t._initone(1,Xn),t._initone(9,Xn)},t.create=function(i,e){var n=t._cache[i|e];return n._length?n[--n._length]:new t._typeClass[i|e](e)},t._cache=[],t._typeClass=[],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}(),oi=function(){function t(i){this.clipInfoID=-1,this._numEle=0,this._ref=1,this._key=new He,void 0===i&&(i=1e4),this._renderType=i,this._id=++t.ID}s(t,"laya.webgl.submit.Submit");var i=t.prototype;return e.imps(i,{"laya.webgl.submit.ISubmit":!0}),i.getID=function(){return this._id},i.releaseRender=function(){t.RENDERBASE!=this&&--this._ref<1&&(t.POOL[t._poolSize++]=this,this.shaderValue.release(),this.shaderValue=null,this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},i.getRenderType=function(){return this._renderType},i.renderSubmit=function(){if(0===this._numEle||!this._mesh||0==this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var i=t._getSource();if(!i)return 1;this.shaderValue.texture=i}var e=ge.mainContext;return this._mesh.useMesh(e),this.shaderValue.upload(),Zi.activeBlendFunction!==this._blendFn&&(Pe.setBlend(e,!0),this._blendFn(e),Zi.activeBlendFunction=this._blendFn),e.drawElements(4,this._numEle,5123,this._startIdx),Ri.drawCall++,Ri.trianglesFaces+=this._numEle/3,1},i._cloneInit=function(t,i,e,n){t._ref=1,t._mesh=e,t._id=this._id,t._key.copyFrom(this._key),t._parent=this,t._blendFn=this._blendFn,t._renderType=this._renderType,t._startIdx=n*En.BYTES_PIDX,t._numEle=this._numEle,t.shaderValue=this.shaderValue,this.shaderValue.ref++,this._ref++},i.clone=function(){return null},i.reUse=function(){return 0},i.toString=function(){return"ibindex:"+this._startIdx+" num:"+this._numEle+" key="+this._key},t.__init__=function(){var i=t.RENDERBASE=new t(-1);i.shaderValue=new ai(0,0),i.shaderValue.ALPHA=1,i._ref=4294967295},t.create=function(i,e,n){var s=t._poolSize?t.POOL[--t._poolSize]:new t;s._ref=1,s._mesh=e,s._key.clear(),s._startIdx=e.indexNum*En.BYTES_PIDX,s._numEle=0;var r=i._nBlendType;s._blendFn=i._targets?Zi.targetFns[r]:Zi.fns[r],s.shaderValue=n,s.shaderValue.setValue(i._shader2D);var a=i._shader2D.filters;return a&&s.shaderValue.setFilters(a),s},t.createShape=function(i,e,n,s){var r=t._poolSize?t.POOL[--t._poolSize]:new t;r._mesh=e,r._numEle=n,r._startIdx=2*e.indexNum,r._ref=1,r.shaderValue=s,r.shaderValue.setValue(i._shader2D);var a=i._nBlendType;return r._blendFn=i._targets?Zi.targetFns[a]:Zi.fns[a],r},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.KEY_ONCE=-1,t.KEY_FILLRECT=1,t.KEY_DRAWTEXTURE=2,t.KEY_VG=3,t.KEY_TRIANGLES=4,t.RENDERBASE=null,t.ID=1,t.preRender=null,t._poolSize=0,t.POOL=[],t}(),hi=function(){function t(){}s(t,"laya.display.cmd.FillTextureCmd");var i=t.prototype;return i.recover=function(){this.texture=null,this.offset=null,this.other=null,ee.recover("FillTextureCmd",this)},i.run=function(t,i,e){t.fillTexture(this.texture,this.x+i,this.y+e,this.width,this.height,this.type,this.offset,this.other)},r(0,i,"cmdID",function(){return"FillTexture"}),t.create=function(i,e,n,s,r,a,o,h){var l=ee.getItemByClass("FillTextureCmd",t);return l.texture=i,l.x=e,l.y=n,l.width=s,l.height=r,l.type=a,l.offset=o,l.other=h,l},t.ID="FillTexture",t}(),li=function(){function t(i,e){if(a.map[i])return this._fun=a.map[i],this._next=t.NORENDER,void 0;switch(this._next=e||t.NORENDER,i){case 0:return this._fun=this._no,void 0;case 1:return this._fun=this._alpha,void 0;case 2:return this._fun=this._transform,void 0;case 4:return this._fun=this._blend,void 0;case 8:return this._fun=this._canvas,void 0;case 32:return this._fun=this._mask,void 0;case 64:return this._fun=this._clip,void 0;case 128:return this._fun=this._style,void 0;case 512:return this._fun=this._graphics,void 0;case 8192:return this._fun=this._children,void 0;case 2048:return this._fun=this._custom,void 0;case 256:return this._fun=this._texture,void 0;case 16:return this._fun=Ie._filter,void 0;case 69905:return this._fun=t._initRenderFun,void 0}this.onCreate(i)}s(t,"laya.renders.RenderSprite");var i=t.prototype;return i.onCreate=function(){},i._style=function(t,i,e,n){var s=t._style;null!=s.render&&s.render(t,i,e,n);var r=this._next;r._fun.call(r,t,i,e,n)},i._no=function(){},i._custom=function(t,i,e,n){t.customRender(i,e,n),this._next._fun.call(this._next,t,i,e-t.pivotX,n-t.pivotY)},i._clip=function(i,e,n,s){var r=this._next;if(r!=t.NORENDER){var a=i._style.scrollRect;e.save(),e.clipRect(n,s,a.width,a.height),r._fun.call(r,i,e,n-a.x,s-a.y),e.restore()}},i._blend=function(t,i,e,n){var s=t._style;s.blendMode&&(i.globalCompositeOperation=s.blendMode);var r=this._next;r._fun.call(r,t,i,e,n),i.globalCompositeOperation="source-over"},i._mask=function(t,i,e,n){var s=this._next;s._fun.call(s,t,i,e,n);var r=t.mask;r&&(i.globalCompositeOperation="destination-in",(r.numChildren>0||!r.graphics._isOnlyOne())&&(r.cacheAs="bitmap"),r.render(i,e-t._style.pivotX,n-t._style.pivotY)),i.globalCompositeOperation="source-over"},i._texture=function(t,i,e,n){var s=t.texture;s._getSource()&&i.drawTexture(s,e-t.pivotX+s.offsetX,n-t.pivotY+s.offsetY,t._width||s.width,t._height||s.height);var r=this._next;r._fun.call(r,t,i,e,n)},i._graphics=function(t,i,e,n){t._graphics&&t._graphics._render(t,i,e-t.pivotX,n-t.pivotY);var s=this._next;s._fun.call(s,t,i,e,n)},i._image=function(t,i,e,n){var s=t._style;i.drawTexture2(e,n,s.pivotX,s.pivotY,t.transform,t._graphics._one)},i._image2=function(t,i,e,n){var s=t._style;i.drawTexture2(e,n,s.pivotX,s.pivotY,t.transform,t._graphics._one)},i._alpha=function(t,i,e,n){var s,r=t._style;if((s=r.alpha)>.01||t._needRepaint()){var a=i.globalAlpha;i.globalAlpha*=s;var o=this._next;o._fun.call(o,t,i,e,n),i.globalAlpha=a}},i._transform=function(i,e,n,s){{var r=i.transform,a=this._next;i._style}r&&a!=t.NORENDER?(e.save(),e.transform(r.a,r.b,r.c,r.d,r.tx+n,r.ty+s),a._fun.call(a,i,e,0,0),e.restore()):a._fun.call(a,i,e,n,s)},i._children=function(t,i,e,n){var s,r=t._style,a=t._children,o=a.length;if(e-=t.pivotX,n-=t.pivotY,r.viewport){var h=r.viewport,l=h.x,c=h.y,u=h.right,d=h.bottom,_=0/0,p=0/0;for(f=0;o>f;++f)(s=a[f])._visible&&(_=s._x)<u&&_+s.width>l&&(p=s._y)<d&&p+s.height>c&&s.render(i,e,n)}else for(var f=0;o>f;++f)(s=a[f])._visible&&s.render(i,e,n)},i._canvas=function(t,i,n,s){var r=t._cacheStyle,a=this._next;if(!r.enableCanvasRender)return a._fun.call(a,t,i,n,s),void 0;"bitmap"===r.cacheAs?Ri.canvasBitmap++:Ri.canvasNormal++;var o=!1,h=!1;if(gi.isWebGL&&r.canvas){var l=r.canvas,c=(l.context,l.touches);if(c)for(var u=0;u<c.length;u++)if(c[u].deleted){h=!0;break}o=l.isCacheValid&&!l.isCacheValid()}if(t._needRepaint()||!r.canvas||h||o||e.stage.isGlobalRepaint())if(gi.isWebGL&&"normal"===r.cacheAs){if(i._targets)return a._fun.call(a,t,i,n,s),void 0;this._canvas_webgl_normal_repaint(t,i)}else this._canvas_repaint(t,i,n,s);var d=r.cacheRect;i.drawCanvas(r.canvas,n+d.x,s+d.y,d.width,d.height)},i._canvas_repaint=function(t,i,e,n){var s,r,a,o,h,l,c,u,d,_=t._cacheStyle,p=this._next,f=_.canvas,m=_.cacheAs;if(d=_._calculateCacheRect(t,m,e,n),c=d.x,u=d.y,o=_.cacheRect,h=o.width*c,l=o.height*u,r=o.x,a=o.y,gi.isWebGL&&"bitmap"===m&&(h>2048||l>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),_.releaseContext(),p._fun.call(p,t,i,e,n),void 0;if(f||(_.createContext(),f=_.canvas),s=f.context,s.sprite=t,(f.width!=h||f.height!=l)&&f.size(h,l),"bitmap"===m?s.asBitmap=!0:"normal"===m&&(s.asBitmap=!1),s.clear(),1!=c||1!=u){var g=s;g.save(),g.scale(c,u),p._fun.call(p,t,s,-r,-a),g.restore(),t._applyFilters()}else g=s,p._fun.call(p,t,s,-r,-a),t._applyFilters();_.staticCache&&(_.reCache=!1),Ri.canvasReCache++},i._canvas_webgl_normal_repaint=function(t,i){{var n=t._cacheStyle,s=this._next,r=n.canvas,a=n.cacheAs;n._calculateCacheRect(t,a,0,0)}r||(r=n.canvas=new e.WebGLCacheAsNormalCanvas(i,t));var o=r.context;r.startRec(),s._fun.call(s,t,o,t.pivotX,t.pivotY),t._applyFilters(),Ri.canvasReCache++,r.endRec()},t.__init__=function(){a.__init__();var i,e=0,n=0;for(i=Oi.createRenderSprite(69905,null),n=t.renders.length=16384,e=0;n>e;e++)t.renders[e]=i;t.renders[0]=Oi.createRenderSprite(0,null)},t._initRenderFun=function(i,e,n,s){var r=i._renderType,a=t.renders[r]=t._getTypeRender(r);a._fun(i,e,n,s)},t._getTypeRender=function(t){if(a.map[t])return Oi.createRenderSprite(t,null);for(var i=null,e=8192;e>0;)e&t&&(i=Oi.createRenderSprite(e,i)),e>>=1;return i},t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),ci=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}s(t,"laya.layagl.cmdNative.DrawCircleCmdNative");var i=t.prototype;return i._arc=function(t,i,e,n,s){void 0===n&&(n=!1),void 0===s&&(s=!0);var r=[],a=0,o=2*Math.PI,h=0,l=0,c=0,u=0,d=0,_=0,p=0,f=0,m=0,g=0,v=0;if(l=o-a,n)if(Math.abs(l)>=2*Math.PI)l=2*-Math.PI;else for(;l>0;)l-=2*Math.PI;else if(Math.abs(l)>=2*Math.PI)l=2*Math.PI;else for(;0>l;)l+=2*Math.PI;g=101>e?Math.max(10,l*e/5):201>e?Math.max(10,l*e/20):Math.max(10,l*e/40),c=l/g/2,u=Math.abs(4/3*(1-Math.cos(c))/Math.sin(c)),n&&(u=-u),v=0;for(m=0;g>=m;m++)h=a+l*(m/g),d=Math.cos(h),_=Math.sin(h),p=t+d*e,f=i+_*e,r.push(p),r.push(f);return r},i.recover=function(){this._fillColor=null,this._lineColor=null,this._points.length=0,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,ee.recover("DrawCircleCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(i){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=i,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var e=0;e<this._points.length;e++)this._linePoints.push(this._points[e]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var s=this.line_ibBuffer._int16Data,r=0,a=0;a<3*(this._line_vertNum-2);a++)s[r++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(i),l=h.numColor,c=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,d=0;for(e=0;e<this._line_vertNum;e++)c[d++]=this._line_vbArray[2*e]+this.x,c[d++]=this._line_vbArray[2*e+1]+this.y,u[d++]=l;var _=this._paramData._int32Data;_[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),_[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),_[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,_[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,ki.syncBufferToRenderThread(this.line_vbBuffer),ki.syncBufferToRenderThread(this.line_ibBuffer),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawCircle"}),r(0,i,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var i=o.create(this._fillColor),e=i.numColor,n=this.vbBuffer._int32Data,s=0,r=0;r<this._vertNum;r++)s++,s++,n[s++]=e;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._points[2*n]+this._x,e++,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;for(e=0,n=0;n<this._line_vertNum;n++)s[e++]=this._line_vbArray[2*n]+this._x,e++,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._points[2*n+1]+this._y,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;
for(e=0,n=0;n<this._line_vertNum;n++)e++,s[e++]=this._line_vbArray[2*n+1]+this._y,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"radius",function(){return this._radius},function(i){this._points=this._arc(0,0,i),this._vertNum=this._points.length/2;var e=this._vertNum,n=0;this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;var s=0,r=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*r*2)&&(this.ibBuffer=new ParamData(3*r*2,!0,!0)),this._ibSize=3*r*2;for(var a=this.ibBuffer._int16Data,h=0,l=0;r>l;l++)a[h++]=s,a[h++]=l+1+s,a[h++]=l+2+s;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*e*4,!0)),this._vbSize=3*this._vertNum*4;for(var c=o.create(this._fillColor),u=c.numColor,d=this.vbBuffer._float32Data,_=this.vbBuffer._int32Data,p=0,f=0;f<this._vertNum;f++)d[p++]=this._points[2*f]+this._x,d[p++]=this._points[2*f+1]+this._y,_[p++]=u;if(this._lineColor){for(f=0;f<this._points.length;f++)this._linePoints.push(this._points[f]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,n=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var m=this.line_ibBuffer._int16Data;h=0;for(var g=0;g<3*(this._line_vertNum-2);g++)m[h++]=this._line_ibArray[g];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var v=o.create(this._lineColor),S=v.numColor,y=this.line_vbBuffer._float32Data,C=this.line_vbBuffer._int32Data;for(p=0,f=0;f<this._line_vertNum;f++)y[p++]=this._line_vbArray[2*f]+this._x,y[p++]=this._line_vbArray[2*f+1]+this._y,C[p++]=S}var E=this._paramData._int32Data;E[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),E[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),E[t._PARAM_VB_SIZE_POS_]=this._vbSize,E[t._PARAM_IB_SIZE_POS_]=this._ibSize,ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this.ibBuffer),this._lineColor&&(E[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),E[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),E[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,E[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,ki.syncBufferToRenderThread(this.line_vbBuffer),ki.syncBufferToRenderThread(this.line_ibBuffer)),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(i){!this._lineWidth&&this._lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=i,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var e=0;e<this._points.length;e++)this._linePoints.push(this._points[e]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,i,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var s=this.line_ibBuffer._int16Data,r=0,a=0;a<3*(this._line_vertNum-2);a++)s[r++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(this._lineColor),l=h.numColor,c=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,d=0;for(e=0;e<this._line_vertNum;e++)c[d++]=this._line_vbArray[2*e]+this.x,c[d++]=this._line_vbArray[2*e+1]+this.y,u[d++]=l;var _=this._paramData._int32Data;_[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),_[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),_[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,_[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,ki.syncBufferToRenderThread(this.line_vbBuffer),ki.syncBufferToRenderThread(this.line_ibBuffer),ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r,a){var h=ee.getItemByClass("DrawCircleCmd",t);h._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CIRCLE_LINES_CMD_ENCODER_||(t._DRAW_CIRCLE_LINES_CMD_ENCODER_=ki.instance.createCommandEncoder(244,32,!0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_CIRCLE_LINES_CMD_ENCODER_)),t._DRAW_CIRCLE_CMD_ENCODER_||(t._DRAW_CIRCLE_CMD_ENCODER_=ki.instance.createCommandEncoder(168,32,!0),t._DRAW_CIRCLE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CIRCLE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_CIRCLE_CMD_ENCODER_)),h._paramData||(h._paramData=new ParamData(72,!0)),h._x=i,h._y=e,h._radius=n,h._fillColor=s,h._lineColor=r,h._lineWidth=a,h._points=h._arc(0,0,n),h._vertNum=h._points.length/2;var l=h._vertNum,c=0,u=h._vertNum-2;(!h.ibBuffer||h.ibBuffer.getByteLength()<3*u*2)&&(h.ibBuffer=new ParamData(3*u*2,!0,!0)),h._ibSize=3*u*2;for(var d=h.ibBuffer._int16Data,_=0,p=0;u>p;p++)d[_++]=c,d[_++]=p+1+c,d[_++]=p+2+c;var f=o.create(s),m=f.numColor;(!h.vbBuffer||h.vbBuffer.getByteLength()<3*h._vertNum*4)&&(h.vbBuffer=new ParamData(3*l*4,!0)),h._vbSize=3*h._vertNum*4;for(var g=h.vbBuffer._float32Data,v=h.vbBuffer._int32Data,S=0,y=0;y<h._vertNum;y++)g[S++]=h._points[2*y]+i,g[S++]=h._points[2*y+1]+e,v[S++]=m;var C=0;for(y=0;y<h._points.length;y++)h._linePoints.push(h._points[y]);if(h._linePoints.push(h._points[0]),h._linePoints.push(h._points[1]),r){Di.createLine2(h._linePoints,h._line_ibArray,a,0,h._line_vbArray,!1),h._line_vertNum=h._linePoints.length,C=h._line_vertNum,(!h.line_ibBuffer||h.line_ibBuffer.getByteLength()<3*(h._line_vertNum-2)*2)&&(h.line_ibBuffer=new ParamData(3*(C-2)*2,!0,!0)),h._line_ibSize=3*(h._line_vertNum-2)*2;var E=h.line_ibBuffer._int16Data;_=0;for(var b=0;b<3*(h._line_vertNum-2);b++)E[_++]=h._line_ibArray[b];(!h.line_vbBuffer||h.line_vbBuffer.getByteLength()<3*h._line_vertNum*4)&&(h.line_vbBuffer=new ParamData(3*C*4,!0)),h._line_vbSize=3*h._line_vertNum*4;var I=o.create(r),x=I.numColor,P=h.line_vbBuffer._float32Data,D=h.line_vbBuffer._int32Data;for(S=0,y=0;y<h._line_vertNum;y++)P[S++]=h._line_vbArray[2*y]+i,P[S++]=h._line_vbArray[2*y+1]+e,D[S++]=x}else{h._lineWidth=1;var A="#FFFFFF";for(Di.createLine2(h._linePoints,h._line_ibArray,h._lineWidth,0,h._line_vbArray,!1),h._line_vertNum=h._linePoints.length,C=h._line_vertNum,(!h.line_ibBuffer||h.line_ibBuffer.getByteLength()<3*(h._line_vertNum-2)*2)&&(h.line_ibBuffer=new ParamData(3*(C-2)*2,!0,!0)),h._line_ibSize=3*(h._line_vertNum-2)*2,E=h.line_ibBuffer._int16Data,_=0,b=0;b<3*(h._line_vertNum-2);b++)E[_++]=h._line_ibArray[b];for((!h.line_vbBuffer||h.line_vbBuffer.getByteLength()<3*h._line_vertNum*4)&&(h.line_vbBuffer=new ParamData(3*C*4,!0)),h._line_vbSize=3*h._line_vertNum*4,I=o.create(A),x=I.numColor,P=h.line_vbBuffer._float32Data,D=h.line_vbBuffer._int32Data,S=0,y=0;y<h._line_vertNum;y++)P[S++]=h._line_vbArray[2*y]+i,P[S++]=h._line_vbArray[2*y+1]+e,D[S++]=x}var L=h._paramData._float32Data,k=h._paramData._int32Data;return k[0]=1,k[1]=32,k[t._PARAM_VB_POS_]=h.vbBuffer.getPtrID(),k[t._PARAM_IB_POS_]=h.ibBuffer.getPtrID(),k[t._PARAM_VB_SIZE_POS_]=h._vbSize,k[t._PARAM_IB_SIZE_POS_]=h._ibSize,k[t._PARAM_VB_OFFSET_POS_]=0,k[t._PARAM_IB_OFFSET_POS_]=0,k[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(h.vbBuffer),ki.syncBufferToRenderThread(h.ibBuffer),k[t._PARAM_LINE_VB_POS_]=h.line_vbBuffer.getPtrID(),k[t._PARAM_LINE_IB_POS_]=h.line_ibBuffer.getPtrID(),L[t._PARAM_LINECOLOR_POS_]=r,L[t._PARAM_LINEWIDTH_POS_]=a,k[t._PARAM_LINE_VB_SIZE_POS_]=h._line_vbSize,k[t._PARAM_LINE_IB_SIZE_POS_]=h._line_ibSize,k[t._PARAM_LINE_VB_OFFSET_POS_]=0,k[t._PARAM_LINE_IB_OFFSET_POS_]=0,k[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(h.line_vbBuffer),ki.syncBufferToRenderThread(h.line_ibBuffer),ki.syncBufferToRenderThread(h._paramData),h._cmdCurrentPos=r?h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1):h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(h._graphicsCmdEncoder),h},t.ID="DrawCircle",t._DRAW_CIRCLE_CMD_ENCODER_=null,t._DRAW_CIRCLE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_LINECOLOR_POS_=6,t._PARAM_LINEWIDTH_POS_=7,t._PARAM_VB_SIZE_POS_=8,t._PARAM_IB_SIZE_POS_=9,t._PARAM_LINE_VB_SIZE_POS_=10,t._PARAM_LINE_IB_SIZE_POS_=11,t._PARAM_VB_OFFSET_POS_=12,t._PARAM_IB_OFFSET_POS_=13,t._PARAM_LINE_VB_OFFSET_POS_=14,t._PARAM_LINE_IB_OFFSET_POS_=15,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=16,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=17,t}(),function(){function t(){this._pool=[],this._map=[],this._laters=[]}var i;s(t,"laya.utils.CallLater");var e=t.prototype;return e._update=function(){var t=this._laters,i=t.length;if(i>0){for(var e=0,n=i-1;n>=e;e++){var s=t[e];this._map[s.key]=null,null!==s.method&&(s.run(),s.clear()),this._pool.push(s),e===n&&(n=t.length-1)}t.length=0}},e._getHandler=function(t,i){var e=t?t.$_GID||(t.$_GID=en.getGID()):0,n=i.$_TID||(i.$_TID=1e5*Yi._mid++);return this._map[e+n]},e.callLater=function(t,e,n){if(null==this._getHandler(t,e)){if(this._pool.length)var s=this._pool.pop();else s=new i;s.caller=t,s.method=e,s.args=n;var r=t?t.$_GID:0,a=e.$_TID;s.key=r+a,this._map[s.key]=s,this._laters.push(s)}},e.runCallLater=function(t,i){var e=this._getHandler(t,i);e&&null!=e.method&&(this._map[e.key]=null,e.run(),e.clear())},t.I=new t,t.__init$=function(){i=function(){function t(){this.key=0,this.caller=null,this.method=null,this.args=null}s(t,"");var i=t.prototype;return i.clear=function(){this.caller=null,this.method=null,this.args=null},i.run=function(){var t=this.caller;if(t&&t.destroyed)return this.clear();var i=this.method,e=this.args;null!=i&&(e?i.apply(t,e):i.call(t))},t}()},t}()),di=function(){function t(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t}s(t,"laya.webgl.utils.ShaderNode");var i=t.prototype;return i.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t},i.setCondition=function(t,i){t&&(this.conditionType=i,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)},i.toscript=function(i,e){return this._toscript(i,e,++t.__id)},i._toscript=function(t,i,e){if(this.childs.length<1&&!this.text)return i;i.length;if(this.condition){var n=!!this.condition.call(t);if(2===this.conditionType&&(n=!n),!n)return i}if(this.text&&i.push(this.text),this.childs.length>0&&this.childs.forEach(function(n){n._toscript(t,i,e)}),this.includefiles.length>0&&this.useFuns.length>0)for(var s,r=0,a=this.includefiles.length;a>r;r++)this.includefiles[r].curUseID!=e&&(s=this.includefiles[r].file.getFunsScript(this.useFuns),s.length>0&&(this.includefiles[r].curUseID=e,i[0]=s+i[0]));return i},t.__id=1,t}(),_i=function(){function t(){}s(t,"laya.display.cmd.DrawLinesCmd");var i=t.prototype;return i.recover=function(){this.points=null,this.lineColor=null,ee.recover("DrawLinesCmd",this)},i.run=function(t,i,e){t._drawLines(this.x+i,this.y+e,this.points,this.lineColor,this.lineWidth,this.vid)},r(0,i,"cmdID",function(){return"DrawLines"}),t.create=function(i,e,n,s,r,a){var o=ee.getItemByClass("DrawLinesCmd",t);return o.x=i,o.y=e,o.points=n,o.lineColor=s,o.lineWidth=r,o.vid=a,o},t.ID="DrawLines",t}(),pi=function(){function t(){}s(t,"laya.webgl.resource.ICharRender");var i=t.prototype;return i.getWidth=function(){return 0},i.scale=function(){},i.getCharBmp=function(){return null},t}(),fi=function(){function t(){this._idata=[]}s(t,"laya.layagl.CommandEncoder");var i=t.prototype;return i.getArrayData=function(){return this._idata},i.getPtrID=function(){return 0},i.beginEncoding=function(){},i.endEncoding=function(){},i.clearEncoding=function(){this._idata.length=0},i.getCount=function(){return this._idata.length},i.add_ShaderValue=function(t){this._idata.push(t)},i.addShaderUniform=function(t){this.add_ShaderValue(t)},t}(),mi=function(){function t(){this.json=null}s(t,"laya.components.Prefab");var i=t.prototype;return i.create=function(){return this.json?Hi.createByData(null,this.json):null},t}(),gi=(function(){function t(){}return s(t,"laya.webgl.shader.ShaderValue"),t}(),function(){function i(t,n){function s(){e.stage._loop(),Ti.window.requestAnimationFrame(s)}this._timeId=0,i._mainCanvas.source.id="layaCanvas",i._mainCanvas.source.width=t,i._mainCanvas.source.height=n,laya.renders.Render.isConchApp?Ti.document.body.appendChild(i._mainCanvas.source):Ti.container.appendChild(i._mainCanvas.source),Oi.initRender(i._mainCanvas,t,n),Ti.window.requestAnimationFrame(s),e.stage.on("visibilitychange",this,this._onVisibilitychange)}s(i,"laya.renders.Render");var a=i.prototype;return a._onVisibilitychange=function(){e.stage.isVisibility?0!=this._timeId&&Ti.window.clearInterval(this._timeId):this._timeId=Ti.window.setInterval(this._enterFrame,1e3)},a._enterFrame=function(){e.stage._loop()},r(1,i,"context",function(){return i._context}),r(1,i,"canvas",function(){return i._mainCanvas.source}),i._context=null,i._mainCanvas=null,i.isWebGL=!1,i.is3DMode=!1,n(i,["isConchApp",function(){return this.isConchApp=null!=t.conch}]),i}()),vi=function(){function t(){this._creates(),this.reset()}s(t,"laya.html.dom.HTMLElement");var i=t.prototype;return i._creates=function(){this._style=vn.create()},i.reset=function(){if(this.URI=null,this.parent=null,this._style.reset(),this._style.ower=this,this._style.valign="middle",this._text&&this._text.words){var i=this._text.words,e=0,n=0;n=i.length;var s;for(e=0;n>e;e++)s=i[e],s&&s.recover()}return this._text=t._EMPTYTEXT,this._children&&(this._children.length=0),this._x=this._y=this._width=this._height=0,this},i._getCSSStyle=function(){return this._style},i._addChildsToLayout=function(t){var i=this._getWords();if(null==i&&(!this._children||0==this._children.length))return!1;if(i)for(var e=0,n=i.length;n>e;e++)t.push(i[e]);return this._children&&this._children.forEach(function(i){var e=i._style;e._enableLayout&&e._enableLayout()&&i._addToLayout(t)}),!0},i._addToLayout=function(t){if(this._style){var i=this._style;i.absolute||(i.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))}},i.repaint=function(t){void 0===t&&(t=!1),this.parentRepaint(t)},i.parentRepaint=function(t){void 0===t&&(t=!1),this.parent&&this.parent.repaint(t)},i._setParent=function(t){if(t instanceof laya.html.dom.HTMLElement){var i=t;this.URI||(this.URI=i.URI),this.style&&this.style.inherit(i.style)}},i.appendChild=function(t){return this.addChild(t)},i.addChild=function(t){return t.parent&&t.parent.removeChild(t),this._children||(this._children=[]),this._children.push(t),t.parent=this,t._setParent(this),this.repaint(),t},i.removeChild=function(t){if(!this._children)return null;var i=0,e=0;for(e=this._children.length,i=0;e>i;i++)if(this._children[i]==t)return this._children.splice(i,1),t;return null},i.destroy=function(){this._children&&(this.destroyChildren(),this._children.length=0),ee.recover(t.getClassName(this),this.reset())},i.destroyChildren=function(){if(this._children){for(var t=this._children.length-1;t>-1;t--)this._children[t].destroy();this._children.length=0}},i._getWords=function(){if(!this._text)return null;var t=this._text.text;if(!t||0===t.length)return null;var i=this._text.words;if(i&&i.length===t.length)return i;null===i&&(this._text.words=i=[]),i.length=t.length;for(var e,n=this.style,s=n.font,r=0,a=t.length;a>r;r++)e=en.measureText(t.charAt(r),s),i[r]=Vi.create().setData(t.charAt(r),e.width,e.height||n.fontSize,n);return i},i._isChar=function(){return!1},i._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._children&&this._children.length>0||null!=this._getWords())&&t.block?(nn.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},i._setAttributes=function(t,i){switch(t){case"style":this.style.cssText(i);break;case"class":this.className=i;break;case"x":this.x=parseFloat(i);break;case"y":this.y=parseFloat(i);break;case"width":this.width=parseFloat(i);break;case"height":this.height=parseFloat(i);break;default:this[t]=i}},i.formatURL=function(i){return this.URI?t.formatURL1(i,this.URI?this.URI.path:null):i},i.drawToGraphic=function(t,i,e,n){i+=this.x,e+=this.y;var s=this.style;s.paddingLeft&&(i+=s.paddingLeft),s.paddingTop&&(e+=s.paddingTop),(null!=s.bgColor||s.borderColor)&&t.drawRect(i,e,this.width,this.height,s.bgColor,s.borderColor,1),this.renderSelfToGraphic(t,i,e,n);var r,a=0,o=0;if(this._children&&this._children.length>0)for(o=this._children.length,a=0;o>a;a++)r=this._children[a],null!=r.drawToGraphic&&r.drawToGraphic(t,i,e,n)},i.renderSelfToGraphic=function(t,i,e,n){var s=this.style,r=this._getWords(),a=0;if(r){a=r.length;if(s){var o=s.font,h=s.color;if(s.stroke){var l=s.stroke;l=parseInt(l);var c=s.strokeColor;t.fillBorderWords(r,i,e,o,h,c,l)}else t.fillWords(r,i,e,o,h);if(this.href){var u=r.length-1,d=r[u],_=d.y+d.height;"none"!=s.textDecoration&&t.drawLine(r[0].x,_,d.x+d.width,_,h,1);var p=Le.create();p.rec.setTo(r[0].x,d.y,d.x+d.width-r[0].x,d.height),p.href=this.href,n.push(p)}}}},r(0,i,"href",function(){return this._style?this._style.href:null},function(t){this._style&&t!=this._style.href&&(this._style.href=t,this.repaint())}),r(0,i,"color",null,function(t){this.style.color=t}),r(0,i,"id",null,function(t){Ne.document.setElementById(t,this)}),r(0,i,"innerTEXT",function(){return this._text.text},function(i){this._text===t._EMPTYTEXT?this._text={text:i,words:null}:(this._text.text=i,this._text.words&&(this._text.words.length=0)),this.repaint()}),r(0,i,"style",function(){return this._style}),r(0,i,"width",function(){return this._width},function(t){this._width!==t&&(this._width=t,this.repaint())}),r(0,i,"x",function(){return this._x},function(t){this._x!=t&&(this._x=t,this.parentRepaint())}),r(0,i,"y",function(){return this._y},function(t){this._y!=t&&(this._y=t,this.parentRepaint())}),r(0,i,"height",function(){return this._height},function(t){this._height!==t&&(this._height=t,this.repaint())}),r(0,i,"className",null,function(t){this.style.attrs(Ne.document.styleSheets["."+t])}),t.formatURL1=function(t,i){if(!t)return"null path";if(i||(i=Li.basePath),t.indexOf(":")>0)return t;if(null!=Li.customFormat&&(t=Li.customFormat(t)),t.indexOf(":")>0)return t;var e=t.charAt(0);if("."===e)return Li._formatRelativePath(i+t);if("~"===e)return Li.rootPath+t.substring(1);if("d"===e){if(0===t.indexOf("data:image"))return t}else if("/"===e)return t;return i+t},t.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},t._EMPTYTEXT={text:null,words:null},t}(),Si=function(){function t(t,i,e){this.pages=[],this.fontFamily=null,this._slotW=0,this._gridW=0,this._gridNum=0,this._baseSize=0,this._lastSz=0,this._spaceWidthMap=[],this._minScoreID=-1,this._selectedSizeIdx=0,this.margin_left=0,this.margin_top=0,this.margin_bottom=0,this.margin_right=0,this.gcCnt=0,this._textureWidth=Cn.textureWidth,this.fontFamily=t,this.margin_top=this.margin_left=this.margin_right=this.margin_bottom=e,this._baseSize=Math.floor(i/Cn.gridSize)*Cn.gridSize,this._selectedSizeIdx=i-this._baseSize|0,this._slotW=Math.ceil(i/Cn.gridSize)*Cn.gridSize,this._gridW=Math.floor(this._textureWidth/this._slotW),this._gridW<=0&&(console.error("文字太大,需要修改texture大小"),this._gridW=1),this._gridNum=this._gridW*this._gridW,console.log("gridInfo:slotW="+this._slotW+",gridw="+this._gridW+",gridNum="+this._gridNum+",textureW="+this._textureWidth)}s(t,"laya.webgl.resource.CharPages");var i=t.prototype;return i.getWidth=function(i){return t.charRender.getWidth(i)},i.selectSize=function(t,i){this._selectedSizeIdx=i-this._baseSize|0},i.getSpaceChar=function(){if(this._spaceWidthMap[this._selectedSizeIdx])return this._spaceWidthMap[this._selectedSizeIdx];var t=new de;return this._spaceWidthMap[this._selectedSizeIdx]=t,t.width=this.getWidth(" "),t.isSpace=!0,t},i.getChar=function(t,i,e,n,s,r,a,o){if(" "===t)return this.getSpaceChar(a);var h,l=i>0?t+"_"+i+s:t;n=16777215&n,s=16777215&s,l+=16777215===n?"#w":16711680===n?"#b":1048320===n?"#g":255===n?"#r":"#"+n.toString(16),r&&(l+="B"),o&&(l+=o);for(var c=0,u=this.pages.length;u>c;c++){var d=this.pages[c],_=d.charMaps[this._selectedSizeIdx];if(_&&(h=_.get(l)))return a&&h.touch(),h}if(h=this._getASlot(),!h)return null;var p=h.tex.charMaps[this._selectedSizeIdx];!p&&(p=h.tex.charMaps[this._selectedSizeIdx]=new Map),p.set(l,h),a&&h.touch();var f="",m="";f=((65280&n)+((255&n)<<16)+((16711680&n)>>16)).toString(16),f="#000000".substr(0,7-f.length)+f,i&&(m=((65280&s)+((255&s)<<16)+((16711680&s)>>16)).toString(16),m="#000000".substr(0,7-m.length)+m),h.height=e;var g=this.getCharBmp(t,Cn._curFont,i,f,m,h);h.bmpWidth=g.width,h.bmpHeight=g.height;var v=Math.floor(h.pos/this._gridW),S=h.pos%this._gridW,y=S*this._slotW,C=v*this._slotW,E=this._textureWidth,b=y/E,I=C/E,x=(y+g.width)/E,P=(C+g.height)/E,D=h.uv;return D[0]=b,D[1]=I,D[2]=x,D[3]=I,D[4]=x,D[5]=P,D[6]=b,D[7]=P,h.tex.addChar(g,y,C),h},i._getASlot=function(){for(var t,i,e=this.pages.length,n=0;e>n;n++)if(t=this.pages[n],i=t.findAGrid())return i;return t=Cn.trash.getAPage(this._gridNum),this.pages.push(t),i=t.findAGrid(),i||console.error("_getASlot error!"),i},i.getAllPageScore=function(){for(var t=0,i=this.pages.length,e=Ri.loopCount,n=0,s=1e4;i>t;t++){var r=this.pages[t];r._scoreTick==e?n+=r._score:r._score=0,r._score<s&&(s=r._score,this._minScoreID=t)}return n},i.removeLRU=function(){var t=this._gridNum*this.pages.length-this.getAllPageScore();if(t>=this._gridNum){if(this._minScoreID>=0){var i=this.pages[this._minScoreID];console.log("remove fontpage: delpageid="+this._minScoreID+", total="+this.pages.length+",gcCnt:"+(this.gcCnt+1));var e=i._score;i.printDebugInfo(),Cn.trash.discardPage(i),this.pages[this._minScoreID]=this.pages[this.pages.length-1],this.pages.pop();for(var n=Ri.loopCount,s=0,r=this.pages.length;r>s&&e>0;s++){i=this.pages[s],console.log("clean page "+s);var a=i.removeOld(n);e-=a}}return this.gcCnt++,!0}return!1},i.getCharBmp=function(i,e,n,s,r,a){return t.charRender.getCharBmp(i,e,n,s,r,a,this.margin_left,this.margin_top,this.margin_right,this.margin_bottom)},t.getBmpSize=function(t){return 1.5*t},t.charRender=null,t}(),yi=function(){function t(){this._mat=new $e}s(t,"laya.webgl.canvas.save.SaveTranslate");var i=t.prototype;return e.imps(i,{"laya.webgl.canvas.save.ISaveData":!0}),i.isSaveMark=function(){return!1},i.restore=function(i){this._mat.copyTo(i._curMat),t.POOL[t.POOL._length++]=this},t.save=function(i){var e=t.POOL,n=e._length>0?e[--e._length]:new t;i._curMat.copyTo(n._mat);var s=i._save;s[s._length++]=n},t.POOL=h._createArray(),t}(),Ci=function(){function t(t,i,e,n,s,r,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),this._nums=a=a?a:new Float32Array(6),a[0]=t,a[1]=i,a[2]=e,a[3]=n,a[4]=s,a[5]=r,this._checkTransform()}s(t,"laya.layagl.MatrixConch");var i=t.prototype;return i.identity=function(){var t=this._nums;return t[0]=t[3]=1,t[1]=t[4]=t[5]=t[2]=0,this._bTransform=!1,this},i._checkTransform=function(){var t=this._nums;return this._bTransform=1!==t[0]||0!==t[1]||0!==t[2]||1!==t[3]},i.setTranslate=function(t,i){return this._nums[4]=t,this._nums[5]=i,this},i.translate=function(t,i){return this._nums[4]+=t,this._nums[5]+=i,this},i.scale=function(t,i){var e=this._nums;return e[0]*=t,e[3]*=i,e[2]*=t,e[1]*=i,e[4]*=t,e[5]*=i,this._bTransform=!0,this},i.rotate=function(t){var i=this._nums,e=Math.cos(t),n=Math.sin(t),s=i[0],r=i[2],a=i[4];return i[0]=s*e-i[1]*n,i[1]=s*n+i[1]*e,i[2]=r*e-i[3]*n,i[3]=r*n+i[3]*e,i[4]=a*e-i[5]*n,i[5]=a*n+i[5]*e,this._bTransform=!0,this},i.skew=function(t,i){var e=this._nums,n=Math.tan(t),s=Math.tan(i),r=e[0],a=e[1];return e[0]+=s*e[2],e[1]+=s*e[3],e[2]+=n*r,e[3]+=n*a,this},i.invertTransformPoint=function(t){var i=this._nums,e=i[0],n=i[1],s=i[2],r=i[3],a=i[4],o=e*r-n*s,h=r/o,l=-n/o,c=-s/o,u=e/o,d=(s*i[5]-r*a)/o,_=-(e*i[5]-n*a)/o;return t.setTo(h*t.x+c*t.y+d,l*t.x+u*t.y+_)},i.transformPoint=function(t){var i=this._nums;return t.setTo(i[0]*t.x+i[2]*t.y+i[4],i[1]*t.x+i[3]*t.y+i[5])},i.transformPointN=function(t){var i=this._nums;return t.setTo(i[0]*t.x+i[2]*t.y,i[1]*t.x+i[3]*t.y)},i.getScaleX=function(){var t=this._nums;return 0===t[1]?this.a:Math.sqrt(t[0]*t[0]+t[1]*t[1])},i.getScaleY=function(){var t=this._nums;return 0===t[2]?t[3]:Math.sqrt(t[2]*t[2]+t[3]*t[3])},i.invert=function(){var t=this._nums,i=t[0],e=t[1],n=t[2],s=t[3],r=t[4],a=i*s-e*n;return t[0]=s/a,t[1]=-e/a,t[2]=-n/a,t[3]=i/a,t[4]=(n*this.ty-s*r)/a,t[5]=-(i*this.ty-e*r)/a,this},i.setTo=function(t,i,e,n,s,r){var a=this._nums;return a[0]=t,a[1]=i,a[2]=e,a[3]=n,a[4]=s,a[5]=r,this},i.concat=function(t){var i=this._nums,e=t._nums,n=i[0],s=i[2],r=i[4];return i[0]=n*e[0]+i[1]*e[2],i[1]=n*e[1]+i[1]*e[3],i[2]=s*e[0]+i[3]*e[2],i[3]=s*e[1]+i[3]*e[3],i[4]=r*e[0]+i[5]*e[2]+e[4],i[5]=r*e[1]+i[5]*e[3]+e[5],this},i.scaleEx=function(t,i){var e=this._nums,n=e[0],s=e[1],r=e[2],a=e[3];0!==s||0!==r?(e[0]=t*n,e[1]=t*s,e[2]=i*r,e[3]=i*a):(e[0]=t*n,e[1]=0*a,e[2]=0*n,e[3]=i*a),this._bTransform=!0},i.rotateEx=function(t){var i=this._nums,e=Math.cos(t),n=Math.sin(t),s=i[0],r=i[1],a=i[2],o=i[3];0!==r||0!==a?(i[0]=e*s+n*a,i[1]=e*r+n*o,i[2]=-n*s+e*a,i[3]=-n*r+e*o):(i[0]=e*s,i[1]=n*o,i[2]=-n*s,i[3]=e*o),this._bTransform=!0},i.clone=function(){var i=this._nums,e=t.create(),n=e._nums;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],e._bTransform=this._bTransform,e},i.copyTo=function(t){var i=this._nums,e=t._nums;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],t._bTransform=this._bTransform,t},i.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},i.destroy=function(){this.recover()},i.recover=function(){t._pool.push(this)},r(0,i,"a",function(){return this._nums[0]},function(t){this._nums[0]=t}),r(0,i,"b",function(){return this._nums[1]},function(t){this._nums[1]=t}),r(0,i,"c",function(){return this._nums[2]},function(t){this._nums[2]=t}),r(0,i,"d",function(){return this._nums[3]},function(t){this._nums[3]=t}),r(0,i,"tx",function(){return this._nums[4]},function(t){this._nums[4]=t}),r(0,i,"ty",function(){return this._nums[5]},function(t){this._nums[5]=t}),t.mul=function(t,i,e){var n=t._nums,s=i._nums,r=e._nums,a=n[0],o=n[1],h=n[2],l=n[3],c=n[4],u=n[5],d=s[0],_=s[1],p=s[2],f=s[3],m=s[4],g=s[5];return 0!==_||0!==p?(r[0]=a*d+o*p,r[1]=a*_+o*f,r[2]=h*d+l*p,r[3]=h*_+l*f,r[4]=d*c+p*u+m,r[5]=_*c+f*u+g):(r[0]=a*d,r[1]=o*f,r[2]=h*d,r[3]=l*f,r[4]=d*c+m,r[5]=f*u+g),e},t.mul16=function(t,i,e){var n=t._nums,s=i._nums,r=n[0],a=n[1],o=n[2],h=n[3],l=n[4],c=n[5],u=s[0],d=s[1],_=s[2],p=s[3],f=s[4],m=s[5];return 0!==d||0!==_?(e[0]=r*u+a*_,e[1]=r*d+a*p,e[4]=o*u+h*_,e[5]=o*d+h*p,e[12]=u*l+_*c+f,e[13]=d*l+p*c+m):(e[0]=r*u,e[1]=a*p,e[4]=o*u,e[5]=h*p,e[12]=u*l+f,e[13]=p*c+m),e},t.create=function(i){var e;return t._pool.length?(e=t._pool.pop(),i&&(e._nums=i),e.identity(),e):new t(1,0,0,1,0,0,i)},t.A=0,t.B=1,t.C=2,t.D=3,t.TX=4,t.TY=5,t.EMPTY=new t,t.TEMP=new t,t._pool=[],t}(),Ei=function(){function t(){}return s(t,"laya.maths.GrahamScan"),t.multiply=function(t,i,e){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)},t.dis=function(t,i){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)},t._getPoints=function(i,e,n){for(void 0===e&&(e=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<i;)t._mPointList.push(new Oe);return n||(n=[]),n.length=0,e?t.getFrom(n,t._mPointList,i):t.getFromR(n,t._mPointList,i),n},t.getFrom=function(t,i,e){var n=0;for(n=0;e>n;n++)t.push(i[n]);return t},t.getFromR=function(t,i,e){var n=0;for(n=0;e>n;n++)t.push(i.pop());return t},t.pListToPointList=function(i,e){void 0===e&&(e=!1);var n=0,s=i.length/2,r=t._getPoints(s,e,t._tempPointList);for(n=0;s>n;n++)r[n].setTo(i[n+n],i[n+n+1]);return r},t.pointListToPlist=function(i){var e,n=0,s=i.length,r=t._temPList;for(r.length=0,n=0;s>n;n++)e=i[n],r.push(e.x,e.y);return r},t.scanPList=function(i){return en.copyArray(i,t.pointListToPlist(t.scan(t.pListToPointList(i,!0))))},t.scan=function(i){var e,n,s,r=0,a=0,o=0,h=i.length,l={};for(n=t._temArr,n.length=0,h=i.length,r=h-1;r>=0;r--)e=i[r],s=e.x+"_"+e.y,l.hasOwnProperty(s)||(l[s]=!0,n.push(e));for(h=n.length,en.copyArray(i,n),r=1;h>r;r++)(i[r].y<i[o].y||i[r].y==i[o].y&&i[r].x<i[o].x)&&(o=r);for(e=i[0],i[0]=i[o],i[o]=e,r=1;h-1>r;r++){for(o=r,a=r+1;h>a;a++)(t.multiply(i[a],i[o],i[0])>0||0==t.multiply(i[a],i[o],i[0])&&t.dis(i[0],i[a])<t.dis(i[0],i[o]))&&(o=a);e=i[r],i[r]=i[o],i[o]=e}if(n=t._temArr,n.length=0,i.length<3)return en.copyArray(n,i);for(n.push(i[0],i[1],i[2]),r=3;h>r;r++){for(;n.length>=2&&t.multiply(i[r],n[n.length-1],n[n.length-2])>=0;)n.pop();i[r]&&n.push(i[r])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),bi=function(){function t(t,i,e){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new Ta(t,35048),i?this._vb._resizeBuffer(i,!1):ke.webGL2D_MeshAllocMaxMem&&this._vb._resizeBuffer(65536*t,!1),this._ib=new Ra,e&&this._ib._resizeBuffer(e,!1)}s(t,"laya.webgl.utils.Mesh2D");var i=t.prototype;return i.cloneWithNewVB=function(){var i=new t(this._stride,0,0);return i._ib=this._ib,i._quadNum=this._quadNum,i._attribInfo=this._attribInfo,i},i.cloneWithNewVBIB=function(){var i=new t(this._stride,0,0);return i._attribInfo=this._attribInfo,i},i.getVBW=function(){return this._vb.setNeedUpload(),this._vb},i.getVBR=function(){return this._vb},i.getIBR=function(){return this._ib
},i.getIBW=function(){return this._ib.setNeedUpload(),this._ib},i.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var i=this._ib.getUint16Array(),e=0,n=0,s=0;t>s;s++)i[e++]=n,i[e++]=n+2,i[e++]=n+1,i[e++]=n,i[e++]=n+3,i[e++]=n+2,n+=4;this._ib.setNeedUpload()},i.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},i.configVAO=function(t){if(!this._applied){this._applied=!0,this._vao||(this._vao=new ns),this._vao.bind(),this._vb._bindForVAO(),this._ib.setNeedUpload(),this._ib._bind_uploadForVAO();for(var i=this._attribInfo.length/3,e=0,n=0;i>n;n++){var s=this._attribInfo[e+1],r=this._attribInfo[e],a=this._attribInfo[e+2];t.enableVertexAttribArray(n),t.vertexAttribPointer(n,s,r,!1,this._stride,a),e+=3}this._vao.unBind()}},i.useMesh=function(t){this._applied||this.configVAO(t),this._vao.bind(),this._vb.bind(),this._ib._bind_upload()||this._ib.bind(),this._vb._bind_upload()||this._vb.bind()},i.getEleNum=function(){return this._ib.getBuffer().byteLength/2},i.releaseMesh=function(){},i.destroy=function(){},i.clearVB=function(){this._vb.clear()},t._gvaoid=0,t}(),Ii=function(){function t(){}return s(t,"laya.system.System"),t.changeDefinition=function(t,i){e[t]=i;var n=t+"=classObj";e._runScript(n)},t.__init__=function(){},t}(),xi=function(){function t(){}s(t,"laya.display.cmd.StrokeTextCmd");var i=t.prototype;return i.recover=function(){ee.recover("StrokeTextCmd",this)},i.run=function(t,i,e){t.strokeWord(this.text,this.x+i,this.y+e,this.font,this.color,this.lineWidth,this.textAlign)},r(0,i,"cmdID",function(){return"StrokeText"}),t.create=function(i,e,n,s,r,a,o){var h=ee.getItemByClass("StrokeTextCmd",t);return h.text=i,h.x=e,h.y=n,h.font=s,h.color=r,h.lineWidth=a,h.textAlign=o,h},t.ID="StrokeText",t}(),Pi=function(){function t(){}return s(t,"laya.media.SoundManager"),r(1,t,"useAudioMusic",function(){return t._useAudioMusic},function(i){t._useAudioMusic=i,t._musicClass=i?Bn:null}),r(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(i){e.stage.off("blur",null,t._stageOnBlur),e.stage.off("focus",null,t._stageOnFocus),e.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=i,i&&(e.stage.on("blur",null,t._stageOnBlur),e.stage.on("focus",null,t._stageOnFocus),e.stage.on("visibilitychange",null,t._visibilityChange))}),r(1,t,"muted",function(){return t._muted},function(i){i!=t._muted&&(i&&t.stopAllSound(),t.musicMuted=i,t._muted=i)}),r(1,t,"musicMuted",function(){return t._musicMuted},function(i){i!=t._musicMuted&&(i?(t._bgMusic?t._musicChannel&&!t._musicChannel.isStopped?gi.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!0):t._musicChannel.pause():t._musicChannel=null:t._musicChannel=null,t._musicMuted=i):(t._musicMuted=i,t._bgMusic&&t._musicChannel&&(gi.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!1):t._musicChannel.resume())))}),r(1,t,"soundMuted",function(){return t._soundMuted},function(i){t._soundMuted=i}),t.__init__=function(){var i=Ti.window,e=i.AudioContext||i.webkitAudioContext||i.mozAudioContext?!0:!1;return e&&Un.initWebAudio(),t._soundClass=e?Un:Bn,Bn._initMusicAudio(),t._musicClass=Bn,e},t.addChannel=function(i){t._channels.indexOf(i)>=0||t._channels.push(i)},t.removeChannel=function(i){var e=0;for(e=t._channels.length-1;e>=0;e--)t._channels[e]==i&&t._channels.splice(e,1)},t.disposeSoundLater=function(i){t._lastSoundUsedTimeDic[i]=Ti.now(),t._isCheckingDispose||(t._isCheckingDispose=!0,e.timer.loop(5e3,null,t._checkDisposeSound))},t._checkDisposeSound=function(){var i,n=Ti.now(),s=!1;for(i in t._lastSoundUsedTimeDic)n-t._lastSoundUsedTimeDic[i]>3e4?(delete t._lastSoundUsedTimeDic[i],t.disposeSoundIfNotUsed(i)):s=!0;s||(t._isCheckingDispose=!1,e.timer.clear(null,t._checkDisposeSound))},t.disposeSoundIfNotUsed=function(i){var e=0;for(e=t._channels.length-1;e>=0;e--)if(t._channels[e].url==i)return;t.destroySound(i)},t._visibilityChange=function(){e.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),e.stage.once("mousedown",null,t._stageOnFocus)},t._recoverWebAudio=function(){Un.ctx&&"running"!=Un.ctx.state&&Un.ctx.resume&&Un.ctx.resume()},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),e.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())},t.playSound=function(i,n,s,r,a){if(void 0===n&&(n=1),void 0===a&&(a=0),!t._isActive||!i)return null;if(t._muted)return null;if(t._recoverWebAudio(),i=Li.formatURL(i),i==t._bgMusic){if(t._musicMuted)return null}else{if(gi.isConchApp){var o=en.getFileExtension(i);if("wav"!=o&&"ogg"!=o)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var h;Ti.onMiniGame||(h=e.loader.getRes(i)),r||(r=t._soundClass),h||(h=new r,h.load(i),Ti.onMiniGame||Fn.cacheRes(i,h));var l;return(l=h.play(a,n))?(l.url=i,l.volume=i==t._bgMusic?t.musicVolume:t.soundVolume,l.completeHandler=s,l):null},t.destroySound=function(t){var i=e.loader.getRes(t);i&&(Fn.clearRes(t),i.dispose())},t.playMusic=function(i,e,n,s){return void 0===e&&(e=0),void 0===s&&(s=0),i=Li.formatURL(i),t._bgMusic=i,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(i,e,n,t._musicClass,s)},t.stopSound=function(i){i=Li.formatURL(i);var e,n=0;for(n=t._channels.length-1;n>=0;n--)e=t._channels[n],e.url==i&&e.stop()},t.stopAll=function(){t._bgMusic=null;var i,e=0;for(e=t._channels.length-1;e>=0;e--)i=t._channels[e],i.stop()},t.stopAllSound=function(){var i,e=0;for(e=t._channels.length-1;e>=0;e--)i=t._channels[e],i.url!=t._bgMusic&&i.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._bgMusic=null},t.setSoundVolume=function(i,e){if(e)e=Li.formatURL(e),t._setVolume(e,i);else{t.soundVolume=i;var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url!=t._bgMusic&&(n.volume=i)}},t.setMusicVolume=function(i){t.musicVolume=i,t._setVolume(t._bgMusic,i)},t._setVolume=function(i,e){i=Li.formatURL(i);var n,s=0;for(s=t._channels.length-1;s>=0;s--)n=t._channels[s],n.url==i&&(n.volume=e)},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._bgMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t._lastSoundUsedTimeDic={},t._isCheckingDispose=!1,t.autoReleaseSound=!0,t}(),Di=function(){function t(){}return s(t,"laya.webgl.shapes.BasePoly"),t.createLine2=function(i,e,n,s,r,a){if(i.length<4)return null;var o=t.tempData.length>i.length+2?t.tempData:new Array(i.length+2);o[0]=i[0],o[1]=i[1];var h=2,l=0,c=i.length;for(l=2;c>l;l+=2)Math.abs(i[l]-i[l-2])+Math.abs(i[l+1]-i[l-1])>.01&&(o[h++]=i[l],o[h++]=i[l+1]);a&&Math.abs(i[0]-o[h-2])+Math.abs(i[1]-o[h-1])>.01&&(o[h++]=i[0],o[h++]=i[1]);var u=r;c=h/2;var d,_,p,f,m,g,v,S,y,C,E,b,I,x,P,D,A,L,k,T,R,w=n/2;p=o[0],f=o[1],m=o[2],g=o[3],y=-(f-g),C=p-m,R=Math.sqrt(y*y+C*C),y=y/R*w,C=C/R*w;for(u.push(p-y,f-C,p+y,f+C),l=1;c-1>l;l++)p=o[2*(l-1)],f=o[2*(l-1)+1],m=o[2*l],g=o[2*l+1],v=o[2*(l+1)],S=o[2*(l+1)+1],y=-(f-g),C=p-m,R=Math.sqrt(y*y+C*C),y=y/R*w,C=C/R*w,E=-(g-S),b=m-v,R=Math.sqrt(E*E+b*b),E=E/R*w,b=b/R*w,I=-C+f-(-C+g),x=-y+m-(-y+p),P=(-y+p)*(-C+g)-(-y+m)*(-C+f),D=-b+S-(-b+g),A=-E+m-(-E+v),L=(-E+v)*(-b+g)-(-E+m)*(-b+S),k=I*A-D*x,Math.abs(k)<.1?(k+=10.1,u.push(m-y,g-C,m+y,g+C)):(d=(x*L-A*P)/k,_=(D*P-I*L)/k,T=(d-m)*(d-m)+(_-g)+(_-g),u.push(d,_,m-(d-m),g-(_-g)));for(p=o[h-4],f=o[h-3],m=o[h-2],g=o[h-1],y=-(f-g),C=p-m,R=Math.sqrt(y*y+C*C),y=y/R*w,C=C/R*w,u.push(m-y,g-C,m+y,g+C),l=1;c>l;l++)e.push(s+2*(l-1),s+2*(l-1)+1,s+2*l+1,s+2*l+1,s+2*l,s+2*(l-1));return u},t.createLineTriangle=function(t,i,e,n){var s=t.slice(),r=s.length,a=s[0],o=s[1],h=s[2],l=s[2],c=0,u=0,d=0,_=0,p=r/2;if(!(1>=p)&&2!=p){for(var f=new Array(4*p),m=0,g=0,v=0;p-1>v;v++)a=s[g++],o=s[g++],h=s[g++],l=s[g++],d=h-a,_=l-o,0!=d&&0!=_&&(c=Math.sqrt(d*d+_*_),c>.001&&(u=4*m,f[u]=a,f[u+1]=o,f[u+2]=d/c,f[u+3]=_/c,m++));for(n?(a=s[r-2],o=s[r-1],h=s[0],l=s[1],d=h-a,_=l-o,0!=d&&0!=_&&(c=Math.sqrt(d*d+_*_),c>.001&&(u=4*m,f[u]=a,f[u+1]=o,f[u+2]=d/c,f[u+3]=_/c,m++))):(u=4*m,f[u]=a,f[u+1]=o,f[u+2]=d/c,f[u+3]=_/c,m++),g=0,v=0;p>v;v++){a=s[g],o=s[g+1],h=s[g+2],l=s[g+3];{s[g+4],s[g+5]}}}},n(t,["tempData",function(){return this.tempData=new Array(256)}]),t}(),Ai=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}s(t,"laya.utils.Dragging");var i=t.prototype;return i.start=function(t,i,n,s,r,a,o,h){void 0===h&&(h=.92),this.clearTimer(),this.target=t,this.area=i,this.hasInertia=n,this.elasticDistance=i?s:0,this.elasticBackTime=r,this.data=a,this._disableMouseEvent=o,this.ratio=h,this._parent=t.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,e.stage.on("mouseup",this,this.onStageMouseUp),e.stage.on("mouseout",this,this.onStageMouseUp),e.systemTimer.frameLoop(1,this,this.loop)},i.clearTimer=function(){e.systemTimer.clear(this,this.loop),e.systemTimer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},i.stop=function(){this._dragging&&(ri.instance.disableMouseEvent=!1,e.stage.off("mouseup",this,this.onStageMouseUp),e.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},i.loop=function(){var t=this._parent.getMousePoint(),i=t.x,n=t.y,s=i-this._lastX,r=n-this._lastY;if(this._clickOnly){if(!(Math.abs(s*e.stage._canvasTransform.getScaleX())>1||Math.abs(r*e.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),ri.instance.disableMouseEvent=this._disableMouseEvent}else this._offsets.push(s,r);(0!==s||0!==r)&&(this._lastX=i,this._lastY=n,this.target.x+=s*this._elasticRateX,this.target.y+=r*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},i.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target._x<this.area.x)var t=this.area.x-this.target._x;else t=this.target._x>this.area.x+this.area.width?this.target._x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target._y<this.area.y)var i=this.area.y-this.target.y;else i=this.target._y>this.area.y+this.area.height?this.target._y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-i/this.elasticDistance)}},i.backToArea=function(){this.target.x=Math.min(Math.max(this.target._x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target._y,this.area.y),this.area.y+this.area.height)},i.onStageMouseUp=function(){if(ri.instance.disableMouseEvent=!1,e.stage.off("mouseup",this,this.onStageMouseUp),e.stage.off("mouseout",this,this.onStageMouseUp),e.systemTimer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var t=this._offsets.length,i=Math.min(t,6),n=this._offsets.length-i,s=t-1;s>n;s--)this._offsetY+=this._offsets[s--],this._offsetX+=this._offsets[s];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),e.systemTimer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},i.checkElastic=function(){var t=0/0,i=0/0;if(this.target.x<this.area.x?t=this.area.x:this.target._x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?i=this.area.y:this.target._y>this.area.y+this.area.height&&(i=this.area.y+this.area.height),isNaN(t)&&isNaN(i))this.clear();else{var e={};isNaN(t)||(e.x=t),isNaN(i)||(e.y=i),this._tween=Ni.to(this.target,e,this.elasticBackTime,dn.sineOut,c.create(this,this.clear),0,!1,!1)}},i.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(e.systemTimer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},i.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),Li=(function(){function t(){this._paramData=new ParamData(4,!0)}s(t,"laya.layagl.cmdNative.AlphaCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("AlphaCmd",this)},i.run=function(t){t.alpha(this._alpha)},r(0,i,"cmdID",function(){return"Alpha"}),r(0,i,"alpha",function(){return this._alpha},function(t){t=t>1?1:t,t=0>t?0:t,this._alpha=t;var i=16777215;i=255*t<<24|i,this._paramData._int32Data[0]=i,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i){var e=ee.getItemByClass("AlphaCmd",t),n=e._graphicsCmdEncoder=this._commandEncoder;return e.alpha=i,n.setGlobalValueEx(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,15,e._paramData.getPtrID(),0),ki.syncBufferToRenderThread(n),e},t.ID="Alpha",t}(),function(){function t(i){this._url=null,this._path=null,this._url=t.formatURL(i),this._path=t.getPath(i)}s(t,"laya.net.URL");var i=t.prototype;return r(0,i,"path",function(){return this._path}),r(0,i,"url",function(){return this._url}),t.formatURL=function(i){if(!i)return"null path";if(i.indexOf(":")>0)return i;if(null!=t.customFormat&&(i=t.customFormat(i)),i.indexOf(":")>0)return i;var e=i.charAt(0);if("."===e)return t._formatRelativePath(t.basePath+i);if("~"===e)return t.rootPath+i.substring(1);if("d"===e){if(0===i.indexOf("data:image"))return i}else if("/"===e)return i;return t.basePath+i},t._formatRelativePath=function(t){for(var i=t.split("/"),e=0,n=i.length;n>e;e++)".."==i[e]&&(i.splice(e-1,2),e-=2);return i.join("/")},t.getPath=function(t){var i=t.lastIndexOf("/");return i>0?t.substr(0,i+1):""},t.getFileName=function(t){var i=t.lastIndexOf("/");return i>0?t.substr(i+1):t},t.getAdptedFilePath=function(i){if(!t.exportSceneToJson||!i)return i;var e=0,n=0;n=t._adpteTypeList.length;var s;for(e=0;n>e;e++)s=t._adpteTypeList[e],i=i.replace(s[0],s[1]);return i},t.version={},t.exportSceneToJson=!1,t.basePath="",t.rootPath="",t.customFormat=function(i){var e=t.version[i];return!gi.isConchApp&&e&&(i+="?v="+e),i},n(t,["_adpteTypeList",function(){return this._adpteTypeList=[[".scene3d",".json"],[".scene",".json"],[".taa",".json"],[".prefab",".json"]]}]),t}()),ki=(function(){function t(){}return s(t,"laya.display.SpriteConst"),t.POSRENDERTYPE=0,t.POSBUFFERBEGIN=1,t.POSBUFFEREND=2,t.POSFRAMECOUNT=3,t.POSREPAINT=4,t.POSVISIBLE_NATIVE=5,t.POSX=6,t.POSY=7,t.POSPIVOTX=8,t.POSPIVOTY=9,t.POSSCALEX=10,t.POSSCALEY=11,t.POSSKEWX=12,t.POSSKEWY=13,t.POSROTATION=14,t.POSTRANSFORM_FLAG=15,t.POSMATRIX=16,t.POSCOLOR=22,t.POSGRAPICS=23,t.POSSIM_TEXTURE_ID=24,t.POSSIM_TEXTURE_DATA=25,t.POSLAYAGL3D=26,t.POSCUSTOM=27,t.POSCLIP=28,t.POSCLIP_NEG_POS=32,t.POSCOLORFILTER_COLOR=34,t.POSCOLORFILTER_ALPHA=50,t.POSCALLBACK_OBJ_ID=54,t.POSCUSTOM_CALLBACK_FUN_ID=55,t.POSCANVAS_CALLBACK_FUN_ID=56,t.POSCANVAS_CALLBACK_END_FUN_ID=57,t.POSCANVAS_BEGIN_CMD_ID=58,t.POSCANVAS_END_CMD_ID=59,t.POSCANVAS_DRAW_TARGET_CMD_ID=60,t.POSCANVAS_DRAW_TARGET_PARAM_ID=61,t.POSLAYA3D_FUN_ID=62,t.POSCACHE_CANVAS_SKIP_PAINT_FLAG=63,t.POSFILTER_BEGIN_CMD_ID=64,t.POSFILTER_CALLBACK_FUN_ID=65,t.POSFILTER_END_CMD_ID=66,t.POSFILTER_END_CALLBACK_FUN_ID=67,t.POSGRAPHICS_CALLBACK_FUN_ID=68,t.POSMASK_CALLBACK_FUN_ID=69,t.POSMASK_CMD_ID=70,t.POSBLEND_SRC=71,t.POSBLEND_DEST=72,t.POSSIM_RECT_FILL_CMD=73,t.POSSIM_RECT_FILL_DATA=74,t.POSSIM_RECT_STROKE_CMD=75,t.POSSIM_RECT_STROKE_DATA=76,t.POSSIZE=77,t.ALPHA=1,t.TRANSFORM=2,t.BLEND=4,t.CANVAS=8,t.FILTERS=16,t.MASK=32,t.CLIP=64,t.STYLE=128,t.TEXTURE=256,t.GRAPHICS=512,t.LAYAGL3D=1024,t.CUSTOM=2048,t.ONECHILD=4096,t.CHILDS=8192,t.REPAINT_NONE=0,t.REPAINT_NODE=1,t.REPAINT_CACHE=2,t.REPAINT_ALL=3,t}(),function(){function t(){}s(t,"laya.layagl.LayaGL");var i=t.prototype;return i.createCommandEncoder=function(t,i,e){return void 0===t&&(t=128),void 0===i&&(i=64),void 0===e&&(e=!1),new fi(this,t,i,e)},i.beginCommandEncoding=function(){},i.endCommandEncoding=function(){},i.calcMatrixFromScaleSkewRotation=function(){},i.setGLTemplate=function(){},i.setEndGLTemplate=function(){},i.matrix4x4Multiply=function(){},i.evaluateClipDatasRealTime=function(){},t.getFrameCount=function(){return 0},t.syncBufferToRenderThread=function(t,i){void 0===i&&(i=0)},t.createArrayBufferRef=function(){},t.createArrayBufferRefs=function(){},t.EXECUTE_JS_THREAD_BUFFER=0,t.EXECUTE_RENDER_THREAD_BUFFER=1,t.EXECUTE_COPY_TO_RENDER=2,t.EXECUTE_COPY_TO_RENDER3D=3,t.VALUE_OPERATE_ADD=0,t.VALUE_OPERATE_SUB=1,t.VALUE_OPERATE_MUL=2,t.VALUE_OPERATE_DIV=3,t.VALUE_OPERATE_M2_MUL=4,t.VALUE_OPERATE_M3_MUL=5,t.VALUE_OPERATE_M4_MUL=6,t.VALUE_OPERATE_M32_MUL=7,t.VALUE_OPERATE_SET=8,t.VALUE_OPERATE_M32_TRANSLATE=9,t.VALUE_OPERATE_M32_SCALE=10,t.VALUE_OPERATE_M32_ROTATE=11,t.VALUE_OPERATE_M32_SCALE_PIVOT=12,t.VALUE_OPERATE_M32_ROTATE_PIVOT=13,t.VALUE_OPERATE_M32_TRANSFORM_PIVOT=14,t.VALUE_OPERATE_BYTE4_COLOR_MUL=15,t.ARRAY_BUFFER_TYPE_DATA=0,t.ARRAY_BUFFER_TYPE_CMD=1,t.ARRAY_BUFFER_REF_REFERENCE=0,t.ARRAY_BUFFER_REF_COPY=1,t.UPLOAD_SHADER_UNIFORM_TYPE_ID=0,t.UPLOAD_SHADER_UNIFORM_TYPE_DATA=1,t.instance=null,t}()),Ti=function(){function i(){}return s(i,"laya.utils.Browser"),r(1,i,"pixelRatio",function(){if(i._pixelRatio<0)if(i.__init__(),i.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1)i._pixelRatio=2;else{var t=i.context,e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;i._pixelRatio=(i._window.devicePixelRatio||1)/e,i._pixelRatio<1&&(i._pixelRatio=1)}return i._pixelRatio}),r(1,i,"height",function(){return i.__init__(),(e.stage&&e.stage.canvasRotation?i.clientWidth:i.clientHeight)*i.pixelRatio}),r(1,i,"clientWidth",function(){return i.__init__(),i._window.innerWidth||i._document.body.clientWidth}),r(1,i,"window",function(){return i._window||i.__init__()}),r(1,i,"clientHeight",function(){return i.__init__(),i._window.innerHeight||i._document.body.clientHeight||i._document.documentElement.clientHeight}),r(1,i,"width",function(){return i.__init__(),(e.stage&&e.stage.canvasRotation?i.clientHeight:i.clientWidth)*i.pixelRatio}),r(1,i,"container",function(){return i._container||(i.__init__(),i._container=i.createElement("div"),i._container.id="layaContainer",i._document.body.appendChild(i._container)),i._container},function(t){i._container=t}),r(1,i,"document",function(){return i.__init__(),i._document}),i.__init__=function(){if(i._window)return i._window;var n=i._window=t,s=i._document=n.document,r=i.userAgent=n.navigator.userAgent,a=n._layalibs;if(a){a.sort(function(t,i){return t.i>i.i});for(var o=0;o<a.length;o++)a[o].f(n,s,e)}r.indexOf("MiniGame")>-1&&(e.MiniAdpter?e.MiniAdpter.enable():console.error("请先添加小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),r.indexOf("SwanGame")>-1&&(e.BMiniAdapter?e.BMiniAdapter.enable():console.error("请先添加百度小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),n.trace=console.log,n.requestAnimationFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return n.setTimeout(t,1e3/60)};var h=s.body.style;h.margin=0,h.overflow="hidden",h["-webkit-user-select"]="none",h["-webkit-tap-highlight-color"]="rgba(200,200,200,0)";for(var l=s.getElementsByTagName("meta"),c=0,u=!1,d="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";c<l.length;){var _=l[c];if("viewport"==_.name){_.content=d,u=!0;break}c++}u||(_=s.createElement("meta"),_.name="viewport",_.content=d,s.getElementsByTagName("head")[0].appendChild(_)),i.onMobile=r.indexOf("Mobile")>-1,i.onIOS=!!r.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),i.onIPhone=r.indexOf("iPhone")>-1,i.onMac=r.indexOf("Mac OS X")>-1,i.onIPad=r.indexOf("iPad")>-1,i.onAndroid=r.indexOf("Android")>-1||r.indexOf("Adr")>-1,i.onWP=r.indexOf("Windows Phone")>-1,i.onQQBrowser=r.indexOf("QQBrowser")>-1,i.onMQQBrowser=r.indexOf("MQQBrowser")>-1||r.indexOf("Mobile")>-1&&r.indexOf("QQ")>-1,i.onIE=!!n.ActiveXObject||"ActiveXObject"in n,i.onWeiXin=r.indexOf("MicroMessenger")>-1,i.onSafari=r.indexOf("Safari")>-1,i.onPC=!i.onMobile,i.onMiniGame=r.indexOf("MiniGame")>-1,i.onBDMiniGame=r.indexOf("SwanGame")>-1,i.onLimixiu=r.indexOf("limixiu")>-1,i.supportLocalStorage=Ki.__init__(),i.supportWebAudio=Pi.__init__(),gi._mainCanvas=new ra(!0);var p=gi._mainCanvas.source.style;p.position="absolute",p.top=p.left="0px",p.background="#000000",i.canvas=new ra(!0),i.context=i.canvas.getContext("2d");var f=new ra(!0),m=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null;for(c=0;c<m.length;c++){try{g=f.source.getContext(m[c])}catch(v){}if(g){i._supportWebGL=!0;break}}return n},i.createElement=function(t){return i.__init__(),i._document.createElement(t)},i.getElementById=function(t){return i.__init__(),i._document.getElementById(t)},i.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},i.now=function(){return Date.now()},i.userAgent=null,i.onMobile=!1,i.onIOS=!1,i.onMac=!1,i.onIPhone=!1,i.onIPad=!1,i.onAndroid=!1,i.onWP=!1,i.onQQBrowser=!1,i.onMQQBrowser=!1,i.onSafari=!1,i.onIE=!1,i.onWeiXin=!1,i.onPC=!1,i.onMiniGame=!1,i.onBDMiniGame=!1,i.onLimixiu=!1,i.onFirefox=!1,i.onEdge=!1,i.supportWebAudio=!1,i.supportLocalStorage=!1,i.canvas=null,i.context=null,i._window=null,i._document=null,i._container=null,i._pixelRatio=-1,i._supportWebGL=!1,i}(),Ri=(function(){function t(){}return s(t,"laya.webgl.VertexArrayObject"),t}()(function(){function i(i){t.console&&t.console.error&&t.console.error(i)}function e(i){t.console&&t.console.log&&t.console.log(i)}function n(t,e){r[t]=!0,void 0!==e&&i(e)}function s(t){var i=t.getError;t.getError=function(){var e;do e=i.apply(t),e!=t.NO_ERROR&&(r[e]=!0);while(e!=t.NO_ERROR);for(var e in r)if(r[e])return delete r[e],parseInt(e);return t.NO_ERROR}}var r={},a=function h(t){var i=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var e=0;e<this.attribs.length;e++){var n=new h.VertexAttrib(i);this.attribs[e]=n}this.maxAttrib=0};a.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()},a.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var o=function(t){var i=this;this.gl=t,s(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t==i.VERTEX_ARRAY_BINDING_OES?i.currentVertexArrayObject==i.defaultVertexArrayObject?null:i.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var e=i.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var s=e.attribs[t];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var e=i.currentVertexArrayObject;e.maxAttrib=Math.max(e.maxAttrib,t);var s=e.attribs[t];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(e,s){switch(e){case t.ARRAY_BUFFER:i.currentArrayBuffer=s;break;case t.ELEMENT_ARRAY_BUFFER:i.currentVertexArrayObject.elementArrayBuffer=s}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(e,s){var r=i.currentVertexArrayObject,a=r.attribs[e];switch(s){case t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return a.buffer;case t.VERTEX_ATTRIB_ARRAY_ENABLED:return a.enabled;case t.VERTEX_ATTRIB_ARRAY_SIZE:return a.size;case t.VERTEX_ATTRIB_ARRAY_STRIDE:return a.stride;case t.VERTEX_ATTRIB_ARRAY_TYPE:return a.type;case t.VERTEX_ATTRIB_ARRAY_NORMALIZED:return a.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,e,s,r,a,o){var h=i.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,t);var l=h.attribs[t];return l.buffer=i.currentArrayBuffer,l.size=e,l.type=s,l.normalized=r,l.stride=a,l.offset=o,l.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener&&t.canvas.addEventListener("webglcontextrestored",function(){e("OESVertexArrayObject emulation library context restored"),i.reset_()},!0),this.reset_()};o.prototype.VERTEX_ARRAY_BINDING_OES=34229,o.prototype.reset_=function(){var t=void 0!==this.vertexArrayObjects;if(t)for(var i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;var e=this.gl;this.maxVertexAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.defaultVertexArrayObject=new a(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},o.prototype.createVertexArrayOES=function(){var t=new a(this);return this.vertexArrayObjects.push(t),t},o.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject==t&&this.bindVertexArrayOES(null)},o.prototype.isVertexArrayOES=function(t){return t&&t instanceof a&&t.hasBeenBound&&t.ext==this?!0:!1},o.prototype.bindVertexArrayOES=function(t){var i=this.gl;if(t&&!t.isAlive)return n(i.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject"),void 0;var e=this.original,s=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var r=this.currentVertexArrayObject;if(s!=r){s&&r.elementArrayBuffer==s.elementArrayBuffer||e.bindBuffer.call(i,i.ELEMENT_ARRAY_BUFFER,r.elementArrayBuffer);for(var a=this.currentArrayBuffer,o=Math.max(s?s.maxAttrib:0,r.maxAttrib),h=0;o>=h;h++){var l=r.attribs[h],c=s?s.attribs[h]:null;if(s&&l.enabled==c.enabled||(l.enabled?e.enableVertexAttribArray.call(i,h):e.disableVertexAttribArray.call(i,h)),l.enabled){var u=!1;s&&l.buffer==c.buffer||(a!=l.buffer&&(e.bindBuffer.call(i,i.ARRAY_BUFFER,l.buffer),a=l.buffer),u=!0),(u||l.cached!=c.cached)&&e.vertexAttribPointer.call(i,h,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!=a&&e.bindBuffer.call(i,i.ARRAY_BUFFER,this.currentArrayBuffer)}},t._setupVertexArrayObject=function(t){var i=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=i.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var e=t.getExtension;t.getExtension=function(t){var i=e.call(this,t);return i?i:"OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new o(this)),this.__OESVertexArrayObject)}},t._forceSetupVertexArrayObject=function(t){var i=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=i.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var e=t.getExtension;t.getExtension=function(t){if("OES_vertex_array_object"===t)return this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new o(this)),this.__OESVertexArrayObject;var i=e.call(this,t);return i?i:null}}}()),function(){function t(){this._graphicsCmdEncoder=null,this._matrix=null,this._paramData=new ParamData(32,!0)}s(t,"laya.layagl.cmdNative.TransformCmdNative");var i=t.prototype;return i.recover=function(){this._matrix=null,ee.recover("TransformCmd",this)},r(0,i,"cmdID",function(){return"Transform"}),r(0,i,"matrix",function(){return this._matrix},function(t){this._matrix=t;var i=this._paramData._float32Data;i[0]=this._matrix.a,i[1]=this._matrix.b,i[2]=this._matrix.c,i[3]=this._matrix.d,i[4]=this._matrix.tx,i[5]=this._matrix.ty,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotX",function(){return this._paramData._float32Data[6]},function(t){this._paramData._float32Data[6]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotY",function(){return this._paramData._float32Data[7]},function(t){this._paramData._float32Data[7]=t,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n){var s=ee.getItemByClass("TransformCmd",t),r=s._graphicsCmdEncoder=this._commandEncoder,a=s._paramData._float32Data;a[0]=i.a,a[1]=i.b,a[2]=i.c,a[3]=i.d,a[4]=i.tx,a[5]=i.ty,a[6]=e,a[7]=n,s._matrix=i;var o=s._paramData.getPtrID();return ki.syncBufferToRenderThread(s._paramData),r.setGlobalValueEx(ei.GLOBALVALUE_MATRIX32,14,o,0),ki.syncBufferToRenderThread(r),s},t.ID="Transform",t}(),function(){function t(){}return s(t,"laya.utils.Stat"),r(1,t,"onclick",null,function(i){t._sp&&t._sp.on("click",t._sp,i),t._canvas&&(t._canvas.source.onclick=i,t._canvas.source.style.pointerEvents="")}),t.show=function(i,e){void 0===i&&(i=0),void 0===e&&(e=0),Ti.onMiniGame||Ti.onLimixiu||(t._useCanvas=!0),t._show=!0,t._fpsData.length=60,t._view[0]=gi.isConchApp?{title:"FPS",value:"_fpsStr",color:"yellow",units:"int"}:{title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},gi.isWebGL&&(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},gi.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})),t._useCanvas?t.createUIPre(i,e):t.createUI(i,e),t.enable()},t.createUIPre=function(i,n){var s=Ti.pixelRatio;t._width=130*s,t._vx=75*s,t._height=s*(12*t._view.length+3*s)+4,t._fontSize=12*s;for(var r=0;r<t._view.length;r++)t._view[r].x=4,t._view[r].y=r*t._fontSize+2*s;gi.isConchApp?(t._sp=new ls,t._titleSp=new ls,t._bgSp=new ls,t._bgSp.graphics.drawRect(i,n,t._width,t._height,"#969696"),t._bgSp.alpha=.8,t._sp.zOrder=1e5,t._titleSp.zOrder=1e5,t._bgSp.zOrder=1e5,t._bgSp.addChild(t._sp),t._bgSp.addChild(t._titleSp),e.stage.addChild(t._bgSp)):(t._canvas||(t._canvas=new ra(!0),t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top",t._ctx.font=t._fontSize+"px Arial",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+i+"px;top:"+n+"px;width:"+t._width/s+"px;height:"+t._height/s+"px;"),Ti.container.appendChild(t._canvas.source)),t._first=!0,t.loop(),t._first=!1},t.createUI=function(i,e){var n=t._sp,s=Ti.pixelRatio;n||(n=new ls,t._leftText=new na,t._leftText.pos(5,5),t._leftText.color="#ffffff",n.addChild(t._leftText),t._txt=new na,t._txt.pos(80*s,5),t._txt.color="#ffffff",n.addChild(t._txt),t._sp=n),n.pos(i,e);for(var r="",a=0;a<t._view.length;a++){var o=t._view[a];
r+=o.title+"\n"}t._leftText.text=r;var h=138*s,l=s*(12*t._view.length+3*s)+4;t._txt.fontSize=t._fontSize*s,t._leftText.fontSize=t._fontSize*s,n.size(h,l),n.graphics.clear(),n.graphics.alpha(.5),n.graphics.drawRect(0,0,h,l,"#999999"),n.graphics.alpha(2),t.loop()},t.enable=function(){e.systemTimer.frameLoop(1,t,t.loop)},t.hide=function(){t._show=!1,e.systemTimer.clear(t,t.loop),t._canvas&&Ti.removeElement(t._canvas.source)},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.spriteRenderUseCacheCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var i=Ti.now();if(!(i-t._timer<1e3)){var e=t._count;if(t.FPS=Math.round(1e3*e/(i-t._timer)),t._show){t.trianglesFaces=Math.round(t.trianglesFaces/e),t._useCanvas?(t.drawCall=Math.round(t.drawCall/e),t.shaderCall=Math.round(t.shaderCall/e),t.spriteCount=Math.round(t.spriteCount/e)-1):(t.drawCall=Math.round(t.drawCall/e)-1,t.shaderCall=Math.round(t.shaderCall/e),t.spriteCount=Math.round(t.spriteCount/e)-4),t.spriteRenderUseCacheCount=Math.round(t.spriteRenderUseCacheCount/e),t.canvasNormal=Math.round(t.canvasNormal/e),t.canvasBitmap=Math.round(t.canvasBitmap/e),t.canvasReCache=Math.ceil(t.canvasReCache/e),t.treeNodeCollision=Math.round(t.treeNodeCollision/e),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/e);var n=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+n,t._spriteStr=t.spriteCount+(t.spriteRenderUseCacheCount?"/"+t.spriteRenderUseCacheCount:""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=Ce.systemResourceManager.memorySize,t._useCanvas?t.renderInfoPre():t.renderInfo(),t.clear()}t._count=0,t._timer=i}},t.renderInfoPre=function(){var i,e,n=0;if(gi.isConchApp)for(t._sp.graphics.clear(),n=0;n<t._view.length;n++)i=t._view[n],t._first&&t._titleSp.graphics.fillText(i.title,i.x,i.y,t._fontSize+"px Arial","#ffffff","left"),e=t[i.value],"M"==i.units&&(e=Math.floor(e/1048576*100)/100+" M"),t._sp.graphics.fillText(e+"",i.x+t._vx,i.y,t._fontSize+"px Arial",i.color,"left");else if(t._canvas){var s=t._ctx;for(s.clearRect(t._first?0:t._vx,0,t._width,t._height),n=0;n<t._view.length;n++)i=t._view[n],t._first&&(s.fillStyle="white",s.fillText(i.title,i.x,i.y)),s.fillStyle=i.color,e=t[i.value],"M"==i.units&&(e=Math.floor(e/1048576*100)/100+" M"),s.fillText(e+"",i.x+t._vx,i.y)}},t.renderInfo=function(){for(var i="",e=0;e<t._view.length;e++){var n=t._view[e],s=t[n.value];"M"==n.units&&(s=Math.floor(s/1048576*100)/100+" M"),"K"==n.units&&(s=Math.floor(s/1024*100)/100+" K"),i+=s+"\n"}t._txt.text=i},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.spriteRenderUseCacheCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._spriteStr=null,t._fpsData=[],t._timer=0,t._count=0,t._view=[],t._fontSize=12,t._txt=null,t._leftText=null,t._sp=null,t._titleSp=null,t._bgSp=null,t._show=!1,t._useCanvas=!1,t._canvas=null,t._ctx=null,t._first=!1,t._vx=0/0,t._width=0,t._height=100,t}()),wi=function(){function t(){}return s(t,"laya.layagl.ConchCmdReplace"),t.__init__=function(){var t,i=laya.display.cmd,e=laya.layagl.cmdNative;for(t in i)e[t+"Native"]&&(i[t].create=e[t+"Native"].create)},t}(),Oi=function(){function t(){}return s(t,"laya.utils.RunDriver"),t.getIncludeStr=function(){return null},t.createShaderCondition=function(t){var i="(function() {return "+t+";})";return e._runScript(i)},t.fontMap=[],t.measureText=function(i,e){var n=t.hanzi.test(i);if(n&&t.fontMap[e])return t.fontMap[e];var s=Ti.context;s.font=e;var r=s.measureText(i);return n&&(t.fontMap[e]=r),r},t.drawToCanvas=function(t,i,e,n,s,r){e|=0,n|=0,s|=0,r|=0;var a=new ra,o=a.getContext("2d");return a.size(e,n),li.renders[i]._fun(t,o,s,r),a},t.initRender=function(t,i,e){return gi._context=t.getContext("2d"),t.size(i,e),!0},t.createParticleTemplate2D=null,t.changeWebGLSize=function(){},t.createRenderSprite=function(t,i){return new li(t,i)},t.clear=function(){gi.isConchApp||gi._context.clear()},t.getTexturePixels=function(){return null},t.skinAniSprite=function(){return null},t.cancelLoadByUrl=function(){},t.enableNative=null,n(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}(),Mi=function(){function t(){this._lastOriX=0,this._lastOriY=0,this.paths=[],this._curPath=null}var i;s(t,"laya.webgl.canvas.Path");var e=t.prototype;return e.beginPath=function(t){this.paths.length=1,this._curPath=this.paths[0]=new i,this._curPath.convex=t},e.closePath=function(){this._curPath.loop=!0},e.newPath=function(){this._curPath=new i,this.paths.push(this._curPath)},e.addPoint=function(t,i){this._curPath.path.push(t,i)},e.push=function(t,e){this._curPath?this._curPath.path.length>0&&(this._curPath=new i,this.paths.push(this._curPath)):(this._curPath=new i,this.paths.push(this._curPath));var n=this._curPath;n.path=t.slice(),n.convex=e},e.reset=function(){this.paths.length=0},t.__init$=function(){i=function(){function t(){this.path=[],this.loop=!1,this.convex=!1}return s(t,""),t}()},t}(),Bi=function(){function t(){this._textIsWorldText=!1,this._fontColor=4294967295,this._strokeColor=0,this._nTexAlign=0,this._fontObj=t._defFontObj}s(t,"laya.display.cmd.FillTextCmd");var i=t.prototype;return i.recover=function(){ee.recover("FillTextCmd",this)},i.run=function(t,i,e){this._textIsWorldText&&t._fast_filltext?t._fast_filltext(this._text,this.x+i,this.y+e,this._fontObj,this._fontColor,0,0,this._nTexAlign,0):t.drawText(this._text,this.x+i,this.y+e,this._font,this._color,this._textAlign)},r(0,i,"text",function(){return this._text},function(t){this._text=t,this._textIsWorldText=t instanceof laya.utils.WordText,this._textIsWorldText&&this._text.cleanCache()}),r(0,i,"cmdID",function(){return"FillText"}),r(0,i,"color",function(){return this._color},function(t){this._color=t,this._fontColor=o.create(t).numColor,this._textIsWorldText&&this._text.cleanCache()}),r(0,i,"font",function(){return this._font},function(t){this._font=t,(gi.isWebGL||gi.isConchApp)&&(this._fontObj=ve.Parse(t)),this._textIsWorldText&&this._text.cleanCache()}),r(0,i,"textAlign",function(){return this._textAlign},function(t){switch(this._textAlign=t,t){case"center":this._nTexAlign=Ui.ENUM_TEXTALIGN_CENTER;break;case"right":this._nTexAlign=Ui.ENUM_TEXTALIGN_RIGHT;break;default:this._nTexAlign=Ui.ENUM_TEXTALIGN_DEFAULT}this._textIsWorldText&&this._text.cleanCache()}),t.create=function(i,e,n,s,r,a){var o=ee.getItemByClass("FillTextCmd",t);return o.text=i,o._textIsWorldText=i instanceof laya.utils.WordText,o.x=e,o.y=n,o.font=s,o.color=r,o.textAlign=a,o},t.ID="FillText",n(t,["_defFontObj",function(){return this._defFontObj=new ve(null)}]),t}(),Ni=function(){function t(){this.gid=0,this.repeat=1,this._count=0}s(t,"laya.utils.Tween");var i=t.prototype;return i.to=function(t,i,e,n,s,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,i,e,n,s,r,a,!0,!1,!0)},i.from=function(t,i,e,n,s,r,a){return void 0===r&&(r=0),void 0===a&&(a=!1),this._create(t,i,e,n,s,r,a,!1,!1,!0)},i._create=function(i,n,s,r,a,o,h,l,c,u){if(!i)throw new Error("Tween:target is null");this._target=i,this._duration=s,this._ease=r||n.ease||t.easeNone,this._complete=a||n.complete,this._delay=o,this._props=[],this._usedTimer=0,this._startTimer=Ti.now(),this._usedPool=c,this._delayParam=null,this.update=n.update;var d=i.$_GID||(i.$_GID=en.getGID());return t.tweenMap[d]?(h&&t.clearTween(i),t.tweenMap[d].push(this)):t.tweenMap[d]=[this],u?0>=o?this.firstStart(i,n,l):(this._delayParam=[i,n,l],e.timer.once(o,this,this.firstStart,this._delayParam)):this._initProps(i,n,l),this},i.firstStart=function(t,i,e){return this._delayParam=null,t.destroyed?(this.clear(),void 0):(this._initProps(t,i,e),this._beginLoop(),void 0)},i._initProps=function(t,i,e){for(var n in i)if("number"==typeof t[n]){var s=e?t[n]:i[n],r=e?i[n]:t[n];this._props.push([n,s,r-s]),e||(t[n]=s)}},i._beginLoop=function(){e.timer.frameLoop(1,this,this._doEase)},i._doEase=function(){this._updateEase(Ti.now())},i._updateEase=function(i){var e=this._target;if(e){if(e.destroyed)return t.clearTween(e);var n=this._usedTimer=i-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var s=n>0?this._ease(n,0,1,this._duration):0,r=this._props,a=0,o=r.length;o>a;a++){var h=r[a];e[h[0]]=h[1]+s*h[2]}this.update&&this.update.run()}}},i.complete=function(){if(this._target){e.timer.runTimer(this,this.firstStart);for(var t=this._target,i=this._props,n=this._complete,s=0,r=i.length;r>s;s++){var a=i[s];t[a[0]]=a[1]+a[2]}this.update&&this.update.run(),this._count++,this._count>=this.repeat?(this.clear(),n&&n.run()):this.restart()}},i.pause=function(){e.timer.clear(this,this._beginLoop),e.timer.clear(this,this._doEase),e.timer.clear(this,this.firstStart);var t=Ti.now(),i=0/0;i=t-this._startTimer-this._delay,0>i&&(this._usedTimer=i)},i.setStartTime=function(t){this._startTimer=t},i.clear=function(){this._target&&(this._remove(),this._clear())},i._clear=function(){this.pause(),e.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,ee.recover("tween",this))},i.recover=function(){this._usedPool=!0,this._clear()},i._remove=function(){var i=t.tweenMap[this._target.$_GID];if(i)for(var e=0,n=i.length;n>e;e++)if(i[e]===this){i.splice(e,1);break}},i.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=Ti.now(),this._delayParam)return e.timer.once(this._delay,this,this.firstStart,this._delayParam),void 0;for(var t=this._props,i=0,n=t.length;n>i;i++){var s=t[i];this._target[s[0]]=s[1]}e.timer.once(this._delay,this,this._beginLoop)},i.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Ti.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?e.timer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},r(0,i,"progress",null,function(t){var i=t*this._duration;this._startTimer=Ti.now()-this._delay-i}),t.to=function(i,e,n,s,r,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),ee.getItemByClass("tween",t)._create(i,e,n,s,r,a,o,!0,h,!0)},t.from=function(i,e,n,s,r,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),ee.getItemByClass("tween",t)._create(i,e,n,s,r,a,o,!1,h,!0)},t.clearAll=function(i){if(i&&i.$_GID){var e=t.tweenMap[i.$_GID];if(e){for(var n=0,s=e.length;s>n;n++)e[n]._clear();e.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(i){t.clearAll(i)},t.easeNone=function(t,i,e,n){return e*t/n+i},t.tweenMap=[],t}(),Fi=function(){function t(){}s(t,"laya.display.cmd.DrawCurvesCmd");var i=t.prototype;return i.recover=function(){this.points=null,this.lineColor=null,ee.recover("DrawCurvesCmd",this)},i.run=function(t,i,e){t.drawCurves(this.x+i,this.y+e,this.points,this.lineColor,this.lineWidth)},r(0,i,"cmdID",function(){return"DrawCurves"}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawCurvesCmd",t);return a.x=i,a.y=e,a.points=n,a.lineColor=s,a.lineWidth=r,a},t.ID="DrawCurves",t}(),Vi=function(){function t(){this.reset()}s(t,"laya.utils.HTMLChar");var i=t.prototype;return i.setData=function(i,e,n,s){return this.char=i,this.charNum=i.charCodeAt(0),this.x=this.y=0,this.width=e,this.height=n,this.style=s,this.isWord=!t._isWordRegExp.test(i),this},i.reset=function(){return this.x=this.y=this.width=this.height=0,this.isWord=!1,this.char=null,this.charNum=0,this.style=null,this},i.recover=function(){ee.recover("HTMLChar",this.reset())},i._isChar=function(){return!0},i._getCSSStyle=function(){return this.style},t.create=function(){return ee.getItemByClass("HTMLChar",t)},t._isWordRegExp=new RegExp("[\\w.]",""),t}(),Ui=function(){function t(){}s(t,"laya.resource.Context");var i=t.prototype;return i.drawCanvas=function(t,i,e,n,s){Ri.drawCall++,this.drawImage(t._source,i,e,n,s)},i._drawRect=function(t,i,e,n,s){Ri.drawCall++,s&&(this.fillStyle=s),this.fillRect(t,i,e,n)},i.drawText=function(t,i,e,n,s,r){Ri.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=s,this.textAlign=r,this.textBaseline="top"),this.fillText(t,i,e)},i.fillBorderText=function(t,i,e,n,s,r,a,o){Ri.drawCall++,this.font=n,this.fillStyle=s,this.textBaseline="top",this.strokeStyle=r,this.lineWidth=a,this.textAlign=o,this.strokeText(t,i,e),this.fillText(t,i,e)},i.fillWords=function(t,i,e,n,s){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.textAlign="left";for(var r=0,a=t.length;a>r;r++){var o=t[r];this.fillText(o.char,o.x+i,o.y+e)}},i.fillBorderWords=function(t,i,e,n,s,r,a){n&&(this.font=n),s&&(this.fillStyle=s),this.textBaseline="top",this.lineWidth=a,this.textAlign="left",this.strokeStyle=r;for(var o=0,h=t.length;h>o;o++){var l=t[o];this.strokeText(l.char,l.x+i,l.y+e),this.fillText(l.char,l.x+i,l.y+e)}},i.strokeWord=function(t,i,e,n,s,r,a){Ri.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=s,this.lineWidth=r,this.textAlign=a,this.textBaseline="top"),this.strokeText(t,i,e)},i.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},i.clipRect=function(t,i,e,n){Ri.drawCall++,this.beginPath(),this.rect(t,i,e,n),this.clip()},i.drawTextureWithTransform=function(t,i,e,n,s,r,a,o,h,l){if(t._getSource()){Ri.drawCall++;var c=1!==h;if(c){var u=this.globalAlpha;this.globalAlpha*=h}l&&(this.globalCompositeOperation=l);var d=t.uv,_=t.bitmap._width,p=t.bitmap._height;r?(this.save(),this.transform(r.a,r.b,r.c,r.d,r.tx+a,r.ty+o),this.drawImage(t.bitmap._source,d[0]*_,d[1]*p,(d[2]-d[0])*_,(d[5]-d[3])*p,i,e,n,s),this.restore()):this.drawImage(t.bitmap._source,d[0]*_,d[1]*p,(d[2]-d[0])*_,(d[5]-d[3])*p,a+i,o+e,n,s),c&&(this.globalAlpha=u),l&&(this.globalCompositeOperation="source-over")}},i.drawTexture2=function(t,i,e,n,s,r){var a=r[0];Ri.drawCall++;var o=a.uv,h=a.bitmap._width,l=a.bitmap._height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+t,s.ty+i),this.drawImage(a.bitmap._source,o[0]*h,o[1]*l,(o[2]-o[0])*h,(o[5]-o[3])*l,r[1]-e,r[2]-n,r[3],r[4]),this.restore()):this.drawImage(a.bitmap._source,o[0]*h,o[1]*l,(o[2]-o[0])*h,(o[5]-o[3])*l,r[1]-e+t,r[2]-n+i,r[3],r[4])},i.fillTexture=function(t,i,e,n,s,r,a,o){if(!o.pat){if(t.uv!=On.DEF_UV){var h=new ra;h.getContext("2d"),h.size(t.width,t.height),h.context.drawTexture(t,0,0,t.width,t.height),t=new On(h)}o.pat=this.createPattern(t.bitmap._source,r)}var l=i,c=e,u=0,d=0;a&&(l+=a.x%t.width,c+=a.y%t.height,u-=a.x%t.width,d-=a.y%t.height),this.translate(l,c),this._drawRect(u,d,n,s,o.pat),this.translate(-l,-c)},i.flush=function(){return 0},i.destroy=function(){this.canvas.width=this.canvas.height=0},i.clear=function(){gi.isConchApp||this.clearRect(0,0,gi._mainCanvas.width,gi._mainCanvas.height)},i.drawTriangle=function(t,i,e,n,s,r,a,o){var h=t.bitmap,l=h._getSource(),c=t.width,u=t.height,d=h.width,_=h.height,p=e[n]*d,f=e[s]*d,m=e[r]*d,g=e[n+1]*_,v=e[s+1]*_,S=e[r+1]*_,y=i[n],C=i[s],E=i[r],b=i[n+1],I=i[s+1],x=i[r+1];if(o){var P=1,D=1,A=(y+C+E)/3,L=(b+I+x)/3,k=y-A,T=b-L,R=Math.sqrt(k*k+T*T);y=A+k/R*(R+P),b=L+T/R*(R+D),k=C-A,T=I-L,R=Math.sqrt(k*k+T*T),C=A+k/R*(R+P),I=L+T/R*(R+D),k=E-A,T=x-L,R=Math.sqrt(k*k+T*T),E=A+k/R*(R+P),x=L+T/R*(R+D)}this.save(),a&&this.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),this.beginPath(),this.moveTo(y,b),this.lineTo(C,I),this.lineTo(E,x),this.closePath(),this.clip();var w=p*v+g*m+f*S-v*m-g*f-p*S,O=1/w,M=y*v+g*E+C*S-v*E-g*C-y*S,B=p*C+y*m+f*E-C*m-y*f-p*E,N=p*v*E+g*C*m+y*f*S-y*v*m-g*f*E-p*C*S,F=b*v+g*x+I*S-v*x-g*I-b*S,V=p*I+b*m+f*x-I*m-b*f-p*x,U=p*v*x+g*I*m+b*f*S-b*v*m-g*f*x-p*I*S;this.transform(M*O,F*O,B*O,V*O,N*O,U*O),this.drawImage(l,t.uv[0]*d,t.uv[1]*_,c,u,t.uv[0]*d,t.uv[1]*_,c,u),this.restore()},i.transformByMatrix=function(t,i,e){this.transform(t.a,t.b,t.c,t.d,t.tx+i,t.ty+e)},i.saveTransform=function(){this.save()},i.restoreTransform=function(){this.restore()},i.drawRect=function(t,i,e,n,s,r,a){var o=this;null!=s&&(o.fillStyle=s,o.fillRect(t,i,e,n)),null!=r&&(o.strokeStyle=r,o.lineWidth=a,o.strokeRect(t,i,e,n))},i.drawTexture=function(t,i,e,n,s){var r=t._getSource();if(r){Ri.drawCall++;var a=t.uv,o=t.bitmap.width,h=t.bitmap.height;this.drawImage(r,a[0]*o,a[1]*h,(a[2]-a[0])*o,(a[5]-a[3])*h,i,e,n,s)}},i.drawTextures=function(t,i,e,n){Ri.drawCall+=i.length/2;for(var s=t.width,r=t.height,a=0,o=i.length;o>a;a+=2)this.drawTexture(t,i[a]+e,i[a+1]+n,s,r)},i.drawTriangles=function(t,i,e,n,s,r,a){var o=0,h=r.length;for(this.translate(i,e),o=0;h>o;o+=3){var l=2*r[o],c=2*r[o+1],u=2*r[o+2];this.drawTriangle(t,n,s,l,c,u,a,!0)}this.translate(-i,-e)},i.alpha=function(t){this.globalAlpha*=t},i._transform=function(t,i,e){this.translate(i,e),this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),this.translate(-i,-e)},i._rotate=function(t,i,e){this.translate(i,e),this.rotate(t),this.translate(-i,-e)},i._scale=function(t,i,e,n){this.translate(e,n),this.scale(t,i),this.translate(-e,-n)},i._drawLine=function(t,i,e,n,s,r,a,o){this.beginPath(),this.strokeStyle=a,this.lineWidth=o,this.moveTo(t+e,i+n),this.lineTo(t+s,i+r),this.stroke()},i._drawLines=function(t,i,e,n,s,r){gi.isWebGL&&this.setPathId(r),this.beginPath(),this.strokeStyle=n,this.lineWidth=s;var a=2,o=e.length;if(gi.isWebGL)this.addPath(e.slice(),!1,!1,t,i);else for(this.moveTo(t+e[0],i+e[1]);o>a;)this.lineTo(t+e[a++],i+e[a++]);this.stroke()},i.drawCurves=function(t,i,e,n,s){this.beginPath(),this.strokeStyle=n,this.lineWidth=s,this.moveTo(t+e[0],i+e[1]);for(var r=2,a=e.length;a>r;)this.quadraticCurveTo(t+e[r++],i+e[r++],t+e[r++],i+e[r++]);this.stroke()},i._fillAndStroke=function(t,i,e,n){void 0===n&&(n=!1),null!=t&&(this.fillStyle=t,this.fill()),null!=i&&e>0&&(this.strokeStyle=i,this.lineWidth=e,this.stroke())},i._drawCircle=function(i,e,n,s,r,a){Ri.drawCall++,gi.isWebGL?this.beginPath(!0):this.beginPath(),this.arc(i,e,n,0,t.PI2),this.closePath(),this._fillAndStroke(s,r,a)},i._drawPie=function(t,i,e,n,s,r,a,o){this.beginPath(),this.moveTo(t,i),this.arc(t,i,e,n,s),this.closePath(),this._fillAndStroke(r,a,o)},i._drawPoly=function(t,i,e,n,s,r,a,o){var h=2,l=e.length;if(this.beginPath(),gi.isWebGL)this.setPathId(o),this.addPath(e.slice(),!0,a,t,i);else for(this.moveTo(t+e[0],i+e[1]);l>h;)this.lineTo(t+e[h++],i+e[h++]);this.closePath(),this._fillAndStroke(n,s,r,a)},i._drawPath=function(t,i,e,n,s){this.beginPath();for(var r=0,a=e.length;a>r;r++){var o=e[r];switch(o[0]){case"moveTo":this.moveTo(t+o[1],i+o[2]);break;case"lineTo":this.lineTo(t+o[1],i+o[2]);break;case"arcTo":this.arcTo(t+o[1],i+o[2],t+o[3],i+o[4],o[5]);break;case"closePath":this.closePath()}}null!=n&&(this.fillStyle=n.fillStyle,this.fill()),null!=s&&(this.strokeStyle=s.strokeStyle,this.lineWidth=s.lineWidth||1,this.lineJoin=s.lineJoin,this.lineCap=s.lineCap,this.miterLimit=s.miterLimit,this.stroke())},i.drawParticle=function(){},t.__init__=function(t){var i=laya.resource.Context.prototype;if(t=t||CanvasRenderingContext2D.prototype,!t.init2d){t.init2d=!0;var e=["saveTransform","restoreTransform","transformByMatrix","drawTriangles","drawTriangle","drawTextures","fillWords","fillBorderWords","drawRect","strokeWord","drawText","fillTexture","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves","_drawRect","alpha","_transform","_rotate","_scale","_drawLine","_drawLines","_drawCircle","_fillAndStroke","_drawPie","_drawPoly","_drawPath","drawTextureWithTransform"];e.forEach(function(e){t[e]=i[e]})}},t.ENUM_TEXTALIGN_DEFAULT=0,t.ENUM_TEXTALIGN_CENTER=1,t.ENUM_TEXTALIGN_RIGHT=2,t.PI2=2*Math.PI,t}(),Wi=function(){function t(){this._nativeVertexArrayObject=null,this._bindedIndexBuffer=null,this._nativeVertexArrayObject=ki.instance.createVertexArray()}s(t,"laya.webgl.BufferStateBase");var i=t.prototype;return i.bind=function(){t._curBindedBufferState!==this&&(ki.instance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this)},i.unBind=function(){if(t._curBindedBufferState!==this)throw"BufferState: must call bind() function first.";ki.instance.bindVertexArray(null),t._curBindedBufferState=null},i.bindForNative=function(){ki.instance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this},i.unBindForNative=function(){ki.instance.bindVertexArray(null),t._curBindedBufferState=null},i.destroy=function(){ki.instance.deleteVertexArray(this._nativeVertexArrayObject)},t._curBindedBufferState=null,t}(),Hi=function(){function t(){}var i,r;return s(t,"laya.utils.SceneUtils"),t.getBindFun=function(i){var n=t._funMap.get(i);if(null==n){var s='"'+i+'"';s=s.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var r="(function(data){if(data==null)return;with(data){try{\nreturn "+s+"\n}catch(e){}}})";n=e._runScript(r),t._funMap.set(i,n)}return n},t.createByData=function(i,e){var n=r.create();if(i=t.createComp(e,i,i,null,n),i._setBit(8,!0),i.hasOwnProperty("_idMap")&&(i._idMap=n._idMap),e.animations){var s,a,o=[],h=e.animations,l=0,c=h.length;for(l=0;c>l;l++){switch(s=new ba,a=h[l],s._setUp(n._idMap,a),i[a.name]=s,s._setControlNode(i),a.action){case 1:s.play(0,!1);break;case 2:s.play(0,!0)}o.push(s)}i._aniList=o}return"Scene"===i._$componentType&&i._width>0&&null==e.props.hitTestPrior&&!i.mouseThrough&&(i.hitTestPrior=!0),n.beginLoad(i),i},t.createInitTool=function(){return r.create()},t.createComp=function(i,n,s,r,a){if("Scene3D"==i.type||"Sprite3D"==i.type){var o=[],h=e.Utils3D._createSceneByJsonForMaker(i,o,a);return"Sprite3D"==i.type?e.StaticBatchManager.combine(h,o):e.StaticBatchManager.combine(null,o),h}if(n=n||t.getCompInstance(i),!n)return i.props&&i.props.runtime?console.warn("runtime not found:"+i.props.runtime):console.warn("can not create:"+i.type),null;var l=i.child;if(l)for(var c="List"==n._$componentType,u=0,d=l.length;d>u;u++){var _=l[u];if(!n.hasOwnProperty("itemRender")||"render"!=_.props.name&&"render"!==_.props.renderType)if("Graphic"==_.type)he._addGraphicsToSprite(_,n);else if(he._isDrawType(_.type))he._addGraphicToSprite(_,n,!0);else{if(c){var p=[],f=t.createComp(_,null,s,p,a);p.length&&(f._$bindData=p)}else f=t.createComp(_,null,s,r,a);"Script"==_.type?f instanceof laya.components.Component?n._addComponentInstance(f):"owner"in f?f.owner=n:"target"in f&&(f.target=n):"mask"==_.props.renderType||"mask"==_.props.name?n.mask=f:f instanceof laya.display.Node&&n.addChild(f)}else n.itemRender=_}var m=i.props;for(var g in m){var v=m[g];"string"==typeof v&&(v.indexOf("@node:")>=0||v.indexOf("@Prefab:")>=0)?a&&a.addNodeRef(n,g,v):t.setCompValue(n,g,v,s,r)}return n._afterInited&&n._afterInited(),i.compId&&a&&a._idMap&&(a._idMap[i.compId]=n),n},t.setCompValue=function(e,n,s,r,a){if("string"==typeof s&&s.indexOf("${")>-1){if(t._sheet||(t._sheet=he.getClass("laya.data.Table")),!t._sheet)return console.warn("Can not find class Sheet"),void 0;if(a)a.push(e,n,s);else if(r){-1==s.indexOf("].")&&(s=s.replace(".","[0]."));var o=new i(e,n,s);o.exe(r);for(var h,l,c=s.replace(/\[.*?\]\./g,".");null!=(h=t._parseWatchData.exec(c));){for(var u=h[1];null!=(l=t._parseKeyWord.exec(u));){var d=l[0],_=r._watchMap[d]||(r._watchMap[d]=[]);_.push(o),t._sheet.I.notifer.on(d,r,r.changeData,[d])}_=r._watchMap[u]||(r._watchMap[u]=[]),_.push(o),t._sheet.I.notifer.on(u,r,r.changeData,[u])}}}else"var"===n&&r?r[s]=e:e[n]="true"===s?!0:"false"===s?!1:s},t.getCompInstance=function(i){if("UIView"==i.type&&i.props&&i.props.pageData)return t.createByData(null,i.props.pageData);var e=i.props&&i.props.runtime||i.type,n=he.getClass(e);if(!n)throw"Can not find class "+e;if("Script"===i.type&&n.prototype._doAwake){var s=ee.createByClass(n);return s._destroyed=!1,s}return i.props&&i.props.hasOwnProperty("renderType")&&"instance"==i.props.renderType?(n.instance||(n.instance=new n),n.instance):new n},t._sheet=null,n(t,["_funMap",function(){return this._funMap=new ne},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),t.__init$=function(){i=function(){function i(t,i,e){this.comp=null,this.prop=null,this.value=null,this.comp=t,this.prop=i,this.value=e}s(i,"");var e=i.prototype;return e.exe=function(i){var e=t.getBindFun(this.value);this.comp[this.prop]=e.call(this,i)},i}(),r=function(){function t(){this._nodeRefList=null,this._initList=null,this._loadList=null,this._idMap=null,this._scene=null}s(t,"");var i=t.prototype;return i.reset=function(){this._nodeRefList=null,this._initList=null,this._idMap=null,this._loadList=null,this._scene=null},i.recover=function(){this.reset(),ee.recover("InitTool",this)},i.addLoadRes=function(t,i){this._loadList||(this._loadList=[]),i?this._loadList.push({url:t,type:i}):this._loadList.push(t)},i.addNodeRef=function(t,i,e){this._nodeRefList||(this._nodeRefList=[]),this._nodeRefList.push([t,i,e]),e.indexOf("@Prefab:")>=0&&this.addLoadRes(e.replace("@Prefab:",""),"prefab")},i.setNodeRef=function(){if(this._nodeRefList){if(!this._idMap)return this._nodeRefList=null,void 0;var t=0,i=0;i=this._nodeRefList.length;var e;for(t=0;i>t;t++)e=this._nodeRefList[t],e[0][e[1]]=this.getReferData(e[2]);this._nodeRefList=null}},i.getReferData=function(t){if(t.indexOf("@Prefab:")>=0){var i;return i=Fn.getRes(t.replace("@Prefab:",""))}if(t.indexOf("@arr:")>=0){t=t.replace("@arr:","");var e;e=t.split(",");var n,s=0,r=0;for(r=e.length,s=0;r>s;s++)n=e[s],e[s]=n?this._idMap[n.replace("@node:","")]:null;return e}return this._idMap[t.replace("@node:","")]},i.addInitItem=function(t){this._initList||(this._initList=[]),this._initList.push(t)},i.doInits=function(){this._initList&&(this._initList=null)},i.finish=function(){this.setNodeRef(),this.doInits(),this._scene._setBit(8,!1),this._scene.parent&&this._scene.parent.activeInHierarchy&&this._scene.active&&this._scene._activeHierarchy(),this._scene.event("onViewCreated"),this.recover()},i.beginLoad=function(t){this._scene=t,!this._loadList||this._loadList.length<1?this.finish():e.loader.load(this._loadList,c.create(this,this.finish))},t.create=function(){var i=ee.getItemByClass("InitTool",t);return i._idMap=[],i},t}()},t}(),Gi=function(){function t(){}return s(t,"laya.net.ResourceVersion"),t.enable=function(i,n,s){void 0===s&&(s=2),laya.net.ResourceVersion.type=s,e.loader.load(i,c.create(null,t.onManifestLoaded,[n]),null,"json"),Li.customFormat=t.addVersionPrefix},t.onManifestLoaded=function(i,e){t.manifest=e,i.run(),e||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t.addVersionPrefix=function(i){return i=Li.getAdptedFilePath(i),t.manifest&&t.manifest[i]?2==t.type?t.manifest[i]:t.manifest[i]+"/"+i:i},t.FOLDER_VERSION=1,t.FILENAME_VERSION=2,t.manifest=null,t.type=1,t}(),zi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this.vbBuffer=null,this._vbSize=0/0,this.ibBuffer=null,this._ibSize=0/0,this._verticesNum=0/0,this._ibNum=0/0,this._blend_src=0,this._blend_dest=0}s(t,"laya.layagl.cmdNative.DrawTrianglesCmdNative");var i=t.prototype;return i.recover=function(){this._texture=null,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,ee.recover("DrawTrianglesCmd",this)},i._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"light":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},i._mixRGBandAlpha=function(t,i){var e=(4278190080&t)>>>24;return 0!=e?e*=i:e=255*i,16777215&t|e<<24},r(0,i,"vertices",function(){return this._vertices},function(t){this._vertices=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._verticesNum;n++)i[e++]=this._x+t[2*n],i[e++]=this._y+t[2*n+1],e++,e++,e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"cmdID",function(){return"DrawTriangles"}),r(0,i,"matrix",function(){return this._matrix},function(i){this._matrix=i;var e=this._paramData._float32Data;e[t._PARAM_MATRIX_POS_]=i.a,e[t._PARAM_MATRIX_POS_+1]=i.b,e[t._PARAM_MATRIX_POS_+2]=i.c,e[t._PARAM_MATRIX_POS_+3]=i.d,e[t._PARAM_MATRIX_POS_+4]=i.tx,e[t._PARAM_MATRIX_POS_+5]=i.ty,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"texture",function(){return this._texture},function(i){if(i&&i.url){this._texture=i;var e=this._paramData._int32Data;e[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,ki.syncBufferToRenderThread(this._paramData)}}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._verticesNum;n++)e++,i[e++]=t+this.vertices[2*n+1],e++,e++,e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._verticesNum;n++)i[e++]=t+this.vertices[2*n],e++,e++,e++,e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"alpha",function(){return this._alpha},function(t){this._alpha=t}),r(0,i,"uvs",function(){return this._uvs},function(t){this._uvs=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._verticesNum;n++)e++,e++,i[e++]=t[2*n],i[e++]=t[2*n+1],e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"indices",function(){return this._indices},function(t){this._indices=t;for(var i=this.ibBuffer._int16Data,e=0,n=0;n<this._ibNum;n++)i[e++]=t[n];ki.syncBufferToRenderThread(this.ibBuffer)}),r(0,i,"color",function(){return this._color},function(t){this._color=t}),r(0,i,"blendMode",function(){return this._blendMode},function(t){this._blendMode=t}),t.create=function(i,e,n,s,r,a,h,l,c,u){var d=ee.getItemByClass("DrawTrianglesCmd",t);d._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TRIANGLES_CMD_ENCODER_||(t._DRAW_TRIANGLES_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.setGlobalValueByParamData(ei.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_CMD_ENCODER_.restore(),ki.syncBufferToRenderThread(t._DRAW_TRIANGLES_CMD_ENCODER_)),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_||(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.addShaderMacro(ei.SHADER_MACRO_COLOR_FILTER),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(ei.GLOBALVALUE_COLORFILTER_COLOR,8,4*t._PARAM_FILTER_COLOR_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(ei.GLOBALVALUE_COLORFILTER_ALPHA,8,4*t._PARAM_FILTER_ALPHA_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(ei.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.restore(),ki.syncBufferToRenderThread(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_)),d._paramData||(d._paramData=new ParamData(152,!0)),d._texture=i,d._x=e,d._y=n,d._vertices=s,d._uvs=r,d._indices=a,d._matrix=h?h:new $e,d._alpha=l,d._color=c,d._blendMode=u;
var _=new hs,p=o.create(c);_.color(p.arrColor[0],p.arrColor[1],p.arrColor[2],p.arrColor[3]),d._verticesNum=d._vertices.length/2;var f=d._verticesNum;(!d.vbBuffer||d.vbBuffer.getByteLength()<24*f*3)&&(d.vbBuffer=new ParamData(24*f*3,!0)),d._vbSize=24*f*3;var m=d.vbBuffer._float32Data,g=d.vbBuffer._int32Data,v=4294967295;l&&(v=d._mixRGBandAlpha(v,l));for(var S=0,y=0;y<d._verticesNum;y++)m[S++]=e/d._matrix.a+s[2*y],m[S++]=n/d._matrix.d+s[2*y+1],m[S++]=r[2*y],m[S++]=r[2*y+1],g[S++]=v,g[S++]=4294967295;d._ibNum=a.length;var C=d._ibNum;(!d.ibBuffer||d.ibBuffer.getByteLength()<2*C)&&(d.ibBuffer=new ParamData(2*C,!0,!0)),d._ibSize=2*C;for(var E=d.ibBuffer._int16Data,b=0,I=0;I<d._ibNum;I++)E[b++]=a[I];var x=d._paramData._float32Data,P=d._paramData._int32Data;if(P[t._PARAM_UNIFORMLOCATION_POS_]=3,P[t._PARAM_TEXLOCATION_POS_]=33984,P[t._PARAM_TEXTURE_POS_]=i.bitmap._glTexture.id,P[t._PARAM_VB_POS_]=d.vbBuffer.getPtrID(),P[t._PARAM_VB_SIZE_POS_]=d._vbSize,P[t._PARAM_IB_POS_]=d.ibBuffer.getPtrID(),P[t._PARAM_IB_SIZE_POS_]=d._ibSize,P[t._PARAM_VB_OFFSET_POS_]=0,P[t._PARAM_IB_OFFSET_POS_]=0,P[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,x[t._PARAM_MATRIX_POS_]=d._matrix.a,x[t._PARAM_MATRIX_POS_+1]=d._matrix.b,x[t._PARAM_MATRIX_POS_+2]=d._matrix.c,x[t._PARAM_MATRIX_POS_+3]=d._matrix.d,x[t._PARAM_MATRIX_POS_+4]=d._matrix.tx,x[t._PARAM_MATRIX_POS_+5]=d._matrix.ty,u?(d._setBlendMode(u),P[t._PARAM_BLEND_SRC_POS_]=d._blend_src,P[t._PARAM_BLEND_DEST_POS_]=d._blend_dest):(P[t._PARAM_BLEND_SRC_POS_]=-1,P[t._PARAM_BLEND_DEST_POS_]=-1),c){S=t._PARAM_FILTER_COLOR_POS_;var D=_._mat;x[S++]=D[0],x[S++]=D[1],x[S++]=D[2],x[S++]=D[3],x[S++]=D[4],x[S++]=D[5],x[S++]=D[6],x[S++]=D[7],x[S++]=D[8],x[S++]=D[9],x[S++]=D[10],x[S++]=D[11],x[S++]=D[12],x[S++]=D[13],x[S++]=D[14],x[S++]=D[15],S=t._PARAM_FILTER_ALPHA_POS_;var A=_._alpha;x[S++]=255*A[0],x[S++]=255*A[1],x[S++]=255*A[2],x[S++]=255*A[3]}return ki.syncBufferToRenderThread(d.vbBuffer),ki.syncBufferToRenderThread(d.ibBuffer),ki.syncBufferToRenderThread(d._paramData),c?d._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.getPtrID(),d._paramData.getPtrID(),-1):d._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_CMD_ENCODER_.getPtrID(),d._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(d._graphicsCmdEncoder),d},t.ID="DrawTriangles",t._DRAW_TRIANGLES_CMD_ENCODER_=null,t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_POS_=5,t._PARAM_IB_SIZE_POS_=6,t._PARAM_VB_OFFSET_POS_=7,t._PARAM_IB_OFFSET_POS_=8,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=9,t._PARAM_BLEND_SRC_POS_=10,t._PARAM_BLEND_DEST_POS_=11,t._PARAM_MATRIX_POS_=12,t._PARAM_FILTER_COLOR_POS_=18,t._PARAM_FILTER_ALPHA_POS_=34,t}(),function(){function t(){}s(t,"laya.display.cmd.DrawImageCmd");var i=t.prototype;return i.recover=function(){this.texture._removeReference(),this.texture=null,ee.recover("DrawImageCmd",this)},i.run=function(t,i,e){t.drawTexture(this.texture,this.x+i,this.y+e,this.width,this.height)},r(0,i,"cmdID",function(){return"DrawImage"}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawImageCmd",t);return a.texture=i,i._addReference(),a.x=e,a.y=n,a.width=s,a.height=r,a},t.ID="DrawImage",t}()),Yi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._graphicsCmdEncoder_fill=null,this._paramData_fill=null,this._x=0/0,this._y=0/0,this._paths=null,this._brush=null,this._pen=null,this._vertNum=0,this._startOriX=0,this._startOriY=0,this._lastOriX=0,this._lastOriY=0,this.SEGNUM=32,this.lines_ibBuffer=null,this.lines_vbBuffer=null,this._lines_ibSize=0,this._lines_vbSize=0,this.fill_ibBuffer=null,this.fill_vbBuffer=null,this._fill_ibSize=0,this._fill_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._lines_ibArray=[],this._lines_vbArray=[],this._fill_ibArray=[],this._fill_vbArray=[]}s(t,"laya.layagl.cmdNative.DrawPathCmdNative");var i=t.prototype;return i._arcTo=function(t){var i=t[1],e=t[2],n=t[3],s=t[4],r=t[5],a=0,o=0,h=0,l=this._lastOriX-i,c=this._lastOriY-e,u=Math.sqrt(l*l+c*c);if(!(1e-6>=u)){var d=l/u,_=c/u,p=n-i,f=s-e,m=p*p+f*f,g=Math.sqrt(m);if(!(1e-6>=g)){var v=p/g,S=f/g,y=d+v,C=_+S,E=Math.sqrt(y*y+C*C);if(!(1e-6>=E)){var b=y/E,I=C/E,x=Math.acos(b*d+I*_),P=Math.PI/2-x;u=r/Math.tan(P);var D=u*d+i,A=u*_+e,L=Math.sqrt(u*u+r*r),k=i+b*L,T=e+I*L,R=d*S-_*v,w=0,O=0,M=0;if(R>=0){w=2*P;var B=w/this.SEGNUM;O=Math.sin(B),M=Math.cos(B)}else w=2*-P,B=w/this.SEGNUM,O=Math.sin(B),M=Math.cos(B);var N=this._lastOriX,F=this._lastOriY,V=D-k,U=A-T;for(a=0;a<this.SEGNUM;a++){var W=V*M+U*O,H=-V*O+U*M;o=W+k,h=H+T,(Math.abs(N-o)>.1||Math.abs(F-h)>.1)&&(this._points.push(o),this._points.push(h)),V=W,U=H}}}}},i.recover=function(){this._paths=null,this._brush=null,this._pen=null,this._points.length=0,this._lines_ibArray.length=0,this._lines_vbArray.length=0,this._fill_ibArray.length=0,this._fill_vbArray.length=0,ee.recover("DrawPathCmd",this)},r(0,i,"cmdID",function(){return"DrawPath"}),r(0,i,"paths",function(){return this._paths},function(t){this._paths=t}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.lines_vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._lines_vbArray[2*n]+t,e++,e++;ki.syncBufferToRenderThread(this.lines_vbBuffer)}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.lines_vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._lines_vbArray[2*n+1]+t,e++;ki.syncBufferToRenderThread(this.lines_vbBuffer)}),r(0,i,"brush",function(){return this._brush},function(i){this._brush||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._brush=i;var e=this._vertNum,n=xe.earcut(this._points,null,2);if(n.length>0){(!this.fill_ibBuffer||this.fill_ibBuffer.getByteLength()<2*n.length)&&(this.fill_ibBuffer=new ParamData(2*n.length,!0,!0)),this._fill_ibSize=2*n.length;for(var s=this.fill_ibBuffer._int16Data,r=0,a=0;a<n.length;a++)s[r++]=n[a]}var h=o.create(i.fillStyle),l=h.numColor;(!this.fill_vbBuffer||this.fill_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.fill_vbBuffer=new ParamData(3*e*4,!0)),this._fill_vbSize=3*this._vertNum*4;for(var c=this.fill_vbBuffer._float32Data,u=this.fill_vbBuffer._int32Data,d=0,_=0;_<this._vertNum;_++)c[d++]=this._points[2*_]+this.x,c[d++]=this._points[2*_+1]+this.y,u[d++]=l;var p=this._paramData._int32Data;p[t._PARAM_FILL_VB_POS_]=this.fill_vbBuffer.getPtrID(),p[t._PARAM_FILL_IB_POS_]=this.fill_ibBuffer.getPtrID(),p[t._PARAM_FILL_VB_SIZE_POS_]=this._fill_vbSize,p[t._PARAM_FILL_IB_SIZE_POS_]=this._fill_ibSize,ki.syncBufferToRenderThread(this.fill_vbBuffer),ki.syncBufferToRenderThread(this.fill_ibBuffer),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pen",function(){return this._pen},function(i){this._pen=i,this._lines_ibArray.length=0,this._lines_vbArray.length=0,Di.createLine2(this._points,this._lines_ibArray,i.lineWidth,0,this._lines_vbArray,!1);var e=o.create(i.strokeStyle),n=e.numColor,s=this._vertNum;(!this.lines_vbBuffer||this.lines_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.lines_vbBuffer=new ParamData(3*s*4,!0)),this._lines_vbSize=3*this._vertNum*4;for(var r=this.lines_vbBuffer._float32Data,a=this.lines_vbBuffer._int32Data,h=0,l=0;l<this._vertNum;l++)r[h++]=this._lines_vbArray[2*l]+this.x,r[h++]=this._lines_vbArray[2*l+1]+this.y,a[h++]=n;(!this.lines_ibBuffer||this.lines_ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.lines_ibBuffer=new ParamData(3*(s-2)*2,!0,!0)),this._lines_ibSize=3*(this._vertNum-2)*2;for(var c=this.lines_ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)c[u]=this._lines_ibArray[u];a=this._paramData._int32Data,a[t._PARAM_LINES_VB_POS_]=this.lines_vbBuffer.getPtrID(),a[t._PARAM_LINES_IB_POS_]=this.lines_ibBuffer.getPtrID(),a[t._PARAM_LINES_VB_SIZE_POS_]=this._lines_vbSize,a[t._PARAM_LINES_IB_SIZE_POS_]=this._lines_ibSize,ki.syncBufferToRenderThread(this.lines_vbBuffer),ki.syncBufferToRenderThread(this.lines_ibBuffer),ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawPathCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=ki.instance.createCommandEncoder(188,32,!0),t._DRAW_LINES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),t._DRAW_FILL_CMD_ENCODER_||(t._DRAW_FILL_CMD_ENCODER_=ki.instance.createCommandEncoder(168,32,!0),t._DRAW_FILL_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_FILL_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_FILL_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_FILL_CMD_ENCODER_)),t._DRAW_LINES_FILL_CMD_ENCODER_||(t._DRAW_LINES_FILL_CMD_ENCODER_=ki.instance.createCommandEncoder(244,32,!0),t._DRAW_LINES_FILL_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_LINES_FILL_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_LINES_FILL_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_LINES_FILL_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(60,!0)),a._x=i,a._y=e,a._paths=n,a._brush=s,a._pen=r;for(var h=0,l=n.length;l>h;h++){var c=n[h];switch(0==h&&(a._startOriX=c[1],a._startOriY=c[2]),c[0]){case"moveTo":a._lastOriX=c[1],a._lastOriY=c[2],a._points.push(c[1]),a._points.push(c[2]);break;case"lineTo":a._lastOriX=c[1],a._lastOriY=c[2],a._points.push(c[1]),a._points.push(c[2]);break;case"arcTo":a._arcTo(c);break;case"closePath":a._points.push(a._startOriX),a._points.push(a._startOriY)}}if(a._vertNum=a._points.length,r){Di.createLine2(a._points,a._lines_ibArray,r.lineWidth,0,a._lines_vbArray,!1);var u=o.create(r.strokeStyle),d=u.numColor,_=a._vertNum;(!a.lines_vbBuffer||a.lines_vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.lines_vbBuffer=new ParamData(3*_*4,!0)),a._lines_vbSize=3*a._vertNum*4;var p=a.lines_vbBuffer._float32Data,f=a.lines_vbBuffer._int32Data,m=0;for(h=0;h<a._vertNum;h++)p[m++]=a._lines_vbArray[2*h]+i,p[m++]=a._lines_vbArray[2*h+1]+e,f[m++]=d;(!a.lines_ibBuffer||a.lines_ibBuffer.getByteLength()<3*(a._vertNum-2)*2)&&(a.lines_ibBuffer=new ParamData(3*(_-2)*2,!0,!0)),a._lines_ibSize=3*(a._vertNum-2)*2;for(var g=a.lines_ibBuffer._int16Data,v=0;v<3*(a._vertNum-2);v++)g[v]=a._lines_ibArray[v]}if(s){_=a._vertNum;var S=xe.earcut(a._points,null,2);if(S.length>0){(!a.fill_ibBuffer||a.fill_ibBuffer.getByteLength()<2*S.length)&&(a.fill_ibBuffer=new ParamData(2*S.length,!0,!0)),a._fill_ibSize=2*S.length,g=a.fill_ibBuffer._int16Data;var y=0;for(v=0;v<S.length;v++)g[y++]=S[v]}u=o.create(s.fillStyle),d=u.numColor,(!a.fill_vbBuffer||a.fill_vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.fill_vbBuffer=new ParamData(3*_*4,!0)),a._fill_vbSize=3*a._vertNum*4,p=a.fill_vbBuffer._float32Data;var C=a.fill_vbBuffer._int32Data;for(C=a.fill_vbBuffer._int32Data,m=0,h=0;h<a._vertNum;h++)p[m++]=a._points[2*h]+i,p[m++]=a._points[2*h+1]+e,C[m++]=d}a._paramData._float32Data;return f=a._paramData._int32Data,f[0]=1,r&&(f[t._PARAM_LINES_VB_POS_]=a.lines_vbBuffer.getPtrID(),f[t._PARAM_LINES_IB_POS_]=a.lines_ibBuffer.getPtrID(),f[t._PARAM_LINES_VB_SIZE_POS_]=a._lines_vbSize,f[t._PARAM_LINES_IB_SIZE_POS_]=a._lines_ibSize,f[t._PARAM_LINE_VB_OFFSET_POS_]=0,f[t._PARAM_LINE_IB_OFFSET_POS_]=0,f[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(a.lines_vbBuffer),ki.syncBufferToRenderThread(a.lines_ibBuffer)),s&&(f[t._PARAM_FILL_VB_POS_]=a.fill_vbBuffer.getPtrID(),f[t._PARAM_FILL_IB_POS_]=a.fill_ibBuffer.getPtrID(),f[t._PARAM_FILL_VB_SIZE_POS_]=a._fill_vbSize,f[t._PARAM_FILL_IB_SIZE_POS_]=a._fill_ibSize,f[t._PARAM_FILL_VB_OFFSET_POS_]=0,f[t._PARAM_FILL_IB_OFFSET_POS_]=0,f[t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(a.fill_vbBuffer),ki.syncBufferToRenderThread(a.fill_ibBuffer)),ki.syncBufferToRenderThread(a._paramData),s&&r?a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1):s&&!r?a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_FILL_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1):!s&&r&&(a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1)),ki.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawPath",t._DRAW_LINES_CMD_ENCODER_=null,t._DRAW_LINES_FILL_CMD_ENCODER_=null,t._DRAW_FILL_CMD_ENCODER_=null,t._PARAM_LINES_VB_POS_=1,t._PARAM_LINES_IB_POS_=2,t._PARAM_LINES_VB_SIZE_POS_=3,t._PARAM_LINES_IB_SIZE_POS_=4,t._PARAM_FILL_VB_POS_=5,t._PARAM_FILL_IB_POS_=6,t._PARAM_FILL_VB_SIZE_POS_=7,t._PARAM_FILL_IB_SIZE_POS_=8,t._PARAM_FILL_VB_OFFSET_POS_=9,t._PARAM_FILL_IB_OFFSET_POS_=10,t._PARAM_LINE_VB_OFFSET_POS_=11,t._PARAM_LINE_IB_OFFSET_POS_=12,t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_=13,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=14,t}(),function(){function t(t){this.scale=1,this.currFrame=0,this._delta=0,this._map=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=Ti.now(),this._lastTimer=Ti.now(),void 0===t&&(t=!0),t&&e.systemTimer&&e.systemTimer.frameLoop(1,this,this._update)}var i;s(t,"laya.utils.Timer");var n=t.prototype;return n._update=function(){if(this.scale<=0)return this._lastTimer=Ti.now(),void 0;var t=this.currFrame=this.currFrame+this.scale,i=Ti.now();this._delta=(i-this._lastTimer)*this.scale;var e=this.currTimer=this.currTimer+this._delta;this._lastTimer=i;var n=this._handlers;this._count=0;for(var s=0,r=n.length;r>s;s++){var a=n[s];if(null!==a.method){var o=a.userFrame?t:e;if(o>=a.exeTime)if(a.repeat)if(a.jumpFrame)for(;o>=a.exeTime;)a.exeTime+=a.delay,a.run(!1);else a.exeTime+=a.delay,a.run(!1),o>a.exeTime&&(a.exeTime+=Math.ceil((o-a.exeTime)/a.delay)*a.delay);else a.run(!0)}else this._count++}(this._count>30||t%200===0)&&this._clearHandlers()},n._clearHandlers=function(){for(var t=this._handlers,i=0,e=t.length;e>i;i++){var n=t[i];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,t.length=0,this._temp=t},n._recoverHandler=function(i){this._map[i.key]==i&&(this._map[i.key]=null),i.clear(),t._pool.push(i)},n._create=function(e,n,s,r,a,o,h){if(!s)return a.apply(r,o),null;if(h){var l=this._getHandler(r,a);if(l)return l.repeat=n,l.userFrame=e,l.delay=s,l.caller=r,l.method=a,l.args=o,l.exeTime=s+(e?this.currFrame:this.currTimer+Ti.now()-this._lastTimer),l}return l=t._pool.length>0?t._pool.pop():new i,l.repeat=n,l.userFrame=e,l.delay=s,l.caller=r,l.method=a,l.args=o,l.exeTime=s+(e?this.currFrame:this.currTimer+Ti.now()-this._lastTimer),this._indexHandler(l),this._handlers.push(l),l},n._indexHandler=function(i){var e=i.caller,n=i.method,s=e?e.$_GID||(e.$_GID=en.getGID()):0,r=n.$_TID||(n.$_TID=1e5*t._mid++);i.key=s+r,this._map[i.key]=i},n.once=function(t,i,e,n,s){void 0===s&&(s=!0),this._create(!1,!1,t,i,e,n,s)},n.loop=function(t,i,e,n,s,r){void 0===s&&(s=!0),void 0===r&&(r=!1);var a=this._create(!1,!0,t,i,e,n,s);a&&(a.jumpFrame=r)},n.frameOnce=function(t,i,e,n,s){void 0===s&&(s=!0),this._create(!0,!1,t,i,e,n,s)},n.frameLoop=function(t,i,e,n,s){void 0===s&&(s=!0),this._create(!0,!0,t,i,e,n,s)},n.toString=function(){return" handlers:"+this._handlers.length+" pool:"+t._pool.length},n.clear=function(t,i){var e=this._getHandler(t,i);e&&(this._map[e.key]=null,e.key=0,e.clear())},n.clearAll=function(t){if(t)for(var i=0,e=this._handlers.length;e>i;i++){var n=this._handlers[i];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},n._getHandler=function(i,e){var n=i?i.$_GID||(i.$_GID=en.getGID()):0,s=e.$_TID||(e.$_TID=1e5*t._mid++);return this._map[n+s]},n.callLater=function(t,i,e){ci.I.callLater(t,i,e)},n.runCallLater=function(t,i){ci.I.runCallLater(t,i)},n.runTimer=function(t,i){var e=this._getHandler(t,i);e&&null!=e.method&&(this._map[e.key]=null,e.run(!0))},n.pause=function(){this.scale=0},n.resume=function(){this.scale=1},r(0,n,"delta",function(){return this._delta}),t._pool=[],t._mid=1,t.__init$=function(){i=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}s(t,"");var i=t.prototype;return i.clear=function(){this.caller=null,this.method=null,this.args=null},i.run=function(t){var i=this.caller;if(i&&i.destroyed)return this.clear();var e=this.method,n=this.args;t&&this.clear(),null!=e&&(n?e.apply(i,n):e.call(i))},t}()},t}()),Xi=function(){function t(){}s(t,"laya.display.cmd.DrawTrianglesCmd");var i=t.prototype;return i.recover=function(){this.texture=null,this.vertices=null,this.uvs=null,this.indices=null,this.matrix=null,ee.recover("DrawTrianglesCmd",this)},i.run=function(t,i,e){t.drawTriangles(this.texture,this.x+i,this.y+e,this.vertices,this.uvs,this.indices,this.matrix,this.alpha,this.color,this.blendMode)},r(0,i,"cmdID",function(){return"DrawTriangles"}),t.create=function(i,e,n,s,r,a,h,l,c,u){var d=ee.getItemByClass("DrawTrianglesCmd",t);if(d.texture=i,d.x=e,d.y=n,d.vertices=s,d.uvs=r,d.indices=a,d.matrix=h,d.alpha=l,c){d.color=new hs;var _=o.create(c).arrColor;d.color.color(255*_[0],255*_[1],255*_[2],255*_[3])}return d.blendMode=u,d},t.ID="DrawTriangles",t}(),qi=function(){function t(){}return s(t,"laya.html.utils.HTMLParse"),t.getInstance=function(i){var e=ee.getItem(t._htmlClassMapShort[i]);return e||(e=he.getInstance(i)),e},t.parse=function(i,e,n){e=e.replace(/<br>/g,"<br/>"),e="<root>"+e+"</root>",e=e.replace(t.spacePattern,t.char255);var s=en.parseXMLFromString(e);t._parseXML(i,s.childNodes[0].childNodes,n)},t._parseXML=function(i,e,n,s){var r=0,a=0;if(e.join||e.item)for(r=0,a=e.length;a>r;++r)t._parseXML(i,e[r],n,s);else{var o,h;if(3==e.nodeType){var l;return i instanceof laya.html.dom.HTMLDivParser?(null==e.nodeName&&(e.nodeName="#text"),h=e.nodeName.toLowerCase(),l=e.textContent.replace(/^\s+|\s+$/g,""),l.length>0&&(o=t.getInstance(h),o&&(i.addChild(o),o.innerTEXT=l.replace(t.char255AndOneSpacePattern," ")))):(l=e.textContent.replace(/^\s+|\s+$/g,""),l.length>0&&(i.innerTEXT=l.replace(t.char255AndOneSpacePattern," "))),void 0}if(h=e.nodeName.toLowerCase(),"#comment"==h)return;if(o=t.getInstance(h)){"p"==h?(i.addChild(t.getInstance("br")),o=i.addChild(o),i.addChild(t.getInstance("br"))):o=i.addChild(o),o.URI=n,o.href=s;var c=e.attributes;if(c&&c.length>0)for(r=0,a=c.length;a>r;++r){var u=c[r],d=u.nodeName,_=u.value;o._setAttributes(d,_)}t._parseXML(o,e.childNodes,n,o.href)}else t._parseXML(i,e.childNodes,n,s)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t._htmlClassMapShort={div:"HTMLDivParser",p:"HTMLElement",img:"HTMLImageElement",span:"HTMLElement",br:"HTMLBrElement",style:"HTMLStyleElement",font:"HTMLElement",a:"HTMLElement","#text":"HTMLElement",link:"HTMLLinkElement"},t}(),Ji=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._fromX=0/0,this._fromY=0/0,this._toX=0/0,this._toY=0/0,this._lineColor=null,this._lineWidth=0/0,this._vid=0}s(t,"laya.layagl.cmdNative.DrawLineCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("DrawLineCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(i){this._lineColor=i;var e=o.create(this.lineColor),n=e.numColor,s=this._paramData._int32Data,r=t._PARAM_VB_POS_;r++,r++,s[r++]=n,r++,r++,s[r++]=n,r++,r++,s[r++]=n,r++,r++,s[r++]=n,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawLine"}),r(0,i,"toY",function(){return this._toY},function(i){this._toY=i;var e=[this._fromX,this._fromY,this._toX,this._toY],n=[],s=[];Di.createLine2(e,s,this._lineWidth,0,n,!1);var r=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;r[o++]=n[0],r[o++]=n[1],o++,r[o++]=n[2],r[o++]=n[3],o++,r[o++]=n[4],r[o++]=n[5],o++,r[o++]=n[6],r[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=s[0],a[h++]=s[1],a[h++]=s[2],a[h++]=s[3],a[h++]=s[4],a[h++]=s[5],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"fromX",function(){return this._fromX},function(i){this._fromX=i;var e=[this._fromX,this._fromY,this._toX,this._toY],n=[],s=[];Di.createLine2(e,s,this._lineWidth,0,n,!1);var r=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;r[o++]=n[0],r[o++]=n[1],o++,r[o++]=n[2],r[o++]=n[3],o++,r[o++]=n[4],r[o++]=n[5],o++,r[o++]=n[6],r[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=s[0],a[h++]=s[1],a[h++]=s[2],a[h++]=s[3],a[h++]=s[4],a[h++]=s[5],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"vid",function(){return this._vid},function(t){this._vid=t}),r(0,i,"toX",function(){return this._toX},function(i){this._toX=i;var e=[this._fromX,this._fromY,this._toX,this._toY],n=[],s=[];Di.createLine2(e,s,this._lineWidth,0,n,!1);var r=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;r[o++]=n[0],r[o++]=n[1],o++,r[o++]=n[2],r[o++]=n[3],o++,r[o++]=n[4],r[o++]=n[5],o++,r[o++]=n[6],r[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=s[0],a[h++]=s[1],a[h++]=s[2],a[h++]=s[3],a[h++]=s[4],a[h++]=s[5],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"fromY",function(){return this._fromY},function(i){this._fromY=i;var e=[this._fromX,this._fromY,this._toX,this._toY],n=[],s=[];Di.createLine2(e,s,this._lineWidth,0,n,!1);var r=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;r[o++]=n[0],r[o++]=n[1],o++,r[o++]=n[2],r[o++]=n[3],o++,r[o++]=n[4],r[o++]=n[5],o++,r[o++]=n[6],r[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=s[0],a[h++]=s[1],a[h++]=s[2],a[h++]=s[3],a[h++]=s[4],a[h++]=s[5],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(i){this._lineWidth=i;var e=[this._fromX,this._fromY,this._toX,this._toY],n=[],s=[];Di.createLine2(e,s,this.lineWidth,0,n,!1);var r=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;r[o++]=n[0],r[o++]=n[1],o++,r[o++]=n[2],r[o++]=n[3],o++,r[o++]=n[4],r[o++]=n[5],o++,r[o++]=n[6],r[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=s[0],a[h++]=s[1],a[h++]=s[2],a[h++]=s[3],a[h++]=s[4],a[h++]=s[5],ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r,a,h){var l=ee.getItemByClass("DrawLineCmd",t);l._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINE_CMD_ENCODER_||(t._DRAW_LINE_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_LINE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_LINE_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,8,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_LINE_CMD_ENCODER_)),l._paramData||(l._paramData=new ParamData(96,!0)),l._fromX=i,l._fromY=e,l._toX=n,l._toY=s,l._lineColor=r,l._lineWidth=a,l._vid=h;var c=o.create(r),u=c.numColor,d=[i,e,n,s],_=[],p=[];Di.createLine2(d,p,a,0,_,!1);var f=l._paramData._float32Data,m=l._paramData._int32Data,g=l._paramData._int16Data;m[0]=1,m[1]=48,m[2]=12,m[t._PARAM_VB_OFFSET_POS_]=0,m[t._PARAM_IB_OFFSET_POS_]=0,m[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0;var v=t._PARAM_VB_POS_;f[v++]=_[0],f[v++]=_[1],m[v++]=u,f[v++]=_[2],f[v++]=_[3],m[v++]=u,f[v++]=_[4],f[v++]=_[5],m[v++]=u,f[v++]=_[6],f[v++]=_[7],m[v++]=u;var S=2*t._PARAM_IB_POS_;return g[S++]=p[0],g[S++]=p[1],g[S++]=p[2],g[S++]=p[3],g[S++]=p[4],g[S++]=p[5],f[t._PARAM_LINECOLOR_POS_]=r?r:4278190335,f[t._PARAM_LINEWIDTH_POS_]=a,f[t._PARAM_VID_POS_]=h,ki.syncBufferToRenderThread(l._paramData),l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINE_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(l._graphicsCmdEncoder),l},t.ID="DrawLine",t._DRAW_LINE_CMD_ENCODER_=null,t._PARAM_VB_POS_=3,t._PARAM_IB_POS_=15,t._PARAM_LINECOLOR_POS_=18,t._PARAM_LINEWIDTH_POS_=19,t._PARAM_VID_POS_=20,t._PARAM_VB_OFFSET_POS_=21,t._PARAM_IB_OFFSET_POS_=22,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=23,t}(),function(){function t(){}s(t,"laya.display.cmd.DrawTextureCmd");var i=t.prototype;return i.recover=function(){this.texture._removeReference(),this.texture=null,this.matrix=null,ee.recover("DrawTextureCmd",this)},i.run=function(t,i,e){t.drawTextureWithTransform(this.texture,this.x,this.y,this.width,this.height,this.matrix,i,e,this.alpha,this.blendMode)},r(0,i,"cmdID",function(){return"DrawTexture"}),t.create=function(i,e,n,s,r,a,o,h,l){var c=ee.getItemByClass("DrawTextureCmd",t);return c.texture=i,i._addReference(),c.x=e,c.y=n,c.width=s,c.height=r,c.matrix=a,c.alpha=o,c.color=h,c.blendMode=l,c},t.ID="DrawTexture",t}()),ji=function(){function t(){this._matrix=new $e}s(t,"laya.webgl.canvas.save.SaveTransform");var i=t.prototype;return e.imps(i,{"laya.webgl.canvas.save.ISaveData":!0}),i.isSaveMark=function(){return!1},i.restore=function(i){i._curMat=this._savematrix,t.POOL[t.POOL._length++]=this},t.save=function(i){var e=i._saveMark;if(2048!==(2048&e._saveuse)){e._saveuse|=2048;var n=t.POOL,s=n._length>0?n[--n._length]:new t;s._savematrix=i._curMat,i._curMat=i._curMat.copyTo(s._matrix);var r=i._save;r[r._length++]=s}},t.POOL=h._createArray(),t}(),Ki=function(){function i(){}var e;return s(i,"laya.net.LocalStorage"),i.__init__=function(){return i._baseClass||(i._baseClass=e,e.init()),i.items=i._baseClass.items,i.support=i._baseClass.support,i.support},i.setItem=function(t,e){i._baseClass.setItem(t,e)},i.getItem=function(t){return i._baseClass.getItem(t)},i.setJSON=function(t,e){i._baseClass.setJSON(t,e)},i.getJSON=function(t){return i._baseClass.getJSON(t)},i.removeItem=function(t){i._baseClass.removeItem(t)},i.clear=function(){i._baseClass.clear()},i._baseClass=null,i.items=null,i.support=!1,i.__init$=function(){e=function(){function i(){}return s(i,""),i.init=function(){try{i.support=!0,i.items=t.localStorage,i.setItem("laya","1"),i.removeItem("laya")}catch(e){i.support=!1}i.support||console.log("LocalStorage is not supprot or browser is private mode.")},i.setItem=function(t,e){try{i.support&&i.items.setItem(t,e)}catch(n){console.warn("set localStorage failed",n)}},i.getItem=function(t){return i.support?i.items.getItem(t):null},i.setJSON=function(t,e){try{i.support&&i.items.setItem(t,JSON.stringify(e))}catch(n){console.warn("set localStorage failed",n)}},i.getJSON=function(t){return JSON.parse(i.support?i.items.getItem(t):null)},i.removeItem=function(t){i.support&&i.items.removeItem(t)},i.clear=function(){i.support&&i.items.clear()},i.items=null,i.support=!1,i}()},i}(),Zi=function(){function t(){}return s(t,"laya.webgl.canvas.BlendMode"),t._init_=function(){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]},t.BlendNormal=function(t){Pe.setBlendFunc(t,1,771)},t.BlendAdd=function(t){Pe.setBlendFunc(t,1,772)},t.BlendMultiply=function(t){Pe.setBlendFunc(t,774,771)},t.BlendScreen=function(t){Pe.setBlendFunc(t,1,1)},t.BlendOverlay=function(t){Pe.setBlendFunc(t,1,769)},t.BlendLight=function(t){Pe.setBlendFunc(t,1,1)},t.BlendNormalTarget=function(t){Pe.setBlendFunc(t,1,771)},t.BlendAddTarget=function(t){Pe.setBlendFunc(t,1,772)},t.BlendMultiplyTarget=function(t){Pe.setBlendFunc(t,774,771)},t.BlendScreenTarget=function(t){Pe.setBlendFunc(t,1,1)},t.BlendOverlayTarget=function(t){Pe.setBlendFunc(t,1,769)},t.BlendLightTarget=function(t){Pe.setBlendFunc(t,1,1)},t.BlendMask=function(t){Pe.setBlendFunc(t,0,770)},t.BlendDestinationOut=function(t){Pe.setBlendFunc(t,0,0)},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,overlay:4,light:5,mask:6,"destination-out":7,lighter:1},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.OVERLAY="overlay",t.LIGHT="light",t.MASK="mask",t.DESTINATIONOUT="destination-out",t.LIGHTER="lighter",t.fns=[],t.targetFns=[],t}(),$i=function(){function t(){this._commStr="",this._commandEncoder=null,this._id=0,this._commandEncoder=ki.instance.createCommandEncoder(64,16,!1)}s(t,"laya.layagl.LayaGLTemplate");var i=t.prototype;return i.addComd=function(t,i){this._commStr+=t+"("+i+");",this._commandEncoder[t].apply(this._commandEncoder,i)},t.createByRenderType=function(i){var e=t.GLS[i]=new t;gi.isConchApp&&ki.instance.setGLTemplate(i,e._commandEncoder.getPtrID());for(var n=1;8192>=n;){var s=i&n;if(s&&t.__FUN_PARAM__[n])for(var r=t.__FUN_PARAM__[n],a=0,o=r.length;o>a;a++){var h=r[a];e.addComd(h.func,h.args)}n<<=1}return e._id=i,console.log("template="+e._commStr),e},t.createByRenderTypeEnd=function(i){var e=t.GLSE[i]=new t;gi.isConchApp&&ki.instance.setEndGLTemplate(i,e._commandEncoder.getPtrID());for(var n=8192;n>1;){var s=i&n;if(s&&t.__FUN_PARAM_END_[n])for(var r=t.__FUN_PARAM_END_[n],a=0,o=r.length;o>a;a++){var h=r[a];e.addComd(h.func,h.args)}n>>=1}return e._id=i,console.log("templateEnd="+e._commStr),e},t.__init__=function(){t.__FUN_PARAM__[1]=[{func:"setGlobalValueByParamData",args:[ei.GLOBALVALUE_DRAWTEXTURE_COLOR,15,88]}],t.__FUN_PARAM__[2]=[{func:"calcLocalMatrix32",args:[60,64,24,28,32,36,40,44,48,52,56]},{func:"setGlobalValueByParamData",args:[ei.GLOBALVALUE_MATRIX32,7,64]}],t.__FUN_PARAM__[4]=[{func:"setGlobalValueByParamData",args:[ei.GLOBALVALUE_BLENDFUNC_SRC,8,284]},{func:"setGlobalValueByParamData",args:[ei.GLOBALVALUE_BLENDFUNC_DEST,8,288]}],t.__FUN_PARAM__[256]=[{func:"useCommandEncoderByParamData",args:[96,100,1]}],t.__FUN_PARAM__[512]=[{func:"callbackJSByParamData",args:[216,272]},{func:"useCommandEncoderByParamData",args:[92,-1,1]}],t.__FUN_PARAM__[1024]=[{func:"callbackJSByParamData",args:[216,248]},{func:"useCommandEncoderByParamData",args:[104,-1,3]}],t.__FUN_PARAM__[2048]=[{func:"callbackJSByParamData",args:[216,220]},{func:"useCommandEncoderByParamData",args:[108,-1,1]}],t.__FUN_PARAM__[64]=[{func:"setClipByParamData",args:[ei.GLOBALVALUE_CLIP_MAT_DIR,ei.GLOBALVALUE_CLIP_MAT_POS,ei.GLOBALVALUE_MATRIX32,112]},{func:"setGlobalValueByParamData",args:[ei.GLOBALVALUE_MATRIX32,9,128]}],t.__FUN_PARAM__[16]=[{func:"callbackJSByParamData",args:[216,260]},{func:"useCommandEncoderByParamData",args:[256,-1,0]}],t.__FUN_PARAM__[32]=[{func:"callbackJSByParamData",args:[216,276]},{func:"useCommandEncoderByParamData",args:[280,-1,0]}],t.__FUN_PARAM__[8]=[{func:"callbackJSByParamData",args:[216,224]},{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2147483647]},{func:"useCommandEncoderByParamData",args:[232,-1,0]}],t.__FUN_PARAM__[128]=[{func:"useCommandEncoderByParamData",args:[292,296,1]},{func:"useCommandEncoderByParamData",args:[300,304,1]}]
},t.__init_END_=function(){t.__FUN_PARAM_END_[16]=[{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2]},{func:"callbackJSByParamData",args:[216,268]},{func:"useCommandEncoderByParamData",args:[264,-1,1]}],t.__FUN_PARAM_END_[8]=[{func:"callbackJSByParamData",args:[216,228]},{func:"useCommandEncoderByParamData",args:[236,-1,0]},{func:"useCommandEncoderByParamData",args:[240,244,1]}]},t.GLS=[],t.GLSE=[],t.__FUN_PARAM__=[],t.__FUN_PARAM_END_=[],t}(),Qi=(function(){function t(){}s(t,"laya.html.dom.HTMLBrElement");var i=t.prototype;return i._addToLayout=function(t){t.push(this)},i.reset=function(){return this},i.destroy=function(){ee.recover(vi.getClassName(this),this.reset())},i._setParent=function(){},i._getCSSStyle=function(){return t.brStyle||(t.brStyle=new vn,t.brStyle.setLineElement(!0),t.brStyle.block=!0),t.brStyle},i.renderSelfToGraphic=function(){},r(0,i,"URI",null,function(){}),r(0,i,"parent",null,function(){}),r(0,i,"href",null,function(){}),t.brStyle=null,t}(),function(){function t(){this._saveuse=0}s(t,"laya.webgl.canvas.save.SaveMark");var i=t.prototype;return e.imps(i,{"laya.webgl.canvas.save.ISaveData":!0}),i.isSaveMark=function(){return!0},i.restore=function(i){i._saveMark=this._preSaveMark,t.POOL[t.POOL._length++]=this},t.Create=function(i){var e=t.POOL,n=e._length>0?e[--e._length]:new t;return n._saveuse=0,n._preSaveMark=i._saveMark,i._saveMark=n,n},t.POOL=h._createArray(),t}()),te=function(){function t(){this._one=null,this._cmds=null,this.autoDestroy=!1,this._render=this._renderEmpty,this._createData()}s(t,"laya.display.Graphics");var i=t.prototype;return i._createData=function(){},i._clearData=function(){},i._destroyData=function(){},i.destroy=function(){this.clear(!0),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0,this._sp._setRenderType(0),this._sp=null),this._destroyData()},i.clear=function(t){if(void 0===t&&(t=!0),t){var i=this._one;if(this._cmds){var e=0,n=this._cmds.length;for(e=0;n>e;e++)i=this._cmds[e],i.recover();this._cmds.length=0}else i&&i.recover()}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._clearData(),this._sp&&(this._sp._renderType&=-513,this._sp._setRenderType(this._sp._renderType)),this._repaint(),this._vectorgraphArray){for(e=0,n=this._vectorgraphArray.length;n>e;e++)re.getInstance().deleteShape(this._vectorgraphArray[e]);this._vectorgraphArray.length=0}},i._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},i._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=ni.create(),this._graphicBounds._graphics=this)},i._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},i._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},i.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t)},i.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},i.drawImage=function(t,i,e,n,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),!t)return null;if(n||(n=t.sourceWidth),s||(s=t.sourceHeight),t.getIsReady()){var r=n/t.sourceWidth,a=s/t.sourceHeight;if(n=t.width*r,s=t.height*a,0>=n||0>=s)return null;i+=t.offsetX*r,e+=t.offsetY*a}this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));var o=zi.create.call(this,t,i,e,n,s);return null==this._one?(this._one=o,this._render=this._renderOneImg):this._saveToCmd(null,o),this._repaint(),o},i.drawTexture=function(t,i,e,n,s,r,a,h,l){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=1),!t||.01>a)return null;if(!t.getIsReady())return null;if(n||(n=t.sourceWidth),s||(s=t.sourceHeight),t.getIsReady()){var c=!gi.isWebGL&&(Ti.onFirefox||Ti.onEdge||Ti.onIE||Ti.onSafari)?.5:0,u=n/t.sourceWidth,d=s/t.sourceHeight;if(n=t.width*u,s=t.height*d,0>=n||0>=s)return null;i+=t.offsetX*u,e+=t.offsetY*d,i-=c,e-=c,n+=2*c,s+=2*c}if(this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),!gi.isConchApp&&!gi.isWebGL&&(l||h)){var _=new ra;_.size(n,s);var p=_.getContext("2d");if(p.drawTexture(t,0,0,n,s),t=new On(_),h){var f=new $,m=o.create(h).arrColor;f.data=(new hs).color(255*m[0],255*m[1],255*m[2]),f.apply({ctx:{ctx:p}})}}var g=Ji.create.call(this,t,i,e,n,s,r,a,h,l);return this._repaint(),this._saveToCmd(null,g)},i.drawTextures=function(t,i){return t?this._saveToCmd(gi._context._drawTextures,ie.create.call(this,t,i)):null},i.drawTriangles=function(t,i,e,n,s,r,a,o,h,l){return void 0===o&&(o=1),this._saveToCmd(gi._context.drawTriangles,Xi.create.call(this,t,i,e,n,s,r,a,o,h,l))},i.fillTexture=function(t,i,e,n,s,r,a){return void 0===n&&(n=0),void 0===s&&(s=0),void 0===r&&(r="repeat"),t&&t.getIsReady()?this._saveToCmd(gi._context._fillTexture,hi.create.call(this,t,i,e,n,s,r,a||Oe.EMPTY,{})):null},i._saveToCmd=function(t,i){return this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),null==this._one?(this._one=i,this._render=this._renderOne):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(i)),this._repaint(),i},i.clipRect=function(t,i,e,n){return this._saveToCmd(gi._context._clipRect,we.create.call(this,t,i,e,n))},i.fillText=function(t,i,e,n,s,r){return this._saveToCmd(gi._context._fillText,Bi.create.call(this,t,i,e,n||na.defaultFontStr(),s,r))},i.fillBorderText=function(t,i,e,n,s,r,a,o){return this._saveToCmd(gi._context._fillBorderText,Ve.create.call(this,t,i,e,n||na.defaultFontStr(),s,r,a,o))},i.fillWords=function(t,i,e,n,s){return this._saveToCmd(gi._context._fillWords,Ue.create.call(this,t,i,e,n||na.defaultFontStr(),s))},i.fillBorderWords=function(t,i,e,n,s,r,a){return this._saveToCmd(gi._context._fillBorderWords,Me.create.call(this,t,i,e,n||na.defaultFontStr(),s,r,a))},i.strokeText=function(t,i,e,n,s,r,a){return this._saveToCmd(gi._context._strokeText,xi.create.call(this,t,i,e,n||na.defaultFontStr(),s,r,a))},i.alpha=function(t){return this._saveToCmd(gi._context._alpha,Re.create.call(this,t))},i.transform=function(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=0),this._saveToCmd(gi._context._transform,Ge.create.call(this,t,i,e))},i.rotate=function(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=0),this._saveToCmd(gi._context._rotate,le.create.call(this,t,i,e))},i.scale=function(t,i,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this._saveToCmd(gi._context._scale,Te.create.call(this,t,i,e,n))},i.translate=function(t,i){return this._saveToCmd(gi._context._translate,Sn.create.call(this,t,i))},i.save=function(){return this._saveToCmd(gi._context._save,ce.create.call(this))},i.restore=function(){return this._saveToCmd(gi._context._restore,Ae.create.call(this))},i.replaceText=function(t){this._repaint();var i=this._cmds;if(i){for(var e=i.length-1;e>-1;e--)if(this._isTextCmd(i[e]))return i[e].text=t,!0}else if(this._one&&this._isTextCmd(this._one))return this._one.text=t,!0;return!1},i._isTextCmd=function(t){var i=t.cmdID;return"FillText"==i||"StrokeText"==i||"FillBorderText"==i},i.replaceTextColor=function(t){this._repaint();var i=this._cmds;if(i)for(var e=i.length-1;e>-1;e--)this._isTextCmd(i[e])&&this._setTextCmdColor(i[e],t);else this._one&&this._isTextCmd(this._one)&&this._setTextCmdColor(this._one,t)},i._setTextCmdColor=function(t,i){var e=t.cmdID;switch(e){case"FillText":case"StrokeText":t.color=i;break;case"FillBorderText":case"FillBorderWords":case"FillBorderText":t.fillColor=i}},i.loadImage=function(t,i,e,n,s,r){void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0);var a=Fn.getRes(t);a?a.getIsReady()?this.drawImage(a,i,e,n,s):a.once("ready",this,this.drawImage,[a,i,e,n,s]):(a=new On,a.load(t),Fn.cacheRes(t,a),a.once("ready",this,this.drawImage,[a,i,e,n,s])),null!=r&&(a.getIsReady()?r.call(this._sp):a.on("ready",this._sp,r))},i._renderEmpty=function(){},i._renderAll=function(t,i,e,n){for(var s,r=this._cmds,a=0,o=r.length;o>a;a++)(s=r[a]).run(i,e,n)},i._renderOne=function(t,i,e,n){this._one.run(i,e,n)},i._renderOneImg=function(t,i,e,n){this._one.run(i,e,n)},i.drawLine=function(t,i,e,n,s,r){void 0===r&&(r=1);var a=0;gi.isWebGL&&(a=re.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var o=1>r||r%2===0?0:.5;return this._saveToCmd(gi._context._drawLine,rn.create.call(this,t+o,i+o,e+o,n+o,s,r,a))},i.drawLines=function(t,i,e,n,s){void 0===s&&(s=1);var r=0;if(!e||e.length<4)return null;gi.isWebGL&&(r=re.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var a=1>s||s%2===0?0:.5;return this._saveToCmd(gi._context._drawLines,_i.create.call(this,t+a,i+a,e,n,s,r))},i.drawCurves=function(t,i,e,n,s){return void 0===s&&(s=1),this._saveToCmd(gi._context._drawCurves,Fi.create.call(this,t,i,e,n,s))},i.drawRect=function(t,i,e,n,s,r,a){void 0===a&&(a=1);var o=a>=1&&r?a/2:0,h=r?a:0;return this._saveToCmd(gi._context.drawRect,Ke.create.call(this,t+o,i+o,e-h,n-h,s,r,a))},i.drawCircle=function(t,i,e,n,s,r){void 0===r&&(r=1);var a=r>=1&&s?r/2:0,o=0;return gi.isWebGL&&(o=re.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o)),this._saveToCmd(gi._context._drawCircle,_n.create.call(this,t,i,e-a,n,s,r,o))},i.drawPie=function(t,i,e,n,s,r,a,o){void 0===o&&(o=1);var h=o>=1&&a?o/2:0,l=a?o:0,c=0;return gi.isWebGL&&(c=re.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c)),this._saveToCmd(gi._context._drawPie,Se.create.call(this,t+h,i+h,e-l,en.toRadian(n),en.toRadian(s),r,a,o,c))},i.drawPoly=function(t,i,e,n,s,r){void 0===r&&(r=1);var a=0;if(gi.isWebGL){a=re.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a);var o=!1;o=e.length>6?!1:!0}var h=r>=1&&s?r%2===0?0:.5:0;return this._saveToCmd(gi._context._drawPoly,Be.create.call(this,t+h,i+h,e,n,s,r,o,a))},i.drawPath=function(t,i,e,n,s){return this._saveToCmd(gi._context._drawPath,gn.create.call(this,t,i,e,n,s))},r(0,i,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),this._cmds=t,this._render=this._renderAll,this._repaint()}),t}(),ie=function(){function t(){}s(t,"laya.display.cmd.DrawTexturesCmd");var i=t.prototype;return i.recover=function(){this.texture._removeReference(),this.texture=null,this.pos=null,ee.recover("DrawTexturesCmd",this)},i.run=function(t,i,e){t.drawTextures(this.texture,this.pos,i,e)},r(0,i,"cmdID",function(){return"DrawTextures"}),t.create=function(i,e){var n=ee.getItemByClass("DrawTexturesCmd",t);return n.texture=i,i._addReference(),n.pos=e,n},t.ID="DrawTextures",t}(),ee=function(){function t(){}return s(t,"laya.utils.Pool"),t.getPoolBySign=function(i){return t._poolDic[i]||(t._poolDic[i]=[])},t.clearBySign=function(i){t._poolDic[i]&&(t._poolDic[i].length=0)},t.recover=function(i,e){e.__InPool||(e.__InPool=!0,t.getPoolBySign(i).push(e))},t.recoverByClass=function(i){if(i){var e=i.__className||i.constructor._$gid;e&&t.recover(e,i)}},t._getClassSign=function(t){var i=t.__className||t._$gid;return i||(t._$gid=i=en.getGID()+""),i},t.createByClass=function(i){return t.getItemByClass(t._getClassSign(i),i)},t.getItemByClass=function(i,e){if(!t._poolDic[i])return new e;var n=t.getPoolBySign(i);if(n.length){var s=n.pop();s.__InPool=!1}else s=new e;return s},t.getItemByCreateFun=function(i,e,n){var s=t.getPoolBySign(i),r=s.length?s.pop():e.call(n);return r.__InPool=!1,r},t.getItem=function(i){var e=t.getPoolBySign(i),n=e.length?e.pop():null;return n&&(n.__InPool=!1),n},t.POOLSIGN="__InPool",t._poolDic={},t}(),ne=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new Ti.window.WeakMap:{},t.supportWeakMap||t._maps.push(this)}s(t,"laya.utils.WeakObject");var i=t.prototype;return i.set=function(i,e){if(null!=i)if(t.supportWeakMap){var n=i;("string"==typeof i||"number"==typeof i)&&(n=t._keys[i],n||(n=t._keys[i]={k:i})),this._obj.set(n,e)}else"string"==typeof i||"number"==typeof i?this._obj[i]=e:(i.$_GID||(i.$_GID=en.getGID()),this._obj[i.$_GID]=e)},i.get=function(i){if(null==i)return null;if(t.supportWeakMap){var e="string"==typeof i||"number"==typeof i?t._keys[i]:i;return e?this._obj.get(e):null}return"string"==typeof i||"number"==typeof i?this._obj[i]:this._obj[i.$_GID]},i.del=function(i){if(null!=i)if(t.supportWeakMap){var e="string"==typeof i||"number"==typeof i?t._keys[i]:i;if(!e)return;this._obj.delete(e)}else"string"==typeof i||"number"==typeof i?delete this._obj[i]:delete this._obj[this._obj.$_GID]},i.has=function(i){if(null==i)return!1;if(t.supportWeakMap){var e="string"==typeof i||"number"==typeof i?t._keys[i]:i;return this._obj.has(e)}return"string"==typeof i||"number"==typeof i?null!=this._obj[i]:null!=this._obj[this._obj.$_GID]},t.__init__=function(){t.supportWeakMap=null!=Ti.window.WeakMap,t.supportWeakMap||e.systemTimer.loop(t.delInterval,null,t.clearCache)},t.clearCache=function(){for(var i=0,e=t._maps.length;e>i;i++){var n=t._maps[i];n._obj={}}},t.supportWeakMap=!1,t.delInterval=6e5,t._keys={},t._maps=[],n(t,["I",function(){return this.I=new t}]),t}(),se=function(){function t(t,i,e,n){function s(t){var i=[],e=new di(i);return r._compileToTree(e,t.split("\n"),0,i,n),e}var r=this,a=Ti.now();this._VS=s(t),this._PS=s(i),this._nameMap=e,Ti.now()-a>2&&console.log("ShaderCompile use time:"+(Ti.now()-a)+"  size:"+t.length+"/"+i.length)}s(t,"laya.webgl.utils.ShaderCompile");var i=t.prototype;return i._compileToTree=function(i,e,n,s,r){var a,o,h,l,c,u,d,_=0,p=0,f=0,m=0;for(p=n;p<e.length;p++)if(h=e[p],!(h.length<1)&&(_=h.indexOf("//"),0!==_)){if(_>=0&&(h=h.substr(0,_)),a=d||new di(s),d=null,a.text=h,a.noCompile=!0,(_=h.indexOf("#"))>=0){for(l="#",m=_+1,f=h.length;f>m;m++){var g=h.charAt(m);if(" "===g||"	"===g||"?"===g)break;l+=g}switch(a.name=l,l){case"#ifdef":case"#ifndef":if(a.src=h,a.noCompile=null!=h.match(/[!&|()=<>]/),a.noCompile?console.log("function():Boolean{return "+h.substr(_+a.name.length)+"}"):(u=h.replace(/^\s*/,"").split(/\s+/),a.setCondition(u[1],"#ifdef"===l?1:2),a.text="//"+a.text),a.setParent(i),i=a,r)for(u=h.substr(m).split(t._splitToWordExps3),m=0;m<u.length;m++)h=u[m],h.length&&(r[h]=!0);continue;case"#if":if(a.src=h,a.noCompile=!0,a.setParent(i),i=a,r)for(u=h.substr(m).split(t._splitToWordExps3),m=0;m<u.length;m++)h=u[m],h.length&&"defined"!=h&&(r[h]=!0);continue;case"#else":a.src=h,i=i.parent,o=i.childs[i.childs.length-1],a.noCompile=o.noCompile,a.noCompile||(a.condition=o.condition,a.conditionType=1==o.conditionType?2:1,a.text="//"+a.text+" "+o.text+" "+a.conditionType),a.setParent(i),i=a;continue;case"#endif":i=i.parent,o=i.childs[i.childs.length-1],a.noCompile=o.noCompile,a.noCompile||(a.text="//"+a.text),a.setParent(i);continue;case"#include":u=t.splitToWords(h,null);var v=t.includes[u[1]];if(!v)throw"ShaderCompile error no this include file:"+u[1];if((_=u[0].indexOf("?"))<0){a.setParent(i),h=v.getWith("with"==u[2]?u[3]:null),this._compileToTree(a,h.split("\n"),0,s,r),a.text="";continue}a.setCondition(u[0].substr(_+1),1),a.text=v.getWith("with"==u[2]?u[3]:null);break;case"#import":u=t.splitToWords(h,null),c=u[1],s.push({node:a,file:t.includes[c],ofs:a.text.length});continue}}else{if(o=i.childs[i.childs.length-1],o&&!o.name){s.length>0&&t.splitToWords(h,o),d=a,o.text+="\n"+h;continue}s.length>0&&t.splitToWords(h,a)}a.setParent(i)}},i.createShader=function(t,i,e,n){var s={},r="";if(t)for(var a in t)r+="#define "+a+"\n",s[a]=!0;var o=this._VS.toscript(s,[]),h=this._PS.toscript(s,[]);return(e||oa.create)(r+o.join("\n"),r+h.join("\n"),i,this._nameMap,n)},t._parseOne=function(i,e,n,s,r,a){var o={type:t.shaderParamsMap[n[s+1]],name:n[s+2],size:isNaN(parseInt(n[s+3]))?1:parseInt(n[s+3])};return a&&("attribute"==r?i.push(o):e.push(o)),":"==n[s+3]&&(o.type=n[s+4],s+=2),s+=2},t.addInclude=function(i,e){if(!e||0===e.length)throw new Error("add shader include file err:"+i);if(t.includes[i])throw new Error("add shader include file err, has add:"+i);t.includes[i]=new Ye(e)},t.preGetParams=function(i,e){var n=[i,e],s={},r=[],a=[],o={},h=[];s.attributes=r,s.uniforms=a,s.defines=o;for(var l=0,c=0,u=0;2>u;u++){n[u]=n[u].replace(t._removeAnnotation,"");var d,_=n[u].match(t._reg);for(l=0,c=_.length;c>l;l++){var p=_[l];if("attribute"==p||"uniform"==p)l=t._parseOne(r,a,_,l,p,!0);else{if("#define"==p){p=_[++l],h[p]=1;continue}if("#ifdef"==p){d=_[++l];{o[d]=o[d]||[]}for(l++;c>l;l++)if(p=_[l],"attribute"==p||"uniform"==p)l=t._parseOne(r,a,_,l,p,h[d]);else if("#else"==p)for(l++;c>l;l++)if(p=_[l],"attribute"==p||"uniform"==p)l=t._parseOne(r,a,_,l,p,!h[d]);else if("#endif"==p)break}}}}return s},t.splitToWords=function(t,i){for(var e,n,s=[],r=-1,a=0,o=t.length;o>a;a++)if(e=t.charAt(a)," 	=+-*/&%!<>()'\",;".indexOf(e)>=0){if(r>=0&&a-r>1&&(n=t.substr(r,a-r),s.push(n)),'"'==e||"'"==e){var h=t.indexOf(e,a+1);if(0>h)throw"Sharder err:"+t;s.push(t.substr(a+1,h-a-1)),a=h,r=-1;continue}"("==e&&i&&s.length>0&&(n=s[s.length-1]+";","vec4;main;".indexOf(n)<0&&(i.useFuns+=n)),r=-1}else 0>r&&(r=a);return o>r&&o-r>1&&(n=t.substr(r,o-r),s.push(n)),s},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.IFDEF_PARENT=3,t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t.includes={},n(t,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),t}(),re=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],gi.isWebGL&&me.regCacheByFunction(en.bind(this.startDispose,this),en.bind(this.getCacheList,this))}s(t,"laya.utils.VectorGraphManager");var i=t.prototype;return i.getId=function(){return this._id++},i.addShape=function(t,i){this.shapeDic[t]=i,this.useDic[t]||(this.useDic[t]=!0)},i.addLine=function(t,i){this.shapeLineDic[t]=i,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},i.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},i.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},i.getCacheList=function(){var t,i=[];for(t in this.shapeDic)i.push(this.shapeDic[t]);for(t in this.shapeLineDic)i.push(this.shapeLineDic[t]);return i},i.startDispose=function(){var t;for(t in this.useDic)this.useDic[t]=!1;this._checkKey=!0},i.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),ae=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}s(t,"laya.display.BitmapFont");var i=t.prototype;return i.loadFont=function(t,i){return this._path=t,this._complete=i,t&&-1!==t.indexOf(".fnt")?(e.loader.load([{url:t,type:"xml"},{url:t.replace(".fnt",".png"),type:"image"}],c.create(this,this._onLoaded)),void 0):(console.error('Bitmap font configuration information must be a ".fnt" file'),void 0)},i._onLoaded=function(){this.parseFont(Fn.getRes(this._path),Fn.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},i.parseFont=function(t,i){if(null!=t&&null!=i){this._texture=i;var e=1,n=t.getElementsByTagName("info");if(!n[0].getAttributeNode)return this.parseFont2(t,i);this.fontSize=parseInt(n[0].getAttributeNode("size").nodeValue);var s=n[0].getAttributeNode("padding").nodeValue,r=s.split(",");this._padding=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];var a;a=t.getElementsByTagName("char");var o=0;for(o=0;o<a.length;o++){var h=a[o],l=parseInt(h.getAttributeNode("id").nodeValue),c=parseInt(h.getAttributeNode("xoffset").nodeValue)/e,u=parseInt(h.getAttributeNode("yoffset").nodeValue)/e,d=parseInt(h.getAttributeNode("xadvance").nodeValue)/e,_=new on;_.x=parseInt(h.getAttributeNode("x").nodeValue),_.y=parseInt(h.getAttributeNode("y").nodeValue),_.width=parseInt(h.getAttributeNode("width").nodeValue),_.height=parseInt(h.getAttributeNode("height").nodeValue);var p=On.create(i,_.x,_.y,_.width,_.height,c,u);this._maxWidth=Math.max(this._maxWidth,d+this.letterSpacing),this._fontCharDic[l]=p,this._fontWidthMap[l]=d}}},i.parseFont2=function(t,i){if(null!=t&&null!=i){this._texture=i;var e=1,n=t.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var s=n[0].attributes.padding.nodeValue,r=s.split(",");this._padding=[parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];var a=t.getElementsByTagName("char"),o=0;for(o=0;o<a.length;o++){var h=a[o].attributes,l=parseInt(h.id.nodeValue),c=parseInt(h.xoffset.nodeValue)/e,u=parseInt(h.yoffset.nodeValue)/e,d=parseInt(h.xadvance.nodeValue)/e,_=new on;_.x=parseInt(h.x.nodeValue),_.y=parseInt(h.y.nodeValue),_.width=parseInt(h.width.nodeValue),_.height=parseInt(h.height.nodeValue);var p=On.create(i,_.x,_.y,_.width,_.height,c,u);this._maxWidth=Math.max(this._maxWidth,d+this.letterSpacing),this._fontCharDic[l]=p,this._fontWidthMap[l]=d}}},i.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},i.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var i=this._fontCharDic[t];i&&i.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null,this._complete=null,this._padding=null}},i.setSpaceWidth=function(t){this._spaceWidth=t},i.getCharWidth=function(t){var i=t.charCodeAt(0);return this._fontWidthMap[i]?this._fontWidthMap[i]+this.letterSpacing:" "===t?this._spaceWidth+this.letterSpacing:0},i.getTextWidth=function(t){for(var i=0,e=0,n=t.length;n>e;e++)i+=this.getCharWidth(t.charAt(e));return i},i.getMaxWidth=function(){return this._maxWidth},i.getMaxHeight=function(){return this.fontSize},i._drawText=function(t,i,e,n,s,r){var a,o=this.getTextWidth(t),h=0;"center"===s&&(h=(r-o)/2),"right"===s&&(h=r-o);for(var l=0,c=0,u=t.length;u>c;c++)a=this.getCharTexture(t.charAt(c)),a&&(i.graphics.drawImage(a,e+l+h,n),l+=this.getCharWidth(t.charAt(c)))},t}(),oe=(function(){function t(){this._graphicsCmdEncoder=null}s(t,"laya.layagl.cmdNative.RestoreCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("RestoreCmd",this)},r(0,i,"cmdID",function(){return"Restore"}),t.create=function(){var i=ee.getItemByClass("RestoreCmd",t),e=i._graphicsCmdEncoder=this._commandEncoder;return e.restore(),ki.syncBufferToRenderThread(e),i},t.ID="Restore",t}(),function(){function t(){}return s(t,"laya.layagl.LayaGLRunner"),t.uploadShaderUniforms=function(t,i,e,n){for(var s=e._data,r=i.getArrayData(),a=0,o=0,h=r.length;h>o;o++){var l=r[o];if(n||-1!==l.textureID){var c=s[l.dataOffset];null!=c&&(a+=l.fun.call(l.caller,l,c))}}return a},t.uploadCustomUniform=function(t,i,e,n){var s=0,r=i[e];return r&&null!=n&&(s+=r.fun.call(r.caller,r,n)),s},t.uploadShaderUniformsForNative=function(t,i,e){var n=0;e._runtimeCopyValues.length>=0&&(n=1);var s=e._data;return t.uploadShaderUniforms(i,s,n)},t}()),he=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0,this._y=0,this._points=[],this._lineColor=null,this._lineWidth=0/0,this.lastOriX=0,this.lastOriY=0,this.tArray=[],this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}s(t,"laya.layagl.cmdNative.DrawCurvesCmdNative");var i=t.prototype;return i._getPoints=function(t){var i=[];this._points.push(t[0]),this._points.push(t[1]);for(var e=2,n=t.length;n>e;)this._quadraticCurveTo(i,t[e++],t[e++],t[e++],t[e++]);return i},i._quadraticCurveTo=function(t,i,e,n,s){var r=bn.I;0==this.tArray.length?(this.lastOriX=this._points[0],this.lastOriY=this._points[1]):(this.lastOriX=this.tArray[this.tArray.length-2],this.lastOriY=this.tArray[this.tArray.length-1]),this.tArray=r.getBezierPoints([this.lastOriX,this.lastOriY,i,e,n,s],30,2);for(var a=2,o=this.tArray.length;o>a;a++)t.push(this.tArray[a])},i.recover=function(){this._lineColor=null,this._points.length=0,this.tArray.length=0,this._ibArray.length=0,this._vbArray.length=0,ee.recover("DrawCurvesCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var i=o.create(this._lineColor),e=i.numColor,n=this.vbBuffer._int32Data,s=0,r=0;r<this._vertNum;r++)s++,s++,n[s++]=e;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"points",function(){return this._points},function(i){this._points.length=0,this.lastOriX=0,this.lastOriY=0,this._points=this._getPoints(i),this._ibArray.length=0,this._vbArray.length=0,Di.createLine2(this._points,this._ibArray,this.lineWidth,0,this._vbArray,!1);var e=o.create(this._lineColor),n=e.numColor;this._vertNum=this._points.length;var s=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*s*4,!0)),this._vbSize=3*this._vertNum*4;for(var r=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,h=0,l=0;l<this._vertNum;l++)r[h++]=this._vbArray[2*l]+this.x,r[h++]=this._vbArray[2*l+1]+this.y,a[h++]=n;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(s-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var c=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)c[u]=this._ibArray[u];a=this._paramData._int32Data,a[t._PARAM_VB_SIZE_POS_]=this._vbSize,a[t._PARAM_IB_SIZE_POS_]=this._ibSize,ki.syncBufferToRenderThread(this.ibBuffer),ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawCurves"}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._vbArray[2*n]+this._x,e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._vbArray[2*n+1]+this._y,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Di.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._vbArray[2*n]+this.x,i[e++]=this._vbArray[2*n+1]+this.y,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawCurvesCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CURVES_CMD_ENCODER_||(t._DRAW_CURVES_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_CURVES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_CURVES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CURVES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_CURVES_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(32,!0)),a._x=i,a._y=e,a._lineColor=s,a._lineWidth=r,a._points=a._getPoints(n),Di.createLine2(a._points,a._ibArray,r,0,a._vbArray,!1);var h=o.create(s),l=h.numColor;a._vertNum=a._points.length;var c=a._vertNum;(!a.vbBuffer||a.vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.vbBuffer=new ParamData(3*c*4,!0)),a._vbSize=3*a._vertNum*4;for(var u=a.vbBuffer._float32Data,d=a.vbBuffer._int32Data,_=0,p=0;p<a._vertNum;p++)u[_++]=a._vbArray[2*p]+i,u[_++]=a._vbArray[2*p+1]+e,d[_++]=l;(!a.ibBuffer||a.ibBuffer.getByteLength()<3*(a._vertNum-2)*2)&&(a.ibBuffer=new ParamData(3*(c-2)*2,!0,!0)),a._ibSize=3*(a._vertNum-2)*2;for(var f=a.ibBuffer._int16Data,m=0;m<3*(a._vertNum-2);m++)f[m]=a._ibArray[m];a._paramData._float32Data;return d=a._paramData._int32Data,d[0]=1,d[t._PARAM_VB_POS_]=a.vbBuffer.getPtrID(),d[t._PARAM_IB_POS_]=a.ibBuffer.getPtrID(),d[t._PARAM_VB_SIZE_POS_]=a._vbSize,d[t._PARAM_IB_SIZE_POS_]=a._ibSize,d[t._PARAM_VB_OFFSET_POS_]=0,d[t._PARAM_IB_OFFSET_POS_]=0,d[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(a.vbBuffer),ki.syncBufferToRenderThread(a.ibBuffer),ki.syncBufferToRenderThread(a._paramData),a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CURVES_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawCurves",t._DRAW_CURVES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_VB_SIZE_POS_=3,t._PARAM_IB_SIZE_POS_=4,t._PARAM_VB_OFFSET_POS_=5,t._PARAM_IB_OFFSET_POS_=6,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=7,t}(),function(){function t(){}return s(t,"laya.utils.ClassUtils"),t.regClass=function(i,e){t._classMap[i]=e},t.regShortClassName=function(i){for(var e=0;e<i.length;e++){var n=i[e],s=n.name;t._classMap[s]=n}},t.getRegClass=function(i){return t._classMap[i]},t.getClass=function(i){var n=t._classMap[i]||i;return"string"==typeof n?e.__classmap[n]||e[i]:n},t.getInstance=function(i){var e=t.getClass(i);return e?new e:(console.warn("[error] Undefined class:",i),null)},t.createByJson=function(i,e,n,s,r){"string"==typeof i&&(i=JSON.parse(i));var a=i.props;if(!e&&(e=r?r.runWith(i):t.getInstance(a.runtime||i.type),!e))return null;var o=i.child;if(o)for(var h=0,l=o.length;l>h;h++){var c=o[h];if("render"!==c.props.name&&"render"!==c.props.renderType||!e._$set_itemRender)if("Graphic"==c.type)t._addGraphicsToSprite(c,e);else if(t._isDrawType(c.type))t._addGraphicToSprite(c,e,!0);else{var u=t.createByJson(c,null,n,s,r);"Script"===c.type?u.hasOwnProperty("owner")?u.owner=e:u.hasOwnProperty("target")&&(u.target=e):"mask"==c.props.renderType?e.mask=u:e.addChild(u)}else e.itemRender=c}if(a)for(var d in a){var _=a[d];"var"===d&&n?n[_]=e:_ instanceof Array&&"function"==typeof e[d]?e[d].apply(e,_):e[d]=_}return s&&i.customProps&&s.runWith([e,i]),e.created&&e.created(),e},t._addGraphicsToSprite=function(i,e){var n=i.child;if(n&&!(n.length<1)){var s=t._getGraphicsFromSprite(i,e),r=0,a=0;i.props&&(r=t._getObjVar(i.props,"x",0),a=t._getObjVar(i.props,"y",0)),0!=r&&0!=a&&s.translate(r,a);var o=0,h=0;for(h=n.length,o=0;h>o;o++)t._addGraphicToGraphics(n[o],s);0!=r&&0!=a&&s.translate(-r,-a)}},t._addGraphicToSprite=function(i,e,n){void 0===n&&(n=!1);var s=n?t._getGraphicsFromSprite(i,e):e.graphics;t._addGraphicToGraphics(i,s)},t._getGraphicsFromSprite=function(t,i){if(!t||!t.props)return i.graphics;var e=t.props.renderType;if("hit"===e||"unHit"===e){var n=i._style.hitArea||(i.hitArea=new De);n[e]||(n[e]=new te);var s=n[e]}return s||(s=i.graphics),s},t._getTransformData=function(i){var e;(i.hasOwnProperty("pivotX")||i.hasOwnProperty("pivotY"))&&(e=e||new $e,e.translate(-t._getObjVar(i,"pivotX",0),-t._getObjVar(i,"pivotY",0)));{var n=t._getObjVar(i,"scaleX",1),s=t._getObjVar(i,"scaleY",1),r=t._getObjVar(i,"rotation",0);t._getObjVar(i,"skewX",0),t._getObjVar(i,"skewY",0)}return(1!=n||1!=s||0!=r)&&(e=e||new $e,e.scale(n,s),e.rotate(.0174532922222222*r)),e
},t._addGraphicToGraphics=function(i,e){var n;if(n=i.props){var s;if(s=t.DrawTypeDic[i.type]){var r=e,a=t._getParams(n,s[1],s[2],s[3]),o=t._tM;(o||1!=t._alpha)&&(r.save(),o&&r.transform(o),1!=t._alpha&&r.alpha(t._alpha)),r[s[0]].apply(r,a),(o||1!=t._alpha)&&r.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=Fn.getRes(t[0]),t},t._adptLinesData=function(i){return i[2]=t._getPointListByStr(i[2]),i},t._isDrawType=function(i){return"Image"===i?!1:t.DrawTypeDic.hasOwnProperty(i)},t._getParams=function(i,e,n,s){void 0===n&&(n=0);var r=t._temParam;r.length=e.length;var a=0,o=0;for(o=e.length,a=0;o>a;a++)r[a]=t._getObjVar(i,e[a][0],e[a][1]);t._alpha=t._getObjVar(i,"alpha",1);var h;return h=t._getTransformData(i),h?(n||(n=0),h.translate(r[n],r[n+1]),r[n]=r[n+1]=0,t._tM=h):t._tM=null,s&&t[s]&&(r=t[s](r)),r},t._getPointListByStr=function(t){var i=t.split(","),e=0,n=0;for(n=i.length,e=0;n>e;e++)i[e]=parseFloat(i[e]);return i},t._getObjVar=function(t,i,e){return t.hasOwnProperty(i)?t[i]:e},t._temParam=[],t._classMap={Sprite:ls,Scene:Kr,Text:na,Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivParser",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement",link:"laya.html.dom.HTMLLinkElement"},t._tM=null,t._alpha=0/0,n(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}()),le=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._pos=null,this._rectNum=0,this._vbSize=0,this.vbBuffer=null}s(t,"laya.layagl.cmdNative.DrawTexturesCmdNative");var i=t.prototype;return i.recover=function(){this._texture=null,this._pos=null,ee.recover("DrawTexturesCmd",this)},r(0,i,"cmdID",function(){return"DrawTextures"}),r(0,i,"texture",function(){return this._texture},function(i){this._texture=i;for(var e=this._texture.bitmap.width,n=this._texture.bitmap.height,s=this._texture.uv,r=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,o=0,h=0;h<this._rectNum;h++){var l=this.pos[2*h],c=this.pos[2*h+1];r[o++]=l,r[o++]=c,r[o++]=s[0],r[o++]=s[1],a[o++]=4294967295,a[o++]=4294967295,r[o++]=l+e,r[o++]=c,r[o++]=s[2],r[o++]=s[3],a[o++]=4294967295,a[o++]=4294967295,r[o++]=l+e,r[o++]=c+n,r[o++]=s[4],r[o++]=s[5],a[o++]=4294967295,a[o++]=4294967295,r[o++]=l,r[o++]=c+n,r[o++]=s[6],r[o++]=s[7],a[o++]=4294967295,a[o++]=4294967295}var u=this._paramData._int32Data;u[t._PARAM_TEXLOCATION_POS_]=33984,u[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pos",function(){return this._pos},function(i){this._pos=i;var e=this._pos.length/2,n=this._texture.bitmap.width,s=this._texture.bitmap.height,r=this._texture.uv;(!this.vbBuffer||this.vbBuffer.getByteLength()<24*e*4)&&(this.vbBuffer=new ParamData(24*e*4,!0)),this._vbSize=24*e*4,this._rectNum=e;for(var a=this.vbBuffer._float32Data,o=this.vbBuffer._int32Data,h=0,l=0;e>l;l++){var c=this.pos[2*l],u=this.pos[2*l+1];a[h++]=c,a[h++]=u,a[h++]=r[0],a[h++]=r[1],o[h++]=4294967295,o[h++]=4294967295,a[h++]=c+n,a[h++]=u,a[h++]=r[2],a[h++]=r[3],o[h++]=4294967295,o[h++]=4294967295,a[h++]=c+n,a[h++]=u+s,a[h++]=r[4],a[h++]=r[5],o[h++]=4294967295,o[h++]=4294967295,a[h++]=c,a[h++]=u+s,a[h++]=r[6],a[h++]=r[7],o[h++]=4294967295,o[h++]=4294967295}var d=(this._paramData._float32Data,this._paramData._int32Data);d[t._PARAM_RECT_NUM_POS_]=this._rectNum,d[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),d[t._PARAM_VB_SIZE_POS_]=this._vbSize,ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e){var n=ee.getItemByClass("DrawTexturesCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURES_CMD_ENCODER_||(t._DRAW_TEXTURES_CMD_ENCODER_=ki.instance.createCommandEncoder(124,32,!0),t._DRAW_TEXTURES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURES_CMD_ENCODER_.uniformTextureByParamData(t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_VB_OFFSET_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_TEXTURES_CMD_ENCODER_)),n._paramData||(n._paramData=new ParamData(28,!0)),n._texture=i,n._pos=e;var s=i.bitmap.width,r=i.bitmap.height,a=i.uv,o=e.length/2;(!n.vbBuffer||n.vbBuffer.getByteLength()<24*o*4)&&(n.vbBuffer=new ParamData(24*o*4,!0)),n._vbSize=24*o*4,n._rectNum=o;for(var h=n.vbBuffer._float32Data,l=n.vbBuffer._int32Data,c=0,u=0;o>u;u++){var d=e[2*u],_=e[2*u+1];h[c++]=d,h[c++]=_,h[c++]=a[0],h[c++]=a[1],l[c++]=4294967295,l[c++]=4294967295,h[c++]=d+s,h[c++]=_,h[c++]=a[2],h[c++]=a[3],l[c++]=4294967295,l[c++]=4294967295,h[c++]=d+s,h[c++]=_+r,h[c++]=a[4],h[c++]=a[5],l[c++]=4294967295,l[c++]=4294967295,h[c++]=d,h[c++]=_+r,h[c++]=a[6],h[c++]=a[7],l[c++]=4294967295,l[c++]=4294967295}var p=(n._paramData._float32Data,n._paramData._int32Data);return p[t._PARAM_UNIFORMLOCATION_POS_]=3,p[t._PARAM_TEXLOCATION_POS_]=33984,p[t._PARAM_TEXTURE_POS_]=i.bitmap._glTexture.id,p[t._PARAM_RECT_NUM_POS_]=n._rectNum,p[t._PARAM_VB_POS_]=n.vbBuffer.getPtrID(),p[t._PARAM_VB_SIZE_POS_]=n._vbSize,p[t._PARAM_VB_OFFSET_POS_]=0,ki.syncBufferToRenderThread(n.vbBuffer),ki.syncBufferToRenderThread(n._paramData),n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURES_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.ID="DrawTextures",t._DRAW_TEXTURES_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_POS_=4,t._PARAM_VB_SIZE_POS_=5,t._PARAM_VB_OFFSET_POS_=6,t}(),function(){function t(){}s(t,"laya.display.cmd.RotateCmd");var i=t.prototype;return i.recover=function(){ee.recover("RotateCmd",this)},i.run=function(t,i,e){t._rotate(this.angle,this.pivotX+i,this.pivotY+e)},r(0,i,"cmdID",function(){return"Rotate"}),t.create=function(i,e,n){var s=ee.getItemByClass("RotateCmd",t);return s.angle=i,s.pivotX=e,s.pivotY=n,s},t.ID="Rotate",t}()),ce=(function(){function t(){this._draw_texture_cmd_encoder_=ki.instance.createCommandEncoder(64,32,!0)}s(t,"laya.layagl.cmdNative.FillWordsCmdNative");var i=t.prototype;return i.createFillText=function(i,e,n,s,r,a){var h=o.create(a),l=(h.numColor,{});l._curMat=new $e,l._italicDeg=0,l._drawTextureUseColor=4294967295,l.fillStyle=a,l._fillColor=4294967295,l.setFillColor=function(t){l._fillColor=t},l.getFillColor=function(){return l._fillColor},l.mixRGBandAlpha=function(t){return t},l._drawTextureM=function(t,e,n,s,r,a,o,h){i.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),i.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),i.useVDO(ei.VDO_MESHQUADTEXTURE),i.uniformEx(ei.GLOBALVALUE_VIEWS,0),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),i.uniformTexture(3,33984,t.bitmap._glTexture);var l=new Float32Array([e,n,h[0],h[1],0,0,e+s,n,h[2],h[3],0,0,e+s,n+r,h[4],h[5],0,0,e,n+r,h[6],h[7],0,0]),c=new Int32Array(l.buffer);c[4]=c[10]=c[16]=c[22]=4294967295,c[5]=c[11]=c[17]=c[23]=4294967295,i.setRectMesh(1,l,l.length),i.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),i.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(i)},t.cbook.filltext_native(l,null,e,n,s,r,a,null,0,null)},i.recover=function(){this._graphicsCmdEncoder=null,this.words=null,ee.recover("FillWordsCmd",this)},r(0,i,"cmdID",function(){return"FillWords"}),t.create=function(i,e,n,s,r){t.cbook||new Error("Error:charbook not create!");var a=ee.getItemByClass("FillWordsCmd",t),o=a._graphicsCmdEncoder=this._commandEncoder;return a.words=i,a.x=e,a.y=n,a.font=s,a.color=r,a._draw_texture_cmd_encoder_.clearEncoding(),a.createFillText(a._draw_texture_cmd_encoder_,i,e,n,s,r),ki.syncBufferToRenderThread(a._draw_texture_cmd_encoder_),o.useCommandEncoder(a._draw_texture_cmd_encoder_.getPtrID(),-1,-1),ki.syncBufferToRenderThread(o),a},t.ID="FillWords",n(t,["cbook",function(){return this.cbook=Cn.charbookInst}]),t}(),function(){function t(){}s(t,"laya.display.cmd.SaveCmd");var i=t.prototype;return i.recover=function(){ee.recover("SaveCmd",this)},i.run=function(t){t.save()},r(0,i,"cmdID",function(){return"Save"}),t.create=function(){var i=ee.getItemByClass("SaveCmd",t);return i},t.ID="Save",t}()),ue=function(){function t(){}s(t,"laya.events.Event");var i=t.prototype;return i.setTo=function(t,i,e){return this.type=t,this.currentTarget=i,this.target=e,this},i.stopPropagation=function(){this._stoped=!0},r(0,i,"stageY",function(){return e.stage.mouseY}),r(0,i,"charCode",function(){return this.nativeEvent.charCode}),r(0,i,"touches",function(){if(!this.nativeEvent)return null;var t=this.nativeEvent.touches;if(t)for(var i=e.stage,n=0,s=t.length;s>n;n++){var r=t[n],a=Oe.TEMP;a.setTo(r.clientX,r.clientY),i._canvasTransform.invertTransformPoint(a),i.transform.invertTransformPoint(a),r.stageX=a.x,r.stageY=a.y}return t}),r(0,i,"keyLocation",function(){return this.nativeEvent.location||this.nativeEvent.keyLocation}),r(0,i,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),r(0,i,"altKey",function(){return this.nativeEvent.altKey}),r(0,i,"shiftKey",function(){return this.nativeEvent.shiftKey}),r(0,i,"stageX",function(){return e.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.READY="ready",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.TRANSFORM_CHANGED="transformchanged",t.ANIMATION_CHANGED="animationchanged",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t}(),de=function(){function t(){this.char="",this.tex=null,this.deleted=!1,this.uv=[0,0,1,1],this.pos=0,this.width=0,this.height=0,this.bmpWidth=0,this.bmpHeight=0,this.touchTick=0,this.isSpace=!1}s(t,"laya.webgl.resource.CharRenderInfo");var i=t.prototype;return i.touch=function(){var t=Ri.loopCount;this.tex._scoreTick!=t&&(this.tex._score=0,this.tex._scoreTick=t),this.touchTick!=t&&this.tex._score++,this.touchTick=t},t}(),_e=function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}s(t,"laya.layagl.cmdNative.DrawCanvasCmdNative");var i=t.prototype;return i.recover=function(){this._graphicsCmdEncoder=null,ee.recover("DrawCanvasCmd",this)},r(0,i,"cmdID",function(){return"DrawCanvas"}),r(0,i,"y",function(){return this._y},function(i){this._y=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,e[t._PARAM_CLIP_SIZE+1]=i+16,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"texture",function(){return this._texture},function(i){this._texture=i,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture._getSource().id;var e=this._paramData._float32Data,n=Ma.flipyuv;e[t._PARAM_VB_POS_+2]=n[0],e[t._PARAM_VB_POS_+3]=n[1],e[t._PARAM_VB_POS_+8]=n[2],e[t._PARAM_VB_POS_+9]=n[3],e[t._PARAM_VB_POS_+14]=n[4],e[t._PARAM_VB_POS_+15]=n[5],e[t._PARAM_VB_POS_+20]=n[6],e[t._PARAM_VB_POS_+21]=n[7],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"width",function(){return this._width},function(i){this._width=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,e[t._PARAM_CLIP_SIZE+2]=i-32,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"x",function(){return this._x},function(i){this._x=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,e[t._PARAM_CLIP_SIZE]=i+16,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"height",function(){return this._height},function(i){this._height=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,e[t._PARAM_CLIP_SIZE+3]=i-32,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawCanvasCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t.createCommandEncoder(),a._paramData||(a._paramData=new ParamData(132,!0)),a._texture=i,a._x=e,a._y=n,a._width=s,a._height=r,t.setParamData(a._paramData,i,e,n,s,r);var o=t._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),h=a._paramData.getPtrID();return a._graphicsCmdEncoder.useCommandEncoder(o,h,-1),ki.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.createCommandEncoder=function(){t._DRAW_CANVAS_CMD_ENCODER_||(t._DRAW_CANVAS_CMD_ENCODER_=ki.instance.createCommandEncoder(172,32,!0),t._DRAW_CANVAS_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CANVAS_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CANVAS_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_CANVAS_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_CANVAS_CMD_ENCODER_))},t.setParamData=function(i,e,n,s,r,a){var o=i._float32Data,h=i._int32Data;h[0]=3,h[1]=33984,h[t._PARAM_TEXTURE_POS_]=e._getSource().id,h[3]=1,h[4]=96;var l=0!=r?r:e.width,c=0!=a?a:e.height,u=Ma.flipyuv,d=t._PARAM_VB_POS_;o[d++]=n,o[d++]=s,o[d++]=u[0],o[d++]=u[1],h[d++]=4294967295,h[d++]=4294967295,o[d++]=n+l,o[d++]=s,o[d++]=u[2],o[d++]=u[3],h[d++]=4294967295,h[d++]=4294967295,o[d++]=n+l,o[d++]=s+c,o[d++]=u[4],o[d++]=u[5],h[d++]=4294967295,h[d++]=4294967295,o[d++]=n,o[d++]=s+c,o[d++]=u[6],o[d++]=u[7],h[d++]=4294967295,h[d++]=4294967295,o[t._PARAM_CLIP_SIZE]=n+16,o[t._PARAM_CLIP_SIZE+1]=s+16,o[t._PARAM_CLIP_SIZE+2]=r-32,o[t._PARAM_CLIP_SIZE+3]=a-32,ki.syncBufferToRenderThread(i)},t.ID="DrawCanvas",t._DRAW_CANVAS_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t._PARAM_CLIP_SIZE=29,t}(),pe=function(){function t(){this._mesh=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this._ref=1,this.srcRT=null,this._key=new He}s(t,"laya.webgl.submit.SubmitTarget");var i=t.prototype;return e.imps(i,{"laya.webgl.submit.ISubmit":!0}),i.renderSubmit=function(){var t=ge.mainContext;this._mesh.useMesh(t);var i=this.srcRT;return i&&(this.shaderValue.texture=i._getSource(),this.shaderValue.upload(),this.blend(),Ri.drawCall++,Ri.trianglesFaces+=this._numEle/3,ge.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},i.blend=function(){if(Zi.activeBlendFunction!==Zi.fns[this.blendType]){var t=ge.mainContext;t.enable(3042),Zi.fns[this.blendType](t),Zi.activeBlendFunction=Zi.fns[this.blendType]}},i.getRenderType=function(){return 0},i.releaseRender=function(){if(--this._ref<1){var i=t.POOL;i[i._length++]=this}},i.reUse=function(t,i){return this._startIdx=i,this._ref++,i},t.create=function(i,e,n,s){var r=t.POOL._length?t.POOL[--t.POOL._length]:new t;if(r._mesh=e,r.srcRT=s,r._startIdx=e.indexNum*En.BYTES_PIDX,r._ref=1,r._key.clear(),r._numEle=0,r.blendType=i._nBlendType,r._key.blendShader=r.blendType,r.shaderValue=n,r.shaderValue.setValue(i._shader2D),i._colorFiler){var a=i._colorFiler;n.defines.add(a.type),n.colorMat=a._mat,n.colorAlpha=a._alpha}return r},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),fe=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new zn,this.fillStyle=Z.DEFAULT,this.strokeStyle=Z.DEFAULT}s(t,"laya.webgl.shader.d2.Shader2D");var i=t.prototype;return i.destroy=function(){this.defines=null,this.filters=null},t.__init__=function(){var t,i;t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",i="/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;\nuniform vec4 u_blurInfo2;\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\n//FILLTEXTURE\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n#ifdef FILLTEXTURE	\n   vec4 color= texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n#else\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n#endif\n\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}",oa.preCompile2D(0,1,t,i,null),t="attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}",i="precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}",oa.preCompile2D(0,4,t,i,null),t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",i='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n\n#import?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n\n#import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_uniform;\n\n#import?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n\n#import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_uniform;\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   \n   #import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_logic;\n   \n   #import?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   \n   #import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_logic;\n   \n   #import?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',oa.preCompile2D(0,256,t,i,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",i="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);\n	gl_FragColor = t_color.rgba * v_color;\n	gl_FragColor *= alpha;\n}",oa.preCompile2D(0,512,t,i,null)},t}(),me=function(){function t(){}return s(t,"laya.utils.CacheManger"),t.regCacheByFunction=function(i,e){t.unRegCacheByFunction(i,e);var n;n={tryDispose:i,getCacheList:e},t._cacheList.push(n)},t.unRegCacheByFunction=function(i,e){var n=0,s=0;for(s=t._cacheList.length,n=0;s>n;n++)if(t._cacheList[n].tryDispose==i&&t._cacheList[n].getCacheList==e)return t._cacheList.splice(n,1),void 0},t.forceDispose=function(){var i=0,e=t._cacheList.length;for(i=0;e>i;i++)t._cacheList[i].tryDispose(!0)},t.beginCheck=function(i){void 0===i&&(i=15e3),e.systemTimer.loop(i,null,t._checkLoop)},t.stopCheck=function(){e.systemTimer.clear(null,t._checkLoop)},t._checkLoop=function(){var i=t._cacheList;if(!(i.length<1)){var e=Ti.now(),n=0,s=0;for(s=n=i.length;n>0&&(t._index++,t._index=t._index%s,i[t._index].tryDispose(!1),!(Ti.now()-e>t.loopTimeLimit));)n--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),ge=function(){function i(){}return s(i,"laya.webgl.WebGL"),i._uint8ArraySlice=function(){for(var t=this,i=t.length,e=new Uint8Array(t.length),n=0;i>n;n++)e[n]=t[n];return e},i._float32ArraySlice=function(){for(var t=this,i=t.length,e=new Float32Array(t.length),n=0;i>n;n++)e[n]=t[n];return e},i._uint16ArraySlice=function(){var t,i=arguments,e=this,n=0,s=0;if(0===i.length)for(n=e.length,t=new Uint16Array(n),s=0;n>s;s++)t[s]=e[s];else if(2===i.length){var r=i[0],a=i[1];if(a>r)for(n=a-r,t=new Uint16Array(n),s=r;a>s;s++)t[s-r]=e[s];else t=new Uint16Array(0)}return t},i._nativeRender_enable=function(){i.isNativeRender_enable||(i.isNativeRender_enable=!0,ha.create=function(t,i){return new wa(t,i,1,!1,!1)},Pe.__init_native(),fn.width=Ti.window.innerWidth,fn.height=Ti.window.innerHeight,Oi.measureText=function(i,e){return t.conchTextCanvas.font=e,t.conchTextCanvas.measureText(i)},Oi.enableNative=function(){oe.uploadShaderUniforms=oe.uploadShaderUniformsForNative;var i=ea;i.prototype.repaint=i.prototype.repaintForNative,i.prototype.render=i.prototype.renderToNative;var e=Wi;if(e.prototype.bind=Wi.prototype.bindForNative,e.prototype.unBind=Wi.prototype.unBindForNative,gi.isConchApp){fi=t.GLCommandEncoder,ki=t.LayaGLContext;var n=t.CanvasRenderingContext.prototype,s=qe.prototype;qe=t.CanvasRenderingContext,n.drawImage=s.drawImage,n.drawTexture=s.drawTexture,n.fillText=s.fillText,n.save=s.save,n.restore=s.restore,n.translate=s.translate,n.scale=s.scale,n.rotate=s.rotate,n.transform=s.transform,n.beginRT=s.beginRT,n.endRT=s.endRT,n.drawCanvas=s.drawCanvas,n.drawTarget=s.drawTarget,n._$get_asBitmap=s._$get_asBitmap,n._$set_asBitmap=s._$set_asBitmap,n.toBase64=s.toBase64,n.getImageData=s.getImageData,r(0,n,"asBitmap",n._$get_asBitmap,n._$set_asBitmap),ze.rewriteProperties()}Gr.init(),ei.__init__()},Oi.clear=function(t){var i=o.create(t).arrColor,e=ki.instance;i&&e.clearColor(i[0],i[1],i[2],i[3]),e.clear(17664)},Oi.drawToCanvas=function(t,i,e,n,s,r){var a=new ra(!0);a.size(e,n);var o=a.getContext("2d");o.asBitmap=!0;var h=ki.instance.createCommandEncoder(128,64,!1);h.beginEncoding(),h.clearEncoding();var l=ki.instance,c=l.getCurrentContext();l.setCurrentContext(o),o.beginRT(),l.save();var u=Gr._tempFloatArrayMatrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=s,u[5]=r,l.setGlobalValue(ei.GLOBALVALUE_MATRIX32,8,u),t.writeBlockToNative(),l.restore(),l.setCurrentContext(c),l.commitContextToGPU(o),o.endRT(),h.endEncoding(),l.useCommandEncoder(h.getPtrID(),-1,0),a},ra.prototype.getTexture=function(){return this._texture||(this._texture=this.context._targets,this._texture.uv=Ma.flipyuv,this._texture.bitmap=this._texture),this._texture})},i._webglRender_enable=function(){gi.isWebGL||(gi.isWebGL=!0,Oi.initRender=function(t,e,n){function s(t){var i,e=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];
ke.useWebGL2||e.shift();for(var n=0;n<e.length;n++){try{i=t.getContext(e[n],{stencil:ke.isStencil,alpha:ke.isAlpha,antialias:ke.isAntialias,premultipliedAlpha:ke.premultipliedAlpha,preserveDrawingBuffer:ke.preserveDrawingBuffer})}catch(s){}if(i)return"webgl2"===e[n]&&(laya.webgl.WebGL._isWebGL2=!0),new ki,i}return null}var r=ki.instance=laya.webgl.WebGL.mainContext=s(gi._mainCanvas.source);if(!r)return!1;t.size(e,n),Pe.__init__(r),rs.__init__(),oi.__init__();var a=new rs;gi._context=a,t._setContext(a),laya.webgl.WebGL.shaderHighPrecision=!1;try{var o=r.getShaderPrecisionFormat(35632,36338);i.shaderHighPrecision=o.precision?!0:!1}catch(h){}return ki.instance=r,Ii.__init__(),zn.__init__(),ai.__init__(),fe.__init__(),sa.__int__(r),Zi._init_(r),!0},ha.create=function(t,i){return new wa(t,i,1,!1,!1)},Oi.createRenderSprite=function(t,i){return new Qn(t,i)},Oi.changeWebGLSize=function(t,i){laya.webgl.WebGL.onStageResize(t,i)},Oi.clear=function(t){rs.set2DRenderConfig(),fn.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var i=gi.context,n=0==i._submits._length||ke.preserveDrawingBuffer?o.create(t).arrColor:e.stage._wgColor;n&&i.clearBG(n[0],n[1],n[2],n[3]),fn.clear()},Oi.drawToCanvas=function(t,i,e,n,s,r){s-=t.x,r-=t.y,s|=0,r|=0,e|=0,n|=0;var a=new rs;a.size(e,n),a.asBitmap=!0,a._targets.start(),li.renders[i]._fun(t,a,s,r),a.flush(),a._targets.end(),a._targets.restore();var o=a._targets.getData(0,0,e,n);a.destroy();for(var h=new ImageData(e,n),l=4*e,c=(new Uint8Array(l),h.data),u=n-1,d=u*l,_=0;u>=0;u--)c.set(o.subarray(_,_+l),d),d-=l,_+=l;var p=new ra(!0);p.size(e,n);var f=p.getContext("2d");return f.putImageData(h,0,0),p},Oi.getTexturePixels=function(t,i,e,n,s){var r=0,a=0,o=0,h=t.bitmap,l=h.width,c=h.height;if(i+n>l&&(n-=i+n-l),e+s>c&&(s-=e+s-c),0>=n||0>=s)return null;var u=4*n,d=null;try{d=h.getPixels()}catch(_){}if(d){if(0==i&&0==e&&n==l&&s==c)return d;var p=new Uint8Array(n*s*4);for(u=4*l,r=4*i,a=(e+s-1)*u+4*i,o=s-1;o>=0;o--)p.set(b.slice(a,a+4*n),r),r+=u,a-=u;return p}var f=new rs;f.size(n,s),f.asBitmap=!0;var m=null;if(0!=i||0!=e||n!=l||s!=c){m=t.uv.concat();var g=m[0],v=m[1],S=m[2]-g,y=m[7]-v,C=S/l,E=y/c;m=[g+i*C,v+e*E,g+(i+n)*C,v+e*E,g+(i+n)*C,v+(e+s)*E,g+i*C,v+(e+s)*E]}f._drawTextureM(t,0,0,n,s,null,1,m),f._targets.start(),f.flush(),f._targets.end(),f._targets.restore();var b=f._targets.getData(0,0,n,s);for(f.destroy(),p=new Uint8Array(n*s*4),r=0,a=(s-1)*u,o=s-1;o>=0;o--)p.set(b.slice(a,a+u),r),r+=u,a-=u;return p},Ie._filter=function(t,i,e,n){var s=i,r=this._next;if(r){var a=t.filters,o=a.length;if(1==o&&32==a[0].type)return i.save(),i.setColorFilter(a[0]),r._fun.call(r,t,i,e,n),i.restore(),void 0;var h,l=ai.create(1,0),c=Oe.TEMP,u=s._curMat,d=$e.create();u.copyTo(d);var _=0,p=0,f=!1,m=t._cacheStyle.filterCache||null;if(m&&0==t.getRepaint()){if(f=t._cacheStyle.hasGlowFilter||!1,f&&(_=50,p=25),h=t.getBounds(),h.width<=0||h.height<=0)return;h.width+=_,h.height+=_,c.x=h.x*d.a+h.y*d.c,c.y=h.y*d.d+h.x*d.b,h.x=c.x,h.y=c.y,c.x=h.width*d.a+h.height*d.c,c.y=h.height*d.d+h.width*d.b,h.width=c.x,h.height=c.y}else{f=t._isHaveGlowFilter(),f&&(_=50,p=25),h=new on,h.copyFrom(t.getSelfBounds()),h.x+=t.x,h.y+=t.y,h.x-=t.pivotX+4,h.y-=t.pivotY+4;var g=h.x,v=h.y;if(h.width+=_+8,h.height+=_+8,c.x=h.x*d.a+h.y*d.c,c.y=h.y*d.d+h.x*d.b,h.x=c.x,h.y=c.y,c.x=h.width*d.a+h.height*d.c,c.y=h.height*d.d+h.width*d.b,h.width=c.x,h.height=c.y,h.width<=0||h.height<=0)return;m&&cn.releaseRT(m);var S=cn.getRT(h.width,h.height),y=cn.getRT(h.width,h.height);t._getCacheStyle().filterCache=m,s.pushRT(),s.useRT(S);var C=t.x-g+p,E=t.y-v+p;r._fun.call(r,t,i,C,E),s.useRT(y);for(var b=0;o>b;b++){0!=b&&(s.useRT(S),s.drawTarget(y,0,0,h.width,h.height,$e.TEMP.identity(),l,null,Zi.TOINT.overlay),s.useRT(y));var I=a[b];switch(I.type){case 16:I._glRender&&I._glRender.render(S,i,h.width,h.height,I);break;case 8:I._glRender&&I._glRender.render(S,i,h.width,h.height,I);break;case 32:s.setColorFilter(I),s.drawTarget(S,0,0,h.width,h.height,$e.EMPTY.identity(),ai.create(1,0)),s.setColorFilter(null)}}s.popRT()}e=e-p-t.x,n=n-p-t.y,c.setTo(e,n),d.transformPoint(c),e=c.x+h.x,n=c.y+h.y,s._drawRenderTexture(y,e,n,h.width,h.height,$e.TEMP.identity(),1,Ma.defuv),d.destroy()}},ra.prototype.getTexture=function(){if(!this._texture){var t=new wa;t.loadImageSource(this.source),this._texture=new On(t)}return this._texture},Float32Array.prototype.slice||(Float32Array.prototype.slice=i._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=i._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=i._uint8ArraySlice))},i.enable=function(){return Ti.__init__(),Ti._supportWebGL?(gi.isConchApp?i._nativeRender_enable():i._webglRender_enable(),!0):!1},i.onStageResize=function(t,e){null!=i.mainContext&&(i.mainContext.viewport(0,0,t,e),fn.width=t,fn.height=e)},i.mainContext=null,i.shaderHighPrecision=!1,i._isWebGL2=!1,i.isNativeRender_enable=!1,i}(),ve=(function(){function t(t,i){this.submitStartPos=0,this.submitEndPos=0,this.context=null,this.touches=[],this.submits=[],this.sprite=null,this._mesh=null,this._pathMesh=null,this._triangleMesh=null,this.meshlist=[],this._oldMesh=null,this._oldPathMesh=null,this._oldTriMesh=null,this._oldMeshList=null,this.oldMatrix=null,this.cachedClipInfo=new $e,this.context=t,this.sprite=i,t._globalClipMatrix.copyTo(this.cachedClipInfo)}s(t,"laya.webgl.canvas.WebGLCacheAsNormalCanvas");var i=t.prototype;return i.startRec=function(){this.touches.length=0,this.context.touches=this.touches,this.context._globalClipMatrix.copyTo(this.cachedClipInfo),this.submits.length=0,this.submitStartPos=this.context._submits._length;for(var i=0,e=this.meshlist.length;e>i;i++){var n=this.meshlist[i];n.canReuse?n.releaseMesh():n.destroy()}this.meshlist.length=0,this._mesh=ts.getAMesh(),this._pathMesh=es.getAMesh(),this._triangleMesh=$n.getAMesh(),this.meshlist.push(this._mesh),this.meshlist.push(this._pathMesh),this.meshlist.push(this._triangleMesh),this.context._curSubmit=oi.RENDERBASE,this._oldMesh=this.context._mesh,this._oldPathMesh=this.context._pathMesh,this._oldTriMesh=this.context._triangleMesh,this._oldMeshList=this.context.meshlist,this.context._mesh=this._mesh,this.context._pathMesh=this._pathMesh,this.context._triangleMesh=this._triangleMesh,this.context.meshlist=this.meshlist,this.oldMatrix=this.context._curMat,this.context._curMat=t.matI},i.endRec=function(){var t=this.context._submits;this.submitEndPos=t._length;for(var i=this.submitEndPos-this.submitStartPos,e=0;i>e;e++)this.submits.push(t[this.submitStartPos+e]);t._length-=i,this.context._mesh=this._oldMesh,this.context._pathMesh=this._oldPathMesh,this.context._triangleMesh=this._oldTriMesh,this.context.meshlist=this._oldMeshList,this.context._curSubmit=oi.RENDERBASE,this.context._curMat=this.oldMatrix,this.context.touches=null},i.isCacheValid=function(){var t=this.context._globalClipMatrix;return t.a!=this.cachedClipInfo.a||t.b!=this.cachedClipInfo.b||t.c!=this.cachedClipInfo.c||t.d!=this.cachedClipInfo.d||t.tx!=this.cachedClipInfo.tx||t.ty!=this.cachedClipInfo.ty?!1:!0},i.flushsubmit=function(){var t=oi.RENDERBASE;this.submits.forEach(function(i){i!=oi.RENDERBASE&&(oi.preRender=t,t=i,i.renderSubmit())})},i.releaseMem=function(){},n(t,["matI",function(){return this.matI=new $e}]),t}(),function(){function t(i){this._font="14px Arial",this._family="Arial",this._size=14,this._italic=!1,this._bold=!1,this._id=t._gfontID++,this.setFont(i||this._font)}s(t,"laya.utils.FontInfo");var i=t.prototype;return i.setFont=function(t){this._font=t;var i=t.split(" "),e=i.length;if(2>e)return 1==e&&i[0].indexOf("px")>0&&(this._size=parseInt(i[0])),void 0;for(var n=-1,s=0;e>s;s++)if(i[s].indexOf("px")>0||i[s].indexOf("pt")>0){n=s,this._size=parseInt(i[s]),this._size<=0&&(console.error("font parse error:"+t),this._size=14);break}var r=n+1,a=i[r];for(r++;e>r;r++)a+=" "+i[r];this._family=a.split(",")[0],this._italic=i.indexOf("italic")>=0,this._bold=i.indexOf("bold")>=0},t.Parse=function(i){if(i===t._lastFont)return t._lastFontInfo;var e=t._cache[i];return e||(e=t._cache[i]=new t(i)),t._lastFont=i,t._lastFontInfo=e,e},t.EMPTY=new t(null),t._cache={},t._gfontID=0,t._lastFont="",t._lastFontInfo=null,t}()),Se=(function(){function t(){}return s(t,"laya.events.Keyboard"),t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.SEMICOLON=186,t.EQUAL=187,t.COMMA=188,t.MINUS=189,t.PERIOD=190,t.SLASH=191,t.BACKQUOTE=192,t.LEFTBRACKET=219,t.BACKSLASH=220,t.RIGHTBRACKET=221,t.QUOTE=222,t.ALTERNATE=18,t.BACKSPACE=8,t.CAPS_LOCK=20,t.COMMAND=15,t.CONTROL=17,t.DELETE=46,t.ENTER=13,t.ESCAPE=27,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.SHIFT=16,t.SPACE=32,t.TAB=9,t.INSERT=45,t}(),function(){function t(){}s(t,"laya.display.cmd.DrawPieCmd");var i=t.prototype;return i.recover=function(){this.fillColor=null,this.lineColor=null,ee.recover("DrawPieCmd",this)},i.run=function(t,i,e){t._drawPie(this.x+i,this.y+e,this.radius,this._startAngle,this._endAngle,this.fillColor,this.lineColor,this.lineWidth,this.vid)},r(0,i,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180}),r(0,i,"cmdID",function(){return"DrawPie"}),r(0,i,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180}),t.create=function(i,e,n,s,r,a,o,h,l){var c=ee.getItemByClass("DrawPieCmd",t);return c.x=i,c.y=e,c.radius=n,c._startAngle=s,c._endAngle=r,c.fillColor=a,c.lineColor=o,c.lineWidth=h,c.vid=l,c},t.ID="DrawPie",t}()),ye=function(){function t(){this._clipInfoID=-1,this._globalClipMatrix=new $e,this._clipRect=new on}s(t,"laya.webgl.canvas.save.SaveClipRect");var i=t.prototype;return e.imps(i,{"laya.webgl.canvas.save.ISaveData":!0}),i.isSaveMark=function(){return!1},i.restore=function(i){this._globalClipMatrix.copyTo(i._globalClipMatrix),this._clipRect.clone(i._clipRect),i._clipInfoID=this._clipInfoID,t.POOL[t.POOL._length++]=this},t.save=function(i){if(131072!=(131072&i._saveMark._saveuse)){i._saveMark._saveuse|=131072;var e=t.POOL,n=e._length>0?e[--e._length]:new t;i._globalClipMatrix.copyTo(n._globalClipMatrix),i._clipRect.clone(n._clipRect),n._clipInfoID=i._clipInfoID;var s=i._save;s[s._length++]=n}},t.POOL=h._createArray(),t}(),Ce=(function(){function t(){}return s(t,"laya.Const"),t.NOT_ACTIVE=1,t.ACTIVE_INHIERARCHY=2,t.AWAKED=4,t.NOT_READY=8,t.DISPLAY=16,t.HAS_ZORDER=32,t.HAS_MOUSE=64,t.DISPLAYED_INSTAGE=128,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this._cmdCurrentPos=0,this._blend_src=0,this._blend_dest=0}s(t,"laya.layagl.cmdNative.DrawTextureCmdNative");var i=t.prototype;return i.recover=function(){this._texture=null,ee.recover("DrawTextureCmd",this)},i._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"light":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},i._mixRGBandAlpha=function(t,i){var e=(4278190080&t)>>>24;return 0!=e?e*=i:e=255*i,16777215&t|e<<24},r(0,i,"cmdID",function(){return"DrawTexture"}),r(0,i,"matrix",function(){return this._matrix},function(i){this._matrix||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._matrix=i;var e=this._paramData._float32Data;e[t._PARAM_MATRIX_POS_]=i.a,e[t._PARAM_MATRIX_POS_+1]=i.b,e[t._PARAM_MATRIX_POS_+2]=i.c,e[t._PARAM_MATRIX_POS_+3]=i.d,e[t._PARAM_MATRIX_POS_+4]=i.tx,e[t._PARAM_MATRIX_POS_+5]=i.ty,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"y",function(){return this._y},function(i){this._y=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"texture",function(){return this._texture},function(i){if(i&&i.url){this._texture=i,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=null!=this.texture.bitmap._glTexture?this._texture.bitmap._glTexture.id:0;var e=this._paramData._float32Data,n=this.texture.uv;e[t._PARAM_VB_POS_+2]=n[0],e[t._PARAM_VB_POS_+3]=n[1],e[t._PARAM_VB_POS_+8]=n[2],e[t._PARAM_VB_POS_+9]=n[3],e[t._PARAM_VB_POS_+14]=n[4],e[t._PARAM_VB_POS_+15]=n[5],e[t._PARAM_VB_POS_+20]=n[6],e[t._PARAM_VB_POS_+21]=n[7],ki.syncBufferToRenderThread(this._paramData)}}),r(0,i,"width",function(){return this._width},function(i){this._width=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"x",function(){return this._x},function(i){this._x=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"height",function(){return this._height},function(i){this._height=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"alpha",function(){return this._alpha},function(t){this._alpha=t}),t.create=function(i,e,n,s,r,a,o,h,l){var c=ee.getItemByClass("DrawTextureCmd",t);c._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURE_CMD_ENCODER_||(t._DRAW_TEXTURE_CMD_ENCODER_=ki.instance.createCommandEncoder(188,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_)),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_||(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=ki.instance.createCommandEncoder(224,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.save(),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setGlobalValueByParamData(ei.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.restore(),ki.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_)),c._paramData||(c._paramData=new ParamData(148,!0)),c._texture=i,c._x=e,c._y=n,c._width=s,c._height=r,c._matrix=a,c._alpha=o,c._color=h,c._blendMode=l;var u=0!=s?s:i.bitmap.width,d=0!=r?r:i.bitmap.height,_=i.uv,p=c._paramData._float32Data,f=c._paramData._int32Data;f[t._PARAM_UNIFORM_LOCATION_POS_]=3,f[t._PARAM_TEX_LOCATION_POS_]=33984,f[t._PARAM_TEXTURE_POS_]=null!=i.bitmap._glTexture?i.bitmap._glTexture.id:0,f[t._PARAM_RECT_NUM_POS_]=1,f[t._PARAM_VB_SIZE_POS_]=96,l?(c._setBlendMode(l),f[t._PARAM_BLEND_SRC_POS_]=c._blend_src,f[t._PARAM_BLEND_DEST_POS_]=c._blend_dest):(f[t._PARAM_BLEND_SRC_POS_]=-1,f[t._PARAM_BLEND_DEST_POS_]=-1);var m=4294967295;o&&(m=c._mixRGBandAlpha(m,o));var g=t._PARAM_VB_POS_;return p[g++]=e,p[g++]=n,p[g++]=_[0],p[g++]=_[1],f[g++]=m,f[g++]=4294967295,p[g++]=e+u,p[g++]=n,p[g++]=_[2],p[g++]=_[3],f[g++]=m,f[g++]=4294967295,p[g++]=e+u,p[g++]=n+d,p[g++]=_[4],p[g++]=_[5],f[g++]=m,f[g++]=4294967295,p[g++]=e,p[g++]=n+d,p[g++]=_[6],p[g++]=_[7],f[g++]=m,f[g++]=4294967295,a&&(p[t._PARAM_MATRIX_POS_]=a.a,p[t._PARAM_MATRIX_POS_+1]=a.b,p[t._PARAM_MATRIX_POS_+2]=a.c,p[t._PARAM_MATRIX_POS_+3]=a.d,p[t._PARAM_MATRIX_POS_+4]=a.tx,p[t._PARAM_MATRIX_POS_+5]=a.ty),ki.syncBufferToRenderThread(c._paramData),c._cmdCurrentPos=a?c._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),c._paramData.getPtrID(),-1):c._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_.getPtrID(),c._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(c._graphicsCmdEncoder),c},t.ID="DrawTexture",t._DRAW_TEXTURE_CMD_ENCODER_=null,t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=null,t._PARAM_UNIFORM_LOCATION_POS_=0,t._PARAM_TEX_LOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_VB_POS_=5,t._PARAM_MATRIX_POS_=29,t._PARAM_BLEND_SRC_POS_=35,t._PARAM_BLEND_DEST_POS_=36,t}(),function(){function t(i){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._id=++t._uniqueIDCounter,this._name=i?i:"Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,t._resourceManagers.push(this),this._resources=[]}s(t,"laya.resource.ResourceManager");var i=t.prototype;return e.imps(i,{"laya.resource.IDispose":!0}),i.getResourceByIndex=function(t){return this._resources[t]},i.getResourcesLength=function(){return this._resources.length},i.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var i=this._resources.indexOf(t);return-1===i?(t._resourceManager=this,this._resources.push(t),this.addSize(t.gpuMemory),!0):!1},i.removeResource=function(t){var i=this._resources.indexOf(t);return-1!==i?(this._resources.splice(i,1),t._resourceManager=null,this._memorySize-=t.gpuMemory,!0):!1},i.unload=function(){for(var t=this._resources.slice(0,this._resources.length),i=0;i<t.length;i++){var e=t[i];e.destroy()}t.length=0},i.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var i=this._resources.slice(0,this._resources.length),e=0;e<i.length;e++){var n=i[e];n.resourceManager.removeResource(n),n.destroy()}i.length=0},i.addSize=function(t){t&&(this._memorySize+=t)},r(0,i,"id",function(){return this._id}),r(0,i,"name",function(){return this._name},function(i){!i&&""===i||this._name===i||(this._name=i,t._isResourceManagersSorted=!1)}),r(0,i,"memorySize",function(){return this._memorySize}),r(1,t,"systemResourceManager",function(){return t._systemResourceManager}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(i){return t._resourceManagers[i]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(t){void 0===t&&(t=!1)},t.releaseContentManagers=function(i){void 0===i&&(i=!1);for(var e=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var s=0;s<t.currentResourceManager._resources.length;s++){var r=t.currentResourceManager._resources[s];!r.released&&r.releaseResource(i)}}t.currentResourceManager=e},t._uniqueIDCounter=0,t._isResourceManagersSorted=!1,t._resourceManagers=[],n(t,["_systemResourceManager",function(){return this._systemResourceManager=new t("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=t._systemResourceManager}]),t}()),Ee=function(){function t(t){this._par=null,this._loaded=!0,this.bitmap={},this.bitmap.id=t.id,this._par=t}s(t,"laya.webgl.resource.CharInternalTexture");var i=t.prototype;return i._getSource=function(){return this._par._source},t}(),be=function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}s(t,"laya.html.utils.LayoutLine");var i=t.prototype;return i.updatePos=function(t,i,e,n,s,r,a){var o,h=0;this.elements.length>0&&(o=this.elements[this.elements.length-1],h=o.x+o.width-this.elements[0].x),a=a||this.h;var l=0,c=0/0;"center"===s&&(l=(i-h)/2),"right"===s&&(l=i-h);for(var u=0,d=this.elements.length;d>u;u++){o=this.elements[u];var _=o._getCSSStyle();switch(0!==l&&(o.x+=l),_.valign){case"top":o.y=n;break;case"middle":var p=0;99999!=this.minTextHeight&&(p=this.minTextHeight);var f=(p+a)/2;f=Math.max(f,this.h),c=o instanceof laya.html.dom.HTMLImageElement?n+f-o.height:n+f-o.height,o.y=c;break;case"bottom":o.y=n+(a-o.height)}}},t}(),Ie=function(){function t(){this._action=null,this._glRender=null}s(t,"laya.filters.Filter");var i=t.prototype;return e.imps(i,{"laya.filters.IFilter":!0}),r(0,i,"type",function(){return-1}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filter=null,t._recycleScope=null,t}(),xe=function(){function t(){}return s(t,"laya.webgl.shapes.Earcut"),t.earcut=function(i,e,n){n=n||2;var s=e&&e.length,r=s?e[0]*n:i.length,a=t.linkedList(i,0,r,n,!0),o=[];if(!a)return o;var h,l,c,u,d,_,p;if(s&&(a=t.eliminateHoles(i,e,a,n)),i.length>80*n){h=c=i[0],l=u=i[1];for(var f=n;r>f;f+=n)d=i[f],_=i[f+1],h>d&&(h=d),l>_&&(l=_),d>c&&(c=d),_>u&&(u=_);p=Math.max(c-h,u-l),p=0!==p?1/p:0}return t.earcutLinked(a,o,n,h,l,p),o},t.linkedList=function(i,e,n,s,r){var a,o;if(r===t.signedArea(i,e,n,s)>0)for(a=e;n>a;a+=s)o=t.insertNode(a,i[a],i[a+1],o);else for(a=n-s;a>=e;a-=s)o=t.insertNode(a,i[a],i[a+1],o);return o&&t.equals(o,o.next)&&(t.removeNode(o),o=o.next),o},t.filterPoints=function(i,e){if(!i)return i;e||(e=i);var n,s=i;do if(n=!1,s.steiner||!t.equals(s,s.next)&&0!==t.area(s.prev,s,s.next))s=s.next;else{if(t.removeNode(s),s=e=s.prev,s===s.next)break;n=!0}while(n||s!==e);return e},t.earcutLinked=function(i,e,n,s,r,a,o){if(i){!o&&a&&t.indexCurve(i,s,r,a);for(var h,l,c=i;i.prev!==i.next;)if(h=i.prev,l=i.next,a?t.isEarHashed(i,s,r,a):t.isEar(i))e.push(h.i/n),e.push(i.i/n),e.push(l.i/n),t.removeNode(i),i=l.next,c=l.next;else if(i=l,i===c){o?1===o?(i=t.cureLocalIntersections(i,e,n),t.earcutLinked(i,e,n,s,r,a,2)):2===o&&t.splitEarcut(i,e,n,s,r,a):t.earcutLinked(t.filterPoints(i,null),e,n,s,r,a,1);break}}},t.isEar=function(i){var e=i.prev,n=i,s=i.next;if(t.area(e,n,s)>=0)return!1;for(var r=i.next.next;r!==i.prev;){if(t.pointInTriangle(e.x,e.y,n.x,n.y,s.x,s.y,r.x,r.y)&&t.area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0},t.isEarHashed=function(i,e,n,s){var r=i.prev,a=i,o=i.next;if(t.area(r,a,o)>=0)return!1;for(var h=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,l=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,d=t.zOrder(h,l,e,n,s),_=t.zOrder(c,u,e,n,s),p=i.nextZ;p&&p.z<=_;){if(p!==i.prev&&p!==i.next&&t.pointInTriangle(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&t.area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=i.prevZ;p&&p.z>=d;){if(p!==i.prev&&p!==i.next&&t.pointInTriangle(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&t.area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0},t.cureLocalIntersections=function(i,e,n){var s=i;do{var r=s.prev,a=s.next.next;!t.equals(r,a)&&t.intersects(r,s,s.next,a)&&t.locallyInside(r,a)&&t.locallyInside(a,r)&&(e.push(r.i/n),e.push(s.i/n),e.push(a.i/n),t.removeNode(s),t.removeNode(s.next),s=i=a),s=s.next}while(s!==i);return s},t.splitEarcut=function(i,e,n,s,r,a){var o=i;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&t.isValidDiagonal(o,h)){var l=t.splitPolygon(o,h);return o=t.filterPoints(o,o.next),l=t.filterPoints(l,l.next),t.earcutLinked(o,e,n,s,r,a),t.earcutLinked(l,e,n,s,r,a),void 0}h=h.next}o=o.next}while(o!==i)},t.eliminateHoles=function(i,e,n,s){var r,a,o,h,l,c=[];for(r=0,a=e.length;a>r;r++)o=e[r]*s,h=a-1>r?e[r+1]*s:i.length,l=t.linkedList(i,o,h,s,!1),l===l.next&&(l.steiner=!0),c.push(t.getLeftmost(l));for(c.sort(t.compareX),r=0;r<c.length;r++)t.eliminateHole(c[r],n),n=t.filterPoints(n,n.next);return n},t.compareX=function(t,i){return t.x-i.x},t.eliminateHole=function(i,e){if(e=t.findHoleBridge(i,e)){var n=t.splitPolygon(e,i);t.filterPoints(n,n.next)}},t.findHoleBridge=function(i,e){var n,s=e,r=i.x,a=i.y,o=-1/0;do{if(a<=s.y&&a>=s.next.y&&s.next.y!==s.y){var h=s.x+(a-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(r>=h&&h>o){if(o=h,h===r){if(a===s.y)return s;if(a===s.next.y)return s.next}n=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!n)return null;if(r===o)return n.prev;var l,c=n,u=n.x,d=n.y,_=1/0;for(s=n.next;s!==c;)r>=s.x&&s.x>=u&&r!==s.x&&t.pointInTriangle(d>a?r:o,a,u,d,d>a?o:r,a,s.x,s.y)&&(l=Math.abs(a-s.y)/(r-s.x),(_>l||l===_&&s.x>n.x)&&t.locallyInside(s,i)&&(n=s,_=l)),s=s.next;return n},t.indexCurve=function(i,e,n,s){var r=i;do null===r.z&&(r.z=t.zOrder(r.x,r.y,e,n,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,t.sortLinked(r)},t.sortLinked=function(t){var i,e,n,s,r,a,o,h,l=1;do{for(e=t,t=null,r=null,a=0;e;){for(a++,n=e,o=0,i=0;l>i&&(o++,n=n.nextZ,n);i++);for(h=l;o>0||h>0&&n;)0!==o&&(0===h||!n||e.z<=n.z)?(s=e,e=e.nextZ,o--):(s=n,n=n.nextZ,h--),r?r.nextZ=s:t=s,s.prevZ=r,r=s;e=n}r.nextZ=null,l*=2}while(a>1);return t},t.zOrder=function(t,i,e,n,s){return t=32767*(t-e)*s,i=32767*(i-n)*s,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),i=16711935&(i|i<<8),i=252645135&(i|i<<4),i=858993459&(i|i<<2),i=1431655765&(i|i<<1),t|i<<1},t.getLeftmost=function(t){var i=t,e=t;do i.x<e.x&&(e=i),i=i.next;while(i!==t);return e},t.pointInTriangle=function(t,i,e,n,s,r,a,o){return(s-a)*(i-o)-(t-a)*(r-o)>=0&&(t-a)*(n-o)-(e-a)*(i-o)>=0&&(e-a)*(r-o)-(s-a)*(n-o)>=0},t.isValidDiagonal=function(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!t.intersectsPolygon(i,e)&&t.locallyInside(i,e)&&t.locallyInside(e,i)&&t.middleInside(i,e)},t.area=function(t,i,e){return(i.y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y)},t.equals=function(t,i){return t.x===i.x&&t.y===i.y},t.intersects=function(i,e,n,s){return t.equals(i,e)&&t.equals(n,s)||t.equals(i,s)&&t.equals(n,e)?!0:t.area(i,e,n)>0!=t.area(i,e,s)>0&&t.area(n,s,i)>0!=t.area(n,s,e)>0},t.intersectsPolygon=function(i,e){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&t.intersects(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1},t.locallyInside=function(i,e){return t.area(i.prev,i,i.next)<0?t.area(i,e,i.next)>=0&&t.area(i,i.prev,e)>=0:t.area(i,e,i.prev)<0||t.area(i,i.next,e)<0},t.middleInside=function(t,i){var e=t,n=!1,s=(t.x+i.x)/2,r=(t.y+i.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==t);return n},t.splitPolygon=function(t,i){var e=new Ze(t.i,t.x,t.y),n=new Ze(i.i,i.x,i.y),s=t.next,r=i.prev;return t.next=i,i.prev=t,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n},t.insertNode=function(t,i,e,n){var s=new Ze(t,i,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s},t.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},t.signedArea=function(t,i,e,n){for(var s=0,r=i,a=e-n;e>r;r+=n)s+=(t[a]-t[r])*(t[r+1]+t[a+1]),a=r;return s},t}(),Pe=function(){function i(){}s(i,"laya.webgl.WebGLContext");var e=i.prototype;return e.getContextAttributes=function(){return null},e.isContextLost=function(){},e.getSupportedExtensions=function(){return null},e.getExtension=function(){return null},e.activeTexture=function(){},e.attachShader=function(){},e.bindAttribLocation=function(){},e.bindBuffer=function(){},e.bindFramebuffer=function(){},e.bindRenderbuffer=function(){},e.bindTexture=function(){},e.useTexture=function(){},e.blendColor=function(){},e.blendEquation=function(){},e.blendEquationSeparate=function(){},e.blendFunc=function(){},e.blendFuncSeparate=function(){},e.bufferData=function(){},e.bufferSubData=function(){},e.checkFramebufferStatus=function(){return null},e.clear=function(){},e.clearColor=function(){},e.clearDepth=function(){},e.clearStencil=function(){},e.colorMask=function(){},e.compileShader=function(){},e.copyTexImage2D=function(){},e.copyTexSubImage2D=function(){},e.createBuffer=function(){},e.createFramebuffer=function(){},e.createProgram=function(){},e.createRenderbuffer=function(){},e.createShader=function(){},e.createTexture=function(){return null},e.cullFace=function(){},e.deleteBuffer=function(){},e.deleteFramebuffer=function(){},e.deleteProgram=function(){},e.deleteRenderbuffer=function(){},e.deleteShader=function(){},e.deleteTexture=function(){},e.depthFunc=function(){},e.depthMask=function(){},e.depthRange=function(){},e.detachShader=function(){},e.disable=function(){},e.disableVertexAttribArray=function(){},e.drawArrays=function(){},e.drawElements=function(){},e.enable=function(){},e.enableVertexAttribArray=function(){},e.finish=function(){},e.flush=function(){},e.framebufferRenderbuffer=function(){},e.framebufferTexture2D=function(){},e.frontFace=function(){return null},e.generateMipmap=function(){return null},e.getActiveAttrib=function(){return null},e.getActiveUniform=function(){return null},e.getAttribLocation=function(){return 0},e.getParameter=function(){return null},e.getBufferParameter=function(){return null},e.getError=function(){return null},e.getFramebufferAttachmentParameter=function(){},e.getProgramParameter=function(){return 0},e.getProgramInfoLog=function(){return null},e.getRenderbufferParameter=function(){return null},e.getShaderPrecisionFormat=function(){return null},e.getShaderParameter=function(){},e.getShaderInfoLog=function(){return null},e.getShaderSource=function(){return null},e.getTexParameter=function(){},e.getUniform=function(){},e.getUniformLocation=function(){return null},e.getVertexAttrib=function(){return null},e.getVertexAttribOffset=function(){return null},e.hint=function(){},e.isBuffer=function(){},e.isEnabled=function(){},e.isFramebuffer=function(){},e.isProgram=function(){},e.isRenderbuffer=function(){},e.isShader=function(){},e.isTexture=function(){},e.lineWidth=function(){},e.linkProgram=function(){},e.pixelStorei=function(){},e.polygonOffset=function(){},e.readPixels=function(){},e.renderbufferStorage=function(){},e.sampleCoverage=function(){},e.scissor=function(){},e.shaderSource=function(){},e.stencilFunc=function(){},e.stencilFuncSeparate=function(){},e.stencilMask=function(){},e.stencilMaskSeparate=function(){},e.stencilOp=function(){},e.stencilOpSeparate=function(){},e.texImage2D=function(){},e.texParameterf=function(){},e.texParameteri=function(){},e.texSubImage2D=function(){},e.uniform1f=function(){},e.uniform1fv=function(){},e.uniform1i=function(){},e.uniform1iv=function(){},e.uniform2f=function(){},e.uniform2fv=function(){},e.uniform2i=function(){},e.uniform2iv=function(){},e.uniform3f=function(){},e.uniform3fv=function(){},e.uniform3i=function(){},e.uniform3iv=function(){},e.uniform4f=function(){},e.uniform4fv=function(){},e.uniform4i=function(){},e.uniform4iv=function(){},e.uniformMatrix2fv=function(){},e.uniformMatrix3fv=function(){},e.uniformMatrix4fv=function(){},e.useProgram=function(){},e.validateProgram=function(){},e.vertexAttrib1f=function(){},e.vertexAttrib1fv=function(){},e.vertexAttrib2f=function(){},e.vertexAttrib2fv=function(){},e.vertexAttrib3f=function(){},e.vertexAttrib3fv=function(){},e.vertexAttrib4f=function(){},e.vertexAttrib4fv=function(){},e.vertexAttribPointer=function(){},e.viewport=function(){},e.configureBackBuffer=function(t,i,e,n,s){void 0===n&&(n=!0),void 0===s&&(s=!1)
},e.compressedTexImage2D=function(){},e.createVertexArray=function(){throw"not implemented"},e.bindVertexArray=function(){throw"not implemented"},e.deleteVertexArray=function(){throw"not implemented"},e.isVertexArray=function(){throw"not implemented"},i.__init__=function(e){if(i.__init_native(),laya.webgl.WebGLContext._checkExtensions(e),!ge._isWebGL2){t._setupVertexArrayObject&&(Ti.onMiniGame?t._forceSetupVertexArrayObject(e):t._setupVertexArrayObject(e));var n=(e.rawgl||e).getExtension("OES_vertex_array_object");if(n){console.log("EXT:webgl support OES_vertex_array_object！");var s=e;s.createVertexArray=function(){return n.createVertexArrayOES()},s.bindVertexArray=function(t){n.bindVertexArrayOES(t)},s.deleteVertexArray=function(t){n.deleteVertexArrayOES(t)},s.isVertexArray=function(t){n.isVertexArrayOES(t)}}}},i._getExtension=function(t,e){var n=i._extentionVendorPrefixes;for(var s in n){var r=t.getExtension(n[s]+e);if(r)return r}return null},i._checkExtensions=function(t){return i._extTextureFilterAnisotropic=i._getExtension(t,"EXT_texture_filter_anisotropic"),i._compressedTextureS3tc=i._getExtension(t,"WEBGL_compressed_texture_s3tc"),i._compressedTexturePvrtc=i._getExtension(t,"WEBGL_compressed_texture_pvrtc"),i._compressedTextureEtc1=i._getExtension(t,"WEBGL_compressed_texture_etc1"),null},i.__init_native=function(){if(gi.isConchApp){var t=i;t.useProgram=t.useProgramForNative,t.activeTexture=t.activeTextureForNative,t.bindTexture=t.bindTextureForNative,t.bindVertexArray=t.bindVertexArrayForNative,t.setDepthTest=t.setDepthTestForNative,t.setDepthMask=t.setDepthMaskForNative,t.setDepthFunc=t.setDepthFuncForNative,t.setBlend=t.setBlendForNative,t.setBlendFunc=t.setBlendFuncForNative,t.setCullFace=t.setCullFaceForNative,t.setFrontFace=t.setFrontFaceForNative,t._checkExtensions(Ti.window.LayaGLContext.instance)}},i.useProgram=function(t,e){return i._useProgram===e?!1:(t.useProgram(e),i._useProgram=e,!0)},i.setDepthTest=function(t,e){e!==i._depthTest&&(i._depthTest=e,e?t.enable(2929):t.disable(2929))},i.setDepthMask=function(t,e){e!==i._depthMask&&(i._depthMask=e,t.depthMask(e))},i.setDepthFunc=function(t,e){e!==i._depthFunc&&(i._depthFunc=e,t.depthFunc(e))},i.setBlend=function(t,e){e!==i._blend&&(i._blend=e,e?t.enable(3042):t.disable(3042))},i.setBlendFunc=function(t,e,n){(e!==i._sFactor||n!==i._dFactor)&&(i._sFactor=e,i._dFactor=n,t.blendFunc(e,n))},i.setCullFace=function(t,e){e!==i._cullFace&&(i._cullFace=e,e?t.enable(2884):t.disable(2884))},i.setFrontFace=function(t,e){e!==i._frontFace&&(i._frontFace=e,t.frontFace(e))},i.activeTexture=function(t,e){i._activedTextureID!==e&&(t.activeTexture(e),i._activedTextureID=e)},i.bindTexture=function(t,e,n){i._activeTextures[i._activedTextureID-33984]!==n&&(t.bindTexture(e,n),i._activeTextures[i._activedTextureID-33984]=n)},i.useProgramForNative=function(t,i){return t.useProgram(i),!0},i.setDepthTestForNative=function(t,i){i?t.enable(2929):t.disable(2929)},i.setDepthMaskForNative=function(t,i){t.depthMask(i)},i.setDepthFuncForNative=function(t,i){t.depthFunc(i)},i.setBlendForNative=function(t,i){i?t.enable(3042):t.disable(3042)},i.setBlendFuncForNative=function(t,i,e){t.blendFunc(i,e)},i.setCullFaceForNative=function(t,i){i?t.enable(2884):t.disable(2884)},i.setFrontFaceForNative=function(t,i){t.frontFace(i)},i.activeTextureForNative=function(t,i){t.activeTexture(i)},i.bindTextureForNative=function(t,i,e){t.bindTexture(i,e)},i.bindVertexArrayForNative=function(t,i){t.bindVertexArray(i)},i.DEPTH_BUFFER_BIT=256,i.STENCIL_BUFFER_BIT=1024,i.COLOR_BUFFER_BIT=16384,i.POINTS=0,i.LINES=1,i.LINE_LOOP=2,i.LINE_STRIP=3,i.TRIANGLES=4,i.TRIANGLE_STRIP=5,i.TRIANGLE_FAN=6,i.ZERO=0,i.ONE=1,i.SRC_COLOR=768,i.ONE_MINUS_SRC_COLOR=769,i.SRC_ALPHA=770,i.ONE_MINUS_SRC_ALPHA=771,i.DST_ALPHA=772,i.ONE_MINUS_DST_ALPHA=773,i.DST_COLOR=774,i.ONE_MINUS_DST_COLOR=775,i.SRC_ALPHA_SATURATE=776,i.FUNC_ADD=32774,i.BLEND_EQUATION=32777,i.BLEND_EQUATION_RGB=32777,i.BLEND_EQUATION_ALPHA=34877,i.FUNC_SUBTRACT=32778,i.FUNC_REVERSE_SUBTRACT=32779,i.BLEND_DST_RGB=32968,i.BLEND_SRC_RGB=32969,i.BLEND_DST_ALPHA=32970,i.BLEND_SRC_ALPHA=32971,i.CONSTANT_COLOR=32769,i.ONE_MINUS_CONSTANT_COLOR=32770,i.CONSTANT_ALPHA=32771,i.ONE_MINUS_CONSTANT_ALPHA=32772,i.BLEND_COLOR=32773,i.ARRAY_BUFFER=34962,i.ELEMENT_ARRAY_BUFFER=34963,i.ARRAY_BUFFER_BINDING=34964,i.ELEMENT_ARRAY_BUFFER_BINDING=34965,i.STREAM_DRAW=35040,i.STATIC_DRAW=35044,i.DYNAMIC_DRAW=35048,i.BUFFER_SIZE=34660,i.BUFFER_USAGE=34661,i.CURRENT_VERTEX_ATTRIB=34342,i.FRONT=1028,i.BACK=1029,i.CULL_FACE=2884,i.FRONT_AND_BACK=1032,i.BLEND=3042,i.DITHER=3024,i.STENCIL_TEST=2960,i.DEPTH_TEST=2929,i.SCISSOR_TEST=3089,i.POLYGON_OFFSET_FILL=32823,i.SAMPLE_ALPHA_TO_COVERAGE=32926,i.SAMPLE_COVERAGE=32928,i.NO_ERROR=0,i.INVALID_ENUM=1280,i.INVALID_VALUE=1281,i.INVALID_OPERATION=1282,i.OUT_OF_MEMORY=1285,i.CW=2304,i.CCW=2305,i.LINE_WIDTH=2849,i.ALIASED_POINT_SIZE_RANGE=33901,i.ALIASED_LINE_WIDTH_RANGE=33902,i.CULL_FACE_MODE=2885,i.FRONT_FACE=2886,i.DEPTH_RANGE=2928,i.DEPTH_WRITEMASK=2930,i.DEPTH_CLEAR_VALUE=2931,i.DEPTH_FUNC=2932,i.STENCIL_CLEAR_VALUE=2961,i.STENCIL_FUNC=2962,i.STENCIL_FAIL=2964,i.STENCIL_PASS_DEPTH_FAIL=2965,i.STENCIL_PASS_DEPTH_PASS=2966,i.STENCIL_REF=2967,i.STENCIL_VALUE_MASK=2963,i.STENCIL_WRITEMASK=2968,i.STENCIL_BACK_FUNC=34816,i.STENCIL_BACK_FAIL=34817,i.STENCIL_BACK_PASS_DEPTH_FAIL=34818,i.STENCIL_BACK_PASS_DEPTH_PASS=34819,i.STENCIL_BACK_REF=36003,i.STENCIL_BACK_VALUE_MASK=36004,i.STENCIL_BACK_WRITEMASK=36005,i.VIEWPORT=2978,i.SCISSOR_BOX=3088,i.COLOR_CLEAR_VALUE=3106,i.COLOR_WRITEMASK=3107,i.UNPACK_ALIGNMENT=3317,i.PACK_ALIGNMENT=3333,i.MAX_TEXTURE_SIZE=3379,i.MAX_VIEWPORT_DIMS=3386,i.SUBPIXEL_BITS=3408,i.RED_BITS=3410,i.GREEN_BITS=3411,i.BLUE_BITS=3412,i.ALPHA_BITS=3413,i.DEPTH_BITS=3414,i.STENCIL_BITS=3415,i.POLYGON_OFFSET_UNITS=10752,i.POLYGON_OFFSET_FACTOR=32824,i.TEXTURE_BINDING_2D=32873,i.SAMPLE_BUFFERS=32936,i.SAMPLES=32937,i.SAMPLE_COVERAGE_VALUE=32938,i.SAMPLE_COVERAGE_INVERT=32939,i.NUM_COMPRESSED_TEXTURE_FORMATS=34466,i.COMPRESSED_TEXTURE_FORMATS=34467,i.DONT_CARE=4352,i.FASTEST=4353,i.NICEST=4354,i.GENERATE_MIPMAP_HINT=33170,i.BYTE=5120,i.UNSIGNED_BYTE=5121,i.SHORT=5122,i.UNSIGNED_SHORT=5123,i.INT=5124,i.UNSIGNED_INT=5125,i.FLOAT=5126,i.DEPTH_COMPONENT=6402,i.ALPHA=6406,i.RGB=6407,i.RGBA=6408,i.LUMINANCE=6409,i.LUMINANCE_ALPHA=6410,i.UNSIGNED_SHORT_4_4_4_4=32819,i.UNSIGNED_SHORT_5_5_5_1=32820,i.UNSIGNED_SHORT_5_6_5=33635,i.FRAGMENT_SHADER=35632,i.VERTEX_SHADER=35633,i.MAX_VERTEX_ATTRIBS=34921,i.MAX_VERTEX_UNIFORM_VECTORS=36347,i.MAX_VARYING_VECTORS=36348,i.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,i.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,i.MAX_TEXTURE_IMAGE_UNITS=34930,i.MAX_FRAGMENT_UNIFORM_VECTORS=36349,i.SHADER_TYPE=35663,i.DELETE_STATUS=35712,i.LINK_STATUS=35714,i.VALIDATE_STATUS=35715,i.ATTACHED_SHADERS=35717,i.ACTIVE_UNIFORMS=35718,i.ACTIVE_ATTRIBUTES=35721,i.SHADING_LANGUAGE_VERSION=35724,i.CURRENT_PROGRAM=35725,i.NEVER=512,i.LESS=513,i.EQUAL=514,i.LEQUAL=515,i.GREATER=516,i.NOTEQUAL=517,i.GEQUAL=518,i.ALWAYS=519,i.KEEP=7680,i.REPLACE=7681,i.INCR=7682,i.DECR=7683,i.INVERT=5386,i.INCR_WRAP=34055,i.DECR_WRAP=34056,i.VENDOR=7936,i.RENDERER=7937,i.VERSION=7938,i.NEAREST=9728,i.LINEAR=9729,i.NEAREST_MIPMAP_NEAREST=9984,i.LINEAR_MIPMAP_NEAREST=9985,i.NEAREST_MIPMAP_LINEAR=9986,i.LINEAR_MIPMAP_LINEAR=9987,i.TEXTURE_MAG_FILTER=10240,i.TEXTURE_MIN_FILTER=10241,i.TEXTURE_WRAP_S=10242,i.TEXTURE_WRAP_T=10243,i.TEXTURE_2D=3553,i.TEXTURE_3D=32879,i.TEXTURE=5890,i.TEXTURE_CUBE_MAP=34067,i.TEXTURE_BINDING_CUBE_MAP=34068,i.TEXTURE_CUBE_MAP_POSITIVE_X=34069,i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,i.MAX_CUBE_MAP_TEXTURE_SIZE=34076,i.TEXTURE0=33984,i.TEXTURE1=33985,i.TEXTURE2=33986,i.TEXTURE3=33987,i.TEXTURE4=33988,i.TEXTURE5=33989,i.TEXTURE6=33990,i.TEXTURE7=33991,i.TEXTURE8=33992,i.TEXTURE9=33993,i.TEXTURE10=33994,i.TEXTURE11=33995,i.TEXTURE12=33996,i.TEXTURE13=33997,i.TEXTURE14=33998,i.TEXTURE15=33999,i.TEXTURE16=34e3,i.TEXTURE17=34001,i.TEXTURE18=34002,i.TEXTURE19=34003,i.TEXTURE20=34004,i.TEXTURE21=34005,i.TEXTURE22=34006,i.TEXTURE23=34007,i.TEXTURE24=34008,i.TEXTURE25=34009,i.TEXTURE26=34010,i.TEXTURE27=34011,i.TEXTURE28=34012,i.TEXTURE29=34013,i.TEXTURE30=34014,i.TEXTURE31=34015,i.ACTIVE_TEXTURE=34016,i.REPEAT=10497,i.CLAMP_TO_EDGE=33071,i.MIRRORED_REPEAT=33648,i.FLOAT_VEC2=35664,i.FLOAT_VEC3=35665,i.FLOAT_VEC4=35666,i.INT_VEC2=35667,i.INT_VEC3=35668,i.INT_VEC4=35669,i.BOOL=35670,i.BOOL_VEC2=35671,i.BOOL_VEC3=35672,i.BOOL_VEC4=35673,i.FLOAT_MAT2=35674,i.FLOAT_MAT3=35675,i.FLOAT_MAT4=35676,i.SAMPLER_2D=35678,i.SAMPLER_CUBE=35680,i.VERTEX_ATTRIB_ARRAY_ENABLED=34338,i.VERTEX_ATTRIB_ARRAY_SIZE=34339,i.VERTEX_ATTRIB_ARRAY_STRIDE=34340,i.VERTEX_ATTRIB_ARRAY_TYPE=34341,i.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,i.VERTEX_ATTRIB_ARRAY_POINTER=34373,i.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,i.COMPILE_STATUS=35713,i.LOW_FLOAT=36336,i.MEDIUM_FLOAT=36337,i.HIGH_FLOAT=36338,i.LOW_INT=36339,i.MEDIUM_INT=36340,i.HIGH_INT=36341,i.FRAMEBUFFER=36160,i.RENDERBUFFER=36161,i.RGBA4=32854,i.RGB5_A1=32855,i.RGB565=36194,i.DEPTH_COMPONENT16=33189,i.STENCIL_INDEX=6401,i.STENCIL_INDEX8=36168,i.DEPTH_STENCIL=34041,i.RENDERBUFFER_WIDTH=36162,i.RENDERBUFFER_HEIGHT=36163,i.RENDERBUFFER_INTERNAL_FORMAT=36164,i.RENDERBUFFER_RED_SIZE=36176,i.RENDERBUFFER_GREEN_SIZE=36177,i.RENDERBUFFER_BLUE_SIZE=36178,i.RENDERBUFFER_ALPHA_SIZE=36179,i.RENDERBUFFER_DEPTH_SIZE=36180,i.RENDERBUFFER_STENCIL_SIZE=36181,i.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,i.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,i.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,i.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,i.COLOR_ATTACHMENT0=36064,i.DEPTH_ATTACHMENT=36096,i.STENCIL_ATTACHMENT=36128,i.DEPTH_STENCIL_ATTACHMENT=33306,i.NONE=0,i.FRAMEBUFFER_COMPLETE=36053,i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,i.FRAMEBUFFER_UNSUPPORTED=36061,i.FRAMEBUFFER_BINDING=36006,i.RENDERBUFFER_BINDING=36007,i.MAX_RENDERBUFFER_SIZE=34024,i.INVALID_FRAMEBUFFER_OPERATION=1286,i.UNPACK_FLIP_Y_WEBGL=37440,i.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,i.CONTEXT_LOST_WEBGL=37442,i.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,i.BROWSER_DEFAULT_WEBGL=37444,i._extTextureFilterAnisotropic=null,i._compressedTextureS3tc=null,i._compressedTexturePvrtc=null,i._compressedTextureEtc1=null,i._glTextureIDs=[33984,33985,33986,33987,33988,33989,33990,33991],i._useProgram=null,i._depthTest=!0,i._depthMask=!0,i._depthFunc=513,i._blend=!1,i._sFactor=1,i._dFactor=0,i._cullFace=!1,i._frontFace=2305,i._activedTextureID=33984,n(i,["_extentionVendorPrefixes",function(){return this._extentionVendorPrefixes=["","WEBKIT_","MOZ_"]},"_activeTextures",function(){return this._activeTextures=new Array(8)}]),i}(),De=function(){function t(){this._hit=null,this._unHit=null}s(t,"laya.utils.HitArea");var i=t.prototype;return i.contains=function(i,e){return t._isHitGraphic(i,e,this.hit)?!t._isHitGraphic(i,e,this.unHit):!1},r(0,i,"hit",function(){return this._hit||(this._hit=new te),this._hit},function(t){this._hit=t}),r(0,i,"unHit",function(){return this._unHit||(this._unHit=new te),this._unHit},function(t){this._unHit=t}),t._isHitGraphic=function(i,e,n){if(!n)return!1;var s=n.cmds;if(!s&&n._one&&(s=t._cmds,s.length=1,s[0]=n._one),!s)return!1;var r=0,a=0;a=s.length;var o;for(r=0;a>r;r++)if(o=s[r]){switch(o.cmdID){case"Translate":i-=o.tx,e-=o.ty}if(t._isHitCmd(i,e,o))return!0}return!1},t._isHitCmd=function(i,e,n){if(!n)return!1;var s=!1;switch(n.cmdID){case"DrawRect":t._rect.setTo(n.x,n.y,n.width,n.height),s=t._rect.contains(i,e);break;case"DrawCircle":var r=0/0;i-=n.x,e-=n.y,r=i*i+e*e,s=r<n.radius*n.radius;break;case"DrawPoly":i-=n.x,e-=n.y,s=t._ptInPolygon(i,e,n.points)}return s},t._ptInPolygon=function(i,e,n){var s=t._ptPoint;s.setTo(i,e);var r=0,a=0/0,o=0/0,h=0/0,l=0/0,c=0;c=n.length;for(var u=0;c>u;u+=2)if(a=n[u],o=n[u+1],h=n[(u+2)%c],l=n[(u+3)%c],o!=l&&!(s.y<Math.min(o,l)||s.y>=Math.max(o,l))){var d=(s.y-o)*(h-a)/(l-o)+a;d>s.x&&r++}return r%2==1},t._cmds=[],n(t,["_rect",function(){return this._rect=new on},"_ptPoint",function(){return this._ptPoint=new Oe}]),t}(),Ae=function(){function t(){}s(t,"laya.display.cmd.RestoreCmd");var i=t.prototype;return i.recover=function(){ee.recover("RestoreCmd",this)},i.run=function(t){t.restore()},r(0,i,"cmdID",function(){return"Restore"}),t.create=function(){var i=ee.getItemByClass("RestoreCmd",t);return i},t.ID="Restore",t}(),Le=function(){function t(){this.rec=new on,this.reset()}s(t,"laya.html.dom.HTMLHitRect");var i=t.prototype;return i.reset=function(){return this.rec.reset(),this.href=null,this},i.recover=function(){ee.recover("HTMLHitRect",this.reset())},t.create=function(){return ee.getItemByClass("HTMLHitRect",t)},t}(),ke=function(){function t(){}return s(t,"Config"),t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t.webGL2D_MeshAllocMaxMem=!0,t.is2DPixelArtGame=!1,t.useWebGL2=!1,t}(),Te=function(){function t(){}s(t,"laya.display.cmd.ScaleCmd");var i=t.prototype;return i.recover=function(){ee.recover("ScaleCmd",this)},i.run=function(t,i,e){t._scale(this.scaleX,this.scaleY,this.pivotX+i,this.pivotY+e)},r(0,i,"cmdID",function(){return"Scale"}),t.create=function(i,e,n,s){var r=ee.getItemByClass("ScaleCmd",t);return r.scaleX=i,r.scaleY=e,r.pivotX=n,r.pivotY=s,r},t.ID="Scale",t}(),Re=function(){function t(){}s(t,"laya.display.cmd.AlphaCmd");var i=t.prototype;return i.recover=function(){ee.recover("AlphaCmd",this)},i.run=function(t){t.alpha(this.alpha)},r(0,i,"cmdID",function(){return"Alpha"}),t.create=function(i){var e=ee.getItemByClass("AlphaCmd",t);return e.alpha=i,e},t.ID="Alpha",t}(),we=function(){function t(){}s(t,"laya.display.cmd.ClipRectCmd");var i=t.prototype;return i.recover=function(){ee.recover("ClipRectCmd",this)},i.run=function(t,i,e){t.clipRect(this.x+i,this.y+e,this.width,this.height)},r(0,i,"cmdID",function(){return"ClipRect"}),t.create=function(i,e,n,s){var r=ee.getItemByClass("ClipRectCmd",t);return r.x=i,r.y=e,r.width=n,r.height=s,r},t.ID="ClipRect",t}(),Oe=function(){function t(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}s(t,"laya.maths.Point");var i=t.prototype;return i.setTo=function(t,i){return this.x=t,this.y=i,this},i.reset=function(){return this.x=this.y=0,this},i.recover=function(){ee.recover("Point",this.reset())},i.distance=function(t,i){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-i)*(this.y-i))},i.toString=function(){return this.x+","+this.y},i.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var i=1/t;this.x*=i,this.y*=i}},i.copy=function(t){return this.setTo(t.x,t.y)},t.create=function(){return ee.getItemByClass("Point",t)},t.TEMP=new t,t.EMPTY=new t,t}(),Me=function(){function t(){}s(t,"laya.display.cmd.FillBorderWordsCmd");var i=t.prototype;return i.recover=function(){this.words=null,ee.recover("FillBorderWordsCmd",this)},i.run=function(t,i,e){t.fillBorderWords(this.words,this.x+i,this.y+e,this.font,this.fillColor,this.borderColor,this.lineWidth)},r(0,i,"cmdID",function(){return"FillBorderWords"}),t.create=function(i,e,n,s,r,a,o){var h=ee.getItemByClass("FillBorderWordsCmd",t);return h.words=i,h.x=e,h.y=n,h.font=s,h.fillColor=r,h.borderColor=a,h.lineWidth=o,h},t.ID="FillBorderWords",t}(),Be=function(){function t(){}s(t,"laya.display.cmd.DrawPolyCmd");var i=t.prototype;return i.recover=function(){this.points=null,this.fillColor=null,this.lineColor=null,ee.recover("DrawPolyCmd",this)},i.run=function(t,i,e){t._drawPoly(this.x+i,this.y+e,this.points,this.fillColor,this.lineColor,this.lineWidth,this.isConvexPolygon,this.vid)},r(0,i,"cmdID",function(){return"DrawPoly"}),t.create=function(i,e,n,s,r,a,o,h){var l=ee.getItemByClass("DrawPolyCmd",t);return l.x=i,l.y=e,l.points=n,l.fillColor=s,l.lineColor=r,l.lineWidth=a,l.isConvexPolygon=o,l.vid=h,l},t.ID="DrawPoly",t}(),Ne=function(){function t(){this.all=new Array,this.styleSheets=vn.styleSheets}s(t,"laya.html.dom.HTMLDocument");var i=t.prototype;return i.getElementById=function(t){return this.all[t]},i.setElementById=function(t,i){this.all[t]=i},n(t,["document",function(){return this.document=new t}]),t}(),Fe=(function(){function t(){this._graphicsCmdEncoder=null}s(t,"laya.layagl.cmdNative.SaveCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("SaveCmd",this)},r(0,i,"cmdID",function(){return"Save"}),t.create=function(){var i=ee.getItemByClass("SaveCmd",t),e=i._graphicsCmdEncoder=this._commandEncoder;return e.save(),ki.syncBufferToRenderThread(e),i},t.ID="Save",t}(),function(){function t(){this.id=0/0,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null,this.width=-1,this.pageChars=[],this.startID=0,this.startIDStroke=0,this.lastGCCnt=0}s(t,"laya.utils.WordText");var i=t.prototype;return i.setText=function(t){this.changed=!0,this._text=t,this.width=-1,this.pageChars=[]},i.toString=function(){return this._text},i.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):0/0},i.charAt=function(t){return this._text?this._text.charAt(t):null},i.cleanCache=function(){this.pageChars=[],this.startID=0},r(0,i,"length",function(){return this._text?this._text.length:0}),t}()),Ve=function(){function t(){}s(t,"laya.display.cmd.FillBorderTextCmd");var i=t.prototype;return i.recover=function(){ee.recover("FillBorderTextCmd",this)},i.run=function(t,i,e){t.fillBorderText(this.text,this.x+i,this.y+e,this.font,this.fillColor,this.borderColor,this.lineWidth,this.textAlign)},r(0,i,"cmdID",function(){return"FillBorderText"}),t.create=function(i,e,n,s,r,a,o,h){var l=ee.getItemByClass("FillBorderTextCmd",t);return l.text=i,l.x=e,l.y=n,l.font=s,l.fillColor=r,l.borderColor=a,l.lineWidth=o,l.textAlign=h,l},t.ID="FillBorderText",t}(),Ue=function(){function t(){}s(t,"laya.display.cmd.FillWordsCmd");var i=t.prototype;return i.recover=function(){this.words=null,ee.recover("FillWordsCmd",this)},i.run=function(t,i,e){t.fillWords(this.words,this.x+i,this.y+e,this.font,this.color)},r(0,i,"cmdID",function(){return"FillWords"}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("FillWordsCmd",t);return a.words=i,a.x=e,a.y=n,a.font=s,a.color=r,a},t.ID="FillWords",t}(),We=function(){function t(){}return s(t,"UIConfig"),t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t.closeDialogOnSide=!0,t}(),He=function(){function t(){this.blendShader=0,this.submitType=0,this.other=0,this.clear()}s(t,"laya.webgl.submit.SubmitKey");var i=t.prototype;return i.clear=function(){this.submitType=-1,this.blendShader=this.other=0},i.copyFrom=function(t){this.other=t.other,this.blendShader=t.blendShader,this.submitType=t.submitType},i.copyFrom2=function(t,i,e){this.blendShader=t.blendShader,this.other=e,this.submitType=i},i.equal3_2=function(t,i,e){return this.submitType===i&&this.other===e&&this.blendShader===t.blendShader},i.equal4_2=function(t,i,e){return this.submitType===i&&this.other===e&&this.blendShader===t.blendShader},i.equal_3=function(t){return this.submitType===t.submitType&&this.blendShader===t.blendShader},i.equal=function(t){return this.other===t.other&&this.submitType===t.submitType&&this.blendShader===t.blendShader},t}(),Ge=function(){function t(){}s(t,"laya.display.cmd.TransformCmd");var i=t.prototype;return i.recover=function(){this.matrix=null,ee.recover("TransformCmd",this)},i.run=function(t,i,e){t._transform(this.matrix,this.pivotX+i,this.pivotY+e)},r(0,i,"cmdID",function(){return"Transform"}),t.create=function(i,e,n){var s=ee.getItemByClass("TransformCmd",t);return s.matrix=i,s.pivotX=e,s.pivotY=n,s},t.ID="Transform",t}(),ze=function(){function t(){}return s(t,"laya.layagl.ConchPropertyAdpt"),t.rewriteProperties=function(){laya.layagl.ConchPropertyAdpt.rewriteNumProperty(on.prototype,"x"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(on.prototype,"y"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(on.prototype,"width"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(on.prototype,"height"),laya.layagl.ConchPropertyAdpt.rewriteFunc(on.prototype,"recover")},t.rewriteNumProperty=function(t,i){Object.defineProperty(t,i,{get:function(){return this["_"+i]||0},set:function(t){this["_"+i]=t,this.onPropertyChanged&&this.onPropertyChanged(this)}})},t.rewriteFunc=function(t,i){t["__"+i]=t[i],t[i]=function(){t["__"+i].call(this),this.onPropertyChanged&&(this.onPropertyChanged=null)}},t}(),Ye=function(){function t(t){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=t;for(var i=0,e=0,n=0;;){if(i=t.indexOf("#begin",i),0>i)break;for(n=i+5;;){if(n=t.indexOf("#end",n),0>n)break;if("i"!==t.charAt(n+4))break;n+=5}if(0>n)throw"add include err,no #end:"+t;e=t.indexOf("\n",i);var s=se.splitToWords(t.substr(i,e-i),null);"code"==s[1]?this.codes[s[2]]=t.substr(e+1,n-e-1):"function"==s[1]&&(e=t.indexOf("function",i),e+="function".length,this.funs[s[3]]=t.substr(e+1,n-e-1),this.funnames+=s[3]+";"),i=n+1}}s(t,"laya.webgl.utils.InlcudeFile");var i=t.prototype;return i.getWith=function(t){var i=t?this.codes[t]:this.script;if(!i)throw"get with error:"+t;return i},i.getFunsScript=function(t){var i="";for(var e in this.funs)t.indexOf(e+";")>=0&&(i+=this.funs[e]);return i},t}(),Xe=function(){function t(){}return s(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,i,e){e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2]},t.lerp=function(t,i,e){return t*(1-e)+i*e},t.scaleVector3=function(t,i,e){e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i},t.lerpVector3=function(t,i,e,n){var s=t[0],r=t[1],a=t[2];n[0]=s+e*(i[0]-s),n[1]=r+e*(i[1]-r),n[2]=a+e*(i[2]-a)},t.lerpVector4=function(t,i,e,n){var s=t[0],r=t[1],a=t[2],o=t[3];n[0]=s+e*(i[0]-s),n[1]=r+e*(i[1]-r),n[2]=a+e*(i[2]-a),n[3]=o+e*(i[3]-o)},t.slerpQuaternionArray=function(t,i,e,n,s,r,a){var o,h,l,c,u,d=t[i+0],_=t[i+1],p=t[i+2],f=t[i+3],m=e[n+0],g=e[n+1],v=e[n+2],S=e[n+3];return h=d*m+_*g+p*v+f*S,0>h&&(h=-h,m=-m,g=-g,v=-v,S=-S),1-h>1e-6?(o=Math.acos(h),l=Math.sin(o),c=Math.sin((1-s)*o)/l,u=Math.sin(s*o)/l):(c=1-s,u=s),r[a+0]=c*d+u*m,r[a+1]=c*_+u*g,r[a+2]=c*p+u*v,r[a+3]=c*f+u*S,r},t.getRotation=function(t,i,e,n){return Math.atan2(n-i,e-t)/Math.PI*180},t.sortBigFirst=function(t,i){return t==i?0:i>t?1:-1},t.sortSmallFirst=function(t,i){return t==i?0:i>t?-1:1},t.sortNumBigFirst=function(t,i){return parseFloat(i)-parseFloat(t)},t.sortNumSmallFirst=function(t,i){return parseFloat(t)-parseFloat(i)},t.sortByKey=function(i,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var s;return s=e?n?t.sortNumBigFirst:t.sortBigFirst:n?t.sortNumSmallFirst:t.sortSmallFirst,function(t,e){return s(t[i],e[i])}},t}(),qe=function(){function t(){this._customCmds=null,this._targets=null,this._width=0,this._height=0,this._cmdEncoder=null}s(t,"laya.layagl.LayaGLRenderingContext");var i=t.prototype;return i.drawTexture=function(t,i,e,n,s){void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),this.drawImage(t,i,e,n,s)},i.drawImage=function(t,i,e,n,s){void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),this._customCmds.push(zi.create.call(this,t,i,e,n,s))},i.fillText=function(t,i,e,n,s,r){this._customCmds.push(Bi.create.call(this,t,i,e,n||na.defaultFontStr(),s,r))},i.save=function(){this._customCmds.push(ce.create.call(this))},i.restore=function(){this._customCmds.push(Ae.create.call(this))},i.translate=function(t,i){this._customCmds.push(Sn.create.call(this,t,i))},i.rotate=function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0),this._customCmds.push(le.create.call(this,t,i,e))},i.scale=function(t,i,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this._customCmds.push(Te.create.call(this,t,i,e,n))},i.transform=function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0),this._customCmds.push(Ge.create.call(this,t,i,e))},i.beginRT=function(){Ma.pushRT(),this._targets.start(),this.clear()},i.clear=function(){},i.endRT=function(){Ma.popRT()},i.drawCanvas=function(t,i,e){var n=t.context._targets;this._customCmds.push(Je.create.call(this,n,i,e,n.width,n.height))},i.drawTarget=function(t,i,e,n,s,r){var a=new ArrayBuffer(96),o=new Int32Array(a),h=new Float32Array(a),l=0!=s?s:i.width,c=0!=r?r:i.height,u=Ma.flipyuv,d=0;h[d++]=e,h[d++]=n,h[d++]=u[0],h[d++]=u[1],o[d++]=4294967295,o[d++]=4294967295,h[d++]=e+l,h[d++]=n,h[d++]=u[2],h[d++]=u[3],o[d++]=4294967295,o[d++]=4294967295,h[d++]=e+l,h[d++]=n+c,h[d++]=u[4],h[d++]=u[5],o[d++]=4294967295,o[d++]=4294967295,h[d++]=e,h[d++]=n+c,h[d++]=u[6],h[d++]=u[7],o[d++]=4294967295,o[d++]=4294967295,t.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t.useVDO(ei.VDO_MESHQUADTEXTURE),t.uniformEx(ei.GLOBALVALUE_VIEWS,0),t.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t.uniformTexture(0,33984,i._getSource()),t.setRectMesh(1,a),t.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15)},i.getImageData=function(t,i,e,n,s){var r=this._targets.sourceWidth,a=this._targets.sourceHeight;if(!(0>t||0>i||0>e||0>n||e>r||n>a)){this._cmdEncoder||(this._cmdEncoder=ki.instance.createCommandEncoder(128,64,!1));var o=ki.instance;this._cmdEncoder.beginEncoding(),this._cmdEncoder.clearEncoding(),Ma.pushRT(),this._targets.start(),o.readPixelsAsync(t,i,e,n,6408,5121,function(t){s(t)}),this.endRT(),this._cmdEncoder.endEncoding(),o.useCommandEncoder(this._cmdEncoder.getPtrID(),-1,0)}},i.toBase64=function(t,i,e){var n=this._targets.sourceWidth,s=this._targets.sourceHeight;this.getImageData(0,0,n,s,function(r){var a=conchToBase64(t,i,r,n,s);e(a)})},r(0,i,"asBitmap",function(){return!this._targets},function(t){if(t){if(this._targets||(this._targets=new Ma(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets=null}),t}(),Je=function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this.texture=null,this.x=0/0,this.y=0/0,this.width=0/0,this.height=0/0}s(t,"laya.display.cmd.DrawCanvasCmd");var i=t.prototype;return i.recover=function(){this._graphicsCmdEncoder=null,ee.recover("DrawCanvasCmd",this)},r(0,i,"cmdID",function(){return"DrawCanvasCmd"}),t.create=function(){return null},t.ID="DrawCanvasCmd",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),je=function(){function t(){}return s(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,n(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),Ke=function(){function t(){}s(t,"laya.display.cmd.DrawRectCmd");var i=t.prototype;return i.recover=function(){this.fillColor=null,this.lineColor=null,ee.recover("DrawRectCmd",this)},i.run=function(t,i,e){t.drawRect(this.x+i,this.y+e,this.width,this.height,this.fillColor,this.lineColor,this.lineWidth)},r(0,i,"cmdID",function(){return"DrawRect"}),t.create=function(i,e,n,s,r,a,o){var h=ee.getItemByClass("DrawRectCmd",t);return h.x=i,h.y=e,h.width=n,h.height=s,h.fillColor=r,h.lineColor=a,h.lineWidth=o,h},t.ID="DrawRect",t}(),Ze=function(){function t(t,i,e){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=i,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return s(t,"laya.webgl.shapes.EarcutNode"),t}(),$e=function(){function t(i,e,n,s,r,a,o){return this._bTransform=!1,void 0===i&&(i=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=0),null!=t._createFun?t._createFun(i,e,n,s,r,a,o):(this.a=i,this.b=e,this.c=n,this.d=s,this.tx=r,this.ty=a,this._checkTransform(),void 0)}s(t,"laya.maths.Matrix");var i=t.prototype;return i.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this},i._checkTransform=function(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},i.setTranslate=function(t,i){return this.tx=t,this.ty=i,this},i.translate=function(t,i){return this.tx+=t,this.ty+=i,this},i.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this._bTransform=!0,this},i.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*i-this.b*e,this.b=n*e+this.b*i,this.c=s*i-this.d*e,this.d=s*e+this.d*i,this.tx=r*i-this.ty*e,this.ty=r*e+this.ty*i,this._bTransform=!0,this},i.skew=function(t,i){var e=Math.tan(t),n=Math.tan(i),s=this.a,r=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=e*s,this.d+=e*r,this},i.invertTransformPoint=function(t){var i=this.a,e=this.b,n=this.c,s=this.d,r=this.tx,a=i*s-e*n,o=s/a,h=-e/a,l=-n/a,c=i/a,u=(n*this.ty-s*r)/a,d=-(i*this.ty-e*r)/a;return t.setTo(o*t.x+l*t.y+u,h*t.x+c*t.y+d)},i.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},i.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},i.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},i.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},i.invert=function(){var t=this.a,i=this.b,e=this.c,n=this.d,s=this.tx,r=t*n-i*e;return this.a=n/r,this.b=-i/r,this.c=-e/r,this.d=t/r,this.tx=(e*this.ty-n*s)/r,this.ty=-(t*this.ty-i*s)/r,this},i.setTo=function(t,i,e,n,s,r){return this.a=t,this.b=i,this.c=e,this.d=n,this.tx=s,this.ty=r,this},i.concat=function(t){var i=this.a,e=this.c,n=this.tx;return this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=e*t.a+this.d*t.c,this.d=e*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},i.scaleEx=function(t,i){var e=this.a,n=this.b,s=this.c,r=this.d;0!==n||0!==s?(this.a=t*e,this.b=t*n,this.c=i*s,this.d=i*r):(this.a=t*e,this.b=0*r,this.c=0*e,this.d=i*r),this._bTransform=!0},i.rotateEx=function(t){var i=Math.cos(t),e=Math.sin(t),n=this.a,s=this.b,r=this.c,a=this.d;0!==s||0!==r?(this.a=i*n+e*r,this.b=i*s+e*a,this.c=-e*n+i*r,this.d=-e*s+i*a):(this.a=i*n,this.b=e*a,this.c=-e*n,this.d=i*a),this._bTransform=!0},i.clone=function(){var i=t.create();return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i._bTransform=this._bTransform,i},i.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t},i.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},i.destroy=function(){this.recover()},i.recover=function(){ee.recover("Matrix",this.identity())},t.mul=function(t,i,e){var n=t.a,s=t.b,r=t.c,a=t.d,o=t.tx,h=t.ty,l=i.a,c=i.b,u=i.c,d=i.d,_=i.tx,p=i.ty;return 0!==c||0!==u?(e.a=n*l+s*u,e.b=n*c+s*d,e.c=r*l+a*u,e.d=r*c+a*d,e.tx=l*o+u*h+_,e.ty=c*o+d*h+p):(e.a=n*l,e.b=s*d,e.c=r*l,e.d=a*d,e.tx=l*o+_,e.ty=d*h+p),e},t.mul16=function(t,i,e){var n=t.a,s=t.b,r=t.c,a=t.d,o=t.tx,h=t.ty,l=i.a,c=i.b,u=i.c,d=i.d,_=i.tx,p=i.ty;return 0!==c||0!==u?(e[0]=n*l+s*u,e[1]=n*c+s*d,e[4]=r*l+a*u,e[5]=r*c+a*d,e[12]=l*o+u*h+_,e[13]=c*o+d*h+p):(e[0]=n*l,e[1]=s*d,e[4]=r*l,e[5]=a*d,e[12]=l*o+_,e[13]=d*h+p),e},t.create=function(){return ee.getItemByClass("Matrix",t)},t.EMPTY=new t,t.TEMP=new t,t._createFun=null,t}(),Qe=function(){function t(){this.fun=null,this._this=null,this.args=null,this._ref=1,this._key=new He}s(t,"laya.webgl.submit.SubmitCMD");var i=t.prototype;return e.imps(i,{"laya.webgl.submit.ISubmit":!0}),i.renderSubmit=function(){return this.fun.apply(this._this,this.args),1},i.getRenderType=function(){return 0},i.reUse=function(t,i){return this._ref++,i},i.releaseRender=function(){if(--this._ref<1){var i=t.POOL;i[i._length++]=this}},i.clone=function(){return null
},t.create=function(i,e,n){var s=t.POOL._length?t.POOL[--t.POOL._length]:new t;return s.fun=e,s.args=i,s._this=n,s._ref=1,s._key.clear(),s},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),tn=function(){function t(){}return s(t,"laya.utils.Mouse"),r(1,t,"cursor",function(){return t._style.cursor},function(i){t._style.cursor=i}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")},t.show=function(){"none"==t.cursor&&(t.cursor=t._preCursor?t._preCursor:"auto")},t._preCursor=null,n(t,["_style",function(){return this._style=Ti.document.body.style}]),t}(),en=function(){function i(){}return s(i,"laya.utils.Utils"),i.toRadian=function(t){return t*i._pi2},i.toAngle=function(t){return t*i._pi},i.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var i=t.toString(16);i.length<6;)i="0"+i;return"#"+i},i.getGID=function(){return i._gid++},i.concatArray=function(t,i){if(!i)return t;if(!t)return i;var e=0,n=i.length;for(e=0;n>e;e++)t.push(i[e]);return t},i.clearArray=function(t){return t?(t.length=0,t):t},i.copyArray=function(t,i){if(t||(t=[]),!i)return t;t.length=i.length;var e=0,n=i.length;for(e=0;n>e;e++)t[e]=i[e];return t},i.getGlobalRecByPoints=function(t,i,e,n,s){var r;r=Oe.create().setTo(i,e),r=t.localToGlobal(r);var a;a=Oe.create().setTo(n,s),a=t.localToGlobal(a);var o=on._getWrapRec([r.x,r.y,a.x,a.y]);return r.recover(),a.recover(),o},i.getGlobalPosAndScale=function(t){return i.getGlobalRecByPoints(t,0,0,1,1)},i.bind=function(t,i){var e=t;return e=t.bind(i)},i.measureText=function(t,i){return Oi.measureText(t,i)},i.updateOrder=function(t){if(!t||t.length<2)return!1;for(var i,e=1,n=0,s=t.length,r=0/0;s>e;){for(n=e,i=t[n],r=t[n]._zOrder;--n>-1&&t[n]._zOrder>r;)t[n+1]=t[n];t[n+1]=i,e++}return!0},i.transPointList=function(t,i,e){var n=0,s=t.length;for(n=0;s>n;n+=2)t[n]+=i,t[n+1]+=e},i.parseInt=function(t,i){void 0===i&&(i=0);var e=Ti.window.parseInt(t,i);return isNaN(e)?0:e},i.getFileExtension=function(t){i._extReg.lastIndex=t.lastIndexOf(".");var e=i._extReg.exec(t);return e&&e.length>1?e[1].toLowerCase():null},i.getTransformRelativeToWindow=function(t,i,n){var s=e.stage,r=laya.utils.Utils.getGlobalPosAndScale(t),a=s._canvasTransform.clone(),o=a.tx,h=a.ty;a.rotate(-Math.PI/180*e.stage.canvasDegree),a.scale(e.stage.clientScaleX,e.stage.clientScaleY);var l=e.stage.canvasDegree%180!=0,c=0/0,u=0/0;l?(c=n+r.y,u=i+r.x,c*=a.d,u*=a.a,90==e.stage.canvasDegree?(c=o-c,u+=h):(c+=o,u=h-u)):(c=i+r.x,u=n+r.y,c*=a.a,u*=a.d,c+=o,u+=h),u+=e.stage._safariOffsetY;var d=0/0,_=0/0;return l?(d=a.d*r.height,_=a.a*r.width):(d=a.a*r.width,_=a.d*r.height),{x:c,y:u,scaleX:d,scaleY:_}},i.fitDOMElementInArea=function(t,n,s,r,a,o){t._fitLayaAirInitialized||(t._fitLayaAirInitialized=!0,t.style.transformOrigin=t.style.webKittransformOrigin="left top",t.style.position="absolute");var h=i.getTransformRelativeToWindow(n,s,r);t.style.transform=t.style.webkitTransform="scale("+h.scaleX+","+h.scaleY+") rotate("+e.stage.canvasDegree+"deg)",t.style.width=a+"px",t.style.height=o+"px",t.style.left=h.x+"px",t.style.top=h.y+"px"},i.isOkTextureList=function(t){if(!t)return!1;var i,e=0,n=t.length;for(e=0;n>e;e++)if(i=t[e],!i||!i._getSource())return!1;return!0},i.isOKCmdList=function(t){if(!t)return!1;var i,e=0,n=t.length;for(e=0;n>e;e++)i=t[e];return!0},i.getQueryString=function(i){if(Ti.onMiniGame)return null;var e=new RegExp("(^|&)"+i+"=([^&]*)(&|$)"),n=t.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},i._gid=1,i._pi=180/Math.PI,i._pi2=Math.PI/180,i._extReg=/\.(\w+)\??/g,i.parseXMLFromString=function(t){var i;if(t=t.replace(/>\s+</g,"><"),i=(new DOMParser).parseFromString(t,"text/xml"),i.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(i.firstChild.firstChild.textContent);return i},i}(),nn=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._lineColor=null,this._lineWidth=0/0,this._vid=0,this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}s(t,"laya.layagl.cmdNative.DrawLinesCmdNative");var i=t.prototype;return i.recover=function(){this._points=null,this._lineColor=null,this._ibArray.length=0,this._vbArray.length=0,ee.recover("DrawLinesCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var i=o.create(this._lineColor),e=i.numColor,n=this.vbBuffer._int32Data,s=0,r=0;r<this._vertNum;r++)s++,s++,n[s++]=e;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"points",function(){return this._points},function(i){this._points=i,this._ibArray.length=0,this._vbArray.length=0,Di.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);var e=o.create(this._lineColor),n=e.numColor;this._vertNum=this._points.length;var s=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*s*4,!0)),this._vbSize=3*this._vertNum*4;for(var r=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,h=0,l=0;l<this._vertNum;l++)r[h++]=this._vbArray[2*l]+this.x,r[h++]=this._vbArray[2*l+1]+this.y,a[h++]=n;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(s-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var c=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)c[u]=this._ibArray[u];a=this._paramData._int32Data,a[t._PARAM_VB_SIZE_POS_]=this._vbSize,a[t._PARAM_IB_SIZE_POS_]=this._ibSize,ki.syncBufferToRenderThread(this.ibBuffer),ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawLines"}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._vbArray[2*n]+this._x,e++,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"vid",function(){return this._vid},function(t){this._vid=t}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._vbArray[2*n+1]+this._y,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Di.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._vbArray[2*n]+this.x,i[e++]=this._vbArray[2*n+1]+this.y,e++;ki.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(i,e,n,s,r,a){var h=ee.getItemByClass("DrawLinesCmd",t);h._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=ki.instance.createCommandEncoder(152,32,!0),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),h._paramData||(h._paramData=new ParamData(44,!0)),h._x=i,h._y=e,h._points=n,h._lineColor=s,h._lineWidth=r,h._vid=a,Di.createLine2(n,h._ibArray,r,0,h._vbArray,!1);var l=o.create(s),c=l.numColor;h._vertNum=n.length;var u=h._vertNum;(!h.vbBuffer||h.vbBuffer.getByteLength()<3*h._vertNum*4)&&(h.vbBuffer=new ParamData(3*u*4,!0)),h._vbSize=3*h._vertNum*4;for(var d=h.vbBuffer._float32Data,_=h.vbBuffer._int32Data,p=0,f=0;f<h._vertNum;f++)d[p++]=h._vbArray[2*f]+i,d[p++]=h._vbArray[2*f+1]+e,_[p++]=c;(!h.ibBuffer||h.ibBuffer.getByteLength()<3*(h._vertNum-2)*2)&&(h.ibBuffer=new ParamData(3*(u-2)*2,!0,!0)),h._ibSize=3*(h._vertNum-2)*2;for(var m=h.ibBuffer._int16Data,g=0;g<3*(h._vertNum-2);g++)m[g]=h._ibArray[g];var v=h._paramData._float32Data;return _=h._paramData._int32Data,_[0]=1,_[t._PARAM_VB_POS_]=h.vbBuffer.getPtrID(),_[t._PARAM_IB_POS_]=h.ibBuffer.getPtrID(),v[t._PARAM_LINECOLOR_POS_]=s?s:4278190335,v[t._PARAM_LINEWIDTH_POS_]=r,v[t._PARAM_VID_POS_]=a,_[t._PARAM_VB_SIZE_POS_]=h._vbSize,_[t._PARAM_IB_SIZE_POS_]=h._ibSize,_[t._PARAM_VB_OFFSET_POS_]=0,_[t._PARAM_IB_OFFSET_POS_]=0,_[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(h.vbBuffer),ki.syncBufferToRenderThread(h.ibBuffer),ki.syncBufferToRenderThread(h._paramData),h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(h._graphicsCmdEncoder),h},t.ID="DrawLines",t._DRAW_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_LINECOLOR_POS_=3,t._PARAM_LINEWIDTH_POS_=4,t._PARAM_VID_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_VB_OFFSET_POS_=8,t._PARAM_IB_OFFSET_POS_=9,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=10,t}(),function(){function t(){}return s(t,"laya.html.utils.Layout"),t.later=function(i){null==t._will&&(t._will=[],e.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var i=0;i<t._will.length;i++)laya.html.utils.Layout.layout(t._will[i]);t._will.length=0}})),t._will.push(i)},t.layout=function(i){if(!i||!i._style)return null;var e=i._style;if(0===(512&e._type))return null;i.style._type&=-513;var n=t._multiLineLayout(i);return n},t._multiLineLayout=function(i){function e(){D.y=b,b+=D.h+_,D.mWidth=k,k=0,D=new be,P.push(D),D.h=0,E=0,T=!0,A=!1}var n=new Array;i._addChildsToLayout(n);var s,r,a,o,h,l=0,c=n.length,u=i._getCSSStyle(),d=u.letterSpacing,_=u.leading,p=u.lineHeight,f=u._widthAuto()||!u.wordWrap,m=f?999999:i.width,g=(i.height,0),v=u.italic?u.fontSize/3:0,S=u.align,y=u.valign,C="top"!==y||"left"!==S||0!=p,E=0,b=0,I=0,x=0,P=new Array,D=P[0]=new be,A=!1,L=!1;D.h=0,u.italic&&(m-=u.fontSize/3);var k=0,T=!0;for(l=0;c>l;l++)if(s=n[l],null!=s)if(T=!1,s instanceof laya.html.dom.HTMLBrElement)e(),D.y=b,D.h=p;else{if(s._isChar()){if(o=s,o.isWord)A=L||"\n"===o.char,D.wordStartIndex=D.elements.length;else{if(P.length>0&&E+I>m&&D.wordStartIndex>0){var R=0;R=D.elements.length-D.wordStartIndex+1,D.elements.length=D.wordStartIndex,l-=R,e();continue}A=!1,k+=o.width}I=o.width+o.style.letterSpacing,x=o.height,L=!1,A=A||E+I>m,A&&e(),D.minTextHeight=Math.min(D.minTextHeight,s.height)}else r=s._getCSSStyle(),h=s,a=r.padding,A=L||r.getLineElement(),I=h.width+a[1]+a[3]+r.letterSpacing,x=h.height+a[0]+a[2],L=r.getLineElement(),A=A||E+I>m&&r.wordWrap,A&&e();D.elements.push(s),D.h=Math.max(D.h,x),s.x=E,s.y=b,E+=I,D.w=E-d,D.y=b,g=Math.max(E+v,g)}else T||(E+=t.DIV_ELEMENT_PADDING),D.wordStartIndex=D.elements.length;if(b=D.y+D.h,C){var w=0,O=m;for(f&&i.width>0&&(O=i.width),l=0,c=P.length;c>l;l++)P[l].updatePos(0,O,l,w,S,y,p),w+=Math.max(p,P[l].h+_);b=w}return f&&(i.width=g),b>i.height&&(i.height=b),[g,b]},t.DIV_ELEMENT_PADDING=0,t._will=null,t}()),sn=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._strokeColor=null,this._strokeWidth=0,this._textAlign=null,this._draw_texture_cmd_encoder_=ki.instance.createCommandEncoder(64,32,!0)}s(t,"laya.layagl.cmdNative.FillBorderTextCmdNative");var i=t.prototype;return i.createFillBorderText=function(i,e,n,s,r,a,h,l,c){var u=o.create(a),d=(u.numColor,{});d._curMat=new $e,d._italicDeg=0,d._drawTextureUseColor=4294967295,d.fillStyle=a,d._fillColor=4294967295,d.setFillColor=function(t){d._fillColor=t},d.getFillColor=function(){return d._fillColor},d.mixRGBandAlpha=function(t){return t},d._drawTextureM=function(t,e,n,s,r,a,o,h){i.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),i.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),i.useVDO(ei.VDO_MESHQUADTEXTURE),i.uniformEx(ei.GLOBALVALUE_VIEWS,0),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),i.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),i.uniformTexture(3,33984,t.bitmap._glTexture);var l=new Float32Array([e,n,h[0],h[1],0,0,e+s,n,h[2],h[3],0,0,e+s,n+r,h[4],h[5],0,0,e,n+r,h[6],h[7],0,0]),c=new Int32Array(l.buffer);c[4]=c[10]=c[16]=c[22]=4294967295,c[5]=c[11]=c[17]=c[23]=4294967295,i.setRectMesh(1,l,l.length),i.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),i.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(i)},t.cbook.filltext_native(d,e,null,n,s,r,a,h,l,c)},i.recover=function(){this._graphicsCmdEncoder=null,ee.recover("FillBorderTextCmd",this)},r(0,i,"text",function(){return this._text},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._text=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"cmdID",function(){return"FillBorderText"}),r(0,i,"font",function(){return this._font},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._font=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"color",function(){return this._color},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._color=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"textAlign",function(){return this._textAlign},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._textAlign=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"x",function(){return this._x},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._x=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),r(0,i,"y",function(){return this._y},function(t){var i=this._draw_texture_cmd_encoder_;i.clearEncoding(),this._y=t,this.createFillBorderText(i,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),ki.syncBufferToRenderThread(i)}),t.create=function(i,e,n,s,r,a,o,h){t.cbook||new Error("Error:charbook not create!");var l=ee.getItemByClass("FillBorderTextCmd",t),c=l._graphicsCmdEncoder=this._commandEncoder;return l._text=i,l._x=e,l._y=n,l._font=s,l._color=r,l._strokeColor=a,l._strokeWidth=o,l._textAlign=h,l._draw_texture_cmd_encoder_.clearEncoding(),l.createFillBorderText(l._draw_texture_cmd_encoder_,i,e,n,s,r,a,o,h),ki.syncBufferToRenderThread(l._draw_texture_cmd_encoder_),c.useCommandEncoder(l._draw_texture_cmd_encoder_.getPtrID(),-1,-1),ki.syncBufferToRenderThread(c),l},t.ID="FillBorderText",n(t,["cbook",function(){return this.cbook=Cn.charbookInst}]),t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}s(t,"laya.layagl.cmdNative.ScaleCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("ScaleCmd",this)},r(0,i,"cmdID",function(){return"Scale"}),r(0,i,"scaleX",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"scaleY",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotX",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"pivotY",function(){return this._paramData._float32Data[3]},function(t){this._paramData._float32Data[3]=t,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s){var r=ee.getItemByClass("ScaleCmd",t),a=r._graphicsCmdEncoder=this._commandEncoder,o=r._paramData._float32Data;o[0]=i,o[1]=e,o[2]=n,o[3]=s;var h=r._paramData.getPtrID();return ki.syncBufferToRenderThread(r._paramData),a.setGlobalValueEx(ei.GLOBALVALUE_MATRIX32,12,h,0),ki.syncBufferToRenderThread(a),r},t.ID="Scale",t}(),function(){function t(){this.reset()}s(t,"laya.display.css.CacheStyle");var i=t.prototype;return i.needBitmapCache=function(){return this.cacheForFilters||!!this.mask},i.needEnableCanvasRender=function(){return"none"!=this.userSetCache||this.cacheForFilters||!!this.mask},i.releaseContext=function(){this.canvas&&this.canvas.size&&(ee.recover("CacheCanvas",this.canvas),this.canvas.size(0,0)),this.canvas=null},i.createContext=function(){if(!this.canvas){this.canvas=ee.getItem("CacheCanvas")||new ra(!gi.isWebGL);var t=this.canvas.context;t||(t=this.canvas.getContext("2d"))}},i.releaseFilterCache=function(){var t=this.filterCache;t&&(t.destroy(),t.recycle(),this.filterCache=null)},i.recover=function(){this!==t.EMPTY&&ee.recover("SpriteCache",this.reset())},i.reset=function(){return this.releaseContext(),this.releaseFilterCache(),this.cacheAs="none",this.enableCanvasRender=!1,this.userSetCache="none",this.cacheForFilters=!1,this.staticCache=!1,this.reCache=!0,this.mask=null,this.maskParent=null,this.filterCache=null,this.filters=null,this.hasGlowFilter=!1,this.cacheRect&&this.cacheRect.recover(),this.cacheRect=null,this},i._calculateCacheRect=function(i,n,s,r){var a=!1;(gi.isWebGL||gi.isConchApp)&&(a=!0);var o=i._cacheStyle;o.cacheRect||(o.cacheRect=on.create());var h;a&&"bitmap"!==n?o.cacheRect.setTo(-i._style.pivotX,-i._style.pivotY,1,1):(h=i.getSelfBounds(),gi.isConchApp?(h.width=h.x+h.width+32,h.height=h.x+h.height+32):(h.width=h.width+32,h.height=h.height+32),h.x=h.x-i.pivotX,h.y=h.y-i.pivotY,h.x=h.x-16,h.y=h.y-16,h.x=Math.floor(h.x+s)-s,h.y=Math.floor(h.y+r)-r,h.width=Math.floor(h.width),h.height=Math.floor(h.height),o.cacheRect.copyFrom(h)),h=o.cacheRect;var l=a?1:Ti.pixelRatio*e.stage.clientScaleX,c=a?1:Ti.pixelRatio*e.stage.clientScaleY;if(!a){var u,d=1,_=1;for(u=i;u&&u!=e.stage;)d*=u.scaleX,_*=u.scaleY,u=u.parent;d>1&&(l*=d),_>1&&(c*=_)}if(i._style.scrollRect){var p=i._style.scrollRect;h.x-=p.x,h.y-=p.y}return t._scaleInfo.setTo(l,c),t._scaleInfo},t.create=function(){return ee.getItemByClass("SpriteCache",t)},t.EMPTY=new t,t.CANVAS_EXTEND_EDGE=16,n(t,["_scaleInfo",function(){return this._scaleInfo=new Oe}]),t}()),rn=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}s(t,"laya.layagl.cmdNative.DrawImageCmdNative");var i=t.prototype;return i.recover=function(){this._graphicsCmdEncoder=null,ee.recover("DrawImageCmd",this)},r(0,i,"cmdID",function(){return"DrawImage"}),r(0,i,"y",function(){return this._y},function(i){this._y=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"texture",function(){return this._texture},function(i){this._texture=i,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id;var e=this._paramData._float32Data,n=this._texture.uv;e[t._PARAM_VB_POS_+2]=n[0],e[t._PARAM_VB_POS_+3]=n[1],e[t._PARAM_VB_POS_+8]=n[2],e[t._PARAM_VB_POS_+9]=n[3],e[t._PARAM_VB_POS_+14]=n[4],e[t._PARAM_VB_POS_+15]=n[5],e[t._PARAM_VB_POS_+20]=n[6],e[t._PARAM_VB_POS_+21]=n[7],ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"width",function(){return this._width},function(i){this._width=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"x",function(){return this._x},function(i){this._x=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_]=this._x,e[t._PARAM_VB_POS_+6]=this._x+this._width,e[t._PARAM_VB_POS_+12]=this._x+this._width,e[t._PARAM_VB_POS_+18]=this._x,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"height",function(){return this._height},function(i){this._height=i;var e=this._paramData._float32Data;e[t._PARAM_VB_POS_+1]=this._y,e[t._PARAM_VB_POS_+7]=this._y,e[t._PARAM_VB_POS_+13]=this._y+this._height,e[t._PARAM_VB_POS_+19]=this._y+this._height,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawImageCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_IMAGE_CMD_ENCODER_||(t._DRAW_IMAGE_CMD_ENCODER_=ki.instance.createCommandEncoder(172,32,!0),t._DRAW_IMAGE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_IMAGE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.useVDO(ei.VDO_MESHQUADTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_IMAGE_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_IMAGE_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_IMAGE_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(116,!0)),a._texture=i,a._x=e,a._y=n,a._width=s,a._height=r;var o=a._paramData._float32Data,h=a._paramData._int32Data;h[0]=3,h[1]=33984,h[t._PARAM_TEXTURE_POS_]=i.getIsReady()?i.bitmap._glTexture.id:0,h[3]=1,h[4]=96;var l=0!=s?s:i.bitmap.width,c=0!=r?r:i.bitmap.height,u=i.uv,d=t._PARAM_VB_POS_;return o[d++]=e,o[d++]=n,o[d++]=u[0],o[d++]=u[1],h[d++]=4294967295,h[d++]=4294967295,o[d++]=e+l,o[d++]=n,o[d++]=u[2],o[d++]=u[3],h[d++]=4294967295,h[d++]=4294967295,o[d++]=e+l,o[d++]=n+c,o[d++]=u[4],o[d++]=u[5],h[d++]=4294967295,h[d++]=4294967295,o[d++]=e,o[d++]=n+c,o[d++]=u[6],o[d++]=u[7],h[d++]=4294967295,h[d++]=4294967295,ki.syncBufferToRenderThread(a._paramData),a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_IMAGE_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawImage",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),function(){function t(){}s(t,"laya.display.cmd.DrawLineCmd");var i=t.prototype;return i.recover=function(){ee.recover("DrawLineCmd",this)},i.run=function(t,i,e){t._drawLine(i,e,this.fromX,this.fromY,this.toX,this.toY,this.lineColor,this.lineWidth,this.vid)},r(0,i,"cmdID",function(){return"DrawLine"}),t.create=function(i,e,n,s,r,a,o){var h=ee.getItemByClass("DrawLineCmd",t);return h.fromX=i,h.fromY=e,h.toX=n,h.toY=s,h.lineColor=r,h.lineWidth=a,h.vid=o,h},t.ID="DrawLine",t}()),an=function(){function t(){this.reset()}s(t,"laya.html.utils.HTMLExtendStyle");var i=t.prototype;return i.reset=function(){return this.stroke=0,this.strokeColor="#000000",this.leading=0,this.lineHeight=0,this.letterSpacing=0,this.href=null,this},i.recover=function(){this!=t.EMPTY&&ee.recover("HTMLExtendStyle",this.reset())},t.create=function(){return ee.getItemByClass("HTMLExtendStyle",t)},t.EMPTY=new t,t}(),on=function(){function t(t,i,e,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=i,this.width=e,this.height=n}s(t,"laya.maths.Rectangle");var i=t.prototype;return i.setTo=function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},i.reset=function(){return this.x=this.y=this.width=this.height=0,this},i.recover=function(){ee.recover("Rectangle",this.reset())},i.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.contains=function(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&i>=this.y&&i<this.bottom?!0:!1},i.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},i.intersection=function(i,e){return this.intersects(i)?(e||(e=new t),e.x=Math.max(this.x,i.x),e.y=Math.max(this.y,i.y),e.width=Math.min(this.right,i.right)-e.x,e.height=Math.min(this.bottom,i.bottom)-e.y,e):null},i.union=function(i,e){return e||(e=new t),this.clone(e),i.width<=0||i.height<=0?e:(e.addPoint(i.x,i.y),e.addPoint(i.right,i.bottom),this)},i.clone=function(i){return i||(i=new t),i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},i.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},i.equals=function(t){return t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height?!0:!1},i.addPoint=function(t,i){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>i&&(this.height+=this.y-i,this.y=i),this.width<t-this.x&&(this.width=t-this.x),this.height<i-this.y&&(this.height=i-this.y),this},i._getBoundPoints=function(){var i=t._temB;return i.length=0,0==this.width||0==this.height?i:(i.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),i)},i.isEmpty=function(){return this.width<=0||this.height<=0?!0:!1},r(0,i,"right",function(){return this.x+this.width}),r(0,i,"bottom",function(){return this.y+this.height}),t.create=function(){return ee.getItemByClass("Rectangle",t)},t._getBoundPointS=function(i,e,n,s){var r=t._temA;return r.length=0,0==n||0==s?r:(r.push(i,e,i+n,e,i,e+s,i+n,e+s),r)},t._getWrapRec=function(i,e){if(!i||i.length<1)return e?e.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);e=e?e:laya.maths.Rectangle.create();var n,s,r,a,o,h=i.length,l=Oe.TEMP;for(s=a=99999,r=o=-s,n=0;h>n;n+=2)l.x=i[n],l.y=i[n+1],s=s<l.x?s:l.x,a=a<l.y?a:l.y,r=r>l.x?r:l.x,o=o>l.y?o:l.y;return e.setTo(s,a,r-s,o-a)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),hn=function(){function t(){}return s(t,"laya.ui.UIUtils"),t.fillArray=function(t,i,e){var n=t.concat();if(i)for(var s=i.split(","),r=0,a=Math.min(n.length,s.length);a>r;r++){var o=s[r];n[r]="true"==o?!0:"false"==o?!1:o,null!=e&&(n[r]=e(o))}return n},t.toColor=function(t){return en.toHexColor(t)},t.gray=function(i,e){void 0===e&&(e=!0),e?t.addFilter(i,t.grayFilter):t.clearFilter(i,hs)},t.addFilter=function(t,i){var e=t.filters||[];e.push(i),t.filters=e},t.clearFilter=function(t,i){var n=t.filters;if(null!=n&&n.length>0){for(var s=n.length-1;s>-1;s--){var r=n[s];e.__typeof(r,i)&&n.splice(s,1)}t.filters=n}},t._getReplaceStr=function(i){return t.escapeSequence[i]},t.adptString=function(i){return i.replace(/\\(\w)/g,t._getReplaceStr)},t.getBindFun=function(i){var n=t._funMap.get(i);if(null==n){var s='"'+i+'"';s=s.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var r="(function(data){if(data==null)return;with(data){try{\nreturn "+s+"\n}catch(e){}}})";n=e._runScript(r),t._funMap.set(i,n)}return n},n(t,["grayFilter",function(){return this.grayFilter=new hs([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"	"}},"_funMap",function(){return this._funMap=new ne}]),t}(),ln=function(){function t(){}return s(t,"laya.net.AtlasInfoManager"),t.enable=function(i,n){e.loader.load(i,c.create(null,t._onInfoLoaded,[n]),c.create(null,t._progressData),"json")},t._progressData=function(t){console.log("sss:"+t)},t._onInfoLoaded=function(i,e){var n,s,r,a=0,o=0;for(n in e)for(r=e[n],s=r[0],r=r[1],o=r.length,a=0;o>a;a++)t._fileLoadDic[s+r[a]]=n;i&&i.run()},t.getFileLoadPath=function(i){return t._fileLoadDic[i]||i},t._fileLoadDic={},t}(),cn=function(){function t(){}return s(t,"laya.webgl.resource.WebGLRTMgr"),t.getRT=function(i,e){i=0|i,e=0|e,i>=1e4&&console.error("getRT error! w too big");var n,s=1e4*e+i,r=t.dict[s];return r&&r.length>0?(n=r.pop(),n._mgrKey=s,n):(n=new Ma(i,e,1,-1),n._mgrKey=s,n)},t.releaseRT=function(i){if(!(i._mgrKey<=0)){var e=t.dict[i._mgrKey];!e&&(e=[],t.dict[i._mgrKey]=e),i._mgrKey=0,e.push(i)}},t.dict={},t}(),un=function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=0/0,this._http=null}s(t,"laya.net.TTFLoader");var i=t.prototype;return i.load=function(t){this._url=t;var i=t.split(".ttf")[0].split("/");this.fontName=i[i.length-1],gi.isConchApp?this._loadConch():Ti.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},i._loadConch=function(){this._http=new Wn,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},i._onHttpLoaded=function(t){Ti.window.conchTextCanvas.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()},i._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},i._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},i._complete=function(){e.systemTimer.clear(this,this._complete),e.systemTimer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},i._checkComplete=function(){Oi.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},i._loadWithFontFace=function(){var t=new Ti.window.FontFace(this.fontName,"url('"+this._url+"')");Ti.window.document.fonts.add(t);var i=this;t.loaded.then(function(){i._complete()}),t.load()},i._createDiv=function(){this._div=Ti.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",Ti.document.body.appendChild(this._div)},i._loadWithCSS=function(){var t=this,i=Ti.createElement("style");i.type="text/css",Ti.document.body.appendChild(i),i.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=Oi.measureText("LayaTTFFont",this._fontTxt).width;var n=this;i.onload=function(){e.systemTimer.once(1e4,n,t._complete)},e.systemTimer.loop(20,this,this._checkComplete),this._createDiv()},t._testString="LayaTTFFont",t}(),dn=function(){function t(){}return s(t,"laya.utils.Ease"),t.linearNone=function(t,i,e,n){return e*t/n+i},t.linearIn=function(t,i,e,n){return e*t/n+i},t.linearInOut=function(t,i,e,n){return e*t/n+i},t.linearOut=function(t,i,e,n){return e*t/n+i},t.bounceIn=function(i,e,n,s){return n-t.bounceOut(s-i,0,n,s)+e},t.bounceInOut=function(i,e,n,s){return.5*s>i?.5*t.bounceIn(2*i,0,n,s)+e:.5*t.bounceOut(2*i-s,0,n,s)+.5*n+e},t.bounceOut=function(t,i,e,n){return(t/=n)<1/2.75?7.5625*e*t*t+i:2/2.75>t?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},t.backIn=function(t,i,e,n,s){return void 0===s&&(s=1.70158),e*(t/=n)*t*((s+1)*t-s)+i},t.backInOut=function(t,i,e,n,s){return void 0===s&&(s=1.70158),(t/=.5*n)<1?.5*e*t*t*(((s*=1.525)+1)*t-s)+i:e/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+i},t.backOut=function(t,i,e,n,s){return void 0===s&&(s=1.70158),e*((t=t/n-1)*t*((s+1)*t+s)+1)+i},t.elasticIn=function(i,e,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==i?e:1==(i/=s)?e+n:(a||(a=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),-(r*Math.pow(2,10*(i-=1))*Math.sin((i*s-o)*t.PI2/a))+e)},t.elasticInOut=function(i,e,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==i?e:2==(i/=.5*s)?e+n:(a||(a=.3*s*1.5),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),1>i?-.5*r*Math.pow(2,10*(i-=1))*Math.sin((i*s-o)*t.PI2/a)+e:r*Math.pow(2,-10*(i-=1))*Math.sin((i*s-o)*t.PI2/a)*.5+n+e)},t.elasticOut=function(i,e,n,s,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var o;return 0==i?e:1==(i/=s)?e+n:(a||(a=.3*s),!r||n>0&&n>r||0>n&&-n>r?(r=n,o=a/4):o=a/t.PI2*Math.asin(n/r),r*Math.pow(2,-10*i)*Math.sin((i*s-o)*t.PI2/a)+n+e)
},t.strongIn=function(t,i,e,n){return e*(t/=n)*t*t*t*t+i},t.strongInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*e*t*t*t*t*t+i:.5*e*((t-=2)*t*t*t*t+2)+i},t.strongOut=function(t,i,e,n){return e*((t=t/n-1)*t*t*t*t+1)+i},t.sineInOut=function(t,i,e,n){return.5*-e*(Math.cos(Math.PI*t/n)-1)+i},t.sineIn=function(i,e,n,s){return-n*Math.cos(i/s*t.HALF_PI)+n+e},t.sineOut=function(i,e,n,s){return n*Math.sin(i/s*t.HALF_PI)+e},t.quintIn=function(t,i,e,n){return e*(t/=n)*t*t*t*t+i},t.quintInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*e*t*t*t*t*t+i:.5*e*((t-=2)*t*t*t*t+2)+i},t.quintOut=function(t,i,e,n){return e*((t=t/n-1)*t*t*t*t+1)+i},t.quartIn=function(t,i,e,n){return e*(t/=n)*t*t*t+i},t.quartInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*e*t*t*t*t+i:.5*-e*((t-=2)*t*t*t-2)+i},t.quartOut=function(t,i,e,n){return-e*((t=t/n-1)*t*t*t-1)+i},t.cubicIn=function(t,i,e,n){return e*(t/=n)*t*t+i},t.cubicInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*e*t*t*t+i:.5*e*((t-=2)*t*t+2)+i},t.cubicOut=function(t,i,e,n){return e*((t=t/n-1)*t*t+1)+i},t.quadIn=function(t,i,e,n){return e*(t/=n)*t+i},t.quadInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*e*t*t+i:.5*-e*(--t*(t-2)-1)+i},t.quadOut=function(t,i,e,n){return-e*(t/=n)*(t-2)+i},t.expoIn=function(t,i,e,n){return 0==t?i:e*Math.pow(2,10*(t/n-1))+i-.001*e},t.expoInOut=function(t,i,e,n){return 0==t?i:t==n?i+e:(t/=.5*n)<1?.5*e*Math.pow(2,10*(t-1))+i:.5*e*(-Math.pow(2,-10*--t)+2)+i},t.expoOut=function(t,i,e,n){return t==n?i+e:e*(-Math.pow(2,-10*t/n)+1)+i},t.circIn=function(t,i,e,n){return-e*(Math.sqrt(1-(t/=n)*t)-1)+i},t.circInOut=function(t,i,e,n){return(t/=.5*n)<1?.5*-e*(Math.sqrt(1-t*t)-1)+i:.5*e*(Math.sqrt(1-(t-=2)*t)+1)+i},t.circOut=function(t,i,e,n){return e*Math.sqrt(1-(t=t/n-1)*t)+i},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),_n=function(){function t(){}s(t,"laya.display.cmd.DrawCircleCmd");var i=t.prototype;return i.recover=function(){this.fillColor=null,this.lineColor=null,ee.recover("DrawCircleCmd",this)},i.run=function(t,i,e){t._drawCircle(this.x+i,this.y+e,this.radius,this.fillColor,this.lineColor,this.lineWidth,this.vid)},r(0,i,"cmdID",function(){return"DrawCircle"}),t.create=function(i,e,n,s,r,a,o){var h=ee.getItemByClass("DrawCircleCmd",t);return h.x=i,h.y=e,h.radius=n,h.fillColor=s,h.lineColor=r,h.lineWidth=a,h.vid=o,h},t.ID="DrawCircle",t}(),pn=function(){function t(){this.ib=null,this.vb=null;ge.mainContext;this.ib=Ra.create(35048),this.vb=Ta.create(8)}s(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var i=t.prototype;return i.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)},i.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),fn=function(){function t(){}return s(t,"laya.webgl.utils.RenderState2D"),t.mat2MatArray=function(i,e){var n=i,s=e;return s[0]=n.a,s[1]=n.b,s[2]=t.EMPTYMAT4_ARRAY[2],s[3]=t.EMPTYMAT4_ARRAY[3],s[4]=n.c,s[5]=n.d,s[6]=t.EMPTYMAT4_ARRAY[6],s[7]=t.EMPTYMAT4_ARRAY[7],s[8]=t.EMPTYMAT4_ARRAY[8],s[9]=t.EMPTYMAT4_ARRAY[9],s[10]=t.EMPTYMAT4_ARRAY[10],s[11]=t.EMPTYMAT4_ARRAY[11],s[12]=n.tx,s[13]=n.ty,s[14]=t.EMPTYMAT4_ARRAY[14],s[15]=t.EMPTYMAT4_ARRAY[15],e},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldAlpha=1},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.width=0,t.height=0,n(t,["worldMatrix",function(){return this.worldMatrix=new $e}]),t}(),mn=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(8,!0)}s(t,"laya.layagl.cmdNative.TranslateCmdNative");var i=t.prototype;return i.recover=function(){ee.recover("TranslateCmd",this)},r(0,i,"ty",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"Translate"}),r(0,i,"tx",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,ki.syncBufferToRenderThread(this._paramData)}),t.create=function(i,e){var n=ee.getItemByClass("TranslateCmd",t),s=n._graphicsCmdEncoder=this._commandEncoder,r=n._paramData._float32Data;r[0]=i,r[1]=e;var a=n._paramData.getPtrID();return ki.syncBufferToRenderThread(n._paramData),s.setGlobalValueEx(ei.GLOBALVALUE_MATRIX32,9,a,0),ki.syncBufferToRenderThread(s),n},t.ID="Translate",t}(),function(){function t(){}return s(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){Ti.document.addEventListener(t,function(i){laya.events.KeyBoardManager._dispatch(i,t)},!0)},t._dispatch=function(i,n){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=i,t._event.keyCode=i.keyCode||i.which||i.charCode,"keydown"===n?t._pressKeys[t._event.keyCode]=!0:"keyup"===n&&(t._pressKeys[t._event.keyCode]=null);for(var s=e.stage.focus&&null!=e.stage.focus.event&&e.stage.focus.displayedInStage?e.stage.focus:e.stage,r=s;r;)r.event(n,t._event.setTo(n,r,s)),r=r.parent}},t.hasKeyDown=function(i){return t._pressKeys[i]},t._pressKeys={},t.enabled=!0,n(t,["_event",function(){return this._event=new ue}]),t}()),gn=function(){function t(){}s(t,"laya.display.cmd.DrawPathCmd");var i=t.prototype;return i.recover=function(){this.paths=null,this.brush=null,this.pen=null,ee.recover("DrawPathCmd",this)},i.run=function(t,i,e){t._drawPath(this.x+i,this.y+e,this.paths,this.brush,this.pen)},r(0,i,"cmdID",function(){return"DrawPath"}),t.create=function(i,e,n,s,r){var a=ee.getItemByClass("DrawPathCmd",t);return a.x=i,a.y=e,a.paths=n,a.brush=s,a.pen=r,a},t.ID="DrawPath",t}(),vn=(function(){function t(){}return s(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=Ti.createElement("div"),t._logdiv.style.cssText="border:white;padding:4px;overflow-y:auto;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;",Ti.document.body.appendChild(t._logdiv),t._btn=Ti.createElement("button"),t._btn.innerText="Hide",t._btn.style.cssText="z-index:1000001;position: absolute;left:10px;top:10px;",t._btn.onclick=t.toggle,Ti.document.body.appendChild(t._btn))},t.toggle=function(){var i=t._logdiv.style;""===i.display?(t._btn.innerText="Show",i.display="none"):(t._btn.innerText="Hide",i.display="")},t.print=function(i){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=i+"\n",t.autoScrollToBottom&&t._logdiv.scrollHeight-t._logdiv.scrollTop-t._logdiv.clientHeight<50&&(t._logdiv.scrollTop=t._logdiv.scrollHeight))},t.clear=function(){t._logdiv.innerText="",t._count=0},t._logdiv=null,t._btn=null,t._count=0,t.maxCount=50,t.autoScrollToBottom=!0,t}(),function(){function t(){this.padding=t._PADDING,this.reset()}s(t,"laya.html.utils.HTMLStyle");var i=t.prototype;return i._getExtendStyle=function(){return this._extendStyle===an.EMPTY&&(this._extendStyle=an.create()),this._extendStyle},i.reset=function(){return this.ower=null,this._type=0,this.wordWrap=!0,this.fontSize=na.defaultFontSize,this.family=na.defaultFont,this.color="#000000",this.valign="top",this.padding=t._PADDING,this.bold=!1,this.italic=!1,this.align="left",this.textDecoration=null,this.bgColor=null,this.borderColor=null,this._extendStyle&&this._extendStyle.recover(),this._extendStyle=an.EMPTY,this},i.recover=function(){ee.recover("HTMLStyle",this.reset())},i.inherit=function(i){var e,n=0,s=0;e=t._inheritProps,s=e.length;var r;for(n=0;s>n;n++)r=e[n],this[r]=i[r]},i._widthAuto=function(){return 0!==(262144&this._type)},i.widthed=function(){return 0!=(8&this._type)},i._calculation=function(){return!1},i.heighted=function(){return 0!=(8192&this._type)},i.size=function(t,i){var e=this.ower,n=!1;-1!==t&&t!=e.width&&(this._type|=8,e.width=t,n=!0),-1!==i&&i!=e.height&&(this._type|=8192,e.height=i,n=!0),n&&e._layoutLater()},i.getLineElement=function(){return 0!=(65536&this._type)},i.setLineElement=function(t){t?this._type|=65536:this._type&=-65537},i._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},i.cssText=function(i){this.attrs(t.parseOneCSS(i,";"))},i.attrs=function(t){if(t)for(var i=0,e=t.length;e>i;i++){var n=t[i];this[n[0]]=n[1]}},r(0,i,"font",function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Ti.onIPhone?na.fontFamilyMap[this.family]||this.family:this.family)},function(t){for(var i=t.split(" "),e=0,n=i.length;n>e;e++){var s=i[e];switch(s){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}s.indexOf("px")>0&&(this.fontSize=parseInt(s),this.family=i[e+1],e++)}}),r(0,i,"href",function(){return this._extendStyle.href},function(t){t!==this._extendStyle.href&&(this._getExtendStyle().href=t)}),r(0,i,"lineHeight",function(){return this._extendStyle.lineHeight},function(t){this._extendStyle.lineHeight!==t&&(this._getExtendStyle().lineHeight=t)}),r(0,i,"strokeColor",function(){return this._extendStyle.strokeColor},function(t){this._extendStyle.strokeColor!==t&&(this._getExtendStyle().strokeColor=t)}),r(0,i,"stroke",function(){return this._extendStyle.stroke},function(t){this._extendStyle.stroke!==t&&(this._getExtendStyle().stroke=t)}),r(0,i,"leading",function(){return this._extendStyle.leading},function(t){this._extendStyle.leading!==t&&(this._getExtendStyle().leading=t)}),r(0,i,"align",function(){var i=48&this._type;return t.align_Value[i]},function(i){i in t.alignVDic&&(this._type&=-49,this._type|=t.alignVDic[i])}),r(0,i,"valign",function(){var i=192&this._type;return t.vAlign_Value[i]},function(i){i in t.alignVDic&&(this._type&=-193,this._type|=t.alignVDic[i])}),r(0,i,"block",function(){return 0!=(1&this._type)},function(t){t?this._type|=1:this._type&=-2}),r(0,i,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),r(0,i,"bold",function(){return 0!=(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),r(0,i,"italic",function(){return 0!=(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),r(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),r(0,i,"width",null,function(t){if(this._type|=8,"string"==typeof t){var i=t.indexOf("auto");if(i>=0&&(this._type|=262144,t=t.substr(0,i)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),r(0,i,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),r(0,i,"letterSpacing",function(){return this._extendStyle.letterSpacing},function(t){"string"==typeof t&&(t=parseInt(t+"")),t!=this._extendStyle.letterSpacing&&(this._getExtendStyle().letterSpacing=t)}),r(0,i,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"===t?this._type|=4:this._type&=-5}),r(0,i,"absolute",function(){return 0!==(4&this._type)}),r(0,i,"paddingLeft",function(){return this.padding[3]}),r(0,i,"paddingTop",function(){return this.padding[0]}),t.create=function(){return ee.getItemByClass("HTMLStyle",t)},t.parseOneCSS=function(i,e){for(var n,s=[],r=i.split(e),a=0,o=r.length;o>a;a++){var h=r[a],l=h.indexOf(":"),c=h.substr(0,l).replace(/^\s+|\s+$/g,"");if(0!==c.length){var u=h.substr(l+1).replace(/^\s+|\s+$/g,""),d=[c,u];switch(c){case"italic":case"bold":d[1]="true"==u;break;case"font-weight":"bold"==u&&(d[1]=!0,d[0]="bold");break;case"line-height":d[0]="lineHeight",d[1]=parseInt(u);break;case"font-size":d[0]="fontSize",d[1]=parseInt(u);break;case"stroke":d[0]="stroke",d[1]=parseInt(u);break;case"padding":n=u.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),d[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;default:(d[0]=t._CSSTOVALUE[c])||(d[0]=c)}s.push(d)}}return s},t.parseCSS=function(i){for(var e;null!=(e=t._parseCSSRegExp.exec(i));)t.styleSheets[e[1]]=t.parseOneCSS(e[2],";")},t._CSSTOVALUE={"letter-spacing":"letterSpacing","white-space":"whiteSpace","line-height":"lineHeight","font-family":"family","vertical-align":"valign","text-decoration":"textDecoration","background-color":"bgColor","border-color":"borderColor"},t._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),t.ALIGN_LEFT="left",t.ALIGN_CENTER="center",t.ALIGN_RIGHT="right",t.VALIGN_TOP="top",t.VALIGN_MIDDLE="middle",t.VALIGN_BOTTOM="bottom",t.styleSheets={},t.ADDLAYOUTED=512,t._PADDING=[0,0,0,0],t._HEIGHT_SET=8192,t._LINE_ELEMENT=65536,t._NOWARP=131072,t._WIDTHAUTO=262144,t._BOLD=1024,t._ITALIC=2048,t._CSS_BLOCK=1,t._DISPLAY_NONE=2,t._ABSOLUTE=4,t._WIDTH_SET=8,t._ALIGN=48,t._VALIGN=192,n(t,["_inheritProps",function(){return this._inheritProps=["italic","align","valign","leading","stroke","strokeColor","bold","fontSize","lineHeight","wordWrap","color"]},"alignVDic",function(){return this.alignVDic={left:0,center:16,right:32,top:0,middle:64,bottom:128}},"align_Value",function(){return this.align_Value={0:"left",16:"center",32:"right"}},"vAlign_Value",function(){return this.vAlign_Value={0:"top",64:"middle",128:"bottom"}}]),t}()),Sn=function(){function t(){}s(t,"laya.display.cmd.TranslateCmd");var i=t.prototype;return i.recover=function(){ee.recover("TranslateCmd",this)},i.run=function(t){t.translate(this.tx,this.ty)},r(0,i,"cmdID",function(){return"Translate"}),t.create=function(i,e){var n=ee.getItemByClass("TranslateCmd",t);return n.tx=i,n.ty=e,n},t.ID="Translate",t}(),yn=function(){function t(){}s(t,"laya.filters.GlowFilterGLRender");var i=t.prototype;return i.setShaderInfo=function(t,i,e,n){t.defines.add(n.type);var s=t;s.u_blurInfo1=n._sv_blurInfo1;var r=n._sv_blurInfo2;r[0]=i,r[1]=e,s.u_blurInfo2=r,s.u_color=n.getColor()},i.render=function(t,i,e,n,s){var r=e,a=n,o=ai.create(1,0);this.setShaderInfo(o,r,a,s);var h=ai.create(1,0),l=$e.TEMP.identity();i.drawTarget(t,0,0,r,a,l,o),i.drawTarget(t,0,0,r,a,l,h)},t}(),Cn=function(){function t(){this.fontPages=[],this.fontPagesName=[],this._curPage=null,this.tempUV=[0,0,1,0,1,1,0,1],this.fontScaleX=1,this.fontScaleY=1,this._curStrPos=0,this.tempMat=new $e;var i=!1,n=e.MiniAdpter;n&&n.systemInfo&&n.systemInfo.system&&(i="ios 10.1.1"===n.systemInfo.system.toLowerCase()),Ti.onMiniGame&&!i&&(t.isWan1Wan=!0),t.charbookInst=this,Si.charRender=gi.isConchApp?new Zn:new Jn}var i;s(t,"laya.webgl.resource.CharBook");var r=t.prototype;return r.selectFont=function(i,e){var n,s=Math.max(this.fontScaleX,this.fontScaleY),r=e*s;if(i===t._lastFont&&r===t._lastFontSz)n=t._lastCharPage;else{var a=Si.getBmpSize(e)*s,o=Math.floor(a/t.gridSize),h=i+o,l=this.fontPagesName.indexOf(h);if(0>l){var c=new Si(i,a,gi.isConchApp?0:Math.ceil(e/4));this.fontPages.push(c),this.fontPagesName.push(h),n=c}else n=this.fontPages[l];n.selectSize(e,a),t._lastFont=i,t._lastFontSz=r,t._lastCharPage=n}return n},r.isEmoji=function(i){return t._emojiReg.test(i)},r.getNextChar=function(t){var i=t.length,e=this._curStrPos;if(e>=i)return null;for(var n=e,s=0;i>n;n++){var r=t.charCodeAt(n);if(r>>>11==27){if(0==s)s=1;else if(1==s)break;n++}else if(65038===r||65039===r);else if(8205==r)s=2;else if(0==s)s=1;else if(1==s)break}return this._curStrPos=n,t.substring(e,n)},r.hasFreedText=function(t,i){if(t&&t.length>0)for(var e=i,n=t.length;n>e;e++){var s=t[e];if(s)for(var r=0,a=s.length;a>r;r++){var o=s[r].ri;if(o.deleted||o.tex.__destroyed)return!0}}return!1},r._fast_filltext=function(i,e,n,s,r,a,o,h,l,c,u){if(void 0===u&&(u=0),!(e&&e.length<1||n&&n.length<1)){if(t._curFont=a._font,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var d=i.getMatScaleX(),_=i.getMatScaleY();if(1e-4>d||.1>_)return;d>1&&(this.fontScaleX=d),_>1&&(this.fontScaleY=_)}a._italic&&(i._italicDeg=12),this._curPage=this.selectFont(a._family,a._size);var p=s,f=e,m=e,g=0,v=!n&&e instanceof laya.utils.WordText,S=!!n,y=t.cacheRenderInfoInWordText&&v?f.pageChars:[];switch(v?(m=f._text,g=f.width,0>g&&(g=f.width=this._curPage.getWidth(m))):g=this._curPage.getWidth(m),c){case Ui.ENUM_TEXTALIGN_CENTER:p=s-g/2;break;case Ui.ENUM_TEXTALIGN_RIGHT:p=s-g;break;default:p=s}f&&f.lastGCCnt!=this._curPage.gcCnt&&(f.lastGCCnt=this._curPage.gcCnt,this.hasFreedText(y,f.startID)&&(y=f.pageChars=[]));var C=v?f.startID:0,E=v?f.startIDStroke:0;if(!y||y.length<1){var b=null;t.scaleFontWithCtx&&(Si.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(b=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0))),C=-1,E=-1;var I=0,x=0;this._curStrPos=0;var P;if(S){var D=n[this._curStrPos++];P=D.char,I=D.x,x=D.y}else P=this.getNextChar(m);for(var A=a._bold;P;){var L,k=this.isEmoji(P);if(L=this._curPage.getChar(P,l,a._size,o,h,A,!1,b),!L)break;if(L.char=P,L.isSpace);else{var T=y[L.tex.id];T||(y[L.tex.id]=T=[],(0>C||C>L.tex.id)&&(C=L.tex.id)),T.push({ri:L,isEmoji:k,x:I,y:x,w:L.bmpWidth/this.fontScaleX,h:L.bmpHeight/this.fontScaleY})}S?(D=n[this._curStrPos++],D?(P=D.char,I=D.x,x=D.y):P=null):(P=this.getNextChar(m),I+=L.width)}v&&(f.startID=C,f.startIDStroke=E)}this._drawResortedWords(i,p,y,C,r),i._italicDeg=0}},r.fillWords=function(i,e,n,s,r,a,h,l){if(e&&!(e.length<=0)){var c=o.create(a).numColor,u=h?o.create(h).numColor:0;t._curFont=r;var d=ve.Parse(r);this._fast_filltext(i,null,e,n,s,d,c,u,l,0,0)}},r.filltext=function(i,e,n,s,r,a,h,l,c,u){if(void 0===u&&(u=0),!(e.length<=0)){var d=o.create(a).numColor,_=h?o.create(h).numColor:0;t._curFont=r;var p=ve.Parse(r),f=0;switch(c){case"center":f=Ui.ENUM_TEXTALIGN_CENTER;break;case"right":f=Ui.ENUM_TEXTALIGN_RIGHT}this._fast_filltext(i,e,null,n,s,p,d,_,l,f,u)}},r.filltext_native=function(i,e,n,s,r,a,h,l,c,u,d){if(void 0===d&&(d=0),!(e&&e.length<=0)){var _=o.create(h).numColor,p=l?o.create(l).numColor:0;if(t._curFont=a,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var f=i._curMat.getScaleX(),m=i._curMat.getScaleY();if(1e-4>f||.1>m)return;this.fontScaleX=f,this.fontScaleY=m,Si.charRender.scale(this.fontScaleX,this.fontScaleY)}var g=ve.Parse(a),v=g._family,S=g._bold;g._italic&&(i._italicDeg=12),this._curPage=this.selectFont(v,g._size*this.fontScaleX);var y=s,C=e,E=e,b=0,I=!n&&E instanceof laya.utils.WordText,x=!!n,P=t.cacheRenderInfoInWordText&&I?C.pageChars:[];switch(I?(E=C.toString(),b=C.width,0>b&&(b=C.width=this._curPage.getWidth(E))):b=this._curPage.getWidth(E),u){case"center":y=s-b/2;break;case"right":y=s-b;break;default:y=s}if(P){for(var D=!1,A=0,L=P.length;L>A;A++){var k=P[A];if(k){for(var T=0,R=k.length;R>T;T++){var w=k[T];if(w.ri.tex.__destroyed){D=!0;break}}if(D)break}}D&&(P=C.pageChars=[])}if(!P||P.length<=0){var O=null;t.scaleFontWithCtx&&(Si.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(O=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0)));var M=0,B=0;this._curStrPos=0;var N;if(x){var F=n[this._curStrPos++];N=F.char,M=F.x,B=F.y}else N=this.getNextChar(E);for(S=g._bold;N;){var V,U=this.isEmoji(N);if(V=this._curPage.getChar(N,c,g._size,_,p,S,!1,O),V.isSpace);else{var W=P[V.tex.id];W||(P[V.tex.id]=W=[]),W.push({ri:V,isEmoji:U,x:M,y:B,color:h,nColor:_})}x?(F=n[this._curStrPos++],F?(N=F.char,M=F.x,B=F.y):N=null):(M+=V.width,N=this.getNextChar(E))}}var H=i._drawTextureUseColor;this._drawResortedWords_native(i,y,P,r),i._drawTextureUseColor=H,i._italicDeg=0}},r._drawResortedWords=function(t,i,e,n,s){var r=t.getFillColor();t.setFillColor(t.mixRGBandAlpha(16777215)),i-=this._curPage.margin_left,s-=this._curPage.margin_top;for(var a=n,o=e.length;o>a;a++){var h=e[a];if(h){var l=h.length;if(!(0>=l))for(var c=0;l>c;c++){var u=h[c],d=u.ri;d.isSpace||(d.touch(),t.drawTexAlign=!0,t._drawTextureM(d.tex.texture,i+u.x,s+u.y,u.w,u.h,null,1,d.uv),t.touches&&t.touches.push(d))}}}t.setFillColor(r)},r._drawResortedWords_native=function(t,i,e,n){for(var s=0,r=0,a=e.length;a>r;r++){var o=e[r];if(o)for(var h=0,l=o.length;l>h;h++){var c=o[h],u=c.ri;u.isSpace||(t._drawTextureUseColor=!1,s!=c.nColor&&(t.fillStyle=c.color,s=c.nColor),u.touch(),this._drawCharRenderInfo(t,c.ri,i+c.x,c.y+n))}}},r._drawCharRenderInfo=function(t,i,e,n){t._drawTextureM(i.tex.texture,e-this._curPage.margin_left,n-this._curPage.margin_top,i.bmpWidth,i.bmpHeight,null,1,i.uv),t.touches&&t.touches.push(i)},r.GC=function(){var t=this.fontPages.length;if(t){var i=Ri.loopCount%t;this.fontPages[i].removeLRU()}},t.textureWidth=512,t.cacheRenderInfoInWordText=!0,t.scaleFontWithCtx=!0,t.gridSize=16,t.debug=!1,t._curFont=null,t.charbookInst=null,t._fontMem=0,t._lastFont=null,t._lastFontSz=0,t._lastCharPage=null,t.isWan1Wan=!1,n(t,["_emojiReg",function(){return this._emojiReg=/(?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0]/g},"_uint32",function(){return this._uint32=new Uint32Array(1)},"trash",function(){return this.trash=new i(t.textureWidth)}]),t.__init$=function(){i=function(){function t(t){this.poolLen=0,this.cleanTm=0,this.texW=0,this.pool=new Array(10),this.texW=t}s(t,"");var i=t.prototype;return i.getAPage=function(t){if(this.poolLen>0){var i=this.pool[--this.poolLen];return i.setGridNum(t),this.poolLen>0&&this.clean(),i}return new qr(this.texW,this.texW,t)},i.discardPage=function(t){this.clean(),t&&(t.genID++,this.poolLen>=this.pool.length&&(this.pool=this.pool.concat(new Array(10))),t.reset(),this.pool[this.poolLen++]=t)},i.clean=function(){var t=e.stage.getFrameTm();if(0===this.cleanTm&&(this.cleanTm=t),t-this.cleanTm>3e4){for(var i=0;i<this.poolLen;i++){var n=this.pool[i];t-n._discardTm>2e4&&(n.destroy(),this.pool[i]=this.pool[this.poolLen-1],this.poolLen--,i--)}this.cleanTm=t}},t}()},t}(),En=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._startAngle=0/0,this._endAngle=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}s(t,"laya.layagl.cmdNative.DrawPieCmdNative");var i=t.prototype;return i._arc=function(t,i,e,n,s,r,a){void 0===r&&(r=!1),void 0===a&&(a=!0);var o=[];o.push(0),o.push(0);var h=0,l=0,c=0,u=0,d=0,_=0,p=0,f=0,m=0,g=0,v=0;if(l=s-n,r)if(Math.abs(l)>=2*Math.PI)l=2*-Math.PI;else for(;l>0;)l-=2*Math.PI;else if(Math.abs(l)>=2*Math.PI)l=2*Math.PI;else for(;0>l;)l+=2*Math.PI;g=101>e?Math.max(10,l*e/5):201>e?Math.max(10,l*e/20):Math.max(10,l*e/40),c=l/g/2,u=Math.abs(4/3*(1-Math.cos(c))/Math.sin(c)),r&&(u=-u),v=0;var S=0,y=0;for(m=0;g>=m;m++)h=n+l*(m/g),d=Math.cos(h),_=Math.sin(h),p=t+d*e,f=i+_*e,(p!=S||f!=y)&&(o.push(p),o.push(f)),S=p,y=f;return d=Math.cos(s),_=Math.sin(s),p=t+d*e,f=i+_*e,(p!=S||f!=y)&&(o.push(p),o.push(f)),o},i._setData=function(t,i,e,n,s,r){this._vertNum=n.length/2;var a=this._vertNum,h=0,l=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*l*2)&&(this.ibBuffer=new ParamData(3*l*2,!0,!0)),this._ibSize=3*l*2;for(var c=this.ibBuffer._int16Data,u=0,d=0;l>d;d++)c[u++]=h,c[u++]=d+1+h,c[u++]=d+2+h;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*a*4,!0)),this._vbSize=3*this._vertNum*4;for(var _=o.create(e),p=_.numColor,f=this.vbBuffer._float32Data,m=this.vbBuffer._int32Data,g=0,v=0;v<this._vertNum;v++)f[g++]=n[2*v]+t,f[g++]=n[2*v+1]+i,m[g++]=p;var S=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,v=0;v<n.length;v++)this._linePoints.push(n[v]);if(this._linePoints.push(n[0]),this._linePoints.push(n[1]),s){Di.createLine2(this._linePoints,this._line_ibArray,r,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,S=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(S-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var y=this.line_ibBuffer._int16Data;u=0;for(var C=0;C<3*(this._line_vertNum-2);C++)y[u++]=this._line_ibArray[C];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*S*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var E=o.create(s),b=E.numColor,I=this.line_vbBuffer._float32Data,x=this.line_vbBuffer._int32Data;for(g=0,v=0;v<this._line_vertNum;v++)I[g++]=this._line_vbArray[2*v]+this._x,I[g++]=this._line_vbArray[2*v+1]+this._y,x[g++]=b}else{this._lineWidth=1;var P="#FFFFFF";for(Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,S=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(S-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2,y=this.line_ibBuffer._int16Data,u=0,C=0;C<3*(this._line_vertNum-2);C++)y[u++]=this._line_ibArray[C];for((!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*S*4,!0)),this._line_vbSize=3*this._line_vertNum*4,E=o.create(P),b=E.numColor,I=this.line_vbBuffer._float32Data,x=this.line_vbBuffer._int32Data,g=0,v=0;v<this._line_vertNum;v++)I[g++]=this._line_vbArray[2*v]+this._x,I[g++]=this._line_vbArray[2*v+1]+this._y,x[g++]=b}},i._saveToParamData=function(){var i=(this._paramData._float32Data,this._paramData._int32Data);i[0]=1,i[1]=32,i[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),i[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),i[t._PARAM_VB_SIZE_POS_]=this._vbSize,i[t._PARAM_IB_SIZE_POS_]=this._ibSize,i[t._PARAM_VB_OFFSET_POS_]=0,i[t._PARAM_IB_OFFSET_POS_]=0,i[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this.ibBuffer),i[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),i[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),i[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,i[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,i[t._PARAM_LINE_VB_OFFSET_POS_]=0,i[t._PARAM_LINE_IB_OFFSET_POS_]=0,i[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(this.line_vbBuffer),ki.syncBufferToRenderThread(this.line_ibBuffer)},i.recover=function(){this._fillColor=null,this._lineColor=null,this._points.length=0,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,ee.recover("DrawPieCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(i){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=i,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var e=0;e<this._points.length;e++)this._linePoints.push(this._points[e]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var s=this.line_ibBuffer._int16Data,r=0,a=0;a<3*(this._line_vertNum-2);a++)s[r++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(i),l=h.numColor,c=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,d=0;for(e=0;e<this._line_vertNum;e++)c[d++]=this._line_vbArray[2*e]+this._x,c[d++]=this._line_vbArray[2*e+1]+this._y,u[d++]=l;ki.syncBufferToRenderThread(this.line_ibBuffer),ki.syncBufferToRenderThread(this.line_vbBuffer)}),r(0,i,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,t*Math.PI/180,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"cmdID",function(){return"DrawPie"}),r(0,i,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var i=o.create(this._fillColor),e=i.numColor,n=this.vbBuffer._int32Data,s=0,r=0;r<this._vertNum;r++)s++,s++,n[s++]=e;
ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._points[2*n]+this._x,e++,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;for(e=0,n=0;n<this._line_vertNum;n++)s[e++]=this._line_vbArray[2*n]+this._x,e++,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._points[2*n+1]+this._y,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;for(e=0,n=0;n<this._line_vertNum;n++)e++,s[e++]=this._line_vbArray[2*n+1]+this._y,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"radius",function(){return this._radius},function(t){this._points=this._arc(0,0,t,this._startAngle,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,this._startAngle,t*Math.PI/180),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),ki.syncBufferToRenderThread(this._paramData)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(i){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=i,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var e=0;e<this._points.length;e++)this._linePoints.push(this._points[e]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,i,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var s=this.line_ibBuffer._int16Data,r=0,a=0;a<3*(this._line_vertNum-2);a++)s[r++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(this.lineColor),l=h.numColor,c=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,d=0;for(e=0;e<this._line_vertNum;e++)c[d++]=this._line_vbArray[2*e]+this._x,c[d++]=this._line_vbArray[2*e+1]+this._y,u[d++]=l;ki.syncBufferToRenderThread(this.line_ibBuffer),ki.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(i,e,n,s,r,a,o,h){var l=ee.getItemByClass("DrawPieCmd",t);return l._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PIE_LINES_CMD_ENCODER_||(t._DRAW_PIE_LINES_CMD_ENCODER_=ki.instance.createCommandEncoder(244,32,!0),t._DRAW_PIE_LINES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PIE_LINES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_PIE_LINES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_PIE_LINES_CMD_ENCODER_)),t._DRAW_PIE_CMD_ENCODER_||(t._DRAW_PIE_CMD_ENCODER_=ki.instance.createCommandEncoder(168,32,!0),t._DRAW_PIE_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PIE_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_PIE_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_PIE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_PIE_CMD_ENCODER_)),l._paramData||(l._paramData=new ParamData(64,!0)),l._x=i,l._y=e,l._radius=n,l._startAngle=s,l._endAngle=r,l._fillColor=a,l._lineColor=o,l._lineWidth=h,l._points=l._arc(0,0,n,s,r),l._setData(i,e,a,l._points,o,h),l._saveToParamData(),ki.syncBufferToRenderThread(l._paramData),l._cmdCurrentPos=o?l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1):l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(l._graphicsCmdEncoder),l},t.ID="DrawPie",t._DRAW_PIE_CMD_ENCODER_=null,t._DRAW_PIE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_VB_OFFSET_POS_=10,t._PARAM_IB_OFFSET_POS_=11,t._PARAM_LINE_VB_OFFSET_POS_=12,t._PARAM_LINE_IB_OFFSET_POS_=13,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=14,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=15,t}(),function(){function t(){}return s(t,"laya.webgl.utils.CONST3D2D"),t.BYTES_PE=4,t.BYTES_PIDX=2,t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,t}()),bn=function(){function t(){this._controlPoints=[new Oe,new Oe,new Oe],this._calFun=this.getPoint2}s(t,"laya.maths.Bezier");var i=t.prototype;return i._switchPoint=function(t,i){var e=this._controlPoints.shift();e.setTo(t,i),this._controlPoints.push(e)},i.getPoint2=function(t,i){var e=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=Math.pow(1-t,2)*e.x+2*t*(1-t)*n.x+Math.pow(t,2)*s.x,a=Math.pow(1-t,2)*e.y+2*t*(1-t)*n.y+Math.pow(t,2)*s.y;i.push(r,a)},i.getPoint3=function(t,i){var e=this._controlPoints[0],n=this._controlPoints[1],s=this._controlPoints[2],r=this._controlPoints[3],a=Math.pow(1-t,3)*e.x+3*n.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+r.x*Math.pow(t,3),o=Math.pow(1-t,3)*e.y+3*n.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+r.y*Math.pow(t,3);i.push(a,o)},i.insertPoints=function(t,i){var e=0/0;t=t>0?t:5;var n=0/0;for(n=1/t,e=0;1>=e;e+=n)this._calFun(e,i)},i.getBezierPoints=function(t,i,e){void 0===i&&(i=5),void 0===e&&(e=2);var n=0,s=0;if(s=t.length,2*(e+1)>s)return[];var r=[];switch(e){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=e;)this._controlPoints.push(Oe.create());for(n=0;2*e>n;n+=2)this._switchPoint(t[n],t[n+1]);for(n=2*e;s>n;n+=2)this._switchPoint(t[n],t[n+1]),n/2%e==0&&this.insertPoints(i,r);return r},n(t,["I",function(){return this.I=new t}]),t}(),In=(function(){function t(){this._graphicsCmdEncoder=null,this._graphicsCmdEncoder_lines=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._isConvexPolygon=!1,this._vid=0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}s(t,"laya.layagl.cmdNative.DrawPolyCmdNative");var i=t.prototype;return i.recover=function(){this._points=null,this._fillColor=null,this._lineColor=null,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,ee.recover("DrawPolyCmd",this)},r(0,i,"lineColor",function(){return this._lineColor},function(i){if(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=i,this._lineColor&&this.line_vbBuffer){for(var e=o.create(this._lineColor),n=e.numColor,s=this.line_vbBuffer._int32Data,r=0,a=0;a<this._line_vertNum;a++)r++,r++,s[r++]=n;ki.syncBufferToRenderThread(this.line_vbBuffer)}}),r(0,i,"points",function(){return this._points},function(i){this._points=i,this._vertNum=i.length/2;var e=this._vertNum,n=xe.earcut(i,null,2);if(n.length>0){(!this.ibBuffer||this.ibBuffer.getByteLength()<2*n.length)&&(this.ibBuffer=new ParamData(2*n.length,!0,!0)),this._ibSize=2*n.length;for(var s=this.ibBuffer._int16Data,r=0,a=0;a<n.length;a++)s[r++]=n[a]}(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*e*4,!0)),this._vbSize=3*this._vertNum*4;for(var h=o.create(this._fillColor),l=h.numColor,c=this.vbBuffer._float32Data,u=this.vbBuffer._int32Data,d=0,_=0;_<this._vertNum;_++)c[d++]=this._points[2*_]+this._x,c[d++]=this._points[2*_+1]+this._y,u[d++]=l;var p=this._paramData._int32Data;if(p[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),p[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),p[t._PARAM_VB_SIZE_POS_]=this._vbSize,p[t._PARAM_IB_SIZE_POS_]=this._ibSize,ki.syncBufferToRenderThread(this.vbBuffer),ki.syncBufferToRenderThread(this.ibBuffer),ki.syncBufferToRenderThread(this._paramData),this.lineColor){var f=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,_=0;_<i.length;_++)this._linePoints.push(i[_]);this._linePoints.push(i[0]),this._linePoints.push(i[1]),Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,f=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(f-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var m=this.line_ibBuffer._int16Data;for(r=0,a=0;a<3*(this._line_vertNum-2);a++)m[r++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*f*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var g=o.create(this._lineColor),v=g.numColor,S=this.line_vbBuffer._float32Data,y=this.line_vbBuffer._int32Data;for(d=0,_=0;_<this._line_vertNum;_++)S[d++]=this._line_vbArray[2*_]+this._x,S[d++]=this._line_vbArray[2*_+1]+this._y,y[d++]=v;p=this._paramData._int32Data,p[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),p[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),p[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,p[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,ki.syncBufferToRenderThread(this.line_vbBuffer),ki.syncBufferToRenderThread(this.line_ibBuffer)}}),r(0,i,"cmdID",function(){return"DrawPoly"}),r(0,i,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var i=o.create(this._fillColor),e=i.numColor,n=this.vbBuffer._int32Data,s=0,r=0;r<this._vertNum;r++)s++,s++,n[s++]=e;ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"x",function(){return this._x},function(t){this._x=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)i[e++]=this._points[2*n]+this._x,e++,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;for(e=0,n=0;n<this._line_vertNum;n++)s[e++]=this._line_vbArray[2*n]+this._x,e++,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"isConvexPolygon",function(){return this._isConvexPolygon},function(t){this._isConvexPolygon=t}),r(0,i,"vid",function(){return this._vid},function(t){this._vid=t}),r(0,i,"y",function(){return this._y},function(t){this._y=t;for(var i=this.vbBuffer._float32Data,e=0,n=0;n<this._vertNum;n++)e++,i[e++]=this._points[2*n+1]+this._y,e++;if(this._lineColor){var s=this.line_vbBuffer._float32Data;for(e=0,n=0;n<this._line_vertNum;n++)e++,s[e++]=this._line_vbArray[2*n+1]+this._y,e++;ki.syncBufferToRenderThread(this.line_vbBuffer)}ki.syncBufferToRenderThread(this.vbBuffer)}),r(0,i,"lineWidth",function(){return this._lineWidth},function(i){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),ki.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=i,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var e=0;e<this._points.length;e++)this._linePoints.push(this._points[e]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Di.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);var n=this.line_vbBuffer._float32Data,s=0;for(e=0;e<this._line_vertNum;e++)n[s++]=this._line_vbArray[2*e]+this._x,n[s++]=this._line_vbArray[2*e+1]+this._y,s++;ki.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(i,e,n,s,r,a,h){var l=ee.getItemByClass("DrawPolyCmd",t);l._graphicsCmdEncoder=this._commandEncoder,t._DRAW_POLY_CMD_ENCODER_||(t._DRAW_POLY_CMD_ENCODER_=ki.instance.createCommandEncoder(168,32,!0),t._DRAW_POLY_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_POLY_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_POLY_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_POLY_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_POLY_CMD_ENCODER_)),t._DRAW_POLY_LINES_CMD_ENCODER_||(t._DRAW_POLY_LINES_CMD_ENCODER_=ki.instance.createCommandEncoder(244,32,!0),t._DRAW_POLY_LINES_CMD_ENCODER_.blendFuncByGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,ei.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_POLY_LINES_CMD_ENCODER_.useProgramEx(ei.PROGRAMEX_DRAWVG),t._DRAW_POLY_LINES_CMD_ENCODER_.useVDO(ei.VDO_MESHVG),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(ei.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(ei.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),ki.syncBufferToRenderThread(t._DRAW_POLY_LINES_CMD_ENCODER_)),l._paramData||(l._paramData=new ParamData(68,!0)),l._x=i,l._y=e,l._points=n,l._fillColor=s,l._lineColor=r,l._lineWidth=a,l._isConvexPolygon=h,l._vertNum=n.length/2;var c=l._vertNum,u=xe.earcut(n,null,2);if(u.length>0){(!l.ibBuffer||l.ibBuffer.getByteLength()<2*u.length)&&(l.ibBuffer=new ParamData(2*u.length,!0,!0)),l._ibSize=2*u.length;for(var d=l.ibBuffer._int16Data,_=0,p=0;p<u.length;p++)d[_++]=u[p]}var f=o.create(s),m=f.numColor;(!l.vbBuffer||l.vbBuffer.getByteLength()<3*l._vertNum*4)&&(l.vbBuffer=new ParamData(3*c*4,!0)),l._vbSize=3*l._vertNum*4;for(var g=l.vbBuffer._float32Data,v=l.vbBuffer._int32Data,S=0,y=0;y<l._vertNum;y++)g[S++]=n[2*y]+i,g[S++]=n[2*y+1]+e,v[S++]=m;for(y=0;y<n.length;y++)l._linePoints.push(n[y]);if(l._linePoints.push(n[0]),l._linePoints.push(n[1]),r){Di.createLine2(l._linePoints,l._line_ibArray,a,0,l._line_vbArray,!1),l._line_vertNum=l._linePoints.length;var C=l._line_vertNum;(!l.line_ibBuffer||l.line_ibBuffer.getByteLength()<3*(l._line_vertNum-2)*2)&&(l.line_ibBuffer=new ParamData(3*(C-2)*2,!0,!0)),l._line_ibSize=3*(l._line_vertNum-2)*2;var E=l.line_ibBuffer._int16Data;for(_=0,p=0;p<3*(l._line_vertNum-2);p++)E[_++]=l._line_ibArray[p];(!l.line_vbBuffer||l.line_vbBuffer.getByteLength()<3*l._line_vertNum*4)&&(l.line_vbBuffer=new ParamData(3*C*4,!0)),l._line_vbSize=3*l._line_vertNum*4;var b=o.create(r),I=b.numColor,x=l.line_vbBuffer._float32Data,P=l.line_vbBuffer._int32Data;for(S=0,y=0;y<l._line_vertNum;y++)x[S++]=l._line_vbArray[2*y]+i,x[S++]=l._line_vbArray[2*y+1]+e,P[S++]=I}else{l._lineWidth=1;var D="#ffffff";for(Di.createLine2(l._linePoints,l._line_ibArray,l._lineWidth,0,l._line_vbArray,!1),l._line_vertNum=l._linePoints.length,C=l._line_vertNum,(!l.line_ibBuffer||l.line_ibBuffer.getByteLength()<3*(l._line_vertNum-2)*2)&&(l.line_ibBuffer=new ParamData(3*(C-2)*2,!0,!0)),l._line_ibSize=3*(l._line_vertNum-2)*2,E=l.line_ibBuffer._int16Data,_=0,p=0;p<3*(l._line_vertNum-2);p++)E[_++]=l._line_ibArray[p];for((!l.line_vbBuffer||l.line_vbBuffer.getByteLength()<3*l._line_vertNum*4)&&(l.line_vbBuffer=new ParamData(3*C*4,!0)),l._line_vbSize=3*l._line_vertNum*4,b=o.create(D),I=b.numColor,x=l.line_vbBuffer._float32Data,P=l.line_vbBuffer._int32Data,S=0,y=0;y<l._line_vertNum;y++)x[S++]=l._line_vbArray[2*y]+i,x[S++]=l._line_vbArray[2*y+1]+e,P[S++]=I}var A=l._paramData._float32Data,L=l._paramData._int32Data;return L[0]=1,L[1]=32,null==l.ibBuffer?null:(L[t._PARAM_VB_POS_]=l.vbBuffer.getPtrID(),L[t._PARAM_IB_POS_]=l.ibBuffer.getPtrID(),L[t._PARAM_VB_SIZE_POS_]=l._vbSize,L[t._PARAM_IB_SIZE_POS_]=l._ibSize,L[t._PARAM_VB_OFFSET_POS_]=0,L[t._PARAM_IB_OFFSET_POS_]=0,L[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,A[t._PARAM_ISCONVEXT_POS_]=h,ki.syncBufferToRenderThread(l.vbBuffer),ki.syncBufferToRenderThread(l.ibBuffer),L[t._PARAM_LINE_VB_POS_]=l.line_vbBuffer.getPtrID(),L[t._PARAM_LINE_IB_POS_]=l.line_ibBuffer.getPtrID(),L[t._PARAM_LINE_VB_SIZE_POS_]=l._line_vbSize,L[t._PARAM_LINE_IB_SIZE_POS_]=l._line_ibSize,L[t._PARAM_LINE_VB_OFFSET_POS_]=0,L[t._PARAM_LINE_IB_OFFSET_POS_]=0,L[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,ki.syncBufferToRenderThread(l.line_vbBuffer),ki.syncBufferToRenderThread(l.line_ibBuffer),ki.syncBufferToRenderThread(l._paramData),l._cmdCurrentPos=r?l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1):l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1),ki.syncBufferToRenderThread(l._graphicsCmdEncoder),l)},t.ID="DrawPoly",t._DRAW_POLY_CMD_ENCODER_=null,t._DRAW_POLY_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_SIZE_POS_=5,t._PARAM_LINE_VB_POS_=6,t._PARAM_LINE_IB_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_ISCONVEXT_POS_=10,t._PARAM_VB_OFFSET_POS_=11,t._PARAM_IB_OFFSET_POS_=12,t._PARAM_LINE_VB_OFFSET_POS_=13,t._PARAM_LINE_IB_OFFSET_POS_=14,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=15,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=16,t}(),function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new ue}s(t,"laya.events.TouchManager");var i=t.prototype;return i._clearTempArrs=function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0},i.getTouchFromArr=function(t,i){var e=0,n=0;n=i.length;var s;for(e=0;n>e;e++)if(s=i[e],s.id==t)return s;return null},i.removeTouchFromArr=function(t,i){var e=0;for(e=i.length-1;e>=0;e--)i[e].id==t&&i.splice(e,1)},i.createTouchO=function(t,i){var e;return e=ee.getItem("TouchData")||{},e.id=i,e.tar=t,e},i.onMouseDown=function(i,e,n){if(void 0===n&&(n=!1),this.enable){var s,r,a;s=this.getTouchFromArr(e,this.preOvers),a=this.getEles(i,null,t._tEleArr),s?s.tar=i:(r=this.createTouchO(i,e),this.preOvers.push(r)),Ti.onMobile&&this.sendEvents(a,"mouseover");var o;o=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(e,o),s?s.tar=i:(r=this.createTouchO(i,e),o.push(r)),this.sendEvents(a,n?"mousedown":"rightmousedown"),this._clearTempArrs()}},i.sendEvents=function(t,i){var e=0,n=0;n=t.length,this._event._stoped=!1;var s;s=t[0];var r;for(e=0;n>e;e++){if(r=t[e],r.destroyed)return;if(r.event(i,this._event.setTo(i,r,s)),this._event._stoped)break}},i.getEles=function(t,i,e){for(e?e.length=0:e=[];t&&t!=i;)e.push(t),t=t.parent;return e},i.checkMouseOutAndOverOfMove=function(i,e,n){if(void 0===n&&(n=0),e!=i){var s,r,a=0,o=0;if(e.contains(i))r=this.getEles(i,e,t._tEleArr),this.sendEvents(r,"mouseover");else if(i.contains(e))r=this.getEles(e,i,t._tEleArr),this.sendEvents(r,"mouseout");else{r=t._tEleArr,r.length=0;var h;h=this.getEles(e,null,t._oldArr);var l;l=this.getEles(i,null,t._newArr),o=h.length;var c=0;for(a=0;o>a;a++){if(s=h[a],c=l.indexOf(s),c>=0){l.splice(c,l.length-c);break}r.push(s)}r.length>0&&this.sendEvents(r,"mouseout"),l.length>0&&this.sendEvents(l,"mouseover")}}},i.onMouseMove=function(i,e){if(this.enable){var n;n=this.getTouchFromArr(e,this.preOvers);var s;n?(this.checkMouseOutAndOverOfMove(i,n.tar),n.tar=i,s=this.getEles(i,null,t._tEleArr)):(s=this.getEles(i,null,t._tEleArr),this.sendEvents(s,"mouseover"),this.preOvers.push(this.createTouchO(i,e))),this.sendEvents(s,"mousemove"),this._clearTempArrs()}},i.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(e.stage),t._tEleArr)},i.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout")},i.onMouseUp=function(i,e,n){if(void 0===n&&(n=!1),this.enable){var s,r,a,o,h,l=0,c=0,u=Ti.onMobile;r=this.getEles(i,null,t._tEleArr),this.sendEvents(r,n?"mouseup":"rightmouseup");var d;if(d=n?this.preDowns:this.preRightDowns,s=this.getTouchFromArr(e,d)){var _=!1,p=Ti.now();if(_=p-this._lastClickTime<300,this._lastClickTime=p,i==s.tar)h=r;else for(a=this.getEles(s.tar,null,t._oldArr),h=t._newArr,h.length=0,c=a.length,l=0;c>l;l++)o=a[l],r.indexOf(o)>=0&&h.push(o);h.length>0&&this.sendEvents(h,n?"click":"rightclick"),n&&_&&this.sendEvents(h,"doubleclick"),this.removeTouchFromArr(e,d),s.tar=null,ee.recover("TouchData",s)}else;s=this.getTouchFromArr(e,this.preOvers),s&&u&&(h=this.getEles(s.tar,null,h),h&&h.length>0&&this.sendEvents(h,"mouseout"),this.removeTouchFromArr(e,this.preOvers),s.tar=null,ee.recover("TouchData",s)),this._clearTempArrs()}},t._oldArr=[],t._newArr=[],t._tEleArr=[],n(t,["I",function(){return this.I=new t}]),t}()),xn=function(){function t(){}s(t,"laya.display.css.BoundsStyle");var i=t.prototype;return i.reset=function(){return this.bounds&&this.bounds.recover(),this.userBounds&&this.userBounds.recover(),this.bounds=null,this.userBounds=null,this.temBM=null,this},i.recover=function(){ee.recover("BoundsStyle",this.reset())},t.create=function(){return ee.getItemByClass("BoundsStyle",t)},t}(),Pn=function(t){function i(){this._bits=0,this._parent=null,this.name="",this.destroyed=!1,this._conchData=null,this._components=null,this._scene=null,i.__super.call(this),this._children=i.ARRAY_EMPTY,this.createGLBuffer()}s(i,"laya.display.Node",t);var n=i.prototype;return n.createGLBuffer=function(){},n._setBit=function(t,i){if(16===t){var e=this._getBit(t);e!=i&&this._updateDisplayedInstage()}i?this._bits|=t:this._bits&=~t},n._getBit=function(t){return 0!=(this._bits&t)},n._setUpNoticeChain=function(){this._getBit(16)&&this._setBitUp(16)},n._setBitUp=function(t){var i=this;for(i._setBit(t,!0),i=i._parent;i;){if(i._getBit(t))return;i._setBit(t,!0),i=i._parent}},n.on=function(t,i,e,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,i,e,n,!1)},n.once=function(t,i,e,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,i,e,n,!0)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._destroyAllComponent(),this._parent&&this._parent.removeChild(this),this._children&&(t?this.destroyChildren():this.removeChildren()),this.onDestroy(),this._children=null,this.offAll()},n.onDestroy=function(){},n.destroyChildren=function(){if(this._children)for(var t=0,i=this._children.length;i>t;t++)this._children[0].destroy(!0)},n.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),t._parent===this){var e=this.getChildIndex(t);e!==this._children.length-1&&(this._children.splice(e,1),this._children.push(t),this._childChanged())}else t._parent&&t._parent.removeChild(t),this._children===i.ARRAY_EMPTY&&(this._children=[]),this._children.push(t),t._setParent(this),this._childChanged();return t},n.addChildren=function(){for(var t=arguments,i=0,e=t.length;e>i;)this.addChild(t[i++])},n.addChildAt=function(t,e){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),e>=0&&e<=this._children.length){if(t._parent===this){var n=this.getChildIndex(t);this._children.splice(n,1),this._children.splice(e,0,t),this._childChanged()}else t._parent&&t._parent.removeChild(t),this._children===i.ARRAY_EMPTY&&(this._children=[]),this._children.splice(e,0,t),t._setParent(this);return t}throw new Error("appendChildAt:The index is out of bounds")},n.getChildIndex=function(t){return this._children.indexOf(t)},n.getChildByName=function(t){var i=this._children;if(i)for(var e=0,n=i.length;n>e;e++){var s=i[e];if(s.name===t)return s}return null},n.getChildAt=function(t){return this._children[t]||null},n.setChildIndex=function(t,i){var e=this._children;if(0>i||i>=e.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(0>n)throw new Error("setChildIndex:node is must child of this object.");return e.splice(n,1),e.splice(i,0,t),this._childChanged(),t},n._childChanged=function(){},n.removeChild=function(t){if(!this._children)return t;var i=this._children.indexOf(t);return this.removeChildAt(i)},n.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n.removeChildByName=function(t){var i=this.getChildByName(t);return i&&this.removeChild(i),i},n.removeChildAt=function(t){var i=this.getChildAt(t);return i&&(this._children.splice(t,1),i._setParent(null)),i},n.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),this._children&&this._children.length>0){var n=this._children;if(0===t&&e>=n.length-1){var s=n;this._children=i.ARRAY_EMPTY}else s=n.splice(t,e-t);for(var r=0,a=s.length;a>r;r++)s[r]._setParent(null)}return this},n.replaceChild=function(t,i){var e=this._children.indexOf(i);return e>-1?(this._children.splice(e,1,t),i._setParent(null),t._setParent(this),t):null},n._setParent=function(t){this._parent!==t&&(t?(this._parent=t,this._onAdded(),this.event("added"),this._getBit(16)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this._onRemoved(),this.event("removed"),this._parent._childChanged(),this._getBit(16)&&this._displayChild(this,!1),this._parent=t))},n._updateDisplayedInstage=function(){var t;t=this;for(var i=e.stage,n=!1;t;){if(t._getBit(16)){n=t._getBit(128);break}if(t===i||t._getBit(128)){n=!0;break}t=t._parent}this._setBit(128,n)},n._setDisplay=function(t){this._getBit(128)!==t&&(this._setBit(128,t),t?this.event("display"):this.event("undisplay"))},n._displayChild=function(t,i){var e=t._children;if(e)for(var n=0,s=e.length;s>n;n++){var r=e[n];r._getBit(16)&&(r._children.length>0?this._displayChild(r,i):r._setDisplay(i))}t._setDisplay(i)},n.contains=function(t){if(t===this)return!0;for(;t;){if(t._parent===this)return!0;t=t._parent}return!1},n.timerLoop=function(t,i,n,s,r,a){void 0===r&&(r=!0),void 0===a&&(a=!1);var o=this.scene?this.scene.timer:e.timer;o.loop(t,i,n,s,r,a)},n.timerOnce=function(t,i,n,s,r){void 0===r&&(r=!0);var a=this.scene?this.scene.timer:e.timer;a._create(!1,!1,t,i,n,s,r)},n.frameLoop=function(t,i,n,s,r){void 0===r&&(r=!0);var a=this.scene?this.scene.timer:e.timer;a._create(!0,!0,t,i,n,s,r)},n.frameOnce=function(t,i,n,s,r){void 0===r&&(r=!0);var a=this.scene?this.scene.timer:e.timer;a._create(!0,!1,t,i,n,s,r)},n.clearTimer=function(t,i){var n=this.scene?this.scene.timer:e.timer;n.clear(t,i)},n.callLater=function(t,i){var n=this.scene?this.scene.timer:e.timer;n.callLater(this,t,i)},n.runCallLater=function(t){var i=this.scene?this.scene.timer:e.timer;i.runCallLater(this,t)},n._onActive=function(){},n._onInActive=function(){},n._onActiveInScene=function(){},n._onInActiveInScene=function(){},n._parse=function(){},n._setBelongScene=function(t){if(!this._scene){if(this._scene=t,this._components)for(var i=0,e=this._components.length;e>i;i++)this._components[i]._setActiveInScene(!0);for(this._onActiveInScene(),i=0,e=this._children.length;e>i;i++)this._children[i]._setBelongScene(t)}},n._setUnBelongScene=function(){if(this._scene!==this){if(this._onInActiveInScene(),this._components)for(var t=0,i=this._components.length;i>t;t++)this._components[t]._setActiveInScene(!1);for(this._scene=null,t=0,i=this._children.length;i>t;t++)this._children[t]._setUnBelongScene()}},n._activeHierarchy=function(){if(this._setBit(2,!0),this._components)for(var t=0,i=this._components.length;i>t;t++)this._components[t]._setActive(!0);for(this._onActive(),t=0,i=this._children.length;i>t;t++){var e=this._children[t];!e._getBit(1)&&e._activeHierarchy()}this._getBit(4)||(this._setBit(4,!0),this.onAwake()),this.onEnable()},n.onAwake=function(){},n.onEnable=function(){},n._inActiveHierarchy=function(){if(this._onInActive(),this._components)for(var t=0,i=this._components.length;i>t;t++)this._components[t]._setActive(!1);for(this._setBit(2,!1),t=0,i=this._children.length;i>t;t++){var e=this._children[t];!e._getBit(1)&&e._inActiveHierarchy()}this.onDisable()},n.onDisable=function(){},n._onAdded=function(){var t=this._parent.scene;t&&this._setBelongScene(t),this._parent.activeInHierarchy&&this.active&&this._activeHierarchy()},n._onRemoved=function(){this._parent.activeInHierarchy&&this.active&&this._inActiveHierarchy(),this._parent.scene&&this._setUnBelongScene()},n._addComponentInstance=function(t){this._components=this._components||[],this._components.push(t),t.owner=this,t._onAdded(),this.activeInHierarchy&&t._setActive(!0),this._scene&&t._setActiveInScene(!0)},n._destroyComponent=function(t){if(this._components)for(var i=0,e=this._components.length;e>i;i++){var n=this._components[i];if(n===t){n._destroy(),this._components.splice(i,1);break}}},n._destroyAllComponent=function(){if(this._components){for(var t=0,i=this._components.length;i>t;t++){var e=this._components[t];e._destroy()}this._components.length=0}},n._cloneTo=function(t){var i=t;if(this._components)for(var e=0,n=this._components.length;n>e;e++){var s=i.addComponent(this._components[e].constructor);this._components[e]._cloneTo(s)}},n.addComponentIntance=function(t){if(t.owner)throw"Node:the component has belong to other node.";
if(t.isSingleton&&this.getComponent(t.constructor))throw"Node:the component is singleton,can't add the second one.";return this._addComponentInstance(t),t},n.addComponent=function(t){var i=ee.createByClass(t);if(i._destroyed=!1,i.isSingleton&&this.getComponent(t))throw"无法实例"+t+"组件，"+t+"组件已存在！";return this._addComponentInstance(i),i},n.getComponent=function(t){if(this._components)for(var i=0,n=this._components.length;n>i;i++){var s=this._components[i];if(e.__typeof(s,t))return s}return null},n.getComponents=function(t){var i;if(this._components)for(var n=0,s=this._components.length;s>n;n++){var r=this._components[n];e.__typeof(r,t)&&(i=i||[],i.push(r))}return i},r(0,n,"numChildren",function(){return this._children.length}),r(0,n,"parent",function(){return this._parent}),r(0,n,"activeInHierarchy",function(){return this._getBit(2)}),r(0,n,"active",function(){return!this._getBit(8)&&!this._getBit(1)},function(t){t=!!t,!this._getBit(1)!==t&&(this._setBit(1,!t),this._parent&&this._parent.activeInHierarchy&&(t?this._activeHierarchy():this._inActiveHierarchy()))}),r(0,n,"displayedInStage",function(){return this._getBit(16)?this._getBit(128):(this._setBitUp(16),this._getBit(128))}),r(0,n,"scene",function(){return this._scene}),r(0,n,"timer",function(){return this.scene?this.scene.timer:e.timer}),i.ARRAY_EMPTY=[],i}(l),Dn=function(t){function i(){i.__super.call(this)}s(i,"laya.components.Script",t);var n=i.prototype;return n._onAwake=function(){this.onAwake(),this.onStart!==laya.components.Script.prototype.onStart&&e.startTimer.callLater(this,this.onStart)},n._onEnable=function(){var t=laya.components.Script.prototype;this.onTriggerEnter!==t.onTriggerEnter&&this.owner.on("triggerenter",this,this.onTriggerEnter),this.onTriggerStay!==t.onTriggerStay&&this.owner.on("triggerstay",this,this.onTriggerStay),this.onTriggerExit!==t.onTriggerExit&&this.owner.on("triggerexit",this,this.onTriggerExit),this.onMouseDown!==t.onMouseDown&&this.owner.on("mousedown",this,this.onMouseDown),this.onMouseUp!==t.onMouseUp&&this.owner.on("mouseup",this,this.onMouseUp),this.onClick!==t.onClick&&this.owner.on("click",this,this.onClick),this.onStageMouseDown!==t.onStageMouseDown&&e.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseUp!==t.onStageMouseUp&&e.stage.on("mouseup",this,this.onStageMouseUp),this.onStageClick!==t.onStageClick&&e.stage.on("click",this,this.onStageClick),this.onStageMouseMove!==t.onStageMouseMove&&e.stage.on("mousemove",this,this.onStageMouseMove),this.onDoubleClick!==t.onDoubleClick&&this.owner.on("doubleclick",this,this.onDoubleClick),this.onRightClick!==t.onRightClick&&this.owner.on("rightclick",this,this.onRightClick),this.onMouseMove!==t.onMouseMove&&this.owner.on("mousemove",this,this.onMouseMove),this.onMouseOver!==t.onMouseOver&&this.owner.on("mouseover",this,this.onMouseOver),this.onMouseOut!==t.onMouseOut&&this.owner.on("mouseout",this,this.onMouseOut),this.onKeyDown!==t.onKeyDown&&e.stage.on("keydown",this,this.onKeyDown),this.onKeyPress!==t.onKeyPress&&e.stage.on("keypress",this,this.onKeyPress),this.onKeyUp!==t.onKeyUp&&e.stage.on("keyup",this,this.onKeyUp),this.onUpdate!==t.onUpdate&&e.updateTimer.frameLoop(1,this,this.onUpdate),this.onLateUpdate!==t.onLateUpdate&&e.lateTimer.frameLoop(1,this,this.onLateUpdate),this.onPreRender!==t.onPreRender&&e.lateTimer.frameLoop(1,this,this.onPreRender),this.onEnable()},n._onDisable=function(){this.owner.offAllCaller(this),e.stage.offAllCaller(this),e.startTimer.clearAll(this),e.updateTimer.clearAll(this),e.lateTimer.clearAll(this),this.onDisable()},n._onDestroy=function(){this.onDestroy()},n.onAwake=function(){},n.onEnable=function(){},n.onStart=function(){},n.onTriggerEnter=function(){},n.onTriggerStay=function(){},n.onTriggerExit=function(){},n.onMouseDown=function(){},n.onMouseUp=function(){},n.onClick=function(){},n.onStageMouseDown=function(){},n.onStageMouseUp=function(){},n.onStageClick=function(){},n.onStageMouseMove=function(){},n.onDoubleClick=function(){},n.onRightClick=function(){},n.onMouseMove=function(){},n.onMouseOver=function(){},n.onMouseOut=function(){},n.onKeyDown=function(){},n.onKeyPress=function(){},n.onKeyUp=function(){},n.onUpdate=function(){},n.onLateUpdate=function(){},n.onPreRender=function(){},n.onPostRender=function(){},n.onDisable=function(){},n.onDestroy=function(){},r(0,n,"isSingleton",function(){return!1}),i}(u),An=function(t){function i(t,e,n,s){this.rectangleOrCircle=0,i.__super.call(this,t,e),this.fid="-1",this.picPhysicWidth=100,this.picPhysicHeight=100,this.connectnum=0,this.iswhitebg=!1,this.relatedPicWidth=0,this.relatedRoadLength=0,this.relatedRoadNum=0,this.roadLength=0,this.roadNum=0,this.directName=n,this.rectangleOrCircle=s}return s(i,"model.dengxiangModel.DengxiangPicInfo",t),i}(p),Ln=function(t){function i(){i.__super.call(this)}var e;return s(i,"eventUtil.EventCenter",t),r(1,i,"instance",function(){return null==i._eventCenter&&(i._eventCenter=new i(new e)),i._eventCenter},laya.events.EventDispatcher._$SET_instance),i.LOGIN_SUCESS="LOGIN_SUCESS",i.SELECT_FOLDER="SELECT_FOLDER",i.UPDATE_FILE_LIST="UPDATE_FILE_LIST",i.UPLOAD_FILE_SUCESS="UPLOAD_FILE_SUCESS",i.SELECT_PIC_ORDER="SELECT_PIC_ORDER",i.UPDATE_SELECT_FOLDER="UPDATE_SELECT_FOLDER",i.SELECT_ORDER_ADDRESS="SELECT_ORDER_ADDRESS",i.SELECT_OUT_ADDRESS="SELECT_OUT_ADDRESS",i.SELECT_DELIVERY_TYPE="SELECT_DELIVERY_TYPE",i.ADD_PIC_FOR_ORDER="ADD_PIC_FOR_ORDER",i.DELETE_PIC_ORDER="DELETE_PIC_ORDER",i.SHOW_SELECT_TECH="SHOW_SELECT_TECH",i.UPDATE_ORDER_ITEM_TECH="UPDATE_ORDER_ITEM_TECH",i.ADJUST_PIC_ORDER_TECH="ADJUST_PIC_ORDER_TECH",i.UPDATE_LOADING_PROGRESS="UPDATE_LOADING_PROGRESS",i.UPDATE_MYADDRESS_LIST="UPDATE_MYADDRESS_LIST",i.CANCAEL_UPLOAD_ITEM="CANCAEL_UPLOAD_ITEM",i.RE_UPLOAD_FILE="RE_UPLOAD_FILE",i.ADD_TECH_ATTACH="ADD_TECH_ATTACH",i.BROWER_WINDOW_RESIZE="BROWER_WINDOW_RESIZE",i.BATCH_CHANGE_PRODUCT_NUM="BATCH_CHANGE_PRODUCT_NUM",i.PAUSE_SCROLL_VIEW="PAUSE_SCROLL_VIEW",i.OPEN_PANEL_VIEW="OPEN_PANEL_VIEW",i.COMMON_CLOSE_PANEL_VIEW="COMMON_CLOSE_PANEL_VIEW",i.CLOSE_PANEL_VIEW="CLOSE_PANEL_VIEW",i.SHOW_CHARGE_VIEW="SHOW_CHARGE_VIEW",i.PAY_ORDER_SUCESS="PAY_ORDER_SUCESS",i.CANCEL_PAY_ORDER="CANCEL_PAY_ORDER",i.CANCEL_CHOOSE_ATTACH="CANCEL_CHOOSE_ATTACH",i.PRODUCT_DELETE_GOODS="PRODUCT_DELETE_GOODS",i.PRODUCT_ADD_GOODS="PRODUCT_ADD_GOODS",i.DELETE_ORDER_BACK="DELETE_ORDER_BACK",i.DELETE_ORGANIZE_BACK="DELETE_ORGANIZE_BACK",i.AGREE_JOIN_REQUEST="AGREE_JOIN_REQUEST",i.REFRESH_JOIN_REQUEST="REFRESH_JOIN_REQUEST",i.MOVE_MEMBER_DEPT="MOVE_MEMBER_DEPT",i.DELETE_DEPT_MEMBER="DELETE_DEPT_MEMBER",i.SET_MEMEBER_AUTHORITY="SET_MEMEBER_AUTHORITY",i.START_SELECT_YIXING_PIC="START_SELECT_YIXING_PIC",i.STOP_SELECT_RELATE_PIC="STOP_SELECT_RELATE_PIC",i.START_SELECT_BACK_PIC="START_SELECT_BACK_PIC",i.START_SELECT_PARTWHITE_PIC="START_SELECT_PARTWHITE_PIC",i.UPDATE_PRICE_BY_DELIVERYDATE="UPDATE_PRICE_BY_DELIVERYDATE",i.CANCEL_CHARGE_RECORD="CANCEL_CHARGE_RECORD",i.BATCH_CHANGE_OCCUPY_DATE="BATCH_CHANGE_OCCUPY_DATE",i.UPDATE_SELECTED_FACTORY_PRODCATEGORY="UPDATE_SELECTED_FACTORY_PRODCATEGORY",i.HIDE_U3D_DIV="HIDE_U3D_DIV",i.SELECT_CARVING_ITEM="SELECT_CARVING_ITEM",i.INVOICE_SELECTED_CHANGE="INVOICE_SELECTED_CHANGE",i.UPDATE_INVOICE_LIST="UPDATE_INVOICE_LIST",i.SELECT_DAKOU_CELL="SELECT_DAKOU_CELL",i.BATCH_EDIT_DAKOU_CELL="BATCH_EDIT_DAKOU_CELL",i.CHANGE_ADDRESS_SELECTED_STATE="CHANGE_ADDRESS_SELECTED_STATE",i.CHANGE_ADDRESS_GROUP_SELECTED_STATE="CHANGE_ADDRESS_GROUP_SELECTED_STATE",i.UPDATE_ADDRESS_GROUP_LIST="UPDATE_ADDRESS_GROUP_LIST",i.INSERT_ADDRESS_TO_GROUP="INSERT_ADDRESS_TO_GROUP",i.DELETE_ADDRESS_FROM_GROUP="DELETE_ADDRESS_FROM_GROUP",i.UPDATE_PACKAGE_ORDER_ITEM_COUNT="UPDATE_PACKAGE_ORDER_ITEM_COUNT",i.SELECT_PACK_ADDRESS_OK="SELECT_PACK_ADDRESS_OK",i.DELETE_PACKAGE_ITEM="DELETE_PACKAGE_ITEM",i.SET_DEFAULT_PRODUCT="SET_DEFAULT_PRODUCT",i.CREATE_FOLDER_SUCESS="CREATE_FOLDER_SUCESS",i.SHOW_CONTENT_PANEL="SHOW_CONTENT_PANEL",i.FIRST_PAGE_SHRINK="FIRST_PAGE_SHRINK",i.SELECT_PROCESS="SELECT_PROCESS",i.SHOW_MATERIAL_LIST_PANEL="SHOW_MATERIAL_LIST_PANEL",i.SELECT_NEW_PROCESS="SELECT_NEW_PROCESS",i.CHOOSE_PROCESS_ITEM="CHOOSE_PROCESS_ITEM",i.UPDATE_COMPANY_INFO="UPDATE_COMPANY_INFO",i.UPDAE_USER_NAME="UPDAE_USER_NAME",i.UPDATE_RELATED_PIC="UPDATE_RELATED_PIC",i.UPDATE_CUSTOMER_LIST="UPDATE_CUSTOMER_LIST",i.SELECT_CUSTOMER="SELECT_CUSTOMER",i.EDIT_CUSTOMER_INFO="EDIT_CUSTOMER_INFO",i.UPDATE_ORDER_PRICE="UPDATE_ORDER_PRICE",i.DELETE_CUSTOMER_TRANSACTION="DELETE_CUSTOMER_TRANSACTION",i.CUSTOMER_LIST_INIT_SUCESS="CUSTOMER_LIST_INIT_SUCESS",i.CHANGE_WRITEOFF_ORDER_SELECTED="CHANGE_WRITEOFF_ORDER_SELECTED",i.UPDATE_BUSINESSMAN_LIST="UPDATE_BUSINESSMAN_LIST",i.UPDATE_CUSTOMER_BALANCE="UPDATE_CUSTOMER_BALANCE",i._eventCenter=null,i.__init$=function(){e=function(){function t(){}return s(t,""),t}()},i}(l),kn=function(t){function i(t,e,n){i.__super.call(this,t,e),this.fid="-1",this.picPhysicWidth=100,this.picPhysicHeight=100,this.connectnum=0,this.iswhitebg=!1,this.relatedPicWidth=0,this.relatedRoadLength=0,this.relatedRoadNum=0,this.roadLength=0,this.roadNum=0,this.directName=n}return s(i,"model.lailiaoModel.LailiaoPicInfo",t),i}(p),Tn=function(t){function i(t){this.selected=!1,i.__super.call(this,t),this.selected=!1}return s(i,"model.users.VipAddressVo",t),i}(f),Rn=function(t){function i(t){this.goodsNum=1,i.__super.call(this,t)}s(i,"model.productModel.ProductInShopCar",t);var e=i.prototype;return e.getOrderData=function(){var t={};return t.prod_name=this.prod_name,t.prod_code=this.prod_code,t.is_merchandise=1,t.prod_description="",t.LWH=this.mer_volume,t.weightStr=this.mer_weight,t.item_number=this.goodsNum,t.item_priceStr=(this.goodsNum*this.mer_price).toFixed(2),t.item_status="1",t.comments="",t.imagefile_path="",t.previewImage_path="",t.thumbnails_path="",t.filename="",t},i}(P),wn=function(t){function i(){i.__super.call(this),this._id=++i._uniqueIDCounter,this._destroyed=!1,this._referenceCount=0,i._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._gpuMemory=0,Ce.currentResourceManager&&Ce.currentResourceManager.addResource(this)}s(i,"laya.resource.Resource",t);var n=i.prototype;return e.imps(n,{"laya.resource.ICreateResource":!0,"laya.resource.IDestroy":!0}),n._setCPUMemory=function(t){t-this._cpuMemory;this._cpuMemory=t},n._setGPUMemory=function(t){var i=t-this._gpuMemory;this._gpuMemory=t,this.resourceManager&&this.resourceManager.addSize(i)},n._setUrl=function(t){if(this._url!==t){var e;this._url&&(e=i._urlResourcesMap[this._url],e.splice(e.indexOf(this),1),0===e.length&&delete i._urlResourcesMap[this._url]),t&&(e=i._urlResourcesMap[t],e||(i._urlResourcesMap[t]=e=[]),e.push(this)),this._url=t}},n._getGroup=function(){return this._group},n._setGroup=function(t){if(this._group!==t){var e;this._group&&(e=i._groupResourcesMap[this._group],e.splice(e.indexOf(this),1),0===e.length&&delete i._groupResourcesMap[this._group]),t&&(e=i._groupResourcesMap[t],e||(i._groupResourcesMap[t]=e=[]),e.push(this)),this._group=t}},n._addReference=function(t){void 0===t&&(t=1),this._referenceCount+=t},n._removeReference=function(t){void 0===t&&(t=1),this._referenceCount-=t},n._clearReference=function(){this._referenceCount=0},n._completeLoad=function(){this._released=!1},n._recoverResource=function(){},n._disposeResource=function(){},n._activeResource=function(){this._released=!1},n._onAsynLoaded=function(){throw new Error("Resource: must override this function!")},n.releaseResource=function(t){return void 0===t&&(t=!1),!t&&this.lock?!1:!this._released||t?(this._disposeResource(),this._released=!0,!0):!1},n.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete i._idResourcesMap[this.id];var t;if(this._url){t=i._urlResourcesMap[this._url],t&&(t.splice(t.indexOf(this),1),0===t.length&&delete i._urlResourcesMap[this.url]);var e=Fn.getRes(this._url);e==this&&delete Fn.loadedMap[this._url],Oi.cancelLoadByUrl(this._url)}this._group&&(t=i._groupResourcesMap[this._group],t.splice(t.indexOf(this),1),0===t.length&&delete i._groupResourcesMap[this.url])}},r(0,n,"id",function(){return this._id}),r(0,n,"released",function(){return this._released}),r(0,n,"url",function(){return this._url}),r(0,n,"gpuMemory",function(){return this._gpuMemory}),r(0,n,"group",function(){return this._getGroup()},function(t){this._setGroup(t)}),r(0,n,"destroyed",function(){return this._destroyed}),r(0,n,"resourceManager",function(){return this._resourceManager}),r(0,n,"cpuMemory",function(){return this._cpuMemory}),r(0,n,"referenceCount",function(){return this._referenceCount}),i.getResourceByID=function(t){return i._idResourcesMap[t]},i.getResourceByURL=function(t,e){return void 0===e&&(e=0),i._urlResourcesMap[t][e]},i.destroyUnusedResources=function(t){var e;if(t){var n=i._groupResourcesMap[t];if(n)for(var s=n.slice(),r=0,a=s.length;a>r;r++)e=s[r],e.lock||0!==e._referenceCount||e.destroy()}else for(var o in i._idResourcesMap)e=i._idResourcesMap[o],e.lock||0!==e._referenceCount||e.destroy()},i._uniqueIDCounter=0,i._idResourcesMap={},i._urlResourcesMap={},i._groupResourcesMap={},i}(l),On=(function(t){function i(){i.__super.call(this)}s(i,"laya.media.Sound",t);var e=i.prototype;return e.load=function(){},e.play=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),null},e.dispose=function(){},r(0,e,"duration",function(){return 0}),i}(l),function(t){function i(t,e,n,s){this.uvrect=[0,0,1,1],this._w=0,this._h=0,this._destroyed=!1,this._referenceCount=0,this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this.scaleRate=1,i.__super.call(this),void 0===n&&(n=0),void 0===s&&(s=0),this.setTo(t,e,n,s)}s(i,"laya.resource.Texture",t);var n=i.prototype;return n._addReference=function(){this._bitmap&&this._bitmap._addReference(),this._referenceCount++},n._removeReference=function(){this._bitmap&&this._bitmap._removeReference(),this._referenceCount--},n._getSource=function(){return this._destroyed||!this._bitmap?null:(this.recoverBitmap(),this._bitmap.destroyed?null:this.bitmap._getSource())},n._onLoaded=function(t,e){if(e)if(e==this);else if(e instanceof laya.resource.Texture){var n=e;i._create(e,0,0,n.width,n.height,0,0,n.sourceWidth,n.sourceHeight,this)}else this.bitmap=e,this.sourceWidth=this._w=e.width,this.sourceHeight=this._h=e.height;else;t&&t.run(),this.event("ready",this)},n.getIsReady=function(){return this._destroyed?!1:this._bitmap?!0:!1},n.setTo=function(t,e,n,s){if(void 0===n&&(n=0),void 0===s&&(s=0),this.bitmap=t,this.sourceWidth=n,this.sourceHeight=s,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h}this.uv=e||i.DEF_UV},n.load=function(t,i){this._destroyed||e.loader.load(t,c.create(this,this._onLoaded,[i]),null,"htmlimage",1,!1,null,!0)},n.getPixels=function(t,i,e,n){if(gi.isWebGL)return Oi.getTexturePixels(this,t,i,e,n);if(gi.isConchApp)return this._nativeObj.getImageData(t,i,e,n);var s=this.width,r=this.height;if(t+e>s&&(e-=t+e-s),i+n>r&&(n-=i+n-r),0>=e||0>=n)return null;Ti.canvas.size(e,n),Ti.canvas.clear(),Ti.context.drawImage(this.bitmap._source,t,i,e,n,0,0,e,n);var a=Ti.context.getImageData(0,0,e,n);return a.data},n.recoverBitmap=function(){this._destroyed||this._bitmap&&!this._bitmap.destroyed||!this.url||this.load(this.url)},n.disposeBitmap=function(){!this._destroyed&&this._bitmap&&this._bitmap.destroy()},n.destroy=function(){this._destroyed||(this._destroyed=!0,this.bitmap&&(this.bitmap._removeReference(this._referenceCount),this.bitmap=null),this.url&&this===e.loader.getRes(this.url)&&e.loader.clearRes(this.url))},r(0,n,"height",function(){return this._h?this._h:this.bitmap?this.uv&&this.uv!==i.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height:0},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),r(0,n,"uv",function(){return this._uv},function(t){this.uvrect[0]=Math.min(t[0],t[2],t[4],t[6]),this.uvrect[1]=Math.min(t[1],t[3],t[5],t[7]),this.uvrect[2]=Math.max(t[0],t[2],t[4],t[6])-this.uvrect[0],this.uvrect[3]=Math.max(t[1],t[3],t[5],t[7])-this.uvrect[1],this._uv=t}),r(0,n,"width",function(){return this._w?this._w:this.bitmap?this.uv&&this.uv!==i.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width:0},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),r(0,n,"bitmap",function(){return this._bitmap},function(t){this._bitmap&&this._bitmap._removeReference(this._referenceCount),this._bitmap=t,t&&t._addReference(this._referenceCount)}),r(0,n,"destroyed",function(){return this._destroyed}),i.moveUV=function(t,i,e){for(var n=0;8>n;n+=2)e[n]+=t,e[n+1]+=i;return e},i.create=function(t,e,n,s,r,a,o,h,l){return void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),i._create(t,e,n,s,r,a,o,h,l)},i._create=function(t,e,n,s,r,a,o,h,l,c){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0);var u=t instanceof laya.resource.Texture,d=u?t.uv:i.DEF_UV,_=u?t.bitmap:t;_.width&&e+s>_.width&&(s=_.width-e),_.height&&n+r>_.height&&(r=_.height-n);var p;c?(p=c,p.setTo(_,null,h||s,l||r)):p=new i(_,null,h||s,l||r),p.width=s,p.height=r,p.offsetX=a,p.offsetY=o;var f=1/_.width,m=1/_.height;e*=f,n*=m,s*=f,r*=m;var g=p.uv[0],v=p.uv[1],S=p.uv[4],y=p.uv[5],C=S-g,E=y-v,b=i.moveUV(d[0],d[1],[e,n,e+s,n,e+s,n+r,e,n+r]);p.uv=[g+b[0]*C,v+b[1]*E,S-(1-b[2])*C,v+b[3]*E,S-(1-b[4])*C,y-(1-b[5])*E,g+b[6]*C,y-(1-b[7])*E];var I=_.scaleRate;return I&&1!=I?(p.sourceWidth/=I,p.sourceHeight/=I,p.width/=I,p.height/=I,p.scaleRate=I):p.scaleRate=1,p},i.createFromTexture=function(t,e,n,s,r){var a=t.scaleRate;1!=a&&(e*=a,n*=a,s*=a,r*=a);var o=on.TEMP.setTo(e-t.offsetX,n-t.offsetY,s,r),h=o.intersection(i._rect1.setTo(0,0,t.width,t.height),i._rect2);if(!h)return null;var l=i.create(t,h.x,h.y,h.width,h.height,h.x-o.x,h.y-o.y,s,r);return l},i.DEF_UV=[0,0,1,0,1,1,0,1],i.NO_UV=[0,0,0,0,0,0,0,0],i.INV_UV=[0,1,1,1,1,0,0,0],i._rect1=new on,i._rect2=new on,i}(l)),Mn=function(t){function i(){this.totalCount=0,this._completeHandler=null,this._toLoadList=null,this._isLoading=!1,this._curUrl=null,i.__super.call(this),this._completeHandler=new c(this,this.onOneLoadComplete),this.reset()}s(i,"laya.net.SceneLoader",t);var a=i.prototype;return a.reset=function(){this._toLoadList=[],this._isLoading=!1,this.totalCount=0},a.load=function(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!0),t instanceof Array){var n=0,s=0;for(s=t.length,n=0;s>n;n++)this._addToLoadList(t[n],i)}else this._addToLoadList(t,i);e&&this._checkNext()},a._addToLoadList=function(t,i){void 0===i&&(i=!1),this._toLoadList.indexOf(t)>=0||Fn.getRes(t)||(i?this._toLoadList.push({url:t}):this._toLoadList.push(t),this.totalCount++)},a._checkNext=function(){if(!this._isLoading){if(0==this._toLoadList.length)return this.event("complete"),void 0;var t;t=this._toLoadList.pop(),"string"==typeof t?this.loadOne(t):this.loadOne(t.url,!0)}},a.loadOne=function(t,n){void 0===n&&(n=!1),this._curUrl=t;var s=en.getFileExtension(this._curUrl);n?e.loader.create(t,this._completeHandler):i.LoadableExtensions[s]?e.loader.load(t,this._completeHandler,null,i.LoadableExtensions[s]):t!=ln.getFileLoadPath(t)||i.No3dLoadTypes[s]||!Gn.createMap[s]?e.loader.load(t,this._completeHandler):e.loader.create(t,this._completeHandler)},a.onOneLoadComplete=function(){this._isLoading=!1,Fn.getRes(this._curUrl)||console.log("Fail to load:",this._curUrl);var t=en.getFileExtension(this._curUrl);if(i.LoadableExtensions[t]){var e;e=Fn.getRes(this._curUrl),e&&e instanceof laya.components.Prefab&&(e=e.json),e&&(e.loadList&&this.load(e.loadList,!1,!1),e.loadList3D&&this.load(e.loadList3D,!0,!1))}this.event("progress",this.getProgress()),this._checkNext()},a.getProgress=function(){return this.loadedCount/this.totalCount},r(0,a,"loadedCount",function(){return this.totalCount-this.leftCount}),r(0,a,"leftCount",function(){return this._isLoading?this._toLoadList.length+1:this._toLoadList.length}),n(i,["LoadableExtensions",function(){return this.LoadableExtensions={scene:"json",scene3d:"json",ani:"json",ui:"json",prefab:"prefab"}},"No3dLoadTypes",function(){return this.No3dLoadTypes={png:!0,jpg:!0,txt:!0}}]),i}(l),Bn=function(t){function i(){this.url=null,this.audio=null,this.loaded=!1,i.__super.call(this)}s(i,"laya.media.h5audio.AudioSound",t);var e=i.prototype;return e.dispose=function(){var t=i._audioCache[this.url];t&&(t.src="",delete i._audioCache[this.url])},e.load=function(t){function e(){s(),a.loaded=!0,a.event("complete")}function n(){r.load=null,s(),a.event("error")}function s(){r.removeEventListener("canplaythrough",e),r.removeEventListener("error",n)}t=Li.formatURL(t),this.url=t;var r;if(t==Pi._bgMusic?(i._initMusicAudio(),r=i._musicAudio,r.src!=t&&(i._audioCache[r.src]=null,r=null)):r=i._audioCache[t],r&&r.readyState>=2)return this.event("complete"),void 0;r||(t==Pi._bgMusic?(i._initMusicAudio(),r=i._musicAudio):r=Ti.createElement("audio"),i._audioCache[t]=r,r.src=t),r.addEventListener("canplaythrough",e),r.addEventListener("error",n);var a=this;this.audio=r,r.load?r.load():n()},e.play=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=0),!this.url)return null;var n;if(n=this.url==Pi._bgMusic?i._musicAudio:i._audioCache[this.url],!n)return null;var s;s=ee.getItem("audio:"+this.url),gi.isConchApp?s||(s=Ti.createElement("audio"),s.src=this.url):this.url==Pi._bgMusic?(i._initMusicAudio(),s=i._musicAudio,s.src=this.url):s=s?s:n.cloneNode(!0);var r=new Jr(s);return r.url=this.url,r.loops=e,r.startTime=t,r.play(),Pi.addChannel(r),r},r(0,e,"duration",function(){var t;return t=i._audioCache[this.url],t?t.duration:0}),i._initMusicAudio=function(){i._musicAudio||(i._musicAudio||(i._musicAudio=Ti.createElement("audio")),gi.isConchApp||Ti.document.addEventListener("mousedown",i._makeMusicOK))},i._makeMusicOK=function(){Ti.document.removeEventListener("mousedown",i._makeMusicOK),i._musicAudio.src?i._musicAudio.play():(i._musicAudio.src="",i._musicAudio.load())},i._audioCache={},i._musicAudio=null,i}(l),Nn=function(t){function i(){this.url=null,this.loops=0,this.startTime=0/0,this.isStopped=!1,this.completeHandler=null,i.__super.call(this)}s(i,"laya.media.SoundChannel",t);var e=i.prototype;return e.play=function(){},e.stop=function(){},e.pause=function(){},e.resume=function(){},e.__runComplete=function(t){t&&t.run()},r(0,e,"volume",function(){return 1},function(){}),r(0,e,"position",function(){return 0}),r(0,e,"duration",function(){return 0}),i}(l),Fn=function(t){function i(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._useWorkerLoader=!1,this._customParse=!1,this._constructParams=null,this._propertyParams=null,this._createCache=!1,i.__super.call(this)}s(i,"laya.net.Loader",t);var n=i.prototype;return n.load=function(t,e,n,s,r,a){if(void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===a&&(a=!1),!t)return this.onLoaded(null),void 0;if(i.setGroup(t,"666"),this._url=t,0===t.indexOf("data:image")?e="image":t=Li.formatURL(t),this._type=e||(e=i.getTypeFromUrl(t)),this._cache=n,this._useWorkerLoader=a,this._data=null,a&&Hn.enableWorkerLoader(),!r&&i.loadedMap[t])return this._data=i.loadedMap[t],this.event("progress",1),this.event("complete",this._data),void 0;if(s&&i.setGroup(t,s),null!=i.parserMap[e])return this._customParse=!0,i.parserMap[e]instanceof laya.utils.Handler?i.parserMap[e].runWith(this):i.parserMap[e].call(null,this),void 0;if("image"===e||"htmlimage"===e||"nativeimage"===e)return this._loadImage(t);if("sound"===e)return this._loadSound(t);if("ttf"===e)return this._loadTTF(t);var o;switch(e){case"atlas":case"prefab":case"plf":o="json";break;case"font":o="xml";break;default:o=e}i.preLoadedMap[t]?this.onLoaded(i.preLoadedMap[t]):(this._http||(this._http=new Wn,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(t,null,"get",o))},n._loadTTF=function(t){t=Li.formatURL(t);var i=new un;i.complete=c.create(this,this.onLoaded),i.load(t)},n._loadImage=function(t){function e(){var e=n;e&&(e.onload=null,e.onerror=null,delete i._imgCache[t])}t=Li.formatURL(t);var n,s=this,r=function(){e(),s.event("error","Load image failed")};if("nativeimage"===this._type){var a=function(){e(),s.onLoaded(n)};n=new Ti.window.Image,n.crossOrigin="",n.onload=a,n.onerror=r,n.src=t,i._imgCache[t]=n}else{var o=new Ti.window.Image;a=function(){n=ha.create(o.width,o.height),n.loadImageSource(o,!0),n._setUrl(t),e(),s.onLoaded(n)},o.crossOrigin="",o.onload=a,o.onerror=r,o.src=t,n=o,i._imgCache[t]=o}},n._loadSound=function(t){function i(){n(),r.onLoaded(s)}function e(){n(),s.dispose(),r.event("error","Load sound failed")}function n(){s.offAll()}var s=new Pi._soundClass,r=this;s.on("complete",this,i),s.on("error",this,e),s.load(t)},n.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},n.onError=function(t){this.event("error",t)},n.onLoaded=function(t){var e=this._type;if("plf"==e)this.parsePLFData(t),this.complete(t);else if("image"===e){var n=new On(t);n.url=this._url,this.complete(n)}else if("sound"===e||"htmlimage"===e||"nativeimage"===e)this.complete(t);else if("atlas"===e){if(!t.url&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var s=t.meta.image.split(","),r=this._url.indexOf("/")>=0?"/":"\\",a=this._url.lastIndexOf(r),o=a>=0?this._url.substr(0,a+1):"",h=0,l=s.length;l>h;h++)s[h]=o+s[h];else s=[this._url.replace(".json",".png")];s.reverse(),t.toLoads=s,t.pics=[]}return this.event("progress",.3+1/s.length*.6),this._loadImage(s.pop()+"?"+g.instance.version)}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,u=this._url.split("?")[0],d=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",_=this._data.pics,p=Li.formatURL(this._url),f=i.atlasMap[p]||(i.atlasMap[p]=[]);f.dir=d;var m=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){m=parseFloat(this._data.meta.scale);for(var v in c){var S=c[v],y=_[S.frame.idx?S.frame.idx:0],C=Li.formatURL(d+v);y.scaleRate=m;var E;E=On._create(y,S.frame.x,S.frame.y,S.frame.w,S.frame.h,S.spriteSourceSize.x,S.spriteSourceSize.y,S.sourceSize.w,S.sourceSize.h,laya.net.Loader.getRes(C)),i.cacheRes(C,E),E.url=C,f.push(C)}}else for(v in c)S=c[v],y=_[S.frame.idx?S.frame.idx:0],C=Li.formatURL(d+v),E=On._create(y,S.frame.x,S.frame.y,S.frame.w,S.frame.h,S.spriteSourceSize.x,S.spriteSourceSize.y,S.sourceSize.w,S.sourceSize.h,laya.net.Loader.getRes(C)),i.cacheRes(C,E),E.url=C,f.push(C);delete this._data.pics,this.complete(this._data)}else if("font"===e){if(!t._source)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var b=new ae;b.parseFont(this._data,new On(t));var I=this._url.split(".fnt")[0].split("/"),x=I[I.length-1];na.registerBitmapFont(x,b),this._data=b,this.complete(this._data)}else if("prefab"===e){var P=new mi;P.json=t,this.complete(P)}else this.complete(t)},n.parsePLFData=function(t){var e,n,s;for(e in t)switch(s=t[e],e){case"json":case"text":for(n in s)i.preLoadedMap[Li.formatURL(n)]=s[n];break;default:for(n in s)i.preLoadedMap[Li.formatURL(n)]=s[n]}},n.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(i._loaders.push(this),i._isWorking||i.checkNext())},n.endLoad=function(t){t&&(this._data=t),this._cache&&i.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},r(0,n,"url",function(){return this._url}),r(0,n,"data",function(){return this._data}),r(0,n,"cache",function(){return this._cache}),r(0,n,"type",function(){return this._type}),i.getTypeFromUrl=function(t){var e=en.getFileExtension(t);return e?i.typeMap[e]:(console.warn("Not recognize the resources suffix",t),"text")},i.checkNext=function(){i._isWorking=!0;for(var t=Ti.now(),n=t;i._startIndex<i._loaders.length;)if(n=Ti.now(),i._loaders[i._startIndex].endLoad(),i._startIndex++,Ti.now()-t>i.maxTimeOut)return console.warn("loader callback cost a long time:"+(Ti.now()-t)+" url="+i._loaders[i._startIndex-1].url),e.systemTimer.frameOnce(1,null,i.checkNext),void 0;i._loaders.length=0,i._startIndex=0,i._isWorking=!1},i.clearRes=function(t){t=Li.formatURL(t);var e=i.getAtlas(t);if(e){for(var n=0,s=e.length;s>n;n++){var r=e[n],a=i.getRes(r);delete i.loadedMap[r],a&&a.destroy()}e.length=0,delete i.atlasMap[t],delete i.loadedMap[t]}else{var o=i.loadedMap[t];o&&(delete i.loadedMap[t],o instanceof laya.resource.Texture&&o.bitmap&&o.destroy())}},i.clearTextureRes=function(t){t=Li.formatURL(t);var i=laya.net.Loader.getAtlas(t),e=i&&i.length>0?laya.net.Loader.getRes(i[0]):laya.net.Loader.getRes(t);e instanceof laya.resource.Texture&&e.disposeBitmap()},i.getRes=function(t){return i.loadedMap[Li.formatURL(t)]},i.getAtlas=function(t){return i.atlasMap[Li.formatURL(t)]},i.cacheRes=function(t,e){t=Li.formatURL(t),null!=i.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):i.loadedMap[t]=e},i.setGroup=function(t,e){i.groupMap[e]||(i.groupMap[e]=[]),i.groupMap[e].push(t)},i.clearResByGroup=function(t){if(i.groupMap[t]){var e=i.groupMap[t],n=0,s=e.length;for(n=0;s>n;n++)i.clearRes(e[n]);e.length=0}},i.TEXT="text",i.JSON="json",i.PREFAB="prefab",i.XML="xml",i.BUFFER="arraybuffer",i.IMAGE="image",i.SOUND="sound",i.ATLAS="atlas",i.FONT="font",i.TTF="ttf",i.PLF="plf",i.HIERARCHY="HIERARCHY",i.MESH="MESH",i.MATERIAL="MATERIAL",i.TEXTURE2D="TEXTURE2D",i.TEXTURECUBE="TEXTURECUBE",i.ANIMATIONCLIP="ANIMATIONCLIP",i.AVATAR="AVATAR",i.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA",i.TERRAINRES="TERRAIN",i.typeMap={ttf:"ttf",png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",prefab:"prefab",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",plf:"plf",scene:"json",ani:"json",sk:"arraybuffer"},i.parserMap={},i.maxTimeOut=100,i.groupMap={},i.loadedMap={},i.atlasMap={},i.preLoadedMap={},i._imgCache={},i._loaders=[],i._isWorking=!1,i._startIndex=0,i}(l),Vn=function(t){function i(){i.__super.call(this),this._top=0/0,this._bottom=0/0,this._left=0/0,this._right=0/0,this._centerX=0/0,this._centerY=0/0}s(i,"laya.ui.Widget",t);var e=i.prototype;return e.onReset=function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=0/0},e._onEnable=function(){this.owner.parent?this._onAdded():this.owner.once("added",this,this._onAdded)},e._onDisable=function(){this.owner.off("added",this,this._onAdded),this.owner.parent&&this.owner.parent.off("resize",this,this._onParentResize)},e._onAdded=function(){this.owner.parent&&this.owner.parent.on("resize",this,this._onParentResize),this.resetLayoutX(),this.resetLayoutY()},e._onParentResize=function(){(this.resetLayoutX()||this.resetLayoutY())&&this.owner.event("resize")},e.resetLayoutX=function(){var t=this.owner;if(!t)return!1;var i=t.parent;if(i)if(isNaN(this.centerX)){if(isNaN(this.left))isNaN(this.right)||(t.x=Math.round(i.width-t.displayWidth-this.right+t.pivotX*t.scaleX));else if(t.x=Math.round(this.left+t.pivotX*t.scaleX),!isNaN(this.right)){var e=(i._width-this.left-this.right)/(t.scaleX||.01);if(e!=t.width)return t.width=e,!0}}else t.x=Math.round(.5*(i.width-t.displayWidth)+this.centerX+t.pivotX*t.scaleX);return!1},e.resetLayoutY=function(){var t=this.owner;if(!t)return!1;var i=t.parent;if(i)if(isNaN(this.centerY)){if(isNaN(this.top))isNaN(this.bottom)||(t.y=Math.round(i.height-t.displayHeight-this.bottom+t.pivotY*t.scaleY));else if(t.y=Math.round(this.top+t.pivotY*t.scaleY),!isNaN(this.bottom)){var e=(i._height-this.top-this.bottom)/(t.scaleY||.01);if(e!=t.height)return t.height=e,!0}}else t.y=Math.round(.5*(i.height-t.displayHeight)+this.centerY+t.pivotY*t.scaleY);return!1},e.resetLayout=function(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())},r(0,e,"centerX",function(){return this._centerX},function(t){this._centerX!=t&&(this._centerX=t,this.resetLayoutX())
}),r(0,e,"top",function(){return this._top},function(t){this._top!=t&&(this._top=t,this.resetLayoutY())}),r(0,e,"bottom",function(){return this._bottom},function(t){this._bottom!=t&&(this._bottom=t,this.resetLayoutY())}),r(0,e,"left",function(){return this._left},function(t){this._left!=t&&(this._left=t,this.resetLayoutX())}),r(0,e,"right",function(){return this._right},function(t){this._right!=t&&(this._right=t,this.resetLayoutX())}),r(0,e,"centerY",function(){return this._centerY},function(t){this._centerY!=t&&(this._centerY=t,this.resetLayoutY())}),n(i,["EMPTY",function(){return this.EMPTY=new i}]),i}(u),Un=function(t){function i(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,i.__super.call(this)}s(i,"laya.media.webaudio.WebAudioSound",t);var e=i.prototype;return e.load=function(t){var e=this;if(t=Li.formatURL(t),this.url=t,this.audioBuffer=i._dataCache[t],this.audioBuffer)return this._loaded(this.audioBuffer),void 0;if(i.e.on("loaded:"+t,this,this._loaded),i.e.on("err:"+t,this,this._err),!i.__loadingSound[t]){i.__loadingSound[t]=!0;var n=new Ti.window.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){return e._disposed?(e._removeLoadEvents(),void 0):(e.data=n.response,i.buffs.push({buffer:e.data,url:e.url}),i.decode(),void 0)},n.onerror=function(){e._err()},n.send()}},e._err=function(){this._removeLoadEvents(),i.__loadingSound[this.url]=!1,this.event("error")},e._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,i._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},e._removeLoadEvents=function(){i.e.off("loaded:"+this.url,this,this._loaded),i.e.off("err:"+this.url,this,this._err)},e.__playAfterLoaded=function(){if(this.__toPlays){var t,i=0,e=0;t=this.__toPlays,e=t.length;var n;for(i=0;e>i;i++)n=t[i],n[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},e.play=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),e=e?e:new jr,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,i,e]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),e.url=this.url,e.loops=i,e.audioBuffer=this.audioBuffer,e.startTime=t,e.play(),Pi.addChannel(e),e},e.dispose=function(){this._disposed=!0,delete i._dataCache[this.url],delete i.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},r(0,e,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),i.decode=function(){i.buffs.length<=0||i.isDecoding||(i.isDecoding=!0,i.tInfo=i.buffs.shift(),i.ctx.decodeAudioData(i.tInfo.buffer,i._done,i._fail))},i._done=function(t){i.e.event("loaded:"+i.tInfo.url,t),i.isDecoding=!1,i.decode()},i._fail=function(){i.e.event("err:"+i.tInfo.url,null),i.isDecoding=!1,i.decode()},i._playEmptySound=function(){if(null!=i.ctx){var t=i.ctx.createBufferSource();t.buffer=i._miniBuffer,t.connect(i.ctx.destination),t.start(0,0,0)}},i._unlock=function(){i._unlocked||(i._playEmptySound(),"running"==i.ctx.state&&(Ti.document.removeEventListener("mousedown",i._unlock,!0),Ti.document.removeEventListener("touchend",i._unlock,!0),Ti.document.removeEventListener("touchstart",i._unlock,!0),i._unlocked=!0))},i.initWebAudio=function(){"running"!=i.ctx.state&&(i._unlock(),Ti.document.addEventListener("mousedown",i._unlock,!0),Ti.document.addEventListener("touchend",i._unlock,!0),Ti.document.addEventListener("touchstart",i._unlock,!0))},i._dataCache={},i.buffs=[],i.isDecoding=!1,i._unlocked=!1,i.tInfo=null,i.__loadingSound={},n(i,["window",function(){return this.window=Ti.window},"webAudioEnabled",function(){return this.webAudioEnabled=i.window.AudioContext||i.window.webkitAudioContext||i.window.mozAudioContext},"ctx",function(){return this.ctx=i.webAudioEnabled?new(i.window.AudioContext||i.window.webkitAudioContext||i.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=i.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new l}]),i}(l),Wn=function(t){function i(){this._responseType=null,this._data=null,this._url=null,i.__super.call(this),this._http=new Ti.window.XMLHttpRequest}s(i,"laya.net.HttpRequest",t);var e=i.prototype;return e.send=function(t,i,e,n,s){void 0===e&&(e="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null,this._url=t;var r=this,a=this._http;if(t=Li.getAdptedFilePath(t),a.open(e,t,!0),s)for(var o=0;o<s.length;o++)a.setRequestHeader(s[o++],s[o]);else gi.isConchApp||(i&&"string"!=typeof i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));g.instance.isLogin&&a.setRequestHeader("UserAccount",g.instance.userAccount),"0"!=g.instance.token&&""!=g.instance.token&&a.setRequestHeader("Authorization",g.instance.token),a.responseType="arraybuffer"!==n?"text":"arraybuffer",a.onerror=function(t){r._onError(t)},a.onabort=function(t){r._onAbort(t)},a.onprogress=function(t){r._onProgress(t)},a.onload=function(t){r._onLoad(t)},a.send(i)},e._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},e._onAbort=function(){this.error("Request was aborted by user")},e._onError=function(){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},e._onLoad=function(){var t=this._http,i=void 0!==t.status?t.status:200;200===i||204===i||0===i?this.complete():this.error("["+t.status+"]"+t.statusText+":"+t.responseURL)},e.error=function(t){this.clear(),console.warn(this.url,t),this.event("error",t)},e.complete=function(){this.clear();var t=!0;try{this._data="json"===this._responseType?JSON.parse(this._http.responseText):"xml"===this._responseType?en.parseXMLFromString(this._http.responseText):this._http.response||this._http.responseText}catch(i){t=!1,this.error(i.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},e.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},r(0,e,"url",function(){return this._url}),r(0,e,"http",function(){return this._http}),r(0,e,"data",function(){return this._data}),i}(l),Hn=function(t){function i(){this.worker=null,this._useWorkerLoader=!1,i.__super.call(this);var t=this;this.worker=new Ti.window.Worker(i.workerPath),this.worker.onmessage=function(i){t.workerMessage(i.data)}}s(i,"laya.net.WorkerLoader",t);var e=i.prototype;return e.workerMessage=function(t){if(t)switch(t.type){case"Image":this.imageLoaded(t);break;case"Disable":i.enable=!1}},e.imageLoaded=function(t){if(!t.dataType||"imageBitmap"!=t.dataType)return this.event(t.url,null),void 0;var i=new ra(!0),e=i.source.getContext("2d");switch(t.dataType){case"imageBitmap":var n=t.imageBitmap;i.size(n.width,n.height),e.drawImage(n,0,0)}if(console.log("load:",t.url),gi.isWebGL){i._setGPUMemory(0);var s=new laya.webgl.resource.Texture2D;s.loadImageSource(i),i=s}this.event(t.url,i)},e.loadImage=function(t){this.worker.postMessage(t)},e._loadImage=function(t){function e(){laya.net.WorkerLoader.I.off(t,n,s)}var n=this;if(!this._useWorkerLoader||!i._enable)return i._preLoadFun.call(n,t),void 0;t=Li.formatURL(t);var s=function(s){e(),s?n.onLoaded(s):i._preLoadFun.call(n,t)};laya.net.WorkerLoader.I.on(t,n,s),laya.net.WorkerLoader.I.loadImage(t)},r(1,i,"enable",function(){return i._enable},function(t){i._enable!=t&&(i._enable=t,t&&null==i._preLoadFun&&(i._enable=i.__init__()))}),i.__init__=function(){return null!=i._preLoadFun?!1:Ti.window.Worker?(i._preLoadFun=Fn.prototype._loadImage,Fn.prototype._loadImage=i.prototype._loadImage,i.I||(i.I=new i),!0):!1},i.workerSupported=function(){return Ti.window.Worker?!0:!1},i.enableWorkerLoader=function(){i._tryEnabled||(i.enable=!0,i._tryEnabled=!0)},i.I=null,i.workerPath="libs/workerloader.js",i._preLoadFun=null,i._enable=!1,i._tryEnabled=!1,i}(l),Gn=function(t){function i(){this.retryNum=4,this.retryDelay=1e3,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},this._statInfo={count:1,loaded:1},i.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var r;s(i,"laya.net.LoaderManager",t);var a=i.prototype;return a.getProgress=function(){return this._statInfo.loaded/this._statInfo.count},a.resetProgress=function(){this._statInfo.count=this._statInfo.loaded=1},a.create=function(t,i,e,n,s,r,a,o){void 0===a&&(a=1),void 0===o&&(o=!0),this._create(t,!0,i,e,n,s,r,a,o)},a._create=function(t,i,e,n,s,r,a,o,h){function l(t){p++,t.progress=1,p===_&&e&&e.run()}function u(t,i){t.progress=i;for(var e=0,n=0;_>n;n++){var s=d[n];e+=s.progress}var r=e/_;f.runWith(r)}if(void 0===o&&(o=1),void 0===h&&(h=!0),t instanceof Array){var d=t,_=d.length,p=0;if(n)var f=c.create(n.caller,n.method,n.args,!1);for(var m=0;_>m;m++){var g=d[m];"string"==typeof g&&(g=d[m]={url:g}),g.progress=0}for(m=0;_>m;m++){g=d[m];var v=n?c.create(null,u,[g],!1):null,S=n||e?c.create(null,l,[g]):null;this._createOne(g.url,i,S,v,g.type||s,g.constructParams||r,g.propertyParams||a,g.priority||o,h)}}else this._createOne(t,i,e,n,s,r,a,o,h)},a._createOne=function(t,n,s,r,a,o,h,l,u){function d(i){!n&&i instanceof laya.resource.Resource&&i._addReference(),s&&s.runWith(i),e.loader.event(t)}void 0===l&&(l=1),void 0===u&&(u=!0);var _=this.getRes(t);if(_)!n&&_ instanceof laya.resource.Resource&&_._addReference(),r&&r.runWith(1),s&&s.runWith(_);else{var p=en.getFileExtension(t);if(a||(a=i.createMap[p]?i.createMap[p][0]:null),!a)return this.load(t,s,r,a,l,u),void 0;var f=Fn.parserMap;if(!f[a])return this.load(t,s,r,a,l,u),void 0;this._createLoad(t,c.create(null,d),r,a,o,h,l,u,!0)}},a.load=function(t,n,s,a,o,h,l,c,u){var d=this;if(void 0===o&&(o=1),void 0===h&&(h=!0),void 0===c&&(c=!1),void 0===u&&(u=!1),t instanceof Array)return this._loadAssets(t,n,s,a,o,h,l);var _=Fn.getRes(t);if(c||null==_){var p;p=t,t=ln.getFileLoadPath(t),t!=p&&"nativeimage"!==a?a="atlas":p=null;var f=i._resMap[t];f?(n&&(p?n&&f._createListener("complete",this,this._resInfoLoaded,[p,n],!1,!1):n&&f._createListener("complete",n.caller,n.method,n.args,!1,!1)),s&&f._createListener("progress",s.caller,s.method,s.args,!1,!1)):(f=this._infoPool.length?this._infoPool.pop():new r,f.url=t,f.type=a,f.cache=h,f.group=l,f.ignoreCache=c,f.useWorkerLoader=u,f.originalUrl=p,n&&f.on("complete",n.caller,n.method,n.args),s&&f.on("progress",s.caller,s.method,s.args),i._resMap[t]=f,o=o<this._maxPriority?o:this._maxPriority-1,this._resInfos[o].push(f),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}else e.systemTimer.frameOnce(1,null,function(){s&&s.runWith(1),n&&n.runWith(_),d._loaderCount||d.event("complete")});return this},a._resInfoLoaded=function(t,i){i.runWith(Fn.getRes(t))},a._createLoad=function(t,n,s,a,o,h,l,c,u){var d=this;if(void 0===l&&(l=1),void 0===c&&(c=!0),void 0===u&&(u=!1),t instanceof Array)return this._loadAssets(t,n,s,a,l,c);var _=Fn.getRes(t);if(null!=_)e.systemTimer.frameOnce(1,null,function(){s&&s.runWith(1),n&&n.runWith(_),d._loaderCount||d.event("complete")});else{var p=i._resMap[t];p?(n&&p._createListener("complete",n.caller,n.method,n.args,!1,!1),s&&p._createListener("progress",s.caller,s.method,s.args,!1,!1)):(p=this._infoPool.length?this._infoPool.pop():new r,p.url=t,p.type=a,p.cache=!1,p.ignoreCache=u,p.originalUrl=null,p.createCache=c,p.createConstructParams=o,p.createPropertyParams=h,n&&p.on("complete",n.caller,n.method,n.args),s&&p.on("progress",s.caller,s.method,s.args),i._resMap[t]=p,l=l<this._maxPriority?l:this._maxPriority-1,this._resInfos[l].push(p),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}return this},a._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var i=this._resInfos[t];i.length>0;){var e=i.shift();if(e)return this._doLoad(e)}this._loaderCount||this.event("complete")}},a._doLoad=function(t){function i(i){e.offAll(),e._data=null,e._customParse=!1,n._loaders.push(e),n._endLoad(t,i instanceof Array?[i]:i),n._loaderCount--,n._next()}this._loaderCount++;var e=this._loaders.length?this._loaders.pop():new Fn;e.on("complete",null,i),e.on("progress",null,function(i){t.event("progress",i)}),e.on("error",null,function(){i(null)});var n=this;e._constructParams=t.createConstructParams,e._propertyParams=t.createPropertyParams,e._createCache=t.createCache,e.load(t.url,t.type,t.cache,t.group,t.ignoreCache,t.useWorkerLoader)},a._endLoad=function(t,n){var s=t.url;if(null==n){var r=this._failRes[s]||0;if(r<this.retryNum)return console.warn("[warn]Retry to load:",s),this._failRes[s]=r+1,e.systemTimer.once(this.retryDelay,this,this._addReTry,[t],!1),void 0;Fn.clearRes(s),console.warn("[error]Failed to load:",s),this.event("error",s)}this._failRes[s]&&(this._failRes[s]=0),delete i._resMap[s],t.originalUrl&&(n=Fn.getRes(t.originalUrl)),t.event("complete",n),t.offAll(),this._infoPool.push(t),this._statInfo.loaded++,this.event("progress",this.getProgress())},a._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},a.clearRes=function(t){Fn.clearRes(t)},a.clearTextureRes=function(t){Fn.clearTextureRes(t)},a.getRes=function(t){return Fn.getRes(t)},a.cacheRes=function(t,i){Fn.cacheRes(t,i)},a.setGroup=function(t,i){Fn.setGroup(t,i)},a.clearResByGroup=function(t){Fn.clearResByGroup(t)},a.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var e=this._resInfos[t],n=e.length-1;n>-1;n--){var s=e[n];s&&(s.offAll(),this._infoPool.push(s))}e.length=0}this._loaderCount=0,i._resMap={}},a.cancelLoadByUrls=function(t){if(t)for(var i=0,e=t.length;e>i;i++)this.cancelLoadByUrl(t[i])},a.cancelLoadByUrl=function(t){for(var e=0;e<this._maxPriority;e++)for(var n=this._resInfos[e],s=n.length-1;s>-1;s--){var r=n[s];r&&r.url===t&&(n[s]=null,r.offAll(),this._infoPool.push(r))}i._resMap[t]&&delete i._resMap[t]},a._loadAssets=function(t,i,e,n,s,r,a){function o(t,e){u++,t.progress=1,e||(p=!1),u===l&&i&&i.runWith(p)}function h(t,i){if(null!=e){t.progress=i;for(var n=0,s=0;s<_.length;s++){var r=_[s];n+=r.size*r.progress}var a=n/d;e.runWith(a)}}void 0===s&&(s=1),void 0===r&&(r=!0);for(var l=t.length,u=0,d=0,_=[],p=!0,f=0;l>f;f++){var m=t[f];"string"==typeof m&&(m={url:m,type:n,size:1,priority:s}),m.size||(m.size=1),m.progress=0,d+=m.size,_.push(m);var g=e?c.create(null,h,[m],!1):null,v=i||e?c.create(null,o,[m]):null;this.load(m.url,v,g,m.type,m.priority||1,r,m.group||a,!1,m.useWorkerLoader)}return this},a.decodeBitmaps=function(t){var i,e=0,n=t.length;for(i=gi._context,e=0;n>e;e++){var s;if(s=Fn.getAtlas(t[e]))this._decodeTexture(s[0],i);else{var r;r=this.getRes(t[e]),r&&r instanceof laya.resource.Texture&&this._decodeTexture(r,i)}}},a._decodeTexture=function(t,i){var n=t.bitmap;if(t&&n){var s=n.source||n.image;if(s&&e.__typeof(s,Ti.window.HTMLImageElement)){i.drawImage(s,0,0,1,1);{i.getImageData(0,0,1,1)}}}},i.cacheRes=function(t,i){Fn.cacheRes(t,i)},i._resMap={},n(i,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),i.__init$=function(){r=function(t){function i(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.useWorkerLoader=!1,this.originalUrl=null,this.createCache=!1,this.createConstructParams=null,this.createPropertyParams=null,i.__super.call(this)}return s(i,"",t),i}(l)},i}(l),zn=function(t){function i(){i.__super.call(this,i.__name2int,i.__int2name,i.__int2nameMap)}return s(i,"laya.webgl.shader.d2.ShaderDefines2D",t),i.__init__=function(){i.reg("TEXTURE2D",1),i.reg("PRIMITIVE",4),i.reg("GLOW_FILTER",8),i.reg("BLUR_FILTER",16),i.reg("COLOR_FILTER",32),i.reg("COLOR_ADD",64),i.reg("WORLDMAT",128),i.reg("FILLTEXTURE",256),i.reg("FSHIGHPRECISION",1024)},i.reg=function(t,e){Q._reg(t,e,i.__name2int,i.__int2name)},i.toText=function(t,i,e){return Q._toText(t,i,e)},i.toInt=function(t){return Q._toInt(t,i.__name2int)},i.TEXTURE2D=1,i.PRIMITIVE=4,i.FILTERGLOW=8,i.FILTERBLUR=16,i.FILTERCOLOR=32,i.COLORADD=64,i.WORLDMAT=128,i.FILLTEXTURE=256,i.SKINMESH=512,i.SHADERDEFINE_FSHIGHPRECISION=1024,i.NOOPTMASK=312,i.__name2int={},i.__int2name=[],i.__int2nameMap=[],i}(Q),Yn=function(t){function i(){this.italic=!1,i.__super.call(this)}s(i,"laya.display.css.TextStyle",t);var e=i.prototype;return e.reset=function(){return t.prototype.reset.call(this),this.italic=!1,this.align="left",this.wordWrap=!1,this.leading=0,this.padding=[0,0,0,0],this.bgColor=null,this.borderColor=null,this.asPassword=!1,this.stroke=0,this.strokeColor="#000000",this.bold=!1,this.underline=!1,this.underlineColor=null,this.currBitmapFont=null,this},e.recover=function(){this!==i.EMPTY&&ee.recover("TextStyle",this.reset())},e.render=function(t,i,e,n){(this.bgColor||this.borderColor)&&i.drawRect(e,n,t.width,t.height,this.bgColor,this.borderColor,1)},i.create=function(){return ee.getItemByClass("TextStyle",i)},i.EMPTY=new i,i}(si),Xn=function(t){function i(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,void 0===t&&(t=0),i.__super.call(this,1,t),this._attribLocation=["posuv",0,"attribColor",1,"attribFlags",2]}s(i,"laya.webgl.shader.d2.value.TextureSV",t);var e=i.prototype;return e.clear=function(){this.texture=null,this.shader=null,this.defines._value=this.subID+(ge.shaderHighPrecision?1024:0)},i}(ai),qn=function(t){function i(t){void 0===t&&(t=1e4),i.__super.call(this,t)}s(i,"laya.webgl.submit.SubmitTexture",t);var e=i.prototype;return e.clone=function(t,e,n){var s=i._poolSize?i.POOL[--i._poolSize]:new i;return this._cloneInit(s,t,e,n),s},e.releaseRender=function(){--this._ref<1&&(i.POOL[i._poolSize++]=this,this.shaderValue.release(),this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},e.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var i=t?t._getSource():null;if(!i)return 1}var e=ge.mainContext;this._mesh.useMesh(e);var n=oi.preRender,s=oi.preRender._key;return 0===this._key.blendShader&&this._key.submitType===s.submitType&&this._key.blendShader===s.blendShader&&Xr.activeShader&&oi.preRender.clipInfoID==this.clipInfoID&&n.shaderValue.defines._value===this.shaderValue.defines._value&&0==(this.shaderValue.defines._value&zn.NOOPTMASK)?Xr.activeShader.uploadTexture2D(i):(Zi.activeBlendFunction!==this._blendFn&&(Pe.setBlend(e,!0),this._blendFn(e),Zi.activeBlendFunction=this._blendFn),this.shaderValue.texture=i,this.shaderValue.upload()),e.drawElements(4,this._numEle,5123,this._startIdx),Ri.drawCall++,Ri.trianglesFaces+=this._numEle/3,1},i.create=function(t,e,n){var s=i._poolSize?i.POOL[--i._poolSize]:new i(10016);s._mesh=e,s._key.clear(),s._key.submitType=2,s._ref=1,s._startIdx=e.indexNum*En.BYTES_PIDX,s._numEle=0;var r=t._nBlendType;if(s._key.blendShader=r,s._blendFn=t._targets?Zi.targetFns[r]:Zi.fns[r],s.shaderValue=n,t._colorFiler){var a=t._colorFiler;n.defines.add(a.type),n.colorMat=a._mat,n.colorAlpha=a._alpha}return s},i._poolSize=0,i.POOL=[],i}(oi),Jn=function(e){function n(){this.lastScaleX=1,this.lastScaleY=1,this.needResetScale=!1,n.__super.call(this),n.canvas||(n.canvas=t.document.createElement("canvas"),n.canvas.width=512,n.canvas.height=512,n.canvas.style.left="-1000px",n.canvas.style.position="absolute",i.body.appendChild(n.canvas),n.ctx=n.canvas.getContext("2d"))}s(n,"laya.webgl.resource.CharRender_Canvas",e);var r=n.prototype;return r.getWidth=function(t){return n.ctx?(n.ctx._lastFont!=Cn._curFont&&(n.ctx.font=Cn._curFont,n.ctx._lastFont=Cn._curFont),n.ctx.measureText(t).width):0},r.scale=function(t,i){(this.lastScaleX!=t||this.lastScaleY!=i)&&(this.needResetScale&&(n.ctx.restore(),this.lastScaleX=this.lastScaleY=1),n.ctx.save(),this.needResetScale=!0,Cn.isWan1Wan||n.ctx.scale(t,i),this.lastScaleX=t,this.lastScaleY=i)},r.getCharBmp=function(t,i,e,s,r,a,o,h,l,c){if(Cn.isWan1Wan)return this.getCharCanvas(t,i,e,s,r,a,o,h,l,c);n.ctx.font!=i&&(n.ctx.font=i,n.ctx._lastFont=i),a.width=n.ctx.measureText(t).width;var u=a.width*this.lastScaleX,d=a.height*this.lastScaleY;return u+=(o+l)*this.lastScaleX,d+=(h+c)*this.lastScaleY,u=Math.min(u,laya.webgl.resource.CharRender_Canvas.canvas.width),d=Math.min(d,laya.webgl.resource.CharRender_Canvas.canvas.height),n.ctx.clearRect(0,0,u+1,d+1),n.ctx.textBaseline="top",e>0&&(n.ctx.strokeStyle=r,n.ctx.lineWidth=e,n.ctx.strokeText(t,o,h)),n.ctx.fillStyle=s,n.ctx.fillText(t,o,h),Cn.debug&&(n.ctx.strokeStyle="#ff0000",n.ctx.strokeRect(0,0,u,d),n.ctx.strokeStyle="#00ff00",n.ctx.strokeRect(o,h,a.width,a.height)),n.ctx.getImageData(0,0,0|u,0|d)},r.getCharCanvas=function(t,i,e,s,r,a,o,h,l,c){n.ctx.font!=i&&(n.ctx.font=i,n.ctx._lastFont=i),a.width=n.ctx.measureText(t).width;var u=a.width*this.lastScaleX,d=a.height*this.lastScaleY;return u+=(o+l)*this.lastScaleX,d+=(h+c)*this.lastScaleY,u=Math.min(u,Cn.textureWidth),d=Math.min(d,Cn.textureWidth),n.canvas.width=Math.min(u+1,Cn.textureWidth),n.canvas.height=Math.min(d+1,Cn.textureWidth),n.ctx.font=i,this.needResetScale=!1,n.ctx.clearRect(0,0,u+1,d+1),n.ctx.save(),n.ctx.translate(o,h),Cn.scaleFontWithCtx&&n.ctx.scale(this.lastScaleX,this.lastScaleY),n.ctx.textAlign="left",n.ctx.textBaseline="top",e>0?(n.ctx.strokeStyle=r,n.ctx.fillStyle=s,n.ctx.lineWidth=e,n.ctx.strokeText(t,0,0),n.ctx.fillText(t,0,0)):(n.ctx.fillStyle=s,n.ctx.fillText(t,0,0)),Cn.debug&&(n.ctx.strokeStyle="#ff0000",n.ctx.strokeRect(0,0,u,d),n.ctx.strokeStyle="#00ff00",n.ctx.strokeRect(0,0,a.width,a.height)),n.ctx.restore(),n.canvas},n.canvas=null,n.ctx=null,n}(pi),jn=function(t){function i(){this.texcoord=null,this.position=null,this.offsetX=300,this.offsetY=0,i.__super.call(this,512,0);var t=8*En.BYTES_PE;this.position=[2,5126,!1,t,0],this.texcoord=[2,5126,!1,t,2*En.BYTES_PE],this.color=[4,5126,!1,t,4*En.BYTES_PE]}return s(i,"laya.webgl.shader.d2.skinAnishader.SkinSV",t),i}(ai),Kn=function(t){function i(){i.__super.call(this,4,0),this._attribLocation=["position",0,"attribColor",1]}return s(i,"laya.webgl.shader.d2.value.PrimitiveSV",t),i}(ai),Zn=function(i){function e(){this.lastFont="",e.__super.call(this)}s(e,"laya.webgl.resource.CharRender_Native",i);var n=e.prototype;return n.getWidth=function(i){return t.conchTextCanvas?(this.lastFont!=Cn._curFont&&(t.conchTextCanvas.font=Cn._curFont,this.lastFont=Cn._curFont),t.conchTextCanvas.measureText(i).width):0},n.scale=function(){},n.getCharBmp=function(i,e,n,s,r,a,h,l,c,u){if(!t.conchTextCanvas)return null;this.lastFont!=e&&(t.conchTextCanvas.font=Cn._curFont,this.lastFont=Cn._curFont);var d=a.width=t.conchTextCanvas.measureText(i).width,_=a.height;d+=h+c,_+=l+u;var p=o.create(r),f=p.numColor,m=o.create(s),g=m.numColor,v=t.conchTextCanvas.getTextBitmapData(i,g,n>2?2:n,f);return v},e}(pi),$n=(function(t){function i(){i.__super.call(this)}s(i,"laya.html.dom.HTMLImageElement",t);var e=i.prototype;return e.reset=function(){return t.prototype.reset.call(this),this._tex&&this._tex.off("loaded",this,this.onloaded),this._tex=null,this._url=null,this},e.onloaded=function(){{var t=this._style;t.widthed(this)?-1:this._tex.width,t.heighted(this)?-1:this._tex.height}t.widthed(this)||this._width==this._tex.width||(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),t.heighted(this)||this._height==this._tex.height||(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),this.repaint()},e._addToLayout=function(t){var i=this._style;!i.absolute&&t.push(this)},e.renderSelfToGraphic=function(t,i,e){this._tex&&t.drawImage(this._tex,i,e,this.width||this._tex.width,this.height||this._tex.height)},r(0,e,"src",null,function(t){if(t=this.formatURL(t),this._url!==t){this._url=t;var i=this._tex=Fn.getRes(t);i||(this._tex=i=new On,i.load(t),Fn.cacheRes(t,i)),i.getIsReady()?this.onloaded():i.once("ready",this,this.onloaded)}}),i}(vi),function(t){function i(t){i.__super.call(this,laya.webgl.utils.MeshParticle2D.const_stride,4*t*i.const_stride,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshParticle2D._fixattriInfo),this.createQuadIB(t),this._quadNum=t}s(i,"laya.webgl.utils.MeshParticle2D",t);var e=i.prototype;return e.setMaxParticleNum=function(t){this._vb._resizeBuffer(4*t*i.const_stride,!1),this.createQuadIB(t)},e.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshParticle2D._POOL.push(this)},e.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._vb.deleteBuffer()},i.getAMesh=function(t){if(laya.webgl.utils.MeshParticle2D._POOL.length){var e=laya.webgl.utils.MeshParticle2D._POOL.pop();return e.setMaxParticleNum(t),e}return new i(t)},i.const_stride=116,i._POOL=[],n(i,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5126,3,16,5126,3,28,5126,4,40,5126,4,56,5126,3,72,5126,2,84,5126,4,92,5126,1,108,5126,1,112]}]),i}(bi),function(t){function i(){i.__super.call(this)}s(i,"laya.html.dom.HTMLStyleElement",t);var e=i.prototype;return e._creates=function(){},e.drawToGraphic=function(){},e.reset=function(){return this},r(0,e,"innerTEXT",t.prototype._$get_innerTEXT,function(t){vn.parseCSS(t,null)}),i}(vi),function(t){function i(){i.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}s(i,"laya.webgl.utils.MeshTexture",t);var e=i.prototype;return e.addData=function(t,e,n,s,r){for(var a=t.length/2,o=this._vb.needSize(a*i.const_stride),h=o>>2,l=this._vb._floatArray32||this._vb.getFloat32Array(),c=this._vb._uint32Array,u=0,d=0;a>d;d++){var _=t[u],p=t[u+1],f=_*s.a+p*s.c+s.tx,m=_*s.b+p*s.d+s.ty;l[h++]=f,l[h++]=m,l[h++]=e[u],l[h++]=e[u+1],u+=2,c[h++]=r,c[h++]=255}this._vb.setNeedUpload();var g=this.vertNum;if(g>0){var v=n.length;v>i.tmpIdx.length&&(i.tmpIdx=new Uint16Array(v));for(var S=0;v>S;S++)i.tmpIdx[S]=n[S]+g;this._ib.appendU16Array(i.tmpIdx,n.length)}else this._ib.append(n);this._ib.setNeedUpload(),this.vertNum+=a,this.indexNum+=n.length},e.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},e.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},i.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new i},i.const_stride=24,i._POOL=[],n(i,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),i}(bi)),Qn=function(t){function i(t,e){i.__super.call(this,t,e)}s(i,"laya.webgl.utils.RenderSprite3D",t);var e=i.prototype;return e.onCreate=function(t){switch(t){case 4:return this._fun=this._blend,void 0}},e._mask=function(t,i,e,n){var s=this._next,r=t.mask,a=i;if(r){a.save();var o=a.globalCompositeOperation,h=new on;if(h.copyFrom(r.getBounds()),h.width=Math.round(h.width),h.height=Math.round(h.height),h.x=Math.round(h.x),h.y=Math.round(h.y),h.width>0&&h.height>0){var l=h.width,c=h.height,u=cn.getRT(l,c);a.breakNextMerge(),a.pushRT(),a.addRenderObject(Qe.create([a,u,l,c],laya.webgl.utils.RenderSprite3D.tmpTarget,this)),r.render(a,-h.x,-h.y),a.breakNextMerge(),a.popRT(),a.save(),a.clipRect(e+h.x-t.getStyle().pivotX,n+h.y-t.getStyle().pivotY,l,c),s._fun.call(s,t,a,e,n),a.restore(),o=a.globalCompositeOperation,a.addRenderObject(Qe.create(["mask"],laya.webgl.utils.RenderSprite3D.setBlendMode,this));var d=ai.create(1,0),_=On.INV_UV;a.drawTarget(u,e+h.x-t.getStyle().pivotX,n+h.y-t.getStyle().pivotY,l,c,$e.TEMP.identity(),d,_,6),a.addRenderObject(Qe.create([u],laya.webgl.utils.RenderSprite3D.recycleTarget,this)),a.addRenderObject(Qe.create([o],laya.webgl.utils.RenderSprite3D.setBlendMode,this))}a.restore()}else s._fun.call(s,t,i,e,n)},e._blend=function(t,i,e,n){var s=t._style,r=this._next;s.blendMode?(i.save(),i.globalCompositeOperation=s.blendMode,r._fun.call(r,t,i,e,n),i.restore()):r._fun.call(r,t,i,e,n)},i.tmpTarget=function(t,i){i.start(),i.clear(0,0,0,0)},i.recycleTarget=function(t){cn.releaseRT(t)},i.setBlendMode=function(t){var i=ge.mainContext;Zi.targetFns[Zi.TOINT[t]](i)},n(i,["tempUV",function(){return this.tempUV=new Array(8)}]),i}(li),ts=function(t){function i(){i.__super.call(this,laya.webgl.utils.MeshQuadTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshQuadTexture._fixattriInfo),laya.webgl.utils.MeshQuadTexture._fixib?(this._ib=laya.webgl.utils.MeshQuadTexture._fixib,this._quadNum=i._maxIB):(this.createQuadIB(i._maxIB),laya.webgl.utils.MeshQuadTexture._fixib=this._ib)}s(i,"laya.webgl.utils.MeshQuadTexture",t);var e=i.prototype;return e.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshQuadTexture._POOL.push(this)},e.destroy=function(){this._vb.destroy(),this._vb.deleteBuffer()},e.addQuad=function(t,i,e,n){var s=this._vb,r=s._byteLength>>2;s.setByteLength(r+laya.webgl.utils.MeshQuadTexture.const_stride<<2);var a=s._floatArray32||s.getFloat32Array(),o=s._uint32Array,h=r,l=n?255:0;a[h++]=t[0],a[h++]=t[1],a[h++]=i[0],a[h++]=i[1],o[h++]=e,o[h++]=l,a[h++]=t[2],a[h++]=t[3],a[h++]=i[2],a[h++]=i[3],o[h++]=e,o[h++]=l,a[h++]=t[4],a[h++]=t[5],a[h++]=i[4],a[h++]=i[5],o[h++]=e,o[h++]=l,a[h++]=t[6],a[h++]=t[7],a[h++]=i[6],a[h++]=i[7],o[h++]=e,o[h++]=l,s._upload=!0},i.getAMesh=function(){return laya.webgl.utils.MeshQuadTexture._POOL.length?laya.webgl.utils.MeshQuadTexture._POOL.pop():new i},i.const_stride=24,i._fixib=null,i._maxIB=16384,i._POOL=[],n(i,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}]),i}(bi),is=function(t){function i(){this._matrix=new $e,this._matrix4=En.defaultMatrix4.concat(),i.__super.call(this,1e4),this.shaderValue=new ai(0,0)}s(i,"laya.webgl.submit.SubmitCanvas",t);var e=i.prototype;return e.renderSubmit=function(){var t=fn.worldAlpha,i=fn.worldMatrix4,e=fn.worldMatrix,n=fn.worldFilters,s=fn.worldShaderDefines,r=this.shaderValue,a=this._matrix,o=this._matrix4,h=$e.TEMP;return $e.mul(a,e,h),o[0]=h.a,o[1]=h.b,o[4]=h.c,o[5]=h.d,o[12]=h.tx,o[13]=h.ty,fn.worldMatrix=h.clone(),fn.worldMatrix4=o,fn.worldAlpha=fn.worldAlpha*r.alpha,r.filters&&r.filters.length&&(fn.worldFilters=r.filters,fn.worldShaderDefines=r.defines),this.canv.flushsubmit(),fn.worldAlpha=t,fn.worldMatrix4=i,fn.worldMatrix.destroy(),fn.worldMatrix=e,fn.worldFilters=n,fn.worldShaderDefines=s,1},e.releaseRender=function(){if(--this._ref<1){var t=i.POOL;this._mesh=null,t[t._length++]=this}},e.clone=function(){return null},e.getRenderType=function(){return 10003},i.create=function(t,e,n){var s=i.POOL._length?i.POOL[--i.POOL._length]:new i;s.canv=t,s._ref=1,s._numEle=0;var r=s.shaderValue;return r.alpha=e,r.defines.setValue(0),n&&n.length&&r.setFilters(n),s},i.POOL=(i.POOL=[],i.POOL._length=0,i.POOL),i}(oi),es=function(t){function i(){i.__super.call(this,laya.webgl.utils.MeshVG.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshVG._fixattriInfo)}s(i,"laya.webgl.utils.MeshVG",t);var e=i.prototype;return e.addVertAndIBToMesh=function(t,e,n,s){for(var r=this._vb.needSize(e.length/2*i.const_stride),a=r>>2,o=this._vb._floatArray32||this._vb.getFloat32Array(),h=this._vb._uint32Array,l=0,c=e.length/2,u=0;c>u;u++)o[a++]=e[l],o[a++]=e[l+1],l+=2,h[a++]=n;this._vb.setNeedUpload(),this._ib.append(new Uint16Array(s)),this._ib.setNeedUpload(),this.vertNum+=c,this.indexNum+=s.length},e.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshVG._POOL.push(this)},e.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},i.getAMesh=function(){return laya.webgl.utils.MeshVG._POOL.length?laya.webgl.utils.MeshVG._POOL.pop():new i},i.const_stride=12,i._POOL=[],n(i,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5121,4,8]}]),i}(bi),ns=(function(t){function i(){i.__super.call(this)}s(i,"laya.html.dom.HTMLLinkElement",t);var e=i.prototype;return e._creates=function(){},e.drawToGraphic=function(){},e.reset=function(){return this._loader&&this._loader.off("complete",this,this._onload),this._loader=null,this
},e._onload=function(t){switch(this._loader&&(this._loader=null),this.type){case"text/css":vn.parseCSS(t,this.URI)}this.repaint(!0)},r(0,e,"href",t.prototype._$get_href,function(t){if(t){if(t=this.formatURL(t),this.URI=new Li(t),this._loader&&this._loader.off("complete",this,this._onload),Fn.getRes(t))return"text/css"==this.type&&vn.parseCSS(Fn.getRes(t),this.URI),void 0;this._loader=new Fn,this._loader.once("complete",this,this._onload),this._loader.load(t,"text")}}),i._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g"),i}(vi),function(t){function i(){i.__super.call(this)}return s(i,"laya.webgl.BufferState2D",t),i}(Wi)),ss=function(t){function i(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,i.__super.call(this)}s(i,"laya.ui.AutoBitmap",t);var n=i.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},n._setChanged=function(){this._isChanged||(this._isChanged=!0,e.timer.callLater(this,this.changeSource))},n.changeSource=function(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var e=this.width,n=this.height,s=this._sizeGrid,r=t.sourceWidth,a=t.sourceHeight;if(!s||r===e&&a===n)this.clear(),this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,e,n);else{this.clear();var o=s[0],h=s[1],l=s[2],c=s[3],u=s[4],d=!1;if(e==r&&(c=h=0),n==a&&(o=l=0),c+h>e){var _=e;d=!0,e=c+h,this.save(),this.clipRect(0,0,_,n)}c&&o&&this.drawImage(i.getTexture(t,0,0,c,o),0,0,c,o),h&&o&&this.drawImage(i.getTexture(t,r-h,0,h,o),e-h,0,h,o),c&&l&&this.drawImage(i.getTexture(t,0,a-l,c,l),0,n-l,c,l),h&&l&&this.drawImage(i.getTexture(t,r-h,a-l,h,l),e-h,n-l,h,l),o&&this.drawBitmap(u,i.getTexture(t,c,0,r-c-h,o),c,0,e-c-h,o),l&&this.drawBitmap(u,i.getTexture(t,c,a-l,r-c-h,l),c,n-l,e-c-h,l),c&&this.drawBitmap(u,i.getTexture(t,0,o,c,a-o-l),0,o,c,n-o-l),h&&this.drawBitmap(u,i.getTexture(t,r-h,o,h,a-o-l),e-h,o,h,n-o-l),this.drawBitmap(u,i.getTexture(t,c,o,r-c-h,a-o-l),c,o,e-c-h,n-o-l),d&&this.restore()}this._repaint()}},n.drawBitmap=function(t,i,e,n,s,r){void 0===s&&(s=0),void 0===r&&(r=0),.1>s||.1>r||(!t||i.width==s&&i.height==r?this.drawImage(i,e,n,s,r):this.fillTexture(i,e,n,s,r))},r(0,n,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,this._setChanged()}),r(0,n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t){this._width!=t&&(this._width=t,this._setChanged())}),r(0,n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t){this._height!=t&&(this._height=t,this._setChanged())}),r(0,n,"source",function(){return this._source},function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}),i.getTexture=function(t,i,e,n,s){0>=n&&(n=1),0>=s&&(s=1),t.$_GID||(t.$_GID=en.getGID());var r;return r&&r._getSource()||(r=On.createFromTexture(t,i,e,n,s)),r},i}(te),rs=function(t){function i(){if(this._drawTriUseAbsMatrix=!1,this._id=++i._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._renderCount=0,this._isConvexCmd=!0,this._submits=null,this._curSubmit=null,this.meshlist=[],this._clipInfoID=0,this._lastMatScaleX=1,this._lastMatScaleY=1,this._lastMat_a=1,this._lastMat_b=0,this._lastMat_c=0,this._lastMat_d=1,this._nBlendType=0,this._saveMark=null,this._drawTextureUseColor=!1,this._italicDeg=0,this._lastTex=null,this._fillColor=0,this._flushCnt=0,this.drawTexAlign=!1,this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,i.__super.call(this),this._width=99999999,this._height=99999999,this._submitKey=new He,this._transedPoints=new Array(8),this._temp4Points=new Array(8),this._clipRect=i.MAXCLIPRECT,this._globalClipMatrix=new $e(99999999,0,0,99999999,0,0),this._shader2D=new fe,this.mOutPoint,i._contextcount++,!i.defTexture){var t=new wa(2,2);t.setPixels(new Uint8Array(16)),i.defTexture=new On(t)}this._lastTex=i.defTexture,this.clear()}var a;s(i,"laya.webgl.canvas.WebGLContext2D",t);var l=i.prototype;return l.clearBG=function(t,i,e,n){var s=ge.mainContext;s.clearColor(t,i,e,n),s.clear(16384)},l._getSubmits=function(){return this._submits},l._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,i=this._submits._length;i>t;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path=null,this._save=null;var e=0;for(t=0,e=this.meshlist.length;e>t;t++){var n=this.meshlist[t];n.destroy()}this.meshlist.length=0,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}},l.destroy=function(){--i._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._mesh.destroy()},l.clear=function(){this._submits||(this._other=a.DEFAULT,this._curMat=$e.create(),this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh),this._pathMesh=es.getAMesh(),this.meshlist.push(this._pathMesh),this._triangleMesh=$n.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits=[],this._save=[Qi.Create(this)],this._save.length=10,this._shader2D=new fe),this._submitKey.clear(),this._mesh.clearVB(),this._renderCount++,this._drawCount=1,this._other=a.DEFAULT,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=i.MAXCLIPRECT,this._curSubmit=oi.RENDERBASE,oi.RENDERBASE._ref=16777215,oi.RENDERBASE._numEle=0,this._shader2D.fillStyle=this._shader2D.strokeStyle=Z.DEFAULT;for(var t=0,e=this._submits._length;e>t;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},l.size=function(t,i){(this._width!=t||this._height!=i)&&(this._width=t,this._height=i,this._targets&&(this._targets.destroy(),this._targets=new Ma(t,i,1,-1)),gi._context==this&&(ge.mainContext.viewport(0,0,t,i),fn.width=t,fn.height=i)),0===t&&0===i&&this._releaseMem()},l.getMatScaleX=function(){return this._lastMat_a==this._curMat.a&&this._lastMat_b==this._curMat.b?this._lastMatScaleX:(this._lastMatScaleX=this._curMat.getScaleX(),this._lastMat_a=this._curMat.a,this._lastMat_b=this._curMat.b,this._lastMatScaleX)},l.getMatScaleY=function(){return this._lastMat_c==this._curMat.c&&this._lastMat_d==this._curMat.d?this._lastMatScaleY:(this._lastMatScaleY=this._curMat.getScaleY(),this._lastMat_c=this._curMat.c,this._lastMat_d=this._curMat.d,this._lastMatScaleY)},l.setFillColor=function(t){this._fillColor=t},l.getFillColor=function(){return this._fillColor},l.translate=function(t,i){(0!==t||0!==i)&&(yi.save(this),this._curMat._bTransform?(ji.save(this),this._curMat.tx+=t*this._curMat.a+i*this._curMat.c,this._curMat.ty+=t*this._curMat.b+i*this._curMat.d):(this._curMat.tx=t,this._curMat.ty=i))},l.save=function(){this._save[this._save._length++]=Qi.Create(this)},l.restore=function(){var t=this._save._length,i=this._nBlendType;if(!(1>t)){for(var e=t-1;e>=0;e--){var n=this._save[e];if(n.restore(this),n.isSaveMark())return this._save._length=e,void 0}i!=this._nBlendType&&(this._curSubmit=oi.RENDERBASE)}},l.fillText=function(t,i,e,n,s){this._fillText(t,null,i,e,n,s,null,0,null)},l._fillText=function(t,e,n,s,r,a,o,h,l,c){void 0===c&&(c=0),t?i._charBook.filltext(this,t,n,s,r,a,o,h,l,c):e&&i._charBook.fillWords(this,e,n,s,r,a,o,h)},l._fast_filltext=function(t,e,n,s,r,a,o,h,l){void 0===l&&(l=0),i._charBook._fast_filltext(this,t,null,e,n,s,r,a,o,h,l)},l.fillWords=function(t,i,e,n,s){this._fillText(null,t,i,e,n,s,null,-1,null,0)},l.fillBorderWords=function(t,i,e,n,s,r,a){this._fillBorderText(null,t,i,e,n,s,r,a,null)},l.drawText=function(t,i,e,n,s,r){this._fillText(t,null,i,e,n,o.create(s).strColor,null,-1,r)},l.strokeWord=function(t,i,e,n,s,r,a){this._fillText(t,null,i,e,n,null,o.create(s).strColor,r||1,a)},l.fillBorderText=function(t,i,e,n,s,r,a,h){this._fillBorderText(t,null,i,e,n,o.create(s).strColor,o.create(r).strColor,a,h)},l._fillBorderText=function(t,i,e,n,s,r,a,o,h){this._fillText(t,i,e,n,s,r,a,o||1,h)},l._fillRect=function(t,i,e,n,s){var r=this._curSubmit,a=r&&2===r._key.submitType&&r._key.blendShader===this._submitKey.blendShader;this._mesh.vertNum+4>65535&&(this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh),a=!1),a&&(a=a&&this.isSameClipInfo(r)),this.transformQuad(t,i,e,n,0,this._curMat,this._transedPoints),this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,On.NO_UV,s,!1),a||(r=this._curSubmit=qn.create(this,this._mesh,ai.create(1,0)),this._submits[this._submits._length++]=r,this.copyClipInfo(r,this._globalClipMatrix),r.shaderValue.textureHost=this._lastTex,r._key.copyFrom2(this._submitKey,2,this._lastTex&&this._lastTex.bitmap?this._lastTex.bitmap.id:-1),r._renderType=10016),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},l.fillRect=function(t,i,e,n,s){var r=s?Z.create(s):this._shader2D.fillStyle,a=this.mixRGBandAlpha(r.toInt());this._fillRect(t,i,e,n,a)},l.fillTexture=function(t,i,n,s,r,a,o){if(!t._getSource())return this.sprite&&e.systemTimer.callLater(this,this._repaintSprite),void 0;var h=this._curSubmit,l=!1;this._mesh.vertNum+4>65535&&(this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh),l=!1);var c=(t.bitmap,!0),u=!0;switch(a){case"repeat":break;case"repeat-x":u=!1;break;case"repeat-y":c=!1;break;case"no-repeat":c=u=!1}var d=this._temp4Points,_=0,p=0,f=0,m=0,g=0,v=0;if(o.x<0?(f=i,_=-o.x%t.width/t.width):f=i+o.x,o.y<0?(m=n,p=-o.y%t.height/t.height):m=n+o.y,g=i+s,v=n+r,!c&&(g=Math.min(g,i+o.x+t.width)),!u&&(v=Math.min(v,n+o.y+t.height)),!(i>g||n>v||f>g||m>v)){var S=(g-i-o.x)/t.width,y=(v-n-o.y)/t.height;if(this.transformQuad(f,m,g-f,v-m,0,this._curMat,this._transedPoints),d[0]=_,d[1]=p,d[2]=S,d[3]=p,d[4]=S,d[5]=y,d[6]=_,d[7]=y,!this.clipedOff(this._transedPoints)){var C=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA);this._mesh.addQuad(this._transedPoints,d,C,!0);var E=ai.create(1,0);E.defines.add(256),E.u_TexRange=t.uvrect,h=this._curSubmit=qn.create(this,this._mesh,E),this._submits[this._submits._length++]=h,this.copyClipInfo(h,this._globalClipMatrix),h.shaderValue.textureHost=t,h._renderType=10016,this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4}this.breakNextMerge()}},l.setColorFilter=function(t){h.save(this,8388608,this,!0),this._colorFiler=t,this._curSubmit=oi.RENDERBASE},l.drawTexture=function(t,i,e,n,s){this._drawTextureM(t,i,e,n,s,null,1,null)},l.drawTextures=function(t,i,n,s){if(!t._getSource())return this.sprite&&e.systemTimer.callLater(this,this._repaintSprite),void 0;for(var r=i.length/2,a=0,o=0;r>o;o++)this._inner_drawTexture(t,t.bitmap.id,i[a++]+n,i[a++]+s,0,0,null,null,1)},l._drawTextureAddSubmit=function(t,i){var e=null;e=qn.create(this,this._mesh,ai.create(1,0)),this._submits[this._submits._length++]=e,e.shaderValue.textureHost=i,e._key.copyFrom2(this._submitKey,2,t),e._renderType=10016,this._curSubmit=e},l._drawTextureM=function(t,i,n,s,r,a,o,h){return t._getSource()?this._inner_drawTexture(t,t.bitmap.id,i,n,s,r,a,h,o):(this.sprite&&e.systemTimer.callLater(this,this._repaintSprite),!1)},l._drawRenderTexture=function(t,i,e,n,s,r,a,o){return this._inner_drawTexture(t,-1,i,e,n,s,r,o,1)},l.submitDebugger=function(){this._submits[this._submits._length++]=Qe.create([],function(){},this)},l.copyClipInfo=function(t,i){var e=t.shaderValue.clipMatDir;e[0]=i.a,e[1]=i.b,e[2]=i.c,e[3]=i.d;var n=t.shaderValue.clipMatPos;n[0]=i.tx,n[1]=i.ty,t.clipInfoID=this._clipInfoID},l.isSameClipInfo=function(t){return t.clipInfoID===this._clipInfoID},l._useNewTex2DSubmit=function(t,i){this._mesh.vertNum+i>65535&&(this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh));var e=qn.create(this,this._mesh,ai.create(1,0));this._submits[this._submits._length++]=this._curSubmit=e,e.shaderValue.textureHost=t,this.copyClipInfo(e,this._globalClipMatrix)},l._drawTexRect=function(t,i,e,n,s){this.transformQuad(t,i,e,n,this._italicDeg,this._curMat,this._transedPoints);var r=this._transedPoints;r[0]=r[0]+.5|0,r[1]=r[1]+.5|0,r[2]=r[2]+.5|0,r[3]=r[3]+.5|0,r[4]=r[4]+.5|0,r[5]=r[5]+.5|0,r[6]=r[6]+.5|0,r[7]=r[7]+.5|0,this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,s,this._fillColor,!0),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},l._inner_drawTexture=function(t,e,n,s,r,a,o,h,l){var c=this._curSubmit._key;if(h=h||t._uv,4===c.submitType&&c.other===e){var u=i._drawTexToDrawTri_Vert;return u[0]=n,u[1]=s,u[2]=n+r,u[3]=s,u[4]=n+r,u[5]=s+a,u[6]=n,u[7]=s+a,this._drawTriUseAbsMatrix=!0,this.drawTriangles(t,0,0,u,h,i._drawTexToDrawTri_Index,o,l,null,"normal"),this._drawTriUseAbsMatrix=!1,!0}this._drawCount++;var d=e>=0&&2===c.submitType&&c.other===e;d&&(d=d&&this.isSameClipInfo(this._curSubmit)),this._lastTex=t;var _=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*l);if(this._mesh.vertNum+4>65535&&(this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh),d=!1),this.transformQuad(n,s,r||t.width,a||t.height,this._italicDeg,o||this._curMat,this._transedPoints),this.drawTexAlign){var p=this._transedPoints;p[0]=p[0]+.5|0,p[1]=p[1]+.5|0,p[2]=p[2]+.5|0,p[3]=p[3]+.5|0,p[4]=p[4]+.5|0,p[5]=p[5]+.5|0,p[6]=p[6]+.5|0,p[7]=p[7]+.5|0,this.drawTexAlign=!1}if(!this.clipedOff(this._transedPoints)){if(this._mesh.addQuad(this._transedPoints,h,_,!0),!d){var f=qn.create(this,this._mesh,ai.create(1,0));this._submits[this._submits._length++]=this._curSubmit=f,f.shaderValue.textureHost=t,f._key.other=e,this.copyClipInfo(f,this._globalClipMatrix)}return this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,!0}return!1},l.transform4Points=function(t,i,e){var n=i.tx,s=i.ty;i._bTransform?(e[0]=t[0]*i.a+t[1]*i.c+n,e[1]=t[0]*i.b+t[1]*i.d+s,e[2]=t[2]*i.a+t[3]*i.c+n,e[3]=t[2]*i.b+t[3]*i.d+s,e[4]=t[4]*i.a+t[5]*i.c+n,e[5]=t[4]*i.b+t[5]*i.d+s,e[6]=t[6]*i.a+t[7]*i.c+n,e[7]=t[6]*i.b+t[7]*i.d+s):(e[0]=t[0]+n,e[1]=t[1]+s,e[2]=t[2]+n,e[3]=t[3]+s,e[4]=t[4]+n,e[5]=t[5]+s,e[6]=t[6]+n,e[7]=t[7]+s)},l.clipedOff=function(){return this._clipRect.width<=0||this._clipRect.height<=0?!0:!1},l.transformQuad=function(t,i,e,n,s,r,a){var o=0;0!=s&&(o=Math.tan(s*Math.PI/180)*n);var h=t+e,l=i+n;this._temp4Points[0]=t+o,this._temp4Points[1]=i,this._temp4Points[2]=h+o,this._temp4Points[3]=i,this._temp4Points[4]=h,this._temp4Points[5]=l,this._temp4Points[6]=t,this._temp4Points[7]=l,this.transform4Points(this._temp4Points,r,a)},l.pushRT=function(){this.addRenderObject(Qe.create(null,Ma.pushRT,this))},l.popRT=function(){this.addRenderObject(Qe.create(null,Ma.popRT,this)),this.breakNextMerge()},l.useRT=function(t){function i(t){if(!t)throw"error useRT";t.start(),t.clear(0,0,0,0)}this.addRenderObject(Qe.create([t],i,this)),this.breakNextMerge()},l.RTRestore=function(t){function i(t){t.restore()}this.addRenderObject(Qe.create([t],i,this)),this.breakNextMerge()},l.breakNextMerge=function(){this._curSubmit=oi.RENDERBASE},l._repaintSprite=function(){this.sprite&&this.sprite.repaint()},l.drawTextureWithTransform=function(t,e,n,s,r,a,o,h,l){if(!a)return this._drawTextureM(t,e+o,n+h,s,r,null,l,null),void 0;var c=this._curMat;i._tmpMatrix.a=a.a,i._tmpMatrix.b=a.b,i._tmpMatrix.c=a.c,i._tmpMatrix.d=a.d,i._tmpMatrix.tx=a.tx+o,i._tmpMatrix.ty=a.ty+h,i._tmpMatrix._bTransform=a._bTransform,a&&c._bTransform?($e.mul(i._tmpMatrix,c,i._tmpMatrix),a=i._tmpMatrix,a._bTransform=!0):a=i._tmpMatrix,this._drawTextureM(t,e,n,s,r,a,l,null)},l._flushToTarget=function(t,i){fn.worldScissorTest=!1,ge.mainContext.disable(3089);{var e=fn.worldAlpha,n=fn.worldMatrix4,s=fn.worldMatrix;fn.worldShaderDefines}fn.worldMatrix=$e.EMPTY,fn.restoreTempArray(),fn.worldMatrix4=fn.TEMPMAT4_ARRAY,fn.worldAlpha=1,Xr.activeShader=null,i.start(),t._submits._length>0&&i.clear(0,0,0,0),t._curSubmit=oi.RENDERBASE,t.flush(),t.clear(),i.restore(),t._curSubmit=oi.RENDERBASE,Xr.activeShader=null,fn.worldAlpha=e,fn.worldMatrix4=n,fn.worldMatrix=s},l.drawCanvas=function(t,i,e,n,s){var r,a=t.context;if(a._targets)a._submits._length>0&&(r=Qe.create([a,a._targets],this._flushToTarget,this),this._submits[this._submits._length++]=r),this._drawRenderTexture(a._targets,i,e,n,s,null,1,Ma.flipyuv),this._curSubmit=oi.RENDERBASE;else{t.touches&&t.touches.forEach(function(t){t.touch()}),r=is.create(t,this._shader2D.ALPHA,this._shader2D.filters),this._submits[this._submits._length++]=r,r._key.clear();var o=r._matrix;this._curMat.copyTo(o);var h=o.tx,l=o.ty;o.tx=o.ty=0,o.transformPoint(Oe.TEMP.setTo(i,e)),o.translate(Oe.TEMP.x+h,Oe.TEMP.y+l),this._curSubmit=oi.RENDERBASE}},l.drawTarget=function(t,i,e,n,s,r,a,o,h){void 0===h&&(h=-1),this._drawCount++;this.mixRGBandAlpha(this._drawTextureUseColor?this.fillStyle?this.fillStyle.toInt():0:4294967295);if(this._mesh.vertNum+4>65535&&(this._mesh=ts.getAMesh(),this.meshlist.push(this._mesh)),this.transformQuad(i,e,n,s,0,r||this._curMat,this._transedPoints),!this.clipedOff(this._transedPoints)){this._mesh.addQuad(this._transedPoints,o||On.DEF_UV,4294967295,!0);var l=this._curSubmit=pe.create(this,this._mesh,a,t);return l.blendType=-1==h?this._nBlendType:h,this.copyClipInfo(l,this._globalClipMatrix),l._numEle=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,this._maxNumEle=Math.max(this._maxNumEle,l._numEle),this._submits[this._submits._length++]=l,this._curSubmit=oi.RENDERBASE,!0}return this._curSubmit=oi.RENDERBASE,!1},l.drawTriangles=function(t,n,s,r,a,o,h,l,c,u){if(!t._getSource())return this.sprite&&e.systemTimer.callLater(this,this._repaintSprite),void 0;this._drawCount++;var d=null,_=!1;c&&(d=this._colorFiler,this._colorFiler=c,this._curSubmit=oi.RENDERBASE,_=d!=c);var p=Zi.TOINT[u]||0,f=t.bitmap,m=this._curSubmit._key,g=4===m.submitType&&m.other===f.id&&m.blendShader==p,v=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*l),S=r.length/2,y=o.length;if(this._triangleMesh.vertNum+S>65535&&(this._triangleMesh=$n.getAMesh(),this.meshlist.push(this._triangleMesh),g=!1),!g){var C=this._curSubmit=qn.create(this,this._triangleMesh,ai.create(1,0));C.shaderValue.textureHost=t,C._renderType=10016,C._key.blendShader=p,C._blendFn=this._targets?Zi.targetFns[p]:Zi.fns[p],C._key.submitType=4,C._key.other=f.id,this.copyClipInfo(C,this._globalClipMatrix),this._submits[this._submits._length++]=C}h?(i._tmpMatrix.a=h.a,i._tmpMatrix.b=h.b,i._tmpMatrix.c=h.c,i._tmpMatrix.d=h.d,i._tmpMatrix.tx=h.tx+n,i._tmpMatrix.ty=h.ty+s):(i._tmpMatrix.a=1,i._tmpMatrix.b=0,i._tmpMatrix.c=0,i._tmpMatrix.d=1,i._tmpMatrix.tx=n,i._tmpMatrix.ty=s),this._drawTriUseAbsMatrix||$e.mul(i._tmpMatrix,this._curMat,i._tmpMatrix),this._triangleMesh.addData(r,a,o,i._tmpMatrix,v,this),this._curSubmit._numEle+=y,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),_&&(this._colorFiler=d,this._curSubmit=oi.RENDERBASE)},l.transform=function(t,i,e,n,s,r){ji.save(this),$e.mul($e.TEMP.setTo(t,i,e,n,s,r),this._curMat,this._curMat),this._curMat._checkTransform()},l._transformByMatrix=function(t,i,e){t.setTranslate(i,e),$e.mul(t,this._curMat,this._curMat),t.setTranslate(0,0),this._curMat._bTransform=!0},l.setTransformByMatrix=function(t){t.copyTo(this._curMat)},l.rotate=function(t){ji.save(this),this._curMat.rotateEx(t)},l.scale=function(t,i){ji.save(this),this._curMat.scaleEx(t,i)},l.clipRect=function(t,e,n,s){ye.save(this),this._clipRect==i.MAXCLIPRECT?this._clipRect=new on(t,e,n,s):(this._clipRect.width=n,this._clipRect.height=s,this._clipRect.x=t,this._clipRect.y=e),i._clipID_Gen++,i._clipID_Gen%=1e4,this._clipInfoID=i._clipID_Gen;var r=this._globalClipMatrix,a=r.tx,o=r.ty,h=a+r.a,l=o+r.d;if(this._clipRect.width>=99999999?(r.a=r.d=99999999,r.b=r.c=r.tx=r.ty=0):this._curMat._bTransform?(r.tx=this._clipRect.x*this._curMat.a+this._clipRect.y*this._curMat.c+this._curMat.tx,r.ty=this._clipRect.x*this._curMat.b+this._clipRect.y*this._curMat.d+this._curMat.ty,r.a=this._clipRect.width*this._curMat.a,r.b=this._clipRect.width*this._curMat.b,r.c=this._clipRect.height*this._curMat.c,r.d=this._clipRect.height*this._curMat.d):(r.tx=this._clipRect.x+this._curMat.tx,r.ty=this._clipRect.y+this._curMat.ty,r.a=this._clipRect.width,r.b=r.c=0,r.d=this._clipRect.height),r.a>0&&r.d>0){var c=r.tx+r.a,u=r.ty+r.d;a>=c||o>=u||r.tx>=h||r.ty>=l?(r.a=-.1,r.d=-.1):(r.tx<a&&(r.a-=a-r.tx,r.tx=a),c>h&&(r.a-=c-h),r.ty<o&&(r.d-=o-r.ty,r.ty=o),u>l&&(r.d-=u-l),r.a<=0&&(r.a=-.1),r.d<=0&&(r.d=-.1))}},l.drawMesh=function(t,i,e,n,s,r,a,o,h){void 0===h&&(h=0)},l.addRenderObject=function(t){this._submits[this._submits._length++]=t},l.submitElement=function(t,i){var e=(gi._context===this,this._submits),n=e._length;0>i&&(i=e._length);for(var s=oi.RENDERBASE;i>t;)this._renderNextSubmitIndex=t+1,e[t]!==oi.RENDERBASE?(oi.preRender=s,s=e[t],t+=s.renderSubmit()):t++;return n},l.flush=function(){var t=this.submitElement(0,this._submits._length);this._path&&this._path.reset(),pn.instance&&pn.getInstance().reset(),this._curSubmit=oi.RENDERBASE;for(var i=0,e=this.meshlist.length;e>i;i++){var n=this.meshlist[i];n.canReuse?n.releaseMesh():n.destroy()}return this.meshlist.length=0,this._mesh=ts.getAMesh(),this._pathMesh=es.getAMesh(),this._triangleMesh=$n.getAMesh(),this.meshlist.push(this._mesh,this._pathMesh,this._triangleMesh),this._flushCnt++,this._flushCnt%600==0&&gi._context==this&&Cn.charbookInst&&Cn.charbookInst.GC(),t},l.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var i=re.getInstance();i.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,i.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},l.beginPath=function(t){void 0===t&&(t=!1);var i=this._getPath();i.beginPath(t)},l.closePath=function(){this._path.closePath()},l.addPath=function(t,i,e){this._getPath().push(t,e)},l.fill=function(){var t=this._curMat,i=this._getPath(),e=this._curSubmit,n=3===e._key.submitType&&e._key.blendShader===this._submitKey.blendShader;n&&(n=n&&this.isSameClipInfo(e)),n||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var s,r=this.mixRGBandAlpha(this.fillStyle.toInt()),a=0,o=0,h=i.paths.length;h>o;o++){var l=i.paths[o],c=l.path.length/2;if(!(3>c||3==c&&!l.convex)){var u=l.path.concat(),d=0,_=0,p=0,f=0/0,m=0/0;if(t._bTransform)for(d=0;c>d;d++)_=d<<1,p=_+1,f=u[_],m=u[p],u[_]=t.a*f+t.c*m+t.tx,u[p]=t.b*f+t.d*m+t.ty;else for(d=0;c>d;d++)_=d<<1,p=_+1,f=u[_],m=u[p],u[_]=f+t.tx,u[p]=m+t.ty;this._pathMesh.vertNum+c>65535&&(this._curSubmit._numEle+=a,a=0,this._pathMesh=es.getAMesh(),this._curSubmit=this.addVGSubmit(this._pathMesh));var g=this._pathMesh.vertNum;if(l.convex){var v=c-2;s=new Array(3*v);for(var S=0,y=0;v>y;y++)s[S++]=g,s[S++]=y+1+g,s[S++]=y+2+g}else if(s=xe.earcut(u,null,2),g>0)for(var C=0;C<s.length;C++)s[C]+=g;this._pathMesh.addVertAndIBToMesh(this,u,r,s),a+=s.length}}this._curSubmit._numEle+=a},l.addVGSubmit=function(t){var i=oi.createShape(this,t,0,ai.create(4,0));return i._key.blendShader=this._submitKey.blendShader,i._key.submitType=3,this._submits[this._submits._length++]=i,this.copyClipInfo(i,this._globalClipMatrix),i},l.stroke=function(){if(this.lineWidth>0){var t=this.mixRGBandAlpha(this.strokeStyle._color.numColor),i=this._getPath(),e=this._curSubmit,n=3===e._key.submitType&&e._key.blendShader===this._submitKey.blendShader;n&&(n=n&&this.isSameClipInfo(e)),n||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var s=0,r=0,a=i.paths.length;a>r;r++){var o=i.paths[r];if(!(o.path.length<=0)){var h=[],l=[],c=2*o.path.length;if(!(2>c)){this._pathMesh.vertNum+c>65535&&(this._curSubmit._numEle+=s,s=0,this._pathMesh=es.getAMesh(),this.meshlist.push(this._pathMesh),this._curSubmit=this.addVGSubmit(this._pathMesh)),Di.createLine2(o.path,h,this.lineWidth,this._pathMesh.vertNum,l,o.loop);var u=l.length/2,d=this._curMat,_=0,p=0,f=0,m=0/0,g=0/0;if(d._bTransform)for(_=0;u>_;_++)p=_<<1,f=p+1,m=l[p],g=l[f],l[p]=d.a*m+d.c*g+d.tx,l[f]=d.b*m+d.d*g+d.ty;else for(_=0;u>_;_++)p=_<<1,f=p+1,m=l[p],g=l[f],l[p]=m+d.tx,l[f]=g+d.ty;this._pathMesh.addVertAndIBToMesh(this,l,t,h),s+=h.length}}}this._curSubmit._numEle+=s}},l.moveTo=function(t,i){var e=this._getPath();e.newPath(),e._lastOriX=t,e._lastOriY=i,e.addPoint(t,i)},l.lineTo=function(t,i){var e=this._getPath();Math.abs(t-e._lastOriX)<.001&&Math.abs(i-e._lastOriY)<.001||(e._lastOriX=t,e._lastOriY=i,e.addPoint(t,i))},l.arcTo=function(t,e,n,s,r){var a=0,o=0,h=0,l=this._path._lastOriX-t,c=this._path._lastOriY-e,u=Math.sqrt(l*l+c*c);if(!(1e-6>=u)){var d=l/u,_=c/u,p=n-t,f=s-e,m=p*p+f*f,g=Math.sqrt(m);if(!(1e-6>=g)){var v=p/g,S=f/g,y=d+v,C=_+S,E=Math.sqrt(y*y+C*C);if(!(1e-6>=E)){var b=y/E,I=C/E,x=Math.acos(b*d+I*_),P=Math.PI/2-x;u=r/Math.tan(P);var D=u*d+t,A=u*_+e,L=Math.sqrt(u*u+r*r),k=t+b*L,T=e+I*L,R=d*S-_*v,w=0,O=0,M=0;if(R>=0){w=2*P;var B=w/i.SEGNUM;O=Math.sin(B),M=Math.cos(B)}else w=2*-P,B=w/i.SEGNUM,O=Math.sin(B),M=Math.cos(B);var N=this._path._lastOriX,F=this._path._lastOriY,V=D,U=A;(Math.abs(V-this._path._lastOriX)>.1||Math.abs(U-this._path._lastOriY)>.1)&&(o=V,h=U,N=V,F=U,this._path.addPoint(o,h));var W=D-k,H=A-T;for(a=0;a<i.SEGNUM;a++){var G=W*M+H*O,z=-W*O+H*M;o=G+k,h=z+T,(Math.abs(N-o)>.1||Math.abs(F-h)>.1)&&(this._path.addPoint(o,h),N=o,F=h),W=G,H=z}}}}},l.arc=function(t,i,e,n,s,r,a){void 0===r&&(r=!1),void 0===a&&(a=!0);var o=0,h=0,l=0,c=0,u=0,d=0,_=0,p=0,f=0,m=0,g=0;if(h=s-n,r)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;0>h;)h+=2*Math.PI;var v=this.getMatScaleX(),S=this.getMatScaleY(),y=e*(v>S?v:S),C=2*Math.PI*y;m=0|Math.max(C/10,10),l=h/m/2,c=Math.abs(4/3*(1-Math.cos(l))/Math.sin(l)),r&&(c=-c),g=0;var E=this._getPath();for(f=0;m>=f;f++)o=n+h*(f/m),u=Math.cos(o),d=Math.sin(o),_=t+u*e,p=i+d*e,(_!=this._path._lastOriX||p!=this._path._lastOriY)&&E.addPoint(_,p);u=Math.cos(s),d=Math.sin(s),_=t+u*e,p=i+d*e,(_!=this._path._lastOriX||p!=this._path._lastOriY)&&E.addPoint(_,p)},l.quadraticCurveTo=function(t,i,e,n){for(var s=bn.I,r=s.getBezierPoints([this._path._lastOriX,this._path._lastOriY,t,i,e,n],30,2),a=0,o=r.length/2;o>a;a++)this.lineTo(r[2*a],r[2*a+1]);this.lineTo(e,n)},l.rect=function(t,i,e,n){this._other=this._other.make(),this._other.path||(this._other.path=new Mi),this._other.path.rect(t,i,e,n)},l.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)},l._mixRGBandAlpha=function(t,i){var e=(4278190080&t)>>>24;return 0!=e?e*=i:e=255*i,16777215&t|e<<24},l.strokeRect=function(t,i,e,n,s){if(this.lineWidth>0){var r=this.mixRGBandAlpha(this.strokeStyle._color.numColor),a=this.lineWidth/2;this._fillRect(t-a,i-a,e+this.lineWidth,this.lineWidth,r),this._fillRect(t-a,i-a+n,e+this.lineWidth,this.lineWidth,r),this._fillRect(t-a,i+a,this.lineWidth,n-this.lineWidth,r),this._fillRect(t-a+e,i+a,this.lineWidth,n-this.lineWidth,r)}},l.clip=function(){},l.drawParticle=function(t,i,e){e.x=t,e.y=i,this._submits[this._submits._length++]=e},l._getPath=function(){return this._path||(this._path=new Mi)},r(0,l,"globalCompositeOperation",function(){return Zi.NAMES[this._nBlendType]},function(t){var i=Zi.TOINT[t];null==i||this._nBlendType===i||(h.save(this,65536,this,!0),this._curSubmit=oi.RENDERBASE,this._nBlendType=i)}),r(0,l,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(h.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=Z.create(t),this._submitKey.other=-this._shader2D.strokeStyle.toInt())}),r(0,l,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){t=Math.floor(1e3*t)/1e3,t!=this._shader2D.ALPHA&&(h.save(this,1,this._shader2D,!1),this._shader2D.ALPHA=t)}),r(0,l,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new Ma(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets&&this._targets.destroy(),this._targets=null}),r(0,l,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(h.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=Z.create(t),this._submitKey.other=-this._shader2D.fillStyle.toInt())}),r(0,l,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),h.save(this,32768,this._other,!1),this._other.textAlign=t)}),r(0,l,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),h.save(this,256,this._other,!1),this._other.lineWidth=t)}),r(0,l,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),h.save(this,16384,this._other,!1),this._other.textBaseline=t)}),r(0,l,"font",null,function(){this._other=this._other.make(),h.save(this,8,this._other,!1)}),r(0,l,"canvas",function(){return this._canvas}),i.__init__=function(){a.DEFAULT=new a},i.set2DRenderConfig=function(){var t=ki.instance;Pe.setBlend(t,!0),Pe.setBlendFunc(t,1,771),Pe.setDepthTest(t,!1),Pe.setCullFace(t,!1),Pe.setDepthMask(t,!0),Pe.setFrontFace(t,2305),t.viewport(0,0,fn.width,fn.height)},i._tempPoint=new Oe,i._SUBMITVBSIZE=32e3,i._MAXSIZE=99999999,i._MAXVERTNUM=65535,i.MAXCLIPRECT=new on(0,0,99999999,99999999),i._COUNT=0,i._tmpMatrix=new $e,i.SEGNUM=32,i._contextcount=0,i._clipID_Gen=0,i.defTexture=null,n(i,["_drawStyleTemp",function(){return this._drawStyleTemp=new Z(null)},"_keyMap",function(){return this._keyMap=new ii},"_drawTexToDrawTri_Vert",function(){return this._drawTexToDrawTri_Vert=new Float32Array(8)},"_drawTexToDrawTri_Index",function(){return this._drawTexToDrawTri_Index=new Uint16Array([0,1,2,0,2,3])},"_charBook",function(){return this._charBook=new Cn}]),i.__init$=function(){a=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null}s(t,"");var i=t.prototype;return i.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null},i.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},i}(Ui),as=function(t){function i(){this.contextHeight=0/0,this.contextWidth=0/0,this._htmlBounds=null,this._boundsRec=null,this.repaintHandler=null,i.__super.call(this)}s(i,"laya.html.dom.HTMLDivParser",t);var n=i.prototype;return n.reset=function(){return t.prototype.reset.call(this),this._style.block=!0,this._style.setLineElement(!0),this._style.width=200,this._style.height=200,this.repaintHandler=null,this.contextHeight=0,this.contextWidth=0,this},n.appendHTML=function(t){qi.parse(this,t,this.URI),this.layout()},n._addChildsToLayout=function(t){var i=this._getWords();if(null==i&&(!this._children||0==this._children.length))return!1;i&&i.forEach(function(i){t.push(i)});for(var e=!0,n=0,s=this._children.length;s>n;n++){var r=this._children[n];e?e=!1:t.push(null),r._addToLayout(t)}return!0},n._addToLayout=function(t){this.layout(),!this.style.absolute&&t.push(this)},n.getBounds=function(){return this._htmlBounds?(this._boundsRec||(this._boundsRec=on.create()),this._boundsRec.copyFrom(this._htmlBounds)):null},n.parentRepaint=function(i){void 0===i&&(i=!1),t.prototype.parentRepaint.call(this),this.repaintHandler&&this.repaintHandler.runWith(i)},n.layout=function(){this.style._type|=512;var t=nn.layout(this);if(t){this._htmlBounds||(this._htmlBounds=on.create());var i=this._htmlBounds;i.x=i.y=0,i.width=this.contextWidth=t[0],i.height=this.contextHeight=t[1]}},r(0,n,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),r(0,n,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),r(0,n,"width",function(){return this._width?this._width:this.contextWidth},function(t){var i=!1;i=0===t?t!=this._width:t!=this.width,e.superSet(vi,this,"width",t),i&&this.layout()}),i}(vi),os=(function(t){function i(){i.__super.call(this)}return s(i,"laya.ui.UIEvent",t),i.SHOW_TIP="showtip",i.HIDE_TIP="hidetip",i}(ue),function(t){function i(t,e,n,s){this._sv_blurInfo2=[0,0,1,0],this._color=null,this._color_native=null,this._blurInof1_native=null,this._blurInof2_native=null,i.__super.call(this),this._elements=new Float32Array(9),this._sv_blurInfo1=new Array(4),void 0===e&&(e=4),void 0===n&&(n=6),void 0===s&&(s=6),this._color=new o(t),this.blur=Math.min(e,20),this.offX=n,this.offY=s,this._sv_blurInfo1[0]=this._sv_blurInfo1[1]=this.blur,this._sv_blurInfo1[2]=n,this._sv_blurInfo1[3]=-s,this._glRender=new yn
}s(i,"laya.filters.GlowFilter",t);var e=i.prototype;return e.getColor=function(){return this._color.arrColor},e.getColorNative=function(){this._color_native||(this._color_native=new Float32Array(4));var t=this.getColor();return this._color_native[0]=t[0],this._color_native[1]=t[1],this._color_native[2]=t[2],this._color_native[3]=t[3],this._color_native},e.getBlurInfo1Native=function(){return this._blurInof1_native||(this._blurInof1_native=new Float32Array(4)),this._blurInof1_native[0]=this._blurInof1_native[1]=this.blur,this._blurInof1_native[2]=this.offX,this._blurInof1_native[3]=this.offY,this._blurInof1_native},e.getBlurInfo2Native=function(){return this._blurInof2_native||(this._blurInof2_native=new Float32Array(4)),this._blurInof2_native[2]=1,this._blurInof2_native},r(0,e,"type",function(){return 8}),r(0,e,"offY",function(){return this._elements[6]},function(t){this._elements[6]=t,this._sv_blurInfo1[3]=-t}),r(0,e,"offX",function(){return this._elements[5]},function(t){this._elements[5]=t,this._sv_blurInfo1[2]=t}),r(0,e,"blur",function(){return this._elements[4]},function(t){this._elements[4]=t,this._sv_blurInfo1[0]=this._sv_blurInfo1[1]=t}),i}(Ie)),hs=function(t){function i(t){i.__super.call(this),t||(t=this._copyMatrix(i.IDENTITY_MATRIX)),this._mat=new Float32Array(16),this._alpha=new Float32Array(4),this.setByMatrix(t),this._action=new $,this._action.data=this}s(i,"laya.filters.ColorFilter",t);var a=i.prototype;return e.imps(a,{"laya.filters.IFilter":!0}),a.gray=function(){return this.setByMatrix(i.GRAY_MATRIX)},a.color=function(t,i,e,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),this.setByMatrix([1,0,0,0,t,0,1,0,0,i,0,0,1,0,e,0,0,0,1,n])},a.setByMatrix=function(t){this._matrix!=t&&this._copyMatrix(t);for(var i=0,e=0,n=0;20>n;n++)n%5!=4?this._mat[i++]=t[n]:this._alpha[e++]=t[n];return this},a.adjustColor=function(t,i,e,n){return this.adjustHue(n),this.adjustContrast(i),this.adjustBrightness(t),this.adjustSaturation(e),this},a.adjustBrightness=function(t){return t=this._clampValue(t,100),0==t||isNaN(t)?this:this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},a.adjustContrast=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var e=0/0;0>t?e=127+t/100*127:(e=t%1,e=0==e?i.DELTA_INDEX[t]:i.DELTA_INDEX[t<<0]*(1-e)+i.DELTA_INDEX[(t<<0)+1]*e,e=127*e+127);var n=e/127,s=.5*(127-e);return this._multiplyMatrix([n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0,0,0,0,0,1])},a.adjustSaturation=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var i=1+(t>0?3*t/100:t/100),e=1-i,n=.3086*e,s=.6094*e,r=.082*e;return this._multiplyMatrix([n+i,s,r,0,0,n,s+i,r,0,0,n,s,r+i,0,0,0,0,0,1,0,0,0,0,0,1])},a.adjustHue=function(t){if(t=this._clampValue(t,180)/180*Math.PI,0==t||isNaN(t))return this;var i=Math.cos(t),e=Math.sin(t),n=.213,s=.715,r=.072;return this._multiplyMatrix([n+i*(1-n)+e*-n,s+i*-s+e*-s,r+i*-r+e*(1-r),0,0,n+i*-n+.143*e,s+i*(1-s)+.14*e,r+i*-r+e*-.283,0,0,n+i*-n+e*-(1-n),s+i*-s+e*s,r+i*(1-r)+e*r,0,0,0,0,0,1,0,0,0,0,0,1])},a.reset=function(){return this.setByMatrix(this._copyMatrix(i.IDENTITY_MATRIX))},a._multiplyMatrix=function(t){var i=[];this._matrix=this._fixMatrix(this._matrix);for(var e=0;5>e;e++){for(var n=0;5>n;n++)i[n]=this._matrix[n+5*e];for(n=0;5>n;n++){for(var s=0,r=0;5>r;r++)s+=t[n+5*r]*i[r];this._matrix[n+5*e]=s}}return this.setByMatrix(this._matrix)},a._clampValue=function(t,i){return Math.min(i,Math.max(-i,t))},a._fixMatrix=function(t){return null==t?i.IDENTITY_MATRIX:(t.length<25?t=t.slice(0,t.length).concat(i.IDENTITY_MATRIX.slice(t.length,25)):t.length>25&&(t=t.slice(0,25)),t)},a._copyMatrix=function(t){var i=25;this._matrix||(this._matrix=[]);for(var e=0;i>e;e++)this._matrix[e]=t[e];return this._matrix},r(0,a,"type",function(){return 32}),i.LENGTH=25,n(i,["DELTA_INDEX",function(){return this.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10]},"GRAY_MATRIX",function(){return this.GRAY_MATRIX=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]},"IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}]),i}(Ie),ls=function(t){function i(){this._x=0,this._y=0,this._width=0,this._height=0,this._visible=!0,this._mouseState=0,this._zOrder=0,this._renderType=0,this._transform=null,this._tfChanged=!1,this._texture=null,this._boundStyle=null,this._graphics=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,i.__super.call(this),this._repaint=0,this._style=si.EMPTY,this._cacheStyle=sn.EMPTY}s(i,"laya.display.Sprite",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._style&&this._style.recover(),this._cacheStyle&&this._cacheStyle.recover(),this._boundStyle&&this._boundStyle.recover(),this._style=null,this._cacheStyle=null,this._boundStyle=null,this._transform=null,this._graphics&&this._graphics.autoDestroy&&this._graphics.destroy(),this._graphics=null,this.texture=null},n.updateZOrder=function(){en.updateOrder(this._children)&&this.repaint()},n._getBoundsStyle=function(){return this._boundStyle||(this._boundStyle=xn.create()),this._boundStyle},n._setCustomRender=function(){},n._setCacheAs=function(){},n._checkCanvasEnable=function(){var t=this._cacheStyle.needEnableCanvasRender();this._getCacheStyle().enableCanvasRender=t,t?(this._cacheStyle.cacheAs=this._cacheStyle.needBitmapCache()?"bitmap":this._cacheStyle.userSetCache,this._cacheStyle.reCache=!0,this._renderType|=8):(this._cacheStyle.cacheAs="none",this._cacheStyle.releaseContext(),this._renderType&=-9),this._setCacheAs(this._cacheStyle.cacheAs),this._setRenderType(this._renderType)},n.reCache=function(){this._cacheStyle.reCache=!0,this._repaint|=2},n.getRepaint=function(){return this._repaint},n._setX=function(t){this._x=t},n._setY=function(t){this._y=t},n.setSelfBounds=function(t){this._getBoundsStyle().userBounds=t},n.getBounds=function(){return this._getBoundsStyle().bounds=on._getWrapRec(this._boundPointsToParent())},n.getSelfBounds=function(){return this._boundStyle&&this._boundStyle.userBounds?this._boundStyle.userBounds:this._graphics||0!==this._children.length||this._texture?this._getBoundsStyle().bounds=on._getWrapRec(this._getBoundPointsM(!1)):on.TEMP.setTo(0,0,0,0)},n._boundPointsToParent=function(t){void 0===t&&(t=!1);var i=0,e=0;this._style&&(i=this.pivotX,e=this.pivotY,t=t||0!==this._style.rotation,this._style.scrollRect&&(i+=this._style.scrollRect.x,e+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?Ei.scanPList(n):on._getWrapRec(n,on.TEMP)._getBoundPoints()),!this.transform)return en.transPointList(n,this._x-i,this._y-e),n;var s=Oe.TEMP,r=0,a=n.length;for(r=0;a>r;r+=2)s.x=n[r],s.y=n[r+1],this.toParentPoint(s),n[r]=s.x,n[r+1]=s.y;return n},n.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):on.TEMP.setTo(0,0,0,0)},n._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._boundStyle&&this._boundStyle.userBounds)return this._boundStyle.userBounds._getBoundPoints();if(this._boundStyle||this._getBoundsStyle(),this._boundStyle.temBM||(this._boundStyle.temBM=[]),this._style.scrollRect){var i=en.clearArray(this._boundStyle.temBM),e=on.TEMP;return e.copyFrom(this._style.scrollRect),en.concatArray(i,e._getBoundPoints()),i}var n;this._graphics?n=this._graphics.getBoundPoints():(n=en.clearArray(this._boundStyle.temBM),this._texture&&(e=on.TEMP,e.setTo(0,0,this._texture.width,this._texture.height),en.concatArray(n,e._getBoundPoints())));var s,r,a;a=this._children;for(var o=0,h=a.length;h>o;o++)s=a[o],s instanceof laya.display.Sprite&&s._visible===!0&&(r=s._boundPointsToParent(t),r&&(n=n?en.concatArray(n,r):r));return n},n._getCacheStyle=function(){return this._cacheStyle===sn.EMPTY&&(this._cacheStyle=sn.create()),this._cacheStyle},n.getStyle=function(){return this._style===si.EMPTY&&(this._style=si.create()),this._style},n.setStyle=function(t){this._style=t},n._setScaleX=function(t){this._style.scaleX=t},n._setScaleY=function(t){this._style.scaleY=t},n._setRotation=function(t){this._style.rotation=t},n._setSkewX=function(t){this._style.skewX=t},n._setSkewY=function(t){this._style.skewY=t},n._createTransform=function(){return $e.create()},n._adjustTransform=function(){this._tfChanged=!1;var t=this._style,i=t.scaleX,e=t.scaleY,n=this._transform||(this._transform=this._createTransform());if(t.rotation||1!==i||1!==e||0!==t.skewX||0!==t.skewY){n._bTransform=!0;var s=.0174532922222222*(t.rotation-t.skewX),r=.0174532922222222*(t.rotation+t.skewY),a=Math.cos(r),o=Math.sin(r),h=Math.sin(s),l=Math.cos(s);n.a=i*a,n.b=i*o,n.c=-e*h,n.d=e*l,n.tx=n.ty=0}else n.identity(),this._renderType&=-3,this._setRenderType(this._renderType);return n},n._setTransform=function(){},n._setPivotX=function(t){var i=this.getStyle();i&&(i.pivotX=t)},n._getPivotX=function(){return this._style.pivotX},n._setPivotY=function(t){var i=this.getStyle();i&&(i.pivotY=t)},n._getPivotY=function(){return this._style.pivotY},n._setAlpha=function(t){if(this._style.alpha!==t){var i=this.getStyle();i.alpha=t,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()}},n._getAlpha=function(){return this._style.alpha},n._setBlendMode=function(){},n._setGraphics=function(){},n._setGraphicsCallBack=function(){},n._setScrollRect=function(){},n.pos=function(t,i,e){if(void 0===e&&(e=!1),this._x!==t||this._y!==i){if(this.destroyed)return this;if(e){this._setX(t),this._setY(i),this.parentRepaint(2);var n=this._cacheStyle.maskParent;n&&n.repaint(2)}else this.x=t,this.y=i}return this},n.pivot=function(t,i){return this.pivotX=t,this.pivotY=i,this},n.size=function(t,i){return this.width=t,this.height=i,this},n.scale=function(t,i,e){void 0===e&&(e=!1);var n=this.getStyle();if(n.scaleX!=t||n.scaleY!=i){if(this.destroyed)return this;e?(this._setScaleX(t),this._setScaleY(i),this._setTranformChange()):(this.scaleX=t,this.scaleY=i)}return this},n.skew=function(t,i){return this.skewX=t,this.skewY=i,this},n.render=function(t,i,e){Ri.spriteCount++,li.renders[this._renderType]._fun(this,t,i+this._x,e+this._y),this._repaint=0},n.drawToCanvas=function(t,i,e,n){return Oi.drawToCanvas(this,this._renderType,t,i,e,n)},n.customRender=function(){this._repaint=3},n._applyFilters=function(){if(!gi.isWebGL){var t;if(t=this._cacheStyle.filters,t&&!(t.length<1))for(var i=0,e=t.length;e>i;i++)t[i]._action&&t[i]._action.apply(this._cacheStyle)}},n._setColorFilter=function(){},n._isHaveGlowFilter=function(){var t=0,i=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,i=this._children.length;i>t;t++)if(this._children[t]._isHaveGlowFilter())return!0;return!1},n.localToGlobal=function(t,i,n){void 0===i&&(i=!1),i===!0&&(t=new Oe(t.x,t.y));var s=this;for(n=n||e.stage;s&&s!=n;)t=s.toParentPoint(t),s=s.parent;return t},n.globalToLocal=function(t,i,n){void 0===i&&(i=!1),i&&(t=new Oe(t.x,t.y));var s=this,r=[];for(n=n||e.stage;s&&s!=n;)r.push(s),s=s.parent;for(var a=r.length-1;a>=0;)s=r[a],t=s.fromParentPoint(t),a--;return t},n.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var i=this._style.scrollRect;return i&&(t.x-=i.x,t.y-=i.y),t},n.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var i=this._style.scrollRect;return i&&(t.x+=i.x,t.y+=i.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},n.on=function(i,e,n,s){return 1!==this._mouseState&&this.isMouseEvent(i)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(i,e,n,s,!1)):t.prototype.on.call(this,i,e,n,s)},n.once=function(i,e,n,s){return 1!==this._mouseState&&this.isMouseEvent(i)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(i,e,n,s,!0)):t.prototype.once.call(this,i,e,n,s)},n._$2__onDisplay=function(){if(1!==this._mouseState){var t=this;for(t=t.parent;t&&1!==t._mouseState&&!t._getBit(64);)t.mouseEnabled=!0,t._setBit(64,!0),t=t.parent}},n._setParent=function(i){t.prototype._setParent.call(this,i),i&&this._getBit(64)&&this._$2__onDisplay()},n.loadImage=function(t,i){function e(){n.repaint(3),i&&i.run()}var n=this;if(null==t)this.texture=null,e();else{var s=Fn.getRes(t);s||(s=new On,s.load(t),Fn.cacheRes(t,s)),this.texture=s,s.getIsReady()?e():s.once("ready",null,e)}return this},n.repaint=function(t){void 0===t&&(t=2),this._repaint&t||(this._repaint|=t,this.parentRepaint(t)),this._cacheStyle&&this._cacheStyle.maskParent&&this._cacheStyle.maskParent.repaint(t)},n._needRepaint=function(){return 2&this._repaint&&this._cacheStyle.enableCanvasRender&&this._cacheStyle.reCache},n._childChanged=function(t){this._children.length?this._renderType|=8192:this._renderType&=-8193,this._setRenderType(this._renderType),t&&this._getBit(32)&&e.systemTimer.callLater(this,this.updateZOrder),this.repaint(3)},n.parentRepaint=function(t){void 0===t&&(t=2);var i=this._parent;!i||i._repaint&t||(i._repaint|=t,i.parentRepaint(t))},n._setMask=function(){},n.startDrag=function(t,i,e,n,s,r,a){void 0===i&&(i=!1),void 0===e&&(e=0),void 0===n&&(n=300),void 0===r&&(r=!1),void 0===a&&(a=.92),this._style.dragging||(this.getStyle().dragging=new Ai),this._style.dragging.start(this,t,i,e,n,s,r,a)},n.stopDrag=function(){this._style.dragging&&this._style.dragging.stop()},n._setDisplay=function(i){i||this._cacheStyle&&(this._cacheStyle.releaseContext(),this._cacheStyle.releaseFilterCache(),this._cacheStyle.hasGlowFilter&&(this._cacheStyle.hasGlowFilter=!1)),t.prototype._setDisplay.call(this,i)},n.hitTestPoint=function(t,i){var e=this.globalToLocal(Oe.TEMP.setTo(t,i));t=e.x,i=e.y;var n=this._style.hitArea?this._style.hitArea:this._width>0&&this._height>0?on.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds();return n.contains(t,i)},n.getMousePoint=function(){return this.globalToLocal(Oe.TEMP.setTo(e.stage.mouseX,e.stage.mouseY))},n._setTexture=function(){},n._setRenderType=function(){},n._setTranformChange=function(){this._tfChanged=!0,this._renderType|=2,this._setRenderType(this._renderType),this.parentRepaint(2)},n._setBgStyleColor=function(){},n._setBorderStyleColor=function(){},r(0,n,"customRenderEnable",null,function(t){t&&(this._renderType|=2048,this._setRenderType(this._renderType),this._setCustomRender())}),r(0,n,"cacheAs",function(){return this._cacheStyle.cacheAs},function(t){t!==this._cacheStyle.userSetCache&&(gi.isConchApp&&"bitmap"!=t||this.mask&&"normal"===t||(this._setCacheAs(t),this._getCacheStyle().userSetCache=t,this._checkCanvasEnable(),this.repaint()))}),r(0,n,"globalScaleY",function(){for(var t=1,i=this;i&&i!==e.stage;)t*=i.scaleY,i=i.parent;return t}),r(0,n,"hitArea",function(){return this._style.hitArea},function(t){this.getStyle().hitArea=t}),r(0,n,"staticCache",function(){return this._cacheStyle.staticCache},function(t){this._getCacheStyle().staticCache=t,t||this.reCache()}),r(0,n,"displayWidth",function(){return this.width*this.scaleX}),r(0,n,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this._parent&&(t&&this._parent._setBit(32,!0),e.systemTimer.callLater(this._parent,this.updateZOrder)))}),r(0,n,"rotation",function(){return this._style.rotation},function(t){var i=this.getStyle();i.rotation!==t&&(this._setRotation(t),this._setTranformChange())}),r(0,n,"width",function(){return this.autoSize?this.texture?this.texture.width:this._graphics||0!==this._children.length?this.getSelfBounds().width:0:this._width||(this.texture?this.texture.width:0)},function(t){this._width!==t&&(this._width=t,this.repaint())}),r(0,n,"x",function(){return this._x},function(t){if(!this.destroyed&&this._x!==t){this._setX(t),this.parentRepaint(2);var i=this._cacheStyle.maskParent;i&&i.repaint(2)}}),r(0,n,"texture",function(){return this._texture},function(t){"string"==typeof t?this.loadImage(t):this._texture!=t&&(this._texture&&this._texture._removeReference(),this._texture=t,t&&t._addReference(),this._setTexture(t),t?this._renderType|=256:this._renderType&=-257,this._setRenderType(this._renderType),this.repaint())}),r(0,n,"globalRotation",function(){for(var t=0,i=this;i&&i!==e.stage;)t+=i.rotation,i=i.parent;return t}),r(0,n,"y",function(){return this._y},function(t){if(!this.destroyed&&this._y!==t){this._setY(t),this.parentRepaint(2);var i=this._cacheStyle.maskParent;i&&i.repaint(2)}}),r(0,n,"displayHeight",function(){return this.height*this.scaleY}),r(0,n,"height",function(){return this.autoSize?this.texture?this.texture.height:this._graphics||0!==this._children.length?this.getSelfBounds().height:0:this._height||(this.texture?this.texture.height:0)},function(t){this._height!==t&&(this._height=t,this.repaint())}),r(0,n,"blendMode",function(){return this._style.blendMode},function(t){this._setBlendMode(t),this.getStyle().blendMode=t,t&&"source-over"!=t?this._renderType|=4:this._renderType&=-5,this._setRenderType(this._renderType),this.parentRepaint()}),r(0,n,"scaleX",function(){return this._style.scaleX},function(t){var i=this.getStyle();i.scaleX!==t&&(this._setScaleX(t),this._setTranformChange())}),r(0,n,"scaleY",function(){return this._style.scaleY},function(t){var i=this.getStyle();i.scaleY!==t&&(this._setScaleY(t),this._setTranformChange())}),r(0,n,"stage",function(){return e.stage}),r(0,n,"skewX",function(){return this._style.skewX},function(t){var i=this.getStyle();i.skewX!==t&&(this._setSkewX(t),this._setTranformChange())}),r(0,n,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this._setScrollRect(t),this.repaint(),t?this._renderType|=64:this._renderType&=-65,this._setRenderType(this._renderType)}),r(0,n,"skewY",function(){return this._style.skewY},function(t){var i=this.getStyle();i.skewY!==t&&(this._setSkewY(t),this._setTranformChange())}),r(0,n,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1;var i=this._transform||(this._transform=this._createTransform());t.copyTo(i),this._setTransform(i),t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0),t?this._renderType|=2:this._renderType&=-3,this._setRenderType(this._renderType),this.parentRepaint()}),r(0,n,"pivotX",function(){return this._getPivotX()},function(t){this._setPivotX(t),this.repaint()}),r(0,n,"pivotY",function(){return this._getPivotY()},function(t){this._setPivotY(t),this.repaint()}),r(0,n,"alpha",function(){return this._getAlpha()},function(t){t=0>t?0:t>1?1:t,this._setAlpha(t)}),r(0,n,"visible",function(){return this._visible},function(t){this._visible!==t&&(this._visible=t,this.parentRepaint(3))}),r(0,n,"graphics",function(){return this._graphics||(this.graphics=new te,this._graphics.autoDestroy=!0),this._graphics},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._setGraphics(t),this._renderType|=512,t._sp=this):this._renderType&=-513,this._setRenderType(this._renderType),this.repaint()}),r(0,n,"filters",function(){return this._cacheStyle.filters},function(t){t&&0===t.length&&(t=null),this._cacheStyle.filters!=t&&(this._getCacheStyle().filters=t?t.slice():null,(gi.isWebGL||gi.isConchApp)&&(t&&t.length?(this._setColorFilter(t[0]),this._renderType|=16):(this._setColorFilter(null),this._renderType&=-17),this._setRenderType(this._renderType)),t&&t.length>0?(this._getBit(16)||this._setBitUp(16),(gi.isWebGL||gi.isConchApp)&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||(this._getCacheStyle().cacheForFilters=!0,this._checkCanvasEnable())):this._cacheStyle.cacheForFilters&&(this._cacheStyle.cacheForFilters=!1,this._checkCanvasEnable()),this._getCacheStyle().hasGlowFilter=this._isHaveGlowFilter(),this.repaint())}),r(0,n,"mask",function(){return this._cacheStyle.mask},function(t){t&&this.mask&&this.mask._cacheStyle.maskParent||(this._getCacheStyle().mask=t,this._setMask(t),this._checkCanvasEnable(),t?t._getCacheStyle().maskParent=this:this.mask&&(this.mask._getCacheStyle().maskParent=null),this._renderType|=32,this._setRenderType(this._renderType),this.parentRepaint(3))}),r(0,n,"mouseEnabled",function(){return this._mouseState>1},function(t){this._mouseState=t?2:1}),r(0,n,"globalScaleX",function(){for(var t=1,i=this;i&&i!==e.stage;)t*=i.scaleX,i=i.parent;return t}),r(0,n,"mouseX",function(){return this.getMousePoint().x}),r(0,n,"mouseY",function(){return this.getMousePoint().y}),r(0,n,"viewport",function(){return this._style.viewport},function(t){if("string"==typeof t){var i;i=t.split(","),i.length>3&&(t=new on(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])))}this.getStyle().viewport=t}),i.fromImage=function(t){return(new i).loadImage(t)},i}(Pn),cs=function(t){function i(){this.uiView=null,this.lastwidth=0,i.__super.call(this)}s(i,"script.uiTool.AvgLayHBox",t);var e=i.prototype;return e.onEnable=function(){this.uiView=this.owner,this.lastwidth=this.uiView.width,this.uiView.on("resize",this,this.onResize)},e.onResize=function(){if(this.lastwidth!=this.uiView.width){this.lastwidth=this.uiView.width;for(var t=0,i=0;i<this.uiView.numChildren;i++)t+=this.uiView.getChildAt(i).width;this.uiView.space=(this.uiView.width-t)/(this.uiView.numChildren-1),console.log("size change:"+this.uiView.space+","+this.uiView.width)}},i}(Dn),us=function(t){function i(){this.uiSKin=null,this.param=null,this.logType=0,this.uuId="",this.coutdown=60,this.pwdInput=null,i.__super.call(this)}s(i,"script.login.LogPanelControl",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSKin=this.owner,this.uiSKin.mainpanel.hScrollBarSkin="",this.uiSKin.mainpanel.vScrollBarSkin="",this.uiSKin.companyPic.skin="bigImg/companyPic.png?"+g.instance.version;var i=e.loader.getRes("config.json?"+g.instance.configVersion),n=i.shortName;this.uiSKin.titleBar.text=n+"自助下单系统",this.uiSKin.copyRight.text=i.copyRight;var s=i.icp;""!=s&&(this.uiSKin.icp.text=s);var r=i.comInfo;""!=s&&(this.uiSKin.comInfo.text=r),this.onPwdLogin(),this.uiSKin.input_account.maxChars=11,this.uiSKin.input_account.restrict="0-9",this.uiSKin.input_pwd.maxChars=20,this.uiSKin.input_pwd.visible=!1,this.uiSKin.input_pwd.alpha=1,this.uiSKin.input_pwd.prompt="",this.uiSKin.input_pwd.editable=!1,this.uiSKin.input_pwd.disabled=!0,this.uiSKin.input_account.on("focus",this,function(){t.uiSKin.accoutImg.skin="commers/inputfocus.png",t.uiSKin.pwdImg.skin="commers/inputbg.png",t.uiSKin.input_account.focus=!0}),this.uiSKin.accountError.visible=!1,this.uiSKin.pwdError.visible=!1,this.uiSKin.txt_reg.underline=!0,this.uiSKin.txt_reg.underlineColor="#003DC6",this.uiSKin.txt_forget.underline=!0,this.uiSKin.txt_forget.underlineColor="#003DC6",this.uiSKin.txt_reg.on("click",this,this.onRegister),this.uiSKin.txt_forget.on("click",this,this.onResetpwd),this.uiSKin.btn_login.on("click",this,this.onLogin),e.stage.on("keydown",this,this.onStageKeyUp),this.uiSKin.input_account.focus=!g.instance.isLogin,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("OPEN_PANEL_VIEW",this,this.onOpenView),Ln.instance.on("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputPwd),e.timer.frameLoop(1,this,this.updatePwdInputPos),this.uiSKin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSKin.logBox.visible=!g.instance.isLogin,this.uiSKin.loginedBox.visible=g.instance.isLogin,this.uiSKin.icp.on("click",this,this.onOpenGongshang),this.uiSKin.logBox.visible&&this.initPwdinput();var a=T.getLocalVar("autoLogin","0");this.uiSKin.checkAuto.selected="1"==a,this.uiSKin.checkAuto.on("change",this,this.onAutoLoginChange);var o=this.uiSKin.pwdImg.getChildByName("delBtn");o.on("click",this,function(i){null!=t.pwdInput&&(t.pwdInput.value="",i.stopPropagation(),t.pwdInput.focus()),o.visible=!1}),this.uiSKin.gotoFirst.on("click",this,function(){E.instance.closeView("VIEW_lOGPANEL"),E.instance.openView("VIEW_FIRST_PAGE")}),g.instance.isLogin||this.loginAccount()},n.onResizeBrower=function(){this.uiSKin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onOpenGongshang=function(){Ti.window.open("https://beian.miit.gov.cn/#/Integrated/index",null,null,!0)},n.onOpenView=function(){null!=this.pwdInput&&(this.pwdInput.hidden=!0)},n.onshowInputPwd=function(){null!=this.pwdInput&&(this.pwdInput.hidden=!1)},n.initPwdinput=function(){var t=this;this.pwdInput=Ti.document.createElement("input"),this.pwdInput.style="filter:alpha(opacity=100);opacity:100;left:1100px;top:494px;font-size:28;color:#262827;border:none;font-family: SimHei;background-color: #f4f5f9",this.pwdInput.style.width=502/Ti.pixelRatio,this.pwdInput.style.height=53/Ti.pixelRatio,this.pwdInput.placeholder="请输入密码",this.pwdInput.type="password",this.pwdInput.style.position="absolute",this.pwdInput.style.zIndex=999,Ti.document.body.appendChild(this.pwdInput),this.pwdInput.addEventListener("focus",function(){t.uiSKin.accoutImg.skin="commers/inputbg.png",t.uiSKin.pwdImg.skin="commers/inputfocus.png"}),this.pwdInput.addEventListener("blur",function(){}),this.pwdInput.addEventListener("input",function(){var i=t.uiSKin.pwdImg.getChildByName("delBtn");i.visible=t.pwdInput.value.length>0})},n.updatePwdInputPos=function(){if(null!=this.pwdInput){var t=this.uiSKin.input_pwd.localToGlobal(new Oe(this.uiSKin.input_pwd.x,this.uiSKin.input_pwd.y),!0),i=Ti.clientWidth/e.stage.width;this.pwdInput.style.width=502*i,this.pwdInput.style.height=33*i,this.pwdInput.style.fontSize=28*i,this.pwdInput.style.fontSize=28*i,this.pwdInput.style.top=t.y*i+"px",this.pwdInput.style.left=(t.x-32)*i+"px"}},n.onAutoLoginChange=function(){this.uiSKin.checkAuto.selected?T.setLocalVar("autoLogin","1"):T.setLocalVar("autoLogin","0")},n.loginAccount=function(){var t=(T.getLocalVar("useraccount","0"),T.getLocalVar("userpwd","0"),T.getLocalVar("userToken","0"));"0"!=t&&""!=t&&(g.instance.token=t,W.instance.Request(W.httpUrl+"sys/userEnter?",this,this.onLoginBack,JSON.stringify(this.param),"post"))},n.onPwdLogin=function(){this.logType=0},n.onMsgLogin=function(){this.logType=1},n.onGetCode=function(){if(this.uiSKin.input_account.text.length<11)return Ti.window.alert("请填写正确的手机号"),void 0;var t={mobileNumber:this.uiSKin.input_account.text,smsToken:T.uuid()};this.uuId=t.smsToken,W.instance.Request(W.httpUrl+"sys/getMobileSmsCode?",this,this.onGetPhoneCodeBack,JSON.stringify(t),"post")},n.onGetPhoneCodeBack=function(){},n.countdownCode=function(){},n.onAccountKeyUp=function(t){9==t.keyCode&&this.uiSKin.input_account.focus&&this.pwdInput.focus(),13==t.keyCode&&this.onLogin(),t.stopPropagation()},n.onStageKeyUp=function(t){9==t.keyCode&&(Ti.window.document.activeElement==this.pwdInput?(this.pwdInput.blur(),this.uiSKin.input_account.textField.nativeInput.focus(),this.uiSKin.input_account.focus=!0,this.uiSKin.accoutImg.skin="commers/inputfocus.png",this.uiSKin.pwdImg.skin="commers/inputbg.png"):this.uiSKin.input_account.focus&&(this.uiSKin.accoutImg.skin="commers/inputbg.png",this.uiSKin.pwdImg.skin="commers/inputfocus.png",this.pwdInput.focus())),13==t.keyCode&&this.onLogin()},n.onLogin=function(){if(11!=this.uiSKin.input_account.text.length)return E.showAlert("请填写正确的账号"),void 0;if(0==this.logType&&this.pwdInput.value<6)return E.showAlert("密码位数至少是6位"),void 0;var t={};t.mobileNumber=this.uiSKin.input_account.text,0==this.logType&&(t.auth=this.pwdInput.value,t.method=0),W.instance.Request(W.httpUrl+"sys/login?",this,this.onLoginBackByPwd,JSON.stringify(t),"post")},n.onLoginBackByPwd=function(t){this.onLoginBack(t)},n.onLoginBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(g.instance.isLogin=!0,g.instance.userAccount=i.data.mobileNumber,g.instance.founderPhone=i.data.mobileNumber,g.instance.userName=i.data.nickName,g.instance.step=i.data.step,g.instance.firstOrder=i.data.firstOrder,g.instance.accountType=i.data.userType,g.instance.privilege=i.data.userPermisson,null!=i.data.token&&""!=i.data.token&&(g.instance.token=i.data.token,T.setLocalVar("userToken",g.instance.token)),Ln.instance.event("LOGIN_SUCESS",g.instance.userAccount),g.instance.loginTime=(new Date).getTime(),T.setLocalVar("loginTime",g.instance.loginTime),E.instance.closeView("VIEW_lOGPANEL"),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null)):(this.uiSKin.accountError.visible=202==i.status,this.uiSKin.pwdError.visible=204==i.status)}},n.getCompanyInfoBack=function(t){var i=JSON.parse(t);"1058"==i.code?E.instance.openView("VIEW_REGPANEL",!0,{step:2}):E.instance.openView("VIEW_FIRST_PAGE")},n.onRegister=function(){E.instance.openView("VIEW_REGPANEL",!0)},n.onResetpwd=function(){E.instance.openView("VIEW_CHANGEPWD",!0)},n.onEnable=function(){},n.onDestroy=function(){e.timer.clear(this,this.updatePwdInputPos),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),e.stage.off("keydown",this,this.onStageKeyUp),Ln.instance.off("OPEN_PANEL_VIEW",this,this.onOpenView),Ln.instance.off("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputPwd),null!=this.pwdInput&&(Ti.document.body.removeChild(this.pwdInput),this.pwdInput=null)},i}(Dn),ds=function(t){function i(){this.uiSkin=null,this.param=null,this.grpVo=null,this.curPage=1,this.totalPage=1,this.pageSize=30,this.province=null,this.zoneid=null,this.areaid=null,this.hasSelectAddressId=null,i.__super.call(this)}s(i,"script.usercenter.AddrGroupMgrController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.grpVo=this.param,this.updateName(),this.uiSkin.addressList.itemRender=gc,this.uiSkin.addressList.repeatX=1,this.uiSkin.addressList.spaceY=0,this.uiSkin.addressList.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addressList.selectEnable=!1;var t=[];this.uiSkin.addressList.array=t,this.uiSkin.selectall.on("change",this,this.changeSelectedAll),this.uiSkin.delBatchBtn.on("click",this,this.batchDeleteAddr),this.uiSkin.searchInput.maxChars=8,this.uiSkin.closebtn.on("click",this,this.closeView),this.uiSkin.addAddrbtn.on("click",this,this.showAddressList),this.uiSkin.prePage.on("click",this,this.onPrevPage),this.uiSkin.nextPage.on("click",this,this.onNextPage),this.uiSkin.searchInput.maxChars=20,this.uiSkin.searchbtn.on("click",this,this.onSearchAddress),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),Ln.instance.on("INSERT_ADDRESS_TO_GROUP",this,this.refreshList),Ln.instance.on("DELETE_ADDRESS_FROM_GROUP",this,this.deleteAddress),this.updateList()},e.startDragPanel=function(t){this.uiSkin.dragImg.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.stopDrag()},e.updateName=function(){this.uiSkin.grpName.text=this.grpVo.groupName+"("+this.grpVo.count+")"},e.updateAddressList=function(t){t.setData(t.dataSource)},e.changeSelectedAll=function(){for(var t=0;t<this.uiSkin.addressList.array.length;t++)this.uiSkin.addressList.array[t].selected=this.uiSkin.selectall.selected;for(t=0;t<this.uiSkin.addressList.cells.length;t++)this.uiSkin.addressList.cells[t].changeSelectState(this.uiSkin.selectall.selected)},e.batchDeleteAddr=function(){for(var t=[],i=0;i<this.uiSkin.addressList.array.length;i++)this.uiSkin.addressList.array[i].selected&&t.push(this.uiSkin.addressList.array[i]);return t.length<=0?(E.showAlert("未选择要删除的地址"),void 0):(E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.onConfirmDel,msg:"确定移出这"+t.length+"个地址吗？"}),void 0)},e.onConfirmDel=function(t){if(t){for(var i=[],e=0;e<this.uiSkin.addressList.array.length;e++)this.uiSkin.addressList.array[e].selected&&i.push(this.uiSkin.addressList.array[e].id);var n={};n.expressGroupId=this.grpVo.groupId,n.expressIds=i,W.instance.Request(W.httpUrl+"org/express/group/deleteExpress?",this,this.adddeleteBack,JSON.stringify(n),"post")
}},e.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new Tn(i.data.expressList[n]));this.uiSkin.addressList.array=e,this.totalPage=Math.ceil(i.data.totalCount/this.pageSize),this.totalPage<1&&(this.totalPage=1),this.uiSkin.pageNum.text=this.curPage+"/"+this.totalPage}}},e.onPrevPage=function(){this.curPage<=1||(this.curPage--,this.hasSelectAddressId=[],this.updateList())},e.onNextPage=function(){this.curPage>=this.totalPage||(this.curPage++,this.hasSelectAddressId=[],this.updateList())},e.onSearchAddress=function(){this.curPage=1,this.updateList()},e.deleteAddress=function(t){var i={};i.expressGroupId=this.grpVo.groupId,i.expressIds=[t],W.instance.Request(W.httpUrl+"org/express/group/deleteExpress?",this,this.adddeleteBack,JSON.stringify(i),"post")},e.adddeleteBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.grpVo.count=parseInt(i.data.expressCount),this.updateName(),this.updateList())}},e.refreshList=function(t){this.grpVo.count=t,this.updateName(),this.updateList()},e.updateList=function(){var t="expressGroupId="+this.grpVo.groupId+"&mobileNumber="+this.uiSkin.searchInput.text+"&pageNo="+this.curPage+"&pageSize="+this.pageSize;W.instance.Request(W.httpUrl+"org/express/group/pagingExpress?"+t,this,this.getMyAddressBack,null,null)},e.showAddressList=function(){E.instance.openView("VIEW_ADDRESS_LIST_PANEL",!1,this.grpVo)},e.closeView=function(){E.instance.closeView("VIEW_ADDRESS_GROUP_MGR_PANEL"),Ln.instance.event("CLOSE_PANEL_VIEW","VIEW_ADDRESS_GROUP_MGR_PANEL")},e.onDestroy=function(){Ln.instance.off("INSERT_ADDRESS_TO_GROUP",this,this.refreshList),Ln.instance.off("DELETE_ADDRESS_FROM_GROUP",this,this.deleteAddress)},i}(Dn),_s=function(t){function i(){this.uiSkin=null,this.param=null,this.picBox=null,this.picInfo=null,this.hasRetry=!1,i.__super.call(this)}s(i,"script.order.CbcPreviewController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.waittingPanel.visible=!1,this.uiSkin.imgList.itemRender=Pl,this.uiSkin.imgList.repeatX=4,this.uiSkin.imgList.spaceX=7,this.uiSkin.imgList.renderHandler=new c(this,this.updateImageList),this.uiSkin.imgList.selectEnable=!1,this.uiSkin.imgList.array=[],this.uiSkin.loadingTips.visible=!1,this.uiSkin.rollTip.visible=!1,this.uiSkin.closeBtn.on("click",this,function(){E.instance.closeView("VIEW_CBC_PREVIEW_PANEL"),Ti.window.showCbc(!1)}),this.uiSkin.okbtn.on("click",this,function(){E.instance.closeView("VIEW_CBC_PREVIEW_PANEL"),Ti.window.showCbc(!1)}),this.picInfo=this.param[this.param.length-1],this.picBox=Ti.window.document.getElementById("picBox"),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.onResizeBrower(),Ln.instance.on("UPDATE_RELATED_PIC",this,this.updateCbcEffect),this.initCbcDiv()},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth;var t=Ti.clientWidth/e.stage.width;this.picBox.style.zoom=1>t?100*t+"%":"100%"},n.updateCbcEffect=function(t,i){this.picInfo[t]=i;var e=[];e.push(this.picInfo.fid),e.push(this.picInfo.partWhiteFid),"0"==this.picInfo.backFid?e.push(this.picInfo.fid):e.push(this.picInfo.backFid),e.push(this.picInfo.yixingFid);for(var n=["frontImg","maskImg","backImg"],s=0;3>s;s++)null!=e[s]&&""!=e[s]&&"0"!=e[s]?Ti.window.readLocalImg(W.biggerPicUrl+e[s]+".jpg",n[s],1==s):Ti.window.readLocalImg("",n[s],1==s);null!=e[3]&&""!=e[3]&&"0"!=e[3]?Ti.window.setMaskImg(W.biggerPicUrl+e[3]+".jpg"):Ti.window.setMaskImg(""),this.uiSkin.imgList.refresh()},n.initCbcDiv=function(){Ti.window.showCbc(!0);for(var t=this.param,i=["frontImg","maskImg","backImg"],e=0;3>e;e++)null!=t[e]&&""!=t[e]&&"0"!=t[e]&&Ti.window.readLocalImg(W.biggerPicUrl+t[e]+".jpg",i[e],1==e);null!=t[3]&&""!=t[3]&&"0"!=t[3]&&Ti.window.setMaskImg(W.biggerPicUrl+t[3]+".jpg")},n.updateImageList=function(t){t.setData(t.dataSource)},n.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("UPDATE_RELATED_PIC",this,this.updateCbcEffect)},i}(Dn),ps=function(t){function i(){this.uiSkin=null,this.matCategoryItems=null,this.materialItems=null,this.categotySpaceX=5,this.categotySpaceY=5,this.matItemSpaceX=10,this.matItemSpaceY=36,i.__super.call(this)}s(i,"script.workpanel.MaterialChooseController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner;var t=[];if(null!=k.instance.productList)for(var i=0;i<k.instance.productList.length;i++)if("户内写真"==k.instance.productList[i].matclassname)t.unshift(k.instance.productList[i]);else if("户外写真"==k.instance.productList[i].matclassname)if(t.length>0&&"户内写真"==t[0].matclassname){var e=t.shift();t.unshift(k.instance.productList[i]),t.unshift(e)}else t.unshift(k.instance.productList[i]);else t.push(k.instance.productList[i]);this.initMaterialCategory(t)},e.initMaterialCategory=function(t){this.matCategoryItems=[];for(var i=0,e=0;e<t.length;e++){var n=new vc;n.setData(t[e]),this.uiSkin.tabpanel.addChild(n),n.selbtn.on("click",this,this.onSlecteMatClass,[t[e],e]),0==e?(n.x=0,n.y=0):n.width+this.matCategoryItems[e-1].x+this.matCategoryItems[e-1].width+this.categotySpaceX>this.uiSkin.tabpanel.width?(n.x=0,i+=n.height+this.categotySpaceY,n.y=i):(n.x=this.matCategoryItems[e-1].x+this.matCategoryItems[e-1].width+this.categotySpaceX,n.y=i),this.matCategoryItems.push(n)}t.length>0&&this.onSlecteMatClass(t[0],0)},e.onSlecteMatClass=function(t,i){var e;for(var n in this.matCategoryItems)e=this.matCategoryItems[n],e.selbtn.selected=!1;this.matCategoryItems[i].selbtn.selected=!0,this.refreshMatList(t)},e.refreshMatList=function(t){var i=this;if(null!=t.childMatList){var e=t.childMatList;this.refreshMatItems(e)}else{var n=k.instance.getSelectedOutPutCenter();W.instance.Request(W.httpUrl+"business/listProduct?webCode=001&addressId="+k.instance.selectAddress.zoneid+"&prodCatName="+t.matclassname+"&manufacturerCodeList="+n.toString()+"&customerCode="+g.instance.founderPhone+"&clientCode="+g.instance.clientCode+"&orderSource="+k.instance.orderType,this,function(e){if(!this.destroyed){var n=JSON.parse(e);if(!n.hasOwnProperty("status")){t.childMatList=[];for(var s={},r=0;r<n.length;r++)if(s.hasOwnProperty(n[r].prodCode))s[n[r].prodCode].priority>k.instance.getManuFacturePriority(n[r].manufacturerCode)?(a=new v(n[r]),a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a):n[r].isClientProd&&(a=new v(n[r]),s[n[r].uniqueCode]=a);else{var a=new v(n[r]);a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a}for(var o in s)t.childMatList.push(s[o]);t.childMatList.sort(i.sortMaterial),t.childMatList=t.childMatList.concat(t.childCategoryList),i.refreshMatItems(t.childMatList)}}},null,null)}},e.refreshMatItems=function(t){this.materialItems=[];for(var i=0;this.uiSkin.matpanel.numChildren>0;)this.uiSkin.matpanel.removeChildAt(0);for(var e=0;e<t.length;e++){var n=new Tl;n.setData(t[e]),this.uiSkin.matpanel.addChild(n),0==e?(n.x=0,n.y=0):n.width+this.materialItems[e-1].x+this.materialItems[e-1].width+this.matItemSpaceX>this.uiSkin.matpanel.width?(n.x=0,i+=n.height+this.matItemSpaceY,n.y=i):(n.x=this.materialItems[e-1].x+this.materialItems[e-1].width+this.matItemSpaceX,n.y=i),this.materialItems.push(n)}},e.sortMaterial=function(t,i){for(var e=t.materialCode,n=i.materialCode,s="",r=0;r<e.length;r++)e.charCodeAt(r)<=57&&e.charCodeAt(r)>=48&&(s+=e[r]);for(var a="",r=0;r<n.length;r++)n.charCodeAt(r)<=57&&n.charCodeAt(r)>=48&&(a+=n[r]);return parseInt(s)<=parseInt(a)?-1:1},i}(Dn),fs=function(t){function i(){this.uiSkin=null,this.directTree=[],this.param=null,this.fileListData=null,this.file=null,this.curFileList=null,this.autoFreshTime=0,this.curCustomer=null,i.__super.call(this)}s(i,"script.picUpload.PicManagerController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.directTree=[],this.uiSkin=this.owner,this.uiSkin.btnNewFolder.on("click",this,this.onCreateNewFolder),this.uiSkin.customListPanel.visible=!1,this.uiSkin.curCustomName.text=g.instance.company,this.uiSkin.curCustomName.editable=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),H.instance.selectFolders=[],this.updateSelectFolderNum(),this.uiSkin.picList.itemRender=zl,this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=20,this.uiSkin.picList.renderHandler=new c(this,this.updatePicInfoItem),this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1,this.uiSkin.upgradestore.on("click",this,this.onShowBuyStorage);for(var i=0;3>i;i++)this.uiSkin["flder"+i].on("click",this,this.onClickTopDirectLbl,[i+1]);this.uiSkin.btnroot.on("click",this,this.backToRootDir),this.uiSkin.btnUploadPic.on("click",this,this.onShowUploadView),this.uiSkin.radiosel.on("click",this,this.onSelectAllPic),this.uiSkin.radiosel.selected=!1,this.uiSkin.freshbtn.on("click",this,this.onFreshList),this.uiSkin.refreshTxt.on("click",this,this.onFreshList),this.uiSkin.batchDelete.on("click",this,this.onClickAllSelectedFolders),this.uiSkin.picList.array=[],W.instance.Request(W.httpUrl+"fs/list?dirId="+g.instance.dirId,this,this.onGetTopDirListBack,null,null),this.uiSkin.btnorder.on("click",this,function(){var i;for(var e in H.instance.haselectPic)if(i=H.instance.haselectPic[e],0==T.isValidPic(i))return E.showAlert("只有格式为JPG,JPEG,TIF,TIFF,并且颜色格式为CMYK的图片才能下单"),void 0;var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++;return s>100?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0):(Ln.instance.event("SHOW_CONTENT_PANEL",[Th,0,t.curCustomer]),void 0)}),this.initFileOpen(),Ln.instance.on("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.on("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.on("UPLOAD_FILE_SUCESS",this,this.uploadFileSucess),Ln.instance.on("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("START_SELECT_YIXING_PIC",this,this.showRelatedPanel),Ln.instance.on("START_SELECT_BACK_PIC",this,this.showRelatedPanel),Ln.instance.on("START_SELECT_PARTWHITE_PIC",this,this.showRelatedPanel),Ln.instance.on("PAY_ORDER_SUCESS",this,this.onBuyStorageSucess),Ln.instance.on("UPDATE_SELECT_FOLDER",this,this.updateSelectFolderNum),Ln.instance.on("CREATE_FOLDER_SUCESS",this,this.onCreateDirBack),Ln.instance.on("SELECT_CUSTOMER",this,this.onSelectCustomer),this.uiSkin.picList.on("mousedown",this,this.onMouseDwons),this.uiSkin.picList.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.picList.on("mouseover",this,this.onMouseDwons),this.uiSkin.picList.on("mouseout",this,this.onMouseUpHandler),this.uiSkin.tifAi.on("click",this,this.onSetTifAi),H.instance.haselectPic={},this.uiSkin.searchInput.on("input",this,this.onSearchInput),this.uiSkin.on("removed",this,this.onRemovedFromStage),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,H.instance.curFileList=[],H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:g.instance.dirId},0),this.directTree.push(H.instance.curSelectDir)},n.updatePicInfoItem=function(t){t.setData(t.dataSource)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.picList.refresh()},n.onStartSelectRelate=function(){},n.onStartSelectBackRelate=function(){},n.onStartSelectPartWhiteRelate=function(){},n.showRelatedPanel=function(){for(var t=this.filtUnFitImage(),i={},e=0;e<t.length;e++){t[e].relatedTimes=0;for(var n=0;n<H.instance.curFileList.length;n++)(H.instance.curFileList[n].yixingFid==t[e].fid||H.instance.curFileList[n].backFid==t[e].fid||H.instance.curFileList[n].partWhiteFid==t[e].fid)&&t[e].relatedTimes++}t.sort(function(t,i){return t.relatedTimes<i.relatedTimes?-1:1}),i.files=t;var s=[];null==H.instance.curOperateFile||H.instance.haselectPic.hasOwnProperty(H.instance.curOperateFile.fid)||(H.instance.haselectPic[H.instance.curOperateFile.fid]=H.instance.curOperateFile);var r;for(var a in H.instance.haselectPic){r=H.instance.haselectPic[a];var o=Math.abs(H.instance.curOperateFile.picPhysicWidth-r.picPhysicWidth)/H.instance.curOperateFile.picPhysicWidth,h=Math.abs(H.instance.curOperateFile.picPhysicHeight-r.picPhysicHeight)/H.instance.curOperateFile.picPhysicHeight;.01>o&&.01>h&&s.push(r)}i.originfiles=s,E.instance.openView("RELATED_PIC_CHOOSE_PANEL",!1,i)},n.stopLast=function(t){for(var i=this.uiSkin.picList.cells,e=0;e<i.length;e++)null!=i[e]&&i[e].picInfo!=t&&i[e].resetRelatedBtn()},n.filtUnFitImage=function(){var t=H.instance.curOperateFile;if(null!=t){for(var i=H.instance.curOperateSelType,e=[],n=0;n<H.instance.curFileList.length;n++){var s=H.instance.curFileList[n];if(null!=s&&1==s.picType){var r=Math.abs(t.picPhysicWidth-s.picPhysicWidth)/t.picPhysicWidth,a=Math.abs(t.picPhysicHeight-s.picPhysicHeight)/t.picPhysicHeight;r>.01||a>.01||(0==i||2==i?("GRAY"==s.colorspace.toLocaleUpperCase()||s.isCdr)&&e.push(H.instance.curFileList[n]):1==i&&"CMYK"!=s.colorspace||e.push(H.instance.curFileList[n]))}}return e}},n.stopRightSelectRelate=function(){e.stage.off("click",this,this.stopSelectRelate),C.getInstance().stopGlobalTips(),this.cancelSelected(),this.stopLast(null),H.instance.curOperateFile=null,e.stage.off("rightclick",this,this.stopSelectRelate),e.stage.off("doubleclick",this,this.stopRightSelectRelate)},n.stopSelectRelate=function(t){null!=t&&this.uiSkin.picList.hitTestPoint(t.stageX,t.stageY)||(e.stage.off("click",this,this.stopSelectRelate),this.cancelSelected(),C.getInstance().stopGlobalTips(),this.stopLast(null),H.instance.curOperateFile=null,e.stage.off("rightclick",this,this.stopSelectRelate),e.stage.off("doubleclick",this,this.stopRightSelectRelate))},n.cancelSelected=function(){if(null!=H.instance.curOperateFile)for(var t=0;t<this.uiSkin.picList.cells.length;t++){var i=this.uiSkin.picList.cells[t];if(null!=i&&i.picInfo==H.instance.curOperateFile){i.canCelSelected();break}}for(var t=0;t<this.uiSkin.picList.cells.length;t++){var e=this.uiSkin.picList.cells[t].picInfo;null!=e&&this.uiSkin.picList.cells[t].disableItem(!1)}},n.onBuyStorageSucess=function(){W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,"post")},n.onGetLeftCapacitBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(null!=this.uiSkin&&!this.uiSkin.destroyed&&"0"==i.code){var e=parseInt(i.data.storageUsedSize)/1024/1024,n=parseInt(i.data.storageDefaultSize)/1e3/1e3;g.instance.hasBuySorage=i.data.storageSize,g.instance.hasBuySorage>0&&(n=g.instance.hasBuySorage),this.uiSkin.prgcap.value=parseInt(i.data.storageUsedSize)<parseInt(i.data.storageDefaultSize)?parseInt(i.data.storageUsedSize)/parseInt(i.data.storageDefaultSize):1,this.uiSkin.leftcapacity.text=e.toFixed(0)+"M/"+n+"G",g.instance.hasBuySorage>0&&(g.instance.storageBuyDate=new Date(Date.parse(T.convertDateStr(i.data.storageDate))).getTime(),g.instance.storageExpiredDate=new Date(Date.parse(T.convertDateStr(i.data.storageExpireDate))).getTime())}}},n.onSelectAllPic=function(){var t=this.curFileList;if(null!=t){for(var i=0;i<t.length;i++)if(1==t[i].picType)if(this.uiSkin.radiosel.selected){var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);!e&&T.checkFileIsImg(t[i])&&0!=t[i].picPhysicWidth&&(H.instance.haselectPic[t[i].fid]=t[i])}else{var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);e&&delete H.instance.haselectPic[t[i].fid]}else this.uiSkin.radiosel.selected?H.instance.selectFolders.indexOf(t[i].dpath)<0&&H.instance.selectFolders.push(t[i].dpath):H.instance.selectFolders=[];for(var i=0;i<this.uiSkin.picList.cells.length;i++)null!=this.uiSkin.picList.cells[i].picInfo&&T.checkFileIsImg(this.uiSkin.picList.cells[i].picInfo)&&0!=this.uiSkin.picList.cells[i].picInfo.picPhysicWidth?this.uiSkin.picList.cells[i].sel.selected=this.uiSkin.radiosel.selected:null!=this.uiSkin.picList.cells[i].picInfo&&0==this.uiSkin.picList.cells[i].picInfo.picType&&(this.uiSkin.picList.cells[i].sel.selected=this.uiSkin.radiosel.selected);var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++;this.uiSkin.btnorder.label=s>0?"我要下单("+s+"张)":"我要下单",this.updateSelectFolderNum()}},n.updateSelectFolderNum=function(){},n.onClickAllSelectedFolders=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"是否批量删除所选文件？",caller:this,callback:this.confirmDeleteFolder})},n.confirmDeleteFolder=function(t){t&&this.deleteFolder()},n.deleteFolder=function(){var t="";for(var i in H.instance.haselectPic)t=i;if(""!=t)W.instance.Request(W.httpUrl+"fs/file/delete?",this,this.onDeleteFileBack,JSON.stringify({fileID:t}),"post"),delete H.instance.haselectPic[t];else{this.getFileList();var e,n=0;for(var s in H.instance.haselectPic)e=H.instance.haselectPic[s],n++;this.uiSkin.btnorder.label=n>0?"我要下单("+n+"张)":"我要下单"}},n.onDeleteFileBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.deleteFolder()}},n.initFileOpen=function(){var t=this;this.file=Ti.document.createElement("input"),this.file.style="filter:alpha(opacity=0);opacity:0;width: 100;height:34px;left:395px;top:-248",this.file.multiple="multiple",this.file.accept=".jpg,.jpeg,.tif,.tif,.png",this.file.type="file",this.file.style.position="absolute",this.file.style.zIndex=999,Ti.document.body.appendChild(this.file),this.file.onchange=function(){t.fileListData=[];for(var i=0;i<t.file.files.length;i++){if(!T.isValidString(t.file.files[i].name))return E.showAlert("图片文件名不能包含特殊字符及表情，请修改后重新上传"),void 0;t.file.files[i].progress=0,t.fileListData.push(t.file.files[i])}U.instance.showWaitingView(1e3),E.instance.openView("VIEW_MYPICPANEL",!1,t.fileListData)},Ti.window.uploadHandle=this},n.dragFileToUpload=function(){var t=this;this.fileListData=[],U.instance.showWaitingView(),e.timer.once(1e3,this,function(){U.instance.hideWaitingView(),"VIEW_MYPICPANEL"!=E.instance.getTopViewName()&&(console.log("打开 上传界面"),E.instance.openView("VIEW_MYPICPANEL",!1,t.fileListData))})},n.addFile=function(t){this.fileListData.push(t)},n.onshowOrder=function(){var t;for(var i in H.instance.haselectPic)if(t=H.instance.haselectPic[i],0==T.isValidPic(t))return E.showAlert("只有格式为JPG,JPEG,TIF,TIFF,并且颜色格式为CMYK的图片才能下单"),void 0;var e,n=0;for(var s in H.instance.haselectPic)e=H.instance.haselectPic[s],n++;return n>100?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0):(k.instance.orderType="Penyin",E.instance.openView("VIEW_PAINT_ORDER",!0),void 0)},n.onshowZipaiOrder=function(){k.instance.orderType="Zipai";var t;for(var i in H.instance.haselectPic)if(t=H.instance.haselectPic[i],0==T.isValidPicZipai(t))return E.showAlert("有图片不能用于字牌下单，请重新上传或选择其他图片"),void 0;E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!0)},n.confirmOrderNow=function(t){t&&E.instance.openView("VIEW_PAINT_ORDER",!0)},n.seletPicToOrder=function(t){var i=t[0];if(T.checkFileIsImg(i)&&0!=i.picPhysicWidth){var e=H.instance.haselectPic.hasOwnProperty(i.fid);e?delete H.instance.haselectPic[i.fid]:H.instance.haselectPic[i.fid]=i;var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++;this.uiSkin.btnorder.label=s>0?"我要下单("+s+"张)":"我要下单"}},n.onGetTopDirListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(H.instance.initCurDirFiles(i),this.uiSkin.radiosel.selected=!1,this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList,W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,null)):205==i.status&&E.instance.openView("VIEW_USERCENTER",!0)}},n.getFileList=function(){W.instance.Request(W.httpUrl+"fs/list?dirId="+H.instance.curSelectDir.dpath,this,this.onGetDirFileListBack,null,null),W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,null)},n.onGetDirFileListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.radiosel.selected=!1,H.instance.initCurDirFiles(i),this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList),H.instance.selectFolders=[],this.updateSelectFolderNum(),H.instance.hasUnDealPic()||e.timer.clear(this,this.refreshFileList)}},n.uploadFileSucess=function(){this.autoFreshTime=0,this.getFileList(),e.timer.loop(2e3,this,this.refreshFileList)},n.refreshFileList=function(){this.autoFreshTime>10&&e.timer.clear(this,this.refreshFileList),this.autoFreshTime++,this.getFileList()},n.onBackToMain=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},n.onSearchInput=function(){if(null!=this.curFileList){for(var t=[],i=0;i<this.curFileList.length;i++)this.curFileList[i].directName.indexOf(this.uiSkin.searchInput.text)>=0&&t.push(this.curFileList[i]);this.uiSkin.radiosel.selected=!1,this.uiSkin.picList.array=t}},n.onSelectCustomer=function(t){this.uiSkin.curCustomName.text=t.customerName,this.curCustomer=t,null==this.curCustomer||"0"==this.curCustomer.id?(W.instance.Request(W.httpUrl+"fs/list?dirId="+g.instance.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:g.instance.dirId},0)):(W.instance.Request(W.httpUrl+"fs/list?dirId="+this.curCustomer.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:this.curCustomer.dirId},0)),this.directTree=[],this.directTree.push(H.instance.curSelectDir),this.updateCurDirectLabel()},n.onDestroy=function(){Ln.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.off("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("START_SELECT_YIXING_PIC",this,this.onStartSelectRelate),Ln.instance.off("START_SELECT_BACK_PIC",this,this.onStartSelectBackRelate),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onBuyStorageSucess),Ln.instance.off("UPDATE_SELECT_FOLDER",this,this.updateSelectFolderNum),Ln.instance.off("START_SELECT_PARTWHITE_PIC",this,this.onStartSelectPartWhiteRelate),Ln.instance.off("CREATE_FOLDER_SUCESS",this,this.onCreateDirBack),Ln.instance.off("UPLOAD_FILE_SUCESS",this,this.uploadFileSucess),Ln.instance.off("SELECT_CUSTOMER",this,this.onSelectCustomer),e.timer.clear(this,this.refreshFileList),Ln.instance.off("STOP_SELECT_RELATE_PIC",this,this.stopSelectRelate),Ti.document.body.removeChild(this.file),this.file=null,Ti.window.uploadHandle=null,Ti.window.canupload=!1,C.getInstance().stopGlobalTips(),H.instance.curOperateFile=null},n.onRemovedFromStage=function(){Ln.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.off("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onShowUploadView=function(){null==H.instance.curSelectDir||"0"==H.instance.curSelectDir.directId,this.file.click(),this.file.value},n.onSureCreeate=function(){},n.onCreateDirBack=function(t){this.uiSkin.picList.addItem(t),this.uiSkin.radiosel.selected=!1,this.curFileList=this.uiSkin.picList.array},n.onSelectChildFolder=function(t){H.instance.curSelectDir=t,this.directTree.push(H.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.backToRootDir=function(){if(!(this.directTree.length<=0)){this.directTree=[];var t;t=null==this.curCustomer||"0"==this.curCustomer.id?g.instance.dirId:this.curCustomer.dirId,H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:t},0),this.directTree.push(H.instance.curSelectDir),W.instance.Request(W.httpUrl+"fs/list?dirId="+t,this,this.onGetTopDirListBack,null,null),this.updateCurDirectLabel()}},n.onClickParentFolder=function(){this.directTree.length>1?(H.instance.curSelectDir=this.directTree[this.directTree.length-2],this.directTree.splice(this.directTree.length-1,1),this.updateCurDirectLabel(),this.getFileList()):this.backToRootDir()},n.onFreshList=function(){this.getFileList()},n.onClickTopDirectLbl=function(t){t!=this.directTree.length-1&&(H.instance.curSelectDir=this.directTree[t],this.directTree.splice(t+1,this.directTree.length-t-1),this.updateCurDirectLabel(),this.getFileList())},n.updateCurDirectLabel=function(){this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=1;t<this.directTree.length;t++)4>t&&(this.uiSkin["flder"+(t-1)].text=this.directTree[t].directName+">",this.uiSkin["flder"+(t-1)].visible=!0,t>1&&(this.uiSkin["flder"+(t-1)].x=this.uiSkin["flder"+(t-2)].x+this.uiSkin["flder"+(t-2)].textField.textWidth+2))},n.onSetTifAi=function(){var t,i=[];for(var e in H.instance.haselectPic)t=H.instance.haselectPic[e],("TIF"==t.picClass.toUpperCase()||"TIFF"==t.picClass.toUpperCase())&&(t.hasTifAi||i.push(t.fid));if(i.length<=0)return E.showAlert("未选择tif文件或者tif文件已处理"),void 0;var n={fileId:i[0]};W.instance.Request(W.httpUrl+W.tifAiSetting,this,this.onTifAiBack,JSON.stringify(n),"post")},n.onTifAiBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&E.showAlert("请求处理成功，请等待AI处理完成")}},n.onShowBuyStorage=function(){E.instance.openView("VIEW_BUY_STORAGE_PANEL")},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onCreateNewFolder=function(){E.instance.openView("VIEW_CREATE_FOLDER_PANEL",!1,this.directTree)},i}(Dn),ms=function(i){function n(){this.uiSkin=null,n.__super.call(this)}s(n,"script.usercenter.ChargeControl",i);var r=n.prototype;return r.onStart=function(){this.uiSkin=this.owner,this.uiSkin.accout.text=g.instance.userAccount,W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null),this.uiSkin.moneytxt.text="--",this.uiSkin.chargeinput.restrict="0-9.",this.uiSkin.chargeinput.maxChars=8,this.uiSkin.confirmmoney.restrict="0-9",this.uiSkin.confirmmoney.maxChars=8;var t=e.loader.getRes("config.json?"+g.instance.configVersion);this.uiSkin.companyname.text=t.chargeCompanyName,this.uiSkin.bank.text=t.bank,this.uiSkin.account.text=t.account,this.uiSkin.otherInfo.text=t.otherInfo,this.uiSkin.inputmoneypanel.visible=!1,this.uiSkin.copyname.on("click",this,this.copytext,[this.uiSkin.companyname.text]),this.uiSkin.copybank.on("click",this,this.copytext,[this.uiSkin.bank.text]),this.uiSkin.copyaccount.on("click",this,this.copytext,[this.uiSkin.account.text]),this.uiSkin.finishcharge.on("click",this,this.onShowInputMoney),this.uiSkin.closeinput.on("click",this,this.onHideInputMoney),this.uiSkin.confirmcharge.on("click",this,this.onChargeNow),this.uiSkin.sendcharge.on("click",this,this.onSendToPublicCharge),this.uiSkin.chargerecord.on("click",this,function(){E.instance.openView("VIEW_PUBLIC_CHARGE_RECORD_PANEL")})},r.copytext=function(i){var e=Ti.document.createElement("input");e.type="text",e.value=i,Ti.document.body.appendChild(e),e.select(),t.document.execCommand("copy"),Ti.document.body.removeChild(e)},r.onShowInputMoney=function(){this.uiSkin.inputmoneypanel.visible=!0,this.uiSkin.confirmmoney.text="0"},r.onHideInputMoney=function(){this.uiSkin.inputmoneypanel.visible=!1},r.onSendToPublicCharge=function(){if(""==this.uiSkin.confirmmoney.text)return E.showAlert("请输入转账金额"),void 0;if(parseFloat(this.uiSkin.confirmmoney.text)<=0)return E.showAlert("转账金额不能为0"),void 0;this.uiSkin.inputmoneypanel.visible=!1;var t={amount:this.uiSkin.confirmmoney.text};W.instance.Request(W.httpUrl+"org/corporateRecharge?",this,this.onsendChargeBack,JSON.stringify(t),"post")},r.onsendChargeBack=function(t){var i=JSON.parse(t);"0"==i.code?E.showAlert("请求成功，请等待工作人员确认，确认成功后将短信提示您"):E.showAlert("请求失败，请点击【转账记录】检查您是否有未处理的对公充值记录！")},r.onChargeNow=function(){if(""==this.uiSkin.chargeinput.text)return E.showAlert("请输入充值金额"),void 0;if("0"==this.uiSkin.chargeinput.text)return E.showAlert("充值金额不能为0"),void 0;if(0==g.instance.accountType&&"0"==g.instance.privilege[1])return E.showAlert("您没有充值的权限,请联系管理者开放权限"),void 0;var t=Number(this.uiSkin.chargeinput.text);W.instance.Request(W.httpUrl+"org/recharge?",this,this.getRechargeRequestBack,JSON.stringify({amount:t.toString()}),"post"),E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"是否支付成功？",caller:this,callback:this.confirmSucess,ok:"是",cancel:"否"})},r.getRechargeRequestBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ti.window.open(i.data,null,null,!0)},r.confirmSucess=function(t){t&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null)},r.getCompanyInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.isVipCompany="1"==i.vip,g.instance.factoryMoney=0,g.instance.money=Number(i.data.balance),g.instance.factoryMoney=Number(i.data.factoryBalance),this.uiSkin.moneytxt.text=g.instance.money.toString()+"元",this.uiSkin.factoryMoney.text=g.instance.factoryMoney.toString()+"元",W.instance.Request(W.httpUrl+"business/getToBeTopupAmount?customer_code="+g.instance.userAccount,this,this.getFactoryFreezeBalanceBack,null,null),g.instance.isHidePrice()&&(this.uiSkin.moneytxt.text="****"))}},r.getFactoryFreezeBalanceBack=function(t){if(!this.destroyed){var i=JSON.parse(t);null!=i&&(this.uiSkin.factoryFreezMoney.text=i.tobe_topup_amount+"元")}},n}(Dn),gs=function(t){function i(){this.uiSkin=null,this.step=1,i.__super.call(this)}s(i,"script.prefabScript.OderTopFlowController",t);var e=i.prototype;return e.onEnable=function(){this.uiSkin=this.owner;for(var t=1;5>t;t++){var i=this.uiSkin.getChildByName("step"+t);if(null!=i){var e=i.getChildByName("lbl"),n=i.getChildByName("underline");e.color=this.step==t?"#003dc6":"#485157",n.visible=this.step==t}}},i}(Dn),vs=function(t){function i(){this.uiSkin=null,this.proid="",this.cityid="",this.areaid="",this.townid="",this.policyName="",i.__super.call(this)}s(i,"script.usercenter.EnterPrizeInfoControl",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.changeCompanyInfo.on("click",this,function(){E.instance.openView("VIEW_EDIT_COMPANY_INFO_PANEL")});var i=new ah;this.uiSkin.rightpanel.addChild(i),i.addComponent(Tr),Ti.window.uploadApp=this,this.uiSkin.addBusinessManPanel.visible=!1,this.uiSkin.addBusinessman.on("click",this,function(){t.uiSkin.addBusinessManPanel.visible=!0}),this.uiSkin.closeAdd.on("click",this,function(){t.uiSkin.addBusinessManPanel.visible=!1}),this.uiSkin.confrimAddMan.on("click",this,this.confirmAddBusinessMan),this.uiSkin.businessList.repeatX=1,this.uiSkin.businessList.spaceY=0,this.uiSkin.businessList.itemRender=Nl,this.uiSkin.businessList.renderHandler=new c(this,this.updateBusinessManList),this.uiSkin.businessList.selectEnable=!1,this.uiSkin.businessList.array=[],this.uiSkin.businessName.maxChars=8,this.uiSkin.contactPhone.restrict="0-9",this.uiSkin.contactPhone.maxChars=11,this.uiSkin.leaveGroupBtn.visible=!1,this.uiSkin.leaveGrpPanel.visible=!1,this.uiSkin.closeLeaveBtn.on("click",this,function(){t.uiSkin.leaveGrpPanel.visible=!1}),this.uiSkin.leaveGroupBtn.on("click",this,this.onLeaveGroupRequest),this.uiSkin.verifyCode.restrict="0-9",this.uiSkin.verifyCode.maxChars=8,this.uiSkin.confirmLeave.on("click",this,this.confirmLeaveGroupNow),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null),Ln.instance.on("UPDATE_COMPANY_INFO",this,this.updateCompanyInfo),Ln.instance.on("UPDATE_BUSINESSMAN_LIST",this,this.getBusinessmanList),this.getBusinessmanList()},e.updateCompanyInfo=function(){W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null)},e.changeCompanyInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post")}},e.getCompanyInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(this.policyName="",g.instance.isVipCompany="1"==i.vip,g.instance.money=Number(i.data.balance),g.instance.factoryMoney=Number(i.data.factoryBalance),this.uiSkin.companyName.text=i.data.name,this.uiSkin.companyAddr.text=i.data.addr,this.uiSkin.reditCode.text=i.data.idCode,this.uiSkin.shortName.text=i.data.shortName,g.instance.company=i.data.name,g.instance.companyShort=i.data.shortName,g.instance.founderPhone=i.data.founderMobileNumber,this.proid=i.data.regionId.slice(0,2)+"0000",this.cityid=i.data.regionId.slice(0,4)+"00",this.areaid=i.data.regionId.slice(0,6),this.townid=i.data.regionId,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initView,null,null)):205==i.status
}},e.initView=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data;if(""!=this.proid)for(var n=0;n<e.length;n++)if(e[n].id==this.proid){this.policyName=e[n].areaName+" ";break}W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.proid,this,this.getCityListBack,null,null)}},e.getCityListBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data;if(""!=this.cityid)for(var n=0;n<e.length;n++)if(e[n].id==this.cityid){this.policyName=this.policyName+e[n].areaName+" ";break}W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.cityid,this,this.getAreaListBack,null,null)}},e.getAreaListBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data;if(""!=this.areaid)for(var n=0;n<e.length;n++)if(e[n].id==this.areaid){this.policyName=this.policyName+e[n].areaName+" ";break}W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.areaid,this,this.getTownListBack,null,null)}},e.getTownListBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data;if(""!=this.townid)for(var n=0;n<e.length;n++)if(e[n].id==this.townid){this.policyName=this.policyName+e[n].areaName+" ",this.uiSkin.companyAddr.text=this.policyName+this.uiSkin.companyAddr.text;break}}},e.onLeaveGroupRequest=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.showLeavePanel,msg:"确定退出公司系统将发送验证码到您的账号，请注意查收，是否确定退出公司"})},e.showLeavePanel=function(t){t&&(this.uiSkin.leaveGrpPanel.visible=!0,W.instance.Request(W.httpUrl+"sys/getMobileSmsCode?",this,null,"phone="+g.instance.userAccount,"post"))},e.confirmLeaveGroupNow=function(){if(""==this.uiSkin.verifyCode.text)return E.showAlert("请输入验证码"),void 0;var t="code="+this.uiSkin.verifyCode.text;W.instance.Request(W.httpUrl+"account/leave-group?",this,this.leaveGroupBack,t,"post")},e.leaveGroupBack=function(t){var i=JSON.parse(t);"0"==i.status&&(E.showAlert("退出公司成功"),E.instance.openView("VIEW_FIRST_PAGE",!0),g.instance.accountType=-1,g.instance.founderPhone=null)},e.updateBusinessManList=function(t){t.setData(t.dataSource)},e.confirmAddBusinessMan=function(){if(""==this.uiSkin.businessName.text)return E.showAlert("请输入业务员姓名"),void 0;if(this.uiSkin.contactPhone.text.length<11)return E.showAlert("请输入正确的联系电话"),void 0;var t={};t.mobileNumber=this.uiSkin.contactPhone.text,t.name=this.uiSkin.businessName.text,W.instance.Request(W.httpUrl+W.addBusinessMan,this,this.addBusinessback,JSON.stringify(t),"post")},e.addBusinessback=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.getBusinessmanList(),this.uiSkin.addBusinessManPanel.visible=!1}},e.getBusinessmanList=function(){W.instance.Request(W.httpUrl+W.listBusinessMan,this,this.getBusinessManBack,null,null)},e.getBusinessManBack=function(t){if(!this.destroyed){for(var i=JSON.parse(t),e=i.data,n=[],s=0;s<e.length;s++)n.push(new x(e[s]));this.uiSkin.businessList.array=n}},e.onDestroy=function(){Ln.instance.off("UPDATE_COMPANY_INFO",this,this.updateCompanyInfo),Ln.instance.off("UPDATE_BUSINESSMAN_LIST",this,this.getBusinessmanList)},i}(Dn),Ss=function(t){function i(){this.uiSkin=null,this.curpage=1,this.totalPage=1,this.dateInput=null,this.dateInput2=null,this.curCustomer=null,this.picList=null,this.base64Arr=null,this.excelData=[],this.hasSelectedOrder=null,this.param=null,i.__super.call(this)}s(i,"script.usercenter.WriteOffController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.curCustomer=this.param,this.uiSkin.totalWriteMoney.text=this.curCustomer.balanceMoney.toFixed(2)+"元",this.uiSkin.orderList.itemRender=tc,this.uiSkin.orderList.repeatX=1,this.uiSkin.orderList.spaceY=2,this.uiSkin.orderList.renderHandler=new c(this,this.updateOrderList),this.uiSkin.orderList.selectEnable=!1,this.uiSkin.orderList.array=[],this.uiSkin.orderList.mouseThrough=!0,e.timer.frameLoop(1,this,this.updateDateInputPos);var t=new Date,i=new Date(t.getTime()-864e5),n="beginDate="+T.formatFullDateTime(i,!1)+" 00:00:00&endDate="+T.formatFullDateTime(new Date,!1)+" 23:59:59&option=1&page=1&cleared=0&salerId=0&customerPayment=-1&userId=0&customerId="+this.curCustomer.id;W.instance.Request(W.httpUrl+"order/list?"+n,this,this.onGetOrderListBack,null,null),this.uiSkin.lastpage.on("click",this,this.onLastPage),this.uiSkin.nextpage.on("click",this,this.onNextPage),this.uiSkin.selectMoney.text="0元",this.uiSkin.orderList.on("mousedown",this,this.onMouseDwons),this.uiSkin.orderList.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.selectall.on("click",this,this.onSelectAll),this.uiSkin.closeBtn.on("click",this,function(){E.instance.closeView("WRITE_OFF_ORDER_PANEL")}),this.uiSkin.btnsearch.on("click",this,this.queryOrderList),Ln.instance.on("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.on("OPEN_PANEL_VIEW",this,this.onHideInputDate),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("CHANGE_WRITEOFF_ORDER_SELECTED",this,this.changeSelectedOrder),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.orderList.on("mouseover",this,this.pauseParentScroll),this.uiSkin.orderList.on("mouseout",this,this.resumeParentScroll),this.uiSkin.confirmBtn.on("click",this,this.onConfirmWriteOff),e.stage.on("mouseup",this,this.onMouseUpHandler),Ln.instance.on("DELETE_ORDER_BACK",this,this.getOrderListAgain),this.hasSelectedOrder={},this.initDateSelector()},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onshowInputDate=function(){"WRITE_OFF_ORDER_PANEL"==E.instance.getTopViewName()&&(this.dateInput.hidden=!1,this.dateInput2.hidden=!1)},n.onHideInputDate=function(){null!=this.dateInput&&(this.dateInput.hidden=!0,this.dateInput2.hidden=!0)},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=222/Ti.pixelRatio,this.dateInput.style.height=44/Ti.pixelRatio,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.style.color="#003dc6",this.dateInput.style.border="2px solid #003dc6",this.dateInput.style.borderRadius="5px",this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>2592e6?(e=new Date(i.getTime()+2592e6),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1))}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=222/Ti.pixelRatio,this.dateInput2.style.height=44/Ti.pixelRatio,this.dateInput2.style.color="#003dc6",this.dateInput2.style.border="2px solid #003dc6",this.dateInput2.style.borderRadius="5px",this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>2592e6?(e=new Date(i.getTime()-2592e6),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1))}}},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=Ti.clientWidth/1920;this.dateInput.style.width=222*i/Ti.pixelRatio,this.dateInput.style.height=44*i/Ti.pixelRatio,this.dateInput.style.fontSize=24*i,this.dateInput2.style.fontSize=24*i,this.dateInput2.style.width=222*i/Ti.pixelRatio,this.dateInput2.style.height=44*i/Ti.pixelRatio,this.dateInput.style.top=(t.y-70)*i+"px",this.dateInput.style.left=(t.x+95)*i+"px",this.dateInput2.style.top=(t.y-70)*i+"px",this.dateInput2.style.left=(t.x+370)*i+"px"}},n.onLastPage=function(){this.curpage>1&&(this.curpage--,this.getOrderListAgain())},n.onNextPage=function(){this.curpage<this.totalPage&&(this.curpage++,this.getOrderListAgain())},n.queryOrderList=function(){this.curpage=1,this.getOrderListAgain()},n.getOrderListAgain=function(){var t="beginDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59&option=1&page="+this.curpage;t+=null!=this.curCustomer?"&customerId="+this.curCustomer.id:"&customerId=-1",t+="&cleared=0&salerId=0&customerPayment=-1&userId=0",W.instance.Request(W.httpUrl+"order/list?"+t,this,this.onGetOrderListBack,null,null)},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onGetOrderListBack=function(t){if(!this.destroyed&&null!=t&&""!=t){var i=JSON.parse(t);if("0"==i.code){var e=parseInt(i.data.totalCount);this.totalPage=Math.ceil(e/100),this.totalPage<1&&(this.totalPage=1),this.uiSkin.pagenum.text=this.curpage+"/"+this.totalPage;for(var n=0;n<i.data.orders.length;n++)i.data.orders[n].selected=this.hasSelectedOrder.hasOwnProperty(i.data.orders[n].id),i.data.orders[n].writeOffMoney=this.hasSelectedOrder.hasOwnProperty(i.data.orders[n].id)?this.hasSelectedOrder[i.data.orders[n].id]:0;this.uiSkin.orderList.array=i.data.orders}else E.showAlert("获取订单失败")}},n.updateOrderList=function(t){t.setData(t.dataSource)},n.onSelectAll=function(){for(var t=this.uiSkin.orderList.array,i=0;i<t.length;i++){var e=t[i];if(e.selected=this.uiSkin.selectall.selected,e&&e.selected){if(!this.hasSelectedOrder.hasOwnProperty(e.id)){var n=JSON.parse(e.detail),s=null!=n.totalSalesPrice&&""!=n.totalSalesPrice?Number(n.totalSalesPrice):Number(n.moneyPaid);this.hasSelectedOrder[e.id]=s,e.writeOffMoney=s}}else e&&!e.selected&&this.hasSelectedOrder.hasOwnProperty(e.id)&&delete this.hasSelectedOrder[e.id]}for(var i=0;i<this.uiSkin.orderList.cells.length;i++)e=this.uiSkin.orderList.cells[i].orderdata,this.uiSkin.orderList.cells[i].setSelected(this.uiSkin.selectall.selected),e&&null!=this.hasSelectedOrder[e.id]?this.uiSkin.orderList.cells[i].setWriteOffMoney(this.hasSelectedOrder[e.id]):e&&this.uiSkin.orderList.cells[i].setWriteOffMoney(0);this.updateSelectedPrice()},n.changeSelectedOrder=function(t){if(this.hasSelectedOrder.hasOwnProperty(t.id))t.selected=!1,t.writeOffMoney=0,delete this.hasSelectedOrder[t.id];else{var i,e=0;for(var n in this.hasSelectedOrder)i=this.hasSelectedOrder[n],e+=i;if(e>=this.curCustomer.balance)return E.showAlert("已选订单金额已超过客户金额"),void 0;var s=JSON.parse(t.detail),r=null!=s.totalSalesPrice&&""!=s.totalSalesPrice?Number(s.totalSalesPrice):Number(s.moneyPaid);t.writeOffMoney=r,t.selected=!0,this.hasSelectedOrder[t.id]=t.writeOffMoney}for(var a=0;a<this.uiSkin.orderList.cells.length;a++){var o=this.uiSkin.orderList.cells[a].orderdata;null!=o&&o.id==t.id&&this.uiSkin.orderList.cells[a].setWriteOffMoney(t.writeOffMoney)}this.updateSelectedPrice()},n.updateSelectedPrice=function(){var t,i=0;for(var e in this.hasSelectedOrder)t=this.hasSelectedOrder[e],i+=t;this.uiSkin.selectMoney.text=i.toFixed(2)+"元"},n.onConfirmWriteOff=function(){if(null==this.curCustomer)return E.showAlert("未选择客户"),void 0;var t,i=0;for(var e in this.hasSelectedOrder)t=this.hasSelectedOrder[e],i+=t;if(0==i)return E.showAlert("未选择销账订单"),void 0;if(i>this.curCustomer.balanceMoney)return E.showAlert("销账金额大于客户余额，请重新选择订单。"),void 0;var n=[];for(var s in this.hasSelectedOrder)n.push(s);W.instance.Request(W.httpUrl+W.writeOffOrders,this,this.writeOffback,JSON.stringify(n),"post")},n.writeOffback=function(t){if(null!=t&&""!=t){var i=JSON.parse(t);"0"==i.code&&(E.instance.closeView("WRITE_OFF_ORDER_PANEL"),Ln.instance.event("UPDATE_CUSTOMER_BALANCE",i.data))}},n.onDestroy=function(){e.stage.off("mouseup",this,this.onMouseUpHandler),e.timer.clearAll(this),null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2)),Ln.instance.off("DELETE_ORDER_BACK",this,this.getOrderListAgain),Ln.instance.off("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.off("OPEN_PANEL_VIEW",this,this.onHideInputDate),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("CHANGE_WRITEOFF_ORDER_SELECTED",this,this.changeSelectedOrder)},i}(Dn),ys=function(t){function i(){this.uiSkin=null,this.curProcess=null,this.procItemList=null,this.procItemSpaceX=10,this.procItemSpaceY=36,this.curselectMaterialVo=null,i.__super.call(this)}s(i,"script.workpanel.ProcListController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.showProclist(k.instance.curSelectMat.procTreeList),Ln.instance.on("CLOSE_PANEL_VIEW",this,this.onUpdateTechDes),Ln.instance.on("SELECT_NEW_PROCESS",this,this.showProclist)},e.showProclist=function(t){for(;this.uiSkin.proclist.numChildren>0;)this.uiSkin.proclist.removeChildAt(0);this.procItemList=[];for(var i=0,e=0;e<t.length;e++){var n=new Rl;n.setData(t[e]),this.uiSkin.proclist.addChild(n),n.techBtn.on("click",this,this.onSelectProcess,[t[e],e]),0==e?(n.x=0,n.y=0):n.width+this.procItemList[e-1].x+this.procItemList[e-1].width+this.procItemSpaceX>this.uiSkin.proclist.width?(n.x=0,i+=n.height+this.procItemSpaceY,n.y=i):(n.x=this.procItemList[e-1].x+this.procItemList[e-1].width+this.procItemSpaceX,n.y=i),t[e].selected&&(this.curselectMaterialVo=t[e]),this.procItemList.push(n)}},e.onSelectProcess=function(t,i){if(K.yiXingCutProcess(t.procCode)&&!k.instance.checkCanSelYixing())return E.showAlert("图片未关联异形切割图片或者关联的异形切割图片不符合下单要求，请重新关联异形切割图片"),void 0;if(t instanceof model.orderModel.MaterialItemVo&&K.backSideUnSame(t.procCode)&&!k.instance.checkCanDoubleSide())return E.showAlert("图片未关联反面图片，请关联后再下单"),void 0;if(t instanceof model.orderModel.MaterialItemVo&&K.whitePartProcess(t.procCode)&&!k.instance.checkCanPartWhite())return E.showAlert("图片未关联局部铺白图片，请关联后再下单"),void 0;if(this.curselectMaterialVo=t,t.attachmentList.indexOf("SPpeijian")>=0||t.attachmentList.indexOf("SPMat")>=0)return E.instance.openView("VIEW_SELECT_ATTACH",!1,t),void 0;t.attachmentList.indexOf("SPpj")>=0?E.instance.openView("INPUT_CUT_NUM",!1,!1):t.attachmentList.indexOf("SPdfcq")>=0?E.instance.openView("AVG_CUT_VIEW",!1,t):t.attachmentList.indexOf("SPFBdakou")>=0&&E.instance.openView("VIEW_DAKOU_PANEL",!1,t),T.needChooseAttachPic(t)&&E.instance.openView("VIEW_SELECT_PIC_TO_ORDER",!1,t);var e=this.procItemList[i];e.setTechSelected(!0),this.showProclist(t.nextMatList),Ln.instance.event("SELECT_PROCESS",[t])},e.onUpdateTechDes=function(t){if("VIEW_SELECT_ATTACH"==t&&null!=this.curselectMaterialVo&&(this.curselectMaterialVo.attachmentList.indexOf("SPpeijian")>=0||this.curselectMaterialVo.attachmentList.indexOf("SPMat")>=0)){if(null==this.curselectMaterialVo.attachList||0==this.curselectMaterialVo.attachList.length)return;this.curselectMaterialVo.selected=!0,this.curselectMaterialVo.attchFileId="",this.curselectMaterialVo.attchMentFileId="",this.showProclist(this.curselectMaterialVo.nextMatList),Ln.instance.event("SELECT_PROCESS",[this.curselectMaterialVo])}},e.onDestroy=function(){Ln.instance.off("CLOSE_PANEL_VIEW",this,this.onUpdateTechDes),Ln.instance.off("SELECT_NEW_PROCESS",this,this.showProclist)},i}(Dn),Cs=function(t){function i(){this.uiSkin=null,this.tabBtns=[],this.curTabIndex=-1,this.curPage=1,this.totalPage=1,this.province=null,this.zoneid=null,this.areaid=null,this.grpCurPage=1,this.grpTotalPage=1,this.hasinit=!1,i.__super.call(this)}s(i,"script.usercenter.AddressGroupController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.addressList.itemRender=Dl,this.uiSkin.addressList.repeatX=1,this.uiSkin.addressList.spaceY=0,this.uiSkin.addressList.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addressList.selectEnable=!1;var t=[];this.uiSkin.addressList.array=t,this.tabBtns.push(this.uiSkin.addressTab),this.tabBtns.push(this.uiSkin.groupTab),this.uiSkin.selectall.on("change",this,this.changeSelectedAll),this.uiSkin.delBatchBtn.on("click",this,this.batchDeleteAddr),this.uiSkin.searchInput.maxChars=8,this.uiSkin.addressList.on("mouseover",this,this.pauseParentScroll),this.uiSkin.addressList.on("mouseout",this,this.resumeParentScroll),this.uiSkin.addressTab.on("click",this,this.clickTabBtn,[0]),this.uiSkin.groupTab.on("click",this,this.clickTabBtn,[1]),this.uiSkin.addAddress.on("click",this,this.showAddAddressPanel),this.uiSkin.searchInput.text="",this.uiSkin.provList.itemRender=Oc,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.provList.array=[{id:0,areaname:"空"}],this.uiSkin.cityList.itemRender=Oc,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.cityList.array=[{id:0,areaname:"空"}],this.uiSkin.areaList.itemRender=Oc,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.areaList.array=[{id:0,areaname:"空"}],this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.on("click",this,this.hideAddressPanel),this.uiSkin.prePage.on("click",this,this.onPrevPage),this.uiSkin.nextPage.on("click",this,this.onNextPage),this.uiSkin.searchInput.maxChars=20,this.uiSkin.searchAddressBtn.on("click",this,this.onSearchAddress),W.instance.Request(W.httpUrl+"sys/areaInfo?",this,this.initAddr,"parentid=0","post"),this.uiSkin.groupList.itemRender=bc,this.uiSkin.groupList.repeatX=6,this.uiSkin.groupList.spaceY=20,this.uiSkin.groupList.spaceX=5,this.uiSkin.groupList.renderHandler=new c(this,this.updateGroupList),this.uiSkin.groupList.selectEnable=!1,t=[],this.uiSkin.searchGroupInput.text="",this.uiSkin.groupList.array=t,this.uiSkin.createGroupBox.visible=!1,this.uiSkin.addGroup.on("click",this,this.onshowCreateGroup),this.uiSkin.closeNewGroup.on("click",this,this.oncloseCreateGroup),this.uiSkin.newGroupName.maxChars=8,this.uiSkin.searchGroupInput.maxChars=20,this.uiSkin.confirmCreateGroup.on("click",this,this.createGroupNow),this.uiSkin.gpPrevPage.on("click",this,this.onGpPrevPage),this.uiSkin.gpNextPage.on("click",this,this.onGpNextPage),this.uiSkin.searchGrpBtn.on("click",this,this.onSearchGroup),Ln.instance.on("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.on("UPDATE_ADDRESS_GROUP_LIST",this,this.refreshGroupList),Ln.instance.on("CLOSE_PANEL_VIEW",this,this.onCloseView),this.clickTabBtn(0),W.instance.Request(W.httpUrl+"org/express/group/pagingExpress?",this,this.getMyAddressBack,"opt=list&page=1&hidden=0&addr=&keyword=","post")},e.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},e.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},e.updateAddressList=function(t){t.setData(t.dataSource)},e.changeSelectedAll=function(){for(var t=0;t<this.uiSkin.addressList.array.length;t++)this.uiSkin.addressList.array[t].selected=this.uiSkin.selectall.selected;for(t=0;t<this.uiSkin.addressList.cells.length;t++)this.uiSkin.addressList.cells[t].changeSelectState(this.uiSkin.selectall.selected)},e.batchDeleteAddr=function(){for(var t=[],i=0;i<this.uiSkin.addressList.array.length;i++)this.uiSkin.addressList.array[i].selected&&t.push(this.uiSkin.addressList.array[i].id);return t.length<=0?(E.showAlert("未选择要删除的地址"),void 0):(E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.confirmDelete,msg:"确定删除这"+t.length+"条地址吗？"}),void 0)},e.confirmDelete=function(t){if(t){for(var i=[],e=0;e<this.uiSkin.addressList.array.length;e++)this.uiSkin.addressList.array[e].selected&&i.push(this.uiSkin.addressList.array[e].id);W.instance.Request(W.httpUrl+"org/express/group/pagingExpress?",this,this.deleteAddressBack,"opt=delete&id="+i.join(","),"post")}},e.deleteAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&this.updateList()}},e.clickTabBtn=function(t){this.curTabIndex!=t&&(this.curTabIndex>=0&&(this.tabBtns[this.curTabIndex].selected=!1),this.tabBtns[t].selected=!0,this.curTabIndex=t,this.uiSkin.addressbox.visible=0==t,this.uiSkin.groupBox.visible=1==t,this.uiSkin.createGroupBox.visible=!1,this.uiSkin.addAddress.visible=0==t,this.uiSkin.addGroup.visible=1==t,1==t&&0==this.hasinit&&(this.hasinit=!0,this.refreshGroupList()))},e.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.status){for(var e=[],n=0;n<i.data.length;n++)e.push(new Tn(i.data[n]));this.uiSkin.addressList.array=e,this.totalPage=i.totalpage,this.totalPage<1&&(this.totalPage=1),this.uiSkin.pageNum.text=this.curPage+"/"+this.totalPage}}},e.onSearchAddress=function(){this.curPage=1,this.updateList()},e.updateList=function(){var t="";this.uiSkin.provList.selectedIndex>0&&(t+=this.uiSkin.province.text,this.uiSkin.cityList.selectedIndex>0&&(t+=" "+this.uiSkin.citytxt.text),this.uiSkin.areaList.selectedIndex>0&&(t+=" "+this.uiSkin.areatxt.text)),W.instance.Request(W.httpUrl+"org/express/group/pagingExpress?",this,this.getMyAddressBack,"opt=list&page="+this.curPage+"&hidden=0&addr="+t+"&keyword="+this.uiSkin.searchInput.text,"post")},e.updateCityList=function(t){t.setData(t.dataSource)},e.initAddr=function(t){if(!this.destroyed){var i=JSON.parse(t);i.status.unshift({id:0,areaname:"空"}),this.uiSkin.provList.array=i.status}},e.selectProvince=function(t){var i=this;return this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaname,this.uiSkin.cityList.selectedIndex=0,this.selectCity(0),0==this.province.id?(this.uiSkin.cityList.array=[{id:0,areaname:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?",this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.status.unshift({id:0,areaname:"空"}),i.uiSkin.cityList.array=e.status,i.uiSkin.cityList.refresh()}},"parentid="+this.province.id,"post"),void 0)},e.selectCity=function(t){var i=this;return this.uiSkin.citybox.visible=!1,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaname,this.uiSkin.areaList.selectedIndex=0,this.selectArea(0),0==this.uiSkin.cityList.array[t].id?(this.uiSkin.areaList.array=[{id:0,areaname:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?",this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.status.unshift({id:0,areaname:"空"}),i.uiSkin.areaList.array=e.status,i.uiSkin.areaList.refresh()}},"parentid="+this.uiSkin.cityList.array[t].id,"post"),void 0)},e.selectArea=function(t){-1!=t&&(this.areaid=this.uiSkin.areaList.array[t].id,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaname,this.uiSkin.areabox.visible=!1)},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,t.stopPropagation()},e.onPrevPage=function(){this.curPage<=1||(this.curPage--,this.updateList())},e.onNextPage=function(){this.curPage>=this.totalPage||(this.curPage++,this.updateList())},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1)},e.showAddAddressPanel=function(){E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:"org/express/group/pagingExpress?"})},e.updateGroupList=function(t){t.setData(t.dataSource)},e.onshowCreateGroup=function(){this.uiSkin.createGroupBox.visible=!0},e.oncloseCreateGroup=function(){this.uiSkin.createGroupBox.visible=!1},e.createGroupNow=function(){W.instance.Request(W.httpUrl+"org/express/group/add?",this,this.createGroupBack,"opt=insert&name="+this.uiSkin.newGroupName.text,"post")},e.createGroupBack=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&this.refreshGroupList(),this.oncloseCreateGroup()}},e.onSearchGroup=function(){this.grpCurPage=1,this.refreshGroupList()},e.onCloseView=function(t){"VIEW_ADDRESS_GROUP_MGR_PANEL"==t&&this.refreshGroupList()},e.refreshGroupList=function(){W.instance.Request(W.httpUrl+"org/express/group/add?",this,this.listGroupBack,"opt=list&page="+this.grpCurPage+"&keyword="+this.uiSkin.searchGroupInput.text,"post")},e.listGroupBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.status){for(var e=[],n=0;n<i.data.length;n++)e.push(new B(i.data[n]));this.uiSkin.groupList.array=e,this.grpTotalPage=i.totalpage,this.grpTotalPage<1&&(this.grpTotalPage=1),this.uiSkin.grPageNum.text=this.grpCurPage+"/"+this.grpTotalPage}}},e.onGpPrevPage=function(){this.grpCurPage<=1||(this.grpCurPage--,this.refreshGroupList())},e.onGpNextPage=function(){this.grpCurPage>=this.grpTotalPage||(this.grpCurPage++,this.refreshGroupList())},e.onDestroy=function(){Ln.instance.off("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.off("UPDATE_ADDRESS_GROUP_LIST",this,this.refreshGroupList),Ln.instance.off("CLOSE_PANEL_VIEW",this,this.onCloseView)},i}(Dn),Es=function(t){function i(){this.uiSkin=null,this.curMemberdata=null,this.previlegeCheckBoxlst=null,i.__super.call(this)}s(i,"script.usercenter.OrganizeMrgControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.changeName.on("click",this,this.onConfirmChangeName),this.uiSkin.userName.maxChars=6,this.uiSkin.userName.text=g.instance.userName,this.uiSkin.organizelist.itemRender=ec,this.uiSkin.organizelist.vScrollBarSkin="",this.uiSkin.organizelist.repeatX=7,this.uiSkin.organizelist.spaceY=5,this.uiSkin.organizelist.spaceX=15,this.uiSkin.organizelist.renderHandler=new c(this,this.updateOrganizeList),this.uiSkin.organizelist.selectEnable=!0,this.uiSkin.organizelist.selectHandler=new c(this,this.selectOrganize),this.uiSkin.organizelist.array=[],this.uiSkin.memberlist.itemRender=Zl,this.uiSkin.memberlist.repeatX=1,this.uiSkin.memberlist.spaceY=5,this.uiSkin.memberlist.renderHandler=new c(this,this.updateMemberList),this.uiSkin.memberlist.selectEnable=!1,this.uiSkin.distributePanel.visible=!1;var t=[];this.uiSkin.memberlist.array=t,this.uiSkin.createOrganizePanel.visible=!1,this.uiSkin.setAuthorityPanel.visible=!1,this.uiSkin.closeauthoritybtn.on("click",this,this.onCloseAuthorityPanel),this.uiSkin.confirmauthoritybtn.on("click",this,this.updateMemberAuthority),this.uiSkin.createOrganize.on("click",this,this.showCretePanel),this.uiSkin.organizeNameInput.maxChars=6,this.uiSkin.createBtnOk.on("click",this,this.onConfirmCreateOrganize),this.uiSkin.memberlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.memberlist.on("mouseout",this,this.resumeParentScroll),this.uiSkin.moveOkbtn.on("click",this,this.onMoveMemberSure),this.uiSkin.closeDist.on("click",this,this.onCloseDistribute),this.uiSkin.btncloseCreate.on("click",this,this.onCloseCreate),this.uiSkin.applyListBtn.on("click",this,function(){E.instance.openView("APPLY_JOIN_LIST_PANEL")}),this.previlegeCheckBoxlst=[this.uiSkin.order_submit,this.uiSkin.order_submit_with_balances,this.uiSkin.order_price_display,this.uiSkin.order_list_self,this.uiSkin.order_list_org,this.uiSkin.asset_log_list],this.uiSkin.organizeBox.visible=g.instance.privilege.indexOf("admin:org:manage")>=0,g.instance.privilege.indexOf("admin:org:manage")>=0&&W.instance.Request(W.httpUrl+"org/dept/list?",this,this.onGetAllOrganizeBack,null,null),Ln.instance.on("DELETE_ORGANIZE_BACK",this,this.refreshOrganize),Ln.instance.on("MOVE_MEMBER_DEPT",this,this.moveMember),Ln.instance.on("DELETE_DEPT_MEMBER",this,this.refreshOrganizeMemebers),Ln.instance.on("SET_MEMEBER_AUTHORITY",this,this.setMemberAuthority)},e.onGetAllOrganizeBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&i.data.length>0&&(this.uiSkin.organizelist.array=i.data,i.data.length>0&&(this.uiSkin.organizelist.selectedIndex=0,this.uiSkin.organizelist.cells[0].selected=!0))}},e.refreshOrganize=function(){W.instance.Request(W.httpUrl+"org/dept/list?",this,this.onGetAllOrganizeBack,null,null)},e.showCretePanel=function(){this.uiSkin.createOrganizePanel.visible=!0},e.onConfirmCreateOrganize=function(){if(""==this.uiSkin.organizeNameInput.text)return E.showAlert("请输入组织名称"),void 0;var t={name:this.uiSkin.organizeNameInput.text};W.instance.Request(W.httpUrl+"org/dept/add?",this,this.onCreateBack,JSON.stringify(t),"post"),this.uiSkin.createOrganizePanel.visible=!1},e.onCreateBack=function(t){var i=JSON.parse(t);"0"==i.code&&W.instance.Request(W.httpUrl+"org/dept/list?",this,this.onGetAllOrganizeBack,null,null)},e.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},e.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},e.updateMemberList=function(t){t.setData(t.dataSource)},e.updateOrganizeList=function(t){t.setData(t.dataSource)},e.selectOrganize=function(t){var i;for(var e in this.uiSkin.organizelist.cells)i=this.uiSkin.organizelist.cells[e],i.setselected(this.uiSkin.organizelist.array[t].id);var n="deptId="+this.uiSkin.organizelist.array[t].id;W.instance.Request(W.httpUrl+"org/dept/listMember?"+n,this,this.onGetOrganizeMembersBack,null,null)},e.onGetOrganizeMembersBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.memberlist.array=i.data)}},e.moveMember=function(t){this.curMemberdata=t,this.uiSkin.distributePanel.visible=!0;for(var i=this.uiSkin.organizelist.array,e=[],n=0;n<i.length;n++)e.push(i[n].name);this.uiSkin.organizeCom.labels=e.join(","),this.uiSkin.organizeCom.selectedIndex=0},e.setMemberAuthority=function(t){this.curMemberdata=t,W.instance.Request(W.httpUrl+"org/getPrivilege?userId="+this.curMemberdata.userId,this,this.onGetOrganizeMemberAuthBack,null,null)},e.onGetOrganizeMemberAuthBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code&&this.curMemberdata&&null!=i.data&&i.data.length>0){this.uiSkin.accoutname.text="设置账号："+this.curMemberdata.mobileNumber+" 的权限",this.uiSkin.setAuthorityPanel.visible=!0;for(var e=0;6>e;e++)this.previlegeCheckBoxlst[e].selected=i.data.indexOf(m.PREVILIGE_LIST[e])>=0}}},e.onCloseAuthorityPanel=function(){this.uiSkin.setAuthorityPanel.visible=!1},e.updateMemberAuthority=function(){var t=[];t.uid=this.curMemberdata.uid;for(var i=0;6>i;i++)this.previlegeCheckBoxlst[i].selected&&t.push(m.PREVILIGE_LIST[i]);this.uiSkin.setAuthorityPanel.visible=!1;var e={permissions:t,userId:this.curMemberdata.userId};W.instance.Request(W.httpUrl+"org/setPrivilege?",this,this.onUpdateOrganizeMemberAuthBack,JSON.stringify(e),"post")},e.onUpdateOrganizeMemberAuthBack=function(t){var i=JSON.parse(t);"0"==i.code?E.showAlert("设置成功"):E.showAlert("设置失败")},e.onCloseDistribute=function(){this.uiSkin.distributePanel.visible=!1},e.onMoveMemberSure=function(){if(null!=this.curMemberdata){if(this.uiSkin.organizeCom.selectedIndex<0)return E.showAlert("请选择要移动到的组织"),void 0;var t=this.uiSkin.organizelist.array[this.uiSkin.organizeCom.selectedIndex].id;if(this.curMemberdata.deptId==t)return E.showAlert("该用户已经在这个组织里"),void 0;var i={deptId:t,userId:this.curMemberdata.userId};W.instance.Request(W.httpUrl+"org/dept/setMember?",this,this.onMoveOrganizeMemberBack,JSON.stringify(i),"post")
}},e.onCloseCreate=function(){this.uiSkin.createOrganizePanel.visible=!1},e.onMoveOrganizeMemberBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){var e="deptId="+this.uiSkin.organizelist.array[this.uiSkin.organizelist.selectedIndex].id;W.instance.Request(W.httpUrl+"org/dept/listMember?"+e,this,this.onGetOrganizeMembersBack,null,null)}this.uiSkin.distributePanel.visible=!1}},e.refreshOrganizeMemebers=function(){var t="deptId="+this.uiSkin.organizelist.array[this.uiSkin.organizelist.selectedIndex].id;W.instance.Request(W.httpUrl+"org/dept/listMember?"+t,this,this.onGetOrganizeMembersBack,null,null)},e.onConfirmChangeName=function(){if(""!=this.uiSkin.userName.text){var t={userName:this.uiSkin.userName.text};W.instance.Request(W.httpUrl+"sys/updateUserName?",this,this.onUpdateUserNameBack,JSON.stringify(t),"post")}},e.onUpdateUserNameBack=function(t){var i=JSON.parse(t);"0"==i.code&&(g.instance.userName=this.uiSkin.userName.text,Ln.instance.event("UPDAE_USER_NAME"))},e.onDestroy=function(){Ln.instance.off("DELETE_ORGANIZE_BACK",this,this.refreshOrganize),Ln.instance.off("MOVE_MEMBER_DEPT",this,this.moveMember),Ln.instance.off("DELETE_DEPT_MEMBER",this,this.refreshOrganizeMemebers),Ln.instance.off("SET_MEMEBER_AUTHORITY",this,this.setMemberAuthority)},i}(Dn),bs=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"utils.PopUpWindowControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainview.scaleX=.2,this.uiSkin.mainview.scaleY=.2,Ni.to(this.uiSkin.mainview,{scaleX:1,scaleY:1},300,dn.backOut),this.uiSkin.closebtn.on("click",this,this.onCloseScene),this.uiSkin.tips.visible=null!=this.param.tips,null!=this.param.tips&&(this.uiSkin.tips.text=this.param.tips),this.uiSkin.msgtxt.text=this.param.msg,null!=this.param.ok&&(this.uiSkin.okbtn.label=this.param.ok),null!=this.param.cancel&&(this.uiSkin.cancelbtn.label=this.param.cancel),this.param.noCancel&&(this.uiSkin.cancelbtn.visible=!1),this.uiSkin.btnSp.x=(640-this.uiSkin.btnSp.getBounds().width)/2,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.mainview.y=(this.uiSkin.height-this.uiSkin.mainview.height)/2+this.uiSkin.mainview.height/2,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.okbtn.on("click",this,this.onConfirmHandler),this.uiSkin.cancelbtn.on("click",this,this.onCancelHandler)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.mainview.y=(this.uiSkin.height-this.uiSkin.mainview.height)/2+this.uiSkin.mainview.height/2},n.onConfirmHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!0),this.onCloseScene()},n.onCancelHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!1),this.onCloseScene()},n.onCloseScene=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!1),E.instance.closeView("VIEW_POPUPDIALOG"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),Is=function(t){function i(){this.uiSkin=null,this.province=null,this.companyareaId=null,this.proid="",this.cityid="",this.areaid="",this.townid="",this.hasInit=!1,i.__super.call(this)}s(i,"script.usercenter.CompanyEditController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.provList.itemRender=Kl,this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.provList.refresh(),this.uiSkin.cityList.itemRender=Kl,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.areaList.itemRender=Kl,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.townList.itemRender=Kl,this.uiSkin.townList.vScrollBarSkin="",this.uiSkin.townList.selectEnable=!0,this.uiSkin.townList.repeatX=1,this.uiSkin.townList.spaceY=2,this.uiSkin.townList.renderHandler=new c(this,this.updateCityList),this.uiSkin.townList.selectHandler=new c(this,this.selectTown),this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.btnSelTown.on("click",this,this.onShowTown),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.townbox.visible=!1,this.uiSkin.on("click",this,this.hideAddressPanel),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null),this.uiSkin.btncancel.on("click",this,function(){E.instance.closeView("VIEW_EDIT_COMPANY_INFO_PANEL")}),this.uiSkin.btnok.on("click",this,this.onSaveCompanyInfo)},e.getCompanyInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(this.uiSkin.input_companyName.text=i.data.name,this.uiSkin.input_address.text=i.data.addr,this.uiSkin.reditCode.text=i.data.idCode,this.uiSkin.input_shortName.text=i.data.shortName,this.proid=i.data.regionId.slice(0,2)+"0000",this.cityid=i.data.regionId.slice(0,4)+"00",this.areaid=i.data.regionId.slice(0,6),this.townid=i.data.regionId):205==i.status,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initView,null,null)}},e.initView=function(t){var i=JSON.parse(t);this.uiSkin.provList.array=i.data;var e=0;if(0==this.hasInit&&""!=this.proid)for(var n=0;n<this.uiSkin.provList.array.length;n++)if(this.uiSkin.provList.array[n].id==this.proid){e=n;break}this.selectProvince(e)},e.onSaveCompanyInfo=function(){if(""==this.uiSkin.input_companyName.text&&E.showAlert("请填写企业名称"),T.hasForbidenChars(this.uiSkin.input_companyName.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;if(""==this.uiSkin.input_shortName.text)return E.showAlert("请填写企业简称"),void 0;if(T.hasForbidenChars(this.uiSkin.input_shortName.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;if(T.hasForbidenChars(this.uiSkin.input_address.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;if(""==this.uiSkin.reditCode.text)return E.showAlert("请填写统一社会征信代码"),void 0;var t={};t.name=this.uiSkin.input_companyName.text,t.shortName=this.uiSkin.input_shortName.text,t.regionId=this.companyareaId,t.addr=this.uiSkin.input_address.text,t.idCode=this.uiSkin.reditCode.text,W.instance.Request(W.httpUrl+"org/update?",this,this.onSaveCompnayBack,JSON.stringify(t),"post")},e.onSaveCompnayBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_COMPANY_INFO")}},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,Ln.instance.event("PAUSE_SCROLL_VIEW",!0))},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,Ln.instance.event("PAUSE_SCROLL_VIEW",!1),t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,Ln.instance.event("PAUSE_SCROLL_VIEW",!1),t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,this.uiSkin.townbox.visible=!1,Ln.instance.event("PAUSE_SCROLL_VIEW",!1),t.stopPropagation()},e.onShowTown=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!0,Ln.instance.event("PAUSE_SCROLL_VIEW",!1),t.stopPropagation()},e.updateCityList=function(t){t.setData(t.dataSource)},e.selectProvince=function(t){var i=this;null!=this.uiSkin.provList.array[t]&&(null==this.uiSkin||this.uiSkin.destroyed||(this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,this.proid=this.province.id,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.proid,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.citytxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh();var n=0;if(0==i.hasInit&&""!=i.cityid)for(var s=0;s<i.uiSkin.cityList.array.length;s++)if(i.uiSkin.cityList.array[s].id==i.cityid){n=s;break}i.uiSkin.citytxt.text=i.uiSkin.cityList.array[n].areaName,i.selectCity(n)}},null,null),Ln.instance.event("PAUSE_SCROLL_VIEW",!0)))},e.selectCity=function(t){var i=this;if(null!=this.uiSkin&&!this.uiSkin.destroyed){this.uiSkin.citybox.visible=!1,this.cityid=this.uiSkin.cityList.array[t].id;var e=this.cityid;W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+e,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.areatxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh();var n=0;if(0==i.hasInit&&""!=i.areaid)for(var s=0;s<i.uiSkin.areaList.array.length;s++)if(i.uiSkin.areaList.array[s].id==i.areaid){n=s;break}i.uiSkin.areatxt.text=i.uiSkin.areaList.array[n].areaName,i.selectArea(n)}},null,null),this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName,Ln.instance.event("PAUSE_SCROLL_VIEW",!0)}},e.selectArea=function(t){var i=this;if(null!=this.uiSkin&&!this.uiSkin.destroyed&&(Ln.instance.event("PAUSE_SCROLL_VIEW",!0),-1!=t)){this.areaid=this.uiSkin.areaList.array[t].id;var e=this.areaid;W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+e,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.towntxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);if(i.uiSkin.btnSelTown.visible=e.data.length>0,0==e.data.length)return i.companyareaId=i.areaid,void 0;i.uiSkin.townList.array=e.data,i.uiSkin.townList.refresh();var n=0;if(0==i.hasInit&&""!=i.townid)for(var s=0;s<i.uiSkin.townList.array.length;s++)if(i.uiSkin.townList.array[s].id==i.townid){n=s;break}i.uiSkin.towntxt.text=i.uiSkin.townList.array[n].areaName,i.companyareaId=i.uiSkin.townList.array[n].id}},null,null),this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1}},e.selectTown=function(t){Ln.instance.event("PAUSE_SCROLL_VIEW",!0),this.hasInit=!0,-1!=t&&(this.uiSkin.townbox.visible=!1,this.uiSkin.towntxt.text=this.uiSkin.townList.array[t].areaName,this.companyareaId=this.uiSkin.townList.array[t].id,this.townid=this.companyareaId)},i}(Dn),xs=function(t){function i(){this.uiSkin=null,this.directTree=[],this.param=null,this.fileListData=null,this.file=null,this.curFileList=null,this.autoFreshTime=0,this.curCustomer=null,i.__super.call(this)}s(i,"script.workpanel.OrderSelectPicController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.directTree=[],this.uiSkin=this.owner,this.uiSkin.btnNewFolder.on("click",this,this.onCreateNewFolder),this.curCustomer=this.param,this.uiSkin.customListPanel.visible=!1,this.uiSkin.curCustomName.text=null!=this.curCustomer&&"0"!=this.curCustomer.id?this.curCustomer.customerName:g.instance.company,this.uiSkin.curCustomName.editable=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),H.instance.selectFolders=[],this.updateSelectFolderNum(),this.uiSkin.picList.itemRender=zl,this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=20,this.uiSkin.picList.renderHandler=new c(this,this.updatePicInfoItem),this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1,this.uiSkin.upgradestore.on("click",this,this.onShowBuyStorage),this.uiSkin.title.text=K.orderName[k.instance.orderType]+"下单";for(var i=0;3>i;i++)this.uiSkin["flder"+i].on("click",this,this.onClickTopDirectLbl,[i+1]);this.uiSkin.btnroot.on("click",this,this.backToRootDir),this.uiSkin.btnUploadPic.on("click",this,this.onShowUploadView),this.uiSkin.radiosel.on("click",this,this.onSelectAllPic),this.uiSkin.radiosel.selected=!1,this.uiSkin.freshbtn.on("click",this,this.onFreshList),this.uiSkin.refreshTxt.on("click",this,this.onFreshList),this.uiSkin.nextBtn.on("click",this,function(){var t;for(var i in H.instance.haselectPic)if(t=H.instance.haselectPic[i],0==T.isValidPic(t))return E.showAlert("只有格式为JPG,JPEG,TIF,TIFF,并且颜色格式为CMYK的图片才能下单"),void 0;var e,n=0;for(var s in H.instance.haselectPic)e=H.instance.haselectPic[s],n++;return n>100?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0):("Penyin"==k.instance.orderType?Ln.instance.event("SHOW_CONTENT_PANEL",[qo,0]):Ln.instance.event("SHOW_CONTENT_PANEL",[ja,0]),void 0)}),this.uiSkin.batchDelete.on("click",this,this.onClickAllSelectedFolders),this.uiSkin.picList.array=[],null==this.curCustomer||"0"==this.curCustomer.id?(W.instance.Request(W.httpUrl+"fs/list?dirId="+g.instance.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:g.instance.dirId},0)):(W.instance.Request(W.httpUrl+"fs/list?dirId="+this.curCustomer.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:this.curCustomer.dirId},0)),this.initFileOpen(),Ln.instance.on("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.on("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.on("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("START_SELECT_YIXING_PIC",this,this.showRelatedPanel),Ln.instance.on("START_SELECT_BACK_PIC",this,this.showRelatedPanel),Ln.instance.on("START_SELECT_PARTWHITE_PIC",this,this.showRelatedPanel),Ln.instance.on("PAY_ORDER_SUCESS",this,this.onBuyStorageSucess),Ln.instance.on("UPDATE_SELECT_FOLDER",this,this.updateSelectFolderNum),Ln.instance.on("CREATE_FOLDER_SUCESS",this,this.onCreateDirBack),Ln.instance.on("SELECT_CUSTOMER",this,this.onSelectCustomer),this.uiSkin.picList.on("mousedown",this,this.onMouseDwons),this.uiSkin.picList.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.picList.on("mouseover",this,this.onMouseDwons),this.uiSkin.picList.on("mouseout",this,this.onMouseUpHandler),this.uiSkin.tifAi.on("click",this,this.onSetTifAi),H.instance.haselectPic={},this.uiSkin.searchInput.on("input",this,this.onSearchInput),this.uiSkin.on("removed",this,this.onRemovedFromStage),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,H.instance.curFileList=[],this.directTree.push(H.instance.curSelectDir)},n.updatePicInfoItem=function(t){t.setData(t.dataSource)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.picList.refresh()},n.showRelatedPanel=function(){for(var t=this.filtUnFitImage(),i={},e=0;e<t.length;e++){t[e].relatedTimes=0;for(var n=0;n<H.instance.curFileList.length;n++)(H.instance.curFileList[n].yixingFid==t[e].fid||H.instance.curFileList[n].backFid==t[e].fid||H.instance.curFileList[n].partWhiteFid==t[e].fid)&&t[e].relatedTimes++}t.sort(function(t,i){return t.relatedTimes<i.relatedTimes?-1:1}),i.files=t;var s=[];null==H.instance.curOperateFile||H.instance.haselectPic.hasOwnProperty(H.instance.curOperateFile.fid)||(H.instance.haselectPic[H.instance.curOperateFile.fid]=H.instance.curOperateFile);var r;for(var a in H.instance.haselectPic){r=H.instance.haselectPic[a];var o=Math.abs(H.instance.curOperateFile.picPhysicWidth-r.picPhysicWidth)/H.instance.curOperateFile.picPhysicWidth,h=Math.abs(H.instance.curOperateFile.picPhysicHeight-r.picPhysicHeight)/H.instance.curOperateFile.picPhysicHeight;.01>o&&.01>h&&s.push(r)}i.originfiles=s,E.instance.openView("RELATED_PIC_CHOOSE_PANEL",!1,i)},n.stopLast=function(t){for(var i=this.uiSkin.picList.cells,e=0;e<i.length;e++)null!=i[e]&&i[e].picInfo!=t&&i[e].resetRelatedBtn()},n.filtUnFitImage=function(){var t=H.instance.curOperateFile;if(null!=t){for(var i=H.instance.curOperateSelType,e=[],n=0;n<H.instance.curFileList.length;n++){var s=H.instance.curFileList[n];if(null!=s&&1==s.picType){var r=Math.abs(t.picPhysicWidth-s.picPhysicWidth)/t.picPhysicWidth,a=Math.abs(t.picPhysicHeight-s.picPhysicHeight)/t.picPhysicHeight;r>.01||a>.01||(0==i||2==i?("GRAY"==s.colorspace.toLocaleUpperCase()||s.isCdr)&&e.push(H.instance.curFileList[n]):1==i&&"CMYK"!=s.colorspace||e.push(H.instance.curFileList[n]))}}return e}},n.stopRightSelectRelate=function(){e.stage.off("click",this,this.stopSelectRelate),C.getInstance().stopGlobalTips(),this.cancelSelected(),this.stopLast(null),H.instance.curOperateFile=null,e.stage.off("rightclick",this,this.stopSelectRelate),e.stage.off("doubleclick",this,this.stopRightSelectRelate)},n.stopSelectRelate=function(t){null!=t&&this.uiSkin.picList.hitTestPoint(t.stageX,t.stageY)||(e.stage.off("click",this,this.stopSelectRelate),this.cancelSelected(),C.getInstance().stopGlobalTips(),this.stopLast(null),H.instance.curOperateFile=null,e.stage.off("rightclick",this,this.stopSelectRelate),e.stage.off("doubleclick",this,this.stopRightSelectRelate))},n.cancelSelected=function(){if(null!=H.instance.curOperateFile)for(var t=0;t<this.uiSkin.picList.cells.length;t++){var i=this.uiSkin.picList.cells[t];if(null!=i&&i.picInfo==H.instance.curOperateFile){i.canCelSelected();break}}for(var t=0;t<this.uiSkin.picList.cells.length;t++){var e=this.uiSkin.picList.cells[t].picInfo;null!=e&&this.uiSkin.picList.cells[t].disableItem(!1)}},n.onBuyStorageSucess=function(){W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,"post")},n.onGetLeftCapacitBack=function(t){var i=JSON.parse(t);if(null!=this.uiSkin&&!this.uiSkin.destroyed&&"0"==i.code){var e=parseInt(i.data.storageUsedSize)/1024/1024,n=parseInt(i.data.storageDefaultSize)/1e3/1e3;g.instance.hasBuySorage=i.data.storageSize,g.instance.hasBuySorage>0&&(n=g.instance.hasBuySorage),this.uiSkin.prgcap.value=parseInt(i.data.storageUsedSize)<parseInt(i.data.storageDefaultSize)?parseInt(i.data.storageUsedSize)/parseInt(i.data.storageDefaultSize):1,this.uiSkin.leftcapacity.text=e.toFixed(0)+"M/"+n+"G",g.instance.hasBuySorage>0&&(g.instance.storageBuyDate=new Date(Date.parse(T.convertDateStr(i.data.storageDate))).getTime(),g.instance.storageExpiredDate=new Date(Date.parse(T.convertDateStr(i.data.storageExpireDate))).getTime())}},n.onSelectAllPic=function(){var t=this.curFileList;if(null!=t){for(var i=0;i<t.length;i++)if(1==t[i].picType)if(this.uiSkin.radiosel.selected){var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);!e&&T.checkFileIsImg(t[i])&&0!=t[i].picPhysicWidth&&(H.instance.haselectPic[t[i].fid]=t[i])}else{var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);e&&delete H.instance.haselectPic[t[i].fid]}else this.uiSkin.radiosel.selected?H.instance.selectFolders.indexOf(t[i].dpath)<0&&H.instance.selectFolders.push(t[i].dpath):H.instance.selectFolders=[];for(var i=0;i<this.uiSkin.picList.cells.length;i++)null!=this.uiSkin.picList.cells[i].picInfo&&T.checkFileIsImg(this.uiSkin.picList.cells[i].picInfo)&&0!=this.uiSkin.picList.cells[i].picInfo.picPhysicWidth?this.uiSkin.picList.cells[i].sel.selected=this.uiSkin.radiosel.selected:null!=this.uiSkin.picList.cells[i].picInfo&&0==this.uiSkin.picList.cells[i].picInfo.picType&&(this.uiSkin.picList.cells[i].sel.selected=this.uiSkin.radiosel.selected);var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++;this.updateSelectFolderNum()}},n.updateSelectFolderNum=function(){},n.onClickAllSelectedFolders=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"是否批量删除所选文件？",caller:this,callback:this.confirmDeleteFolder})},n.confirmDeleteFolder=function(t){t&&this.deleteFolder()},n.deleteFolder=function(){var t="";for(var i in H.instance.haselectPic)t=i;""!=t?(W.instance.Request(W.httpUrl+"fs/file/delete?",this,this.onDeleteFileBack,JSON.stringify({fileID:t}),"post"),delete H.instance.haselectPic[t]):this.getFileList()},n.onDeleteFileBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.deleteFolder()}},n.initFileOpen=function(){var t=this;this.file=Ti.document.createElement("input"),this.file.style="filter:alpha(opacity=0);opacity:0;width: 100;height:34px;left:395px;top:-248",this.file.multiple="multiple",this.file.accept=".jpg,.jpeg,.tif,.tif,.png",this.file.type="file",this.file.style.position="absolute",this.file.style.zIndex=999,Ti.document.body.appendChild(this.file),this.file.onchange=function(){t.fileListData=[];for(var i=0;i<t.file.files.length;i++){if(!T.isValidString(t.file.files[i].name))return E.showAlert("图片文件名不能包含特殊字符及表情，请修改后重新上传"),void 0;t.file.files[i].progress=0,t.fileListData.push(t.file.files[i])}U.instance.showWaitingView(1e3),E.instance.openView("VIEW_MYPICPANEL",!1,t.fileListData)},Ti.window.uploadHandle=this},n.dragFileToUpload=function(){var t=this;this.fileListData=[],U.instance.showWaitingView(),e.timer.once(1e3,this,function(){U.instance.hideWaitingView(),"VIEW_MYPICPANEL"!=E.instance.getTopViewName()&&(console.log("打开 上传界面"),E.instance.openView("VIEW_MYPICPANEL",!1,t.fileListData))})},n.addFile=function(t){this.fileListData.push(t)},n.onshowOrder=function(){var t;for(var i in H.instance.haselectPic)if(t=H.instance.haselectPic[i],0==T.isValidPic(t))return E.showAlert("只有格式为JPG,JPEG,TIF,TIFF,并且颜色格式为CMYK的图片才能下单"),void 0;var e,n=0;for(var s in H.instance.haselectPic)e=H.instance.haselectPic[s],n++;return n>100?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0):(k.instance.orderType="Penyin",E.instance.openView("VIEW_PAINT_ORDER",!0),void 0)},n.onshowZipaiOrder=function(){k.instance.orderType="Zipai";var t;for(var i in H.instance.haselectPic)if(t=H.instance.haselectPic[i],0==T.isValidPicZipai(t))return E.showAlert("有图片不能用于字牌下单，请重新上传或选择其他图片"),void 0;E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!0)},n.confirmOrderNow=function(t){t&&E.instance.openView("VIEW_PAINT_ORDER",!0)},n.seletPicToOrder=function(t){var i=t[0];if(T.checkFileIsImg(i)&&0!=i.picPhysicWidth){var e=H.instance.haselectPic.hasOwnProperty(i.fid);e?delete H.instance.haselectPic[i.fid]:H.instance.haselectPic[i.fid]=i;var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++}},n.onGetTopDirListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(H.instance.initCurDirFiles(i),this.uiSkin.radiosel.selected=!1,this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList,W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,null)):205==i.status&&E.instance.openView("VIEW_USERCENTER",!0)}},n.getFileList=function(){W.instance.Request(W.httpUrl+"fs/list?dirId="+H.instance.curSelectDir.dpath,this,this.onGetDirFileListBack,null,null),W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,null)},n.onGetDirFileListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.radiosel.selected=!1,H.instance.initCurDirFiles(i),this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList),H.instance.selectFolders=[],this.updateSelectFolderNum()}},n.onBackToMain=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},n.onSearchInput=function(){if(null!=this.curFileList){for(var t=[],i=0;i<this.curFileList.length;i++)this.curFileList[i].directName.indexOf(this.uiSkin.searchInput.text)>=0&&t.push(this.curFileList[i]);this.uiSkin.radiosel.selected=!1,this.uiSkin.picList.array=t}},n.onSelectCustomer=function(t){this.uiSkin.curCustomName.text=t.customerName,this.curCustomer=t,null==this.curCustomer||"0"==this.curCustomer.id?(W.instance.Request(W.httpUrl+"fs/list?dirId="+g.instance.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:g.instance.dirId},0)):(W.instance.Request(W.httpUrl+"fs/list?dirId="+this.curCustomer.dirId,this,this.onGetTopDirListBack,null,null),H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:this.curCustomer.dirId},0)),this.directTree=[],this.directTree.push(H.instance.curSelectDir),this.updateCurDirectLabel()},n.onDestroy=function(){Ln.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.off("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onBuyStorageSucess),Ln.instance.off("UPDATE_SELECT_FOLDER",this,this.updateSelectFolderNum),Ln.instance.off("CREATE_FOLDER_SUCESS",this,this.onCreateDirBack),Ln.instance.off("SELECT_CUSTOMER",this,this.onSelectCustomer),Ln.instance.off("STOP_SELECT_RELATE_PIC",this,this.stopSelectRelate),Ti.document.body.removeChild(this.file),this.file=null,Ti.window.uploadHandle=null,Ti.window.canupload=!1,C.getInstance().stopGlobalTips(),H.instance.curOperateFile=null},n.onRemovedFromStage=function(){Ln.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.off("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onShowUploadView=function(){null==H.instance.curSelectDir||"0"==H.instance.curSelectDir.directId,this.file.click(),this.file.value},n.onSureCreeate=function(){},n.onCreateDirBack=function(t){this.uiSkin.picList.addItem(t),this.uiSkin.radiosel.selected=!1,this.curFileList=this.uiSkin.picList.array},n.onSelectChildFolder=function(t){H.instance.curSelectDir=t,this.directTree.push(H.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.backToRootDir=function(){if(!(this.directTree.length<=0)){this.directTree=[];var t;t=null==this.curCustomer||"0"==this.curCustomer.id?g.instance.dirId:this.curCustomer.dirId,H.instance.curSelectDir=new p({dirName:"根目录",dpath:"",dirId:t},0),this.directTree.push(H.instance.curSelectDir),W.instance.Request(W.httpUrl+"fs/list?dirId="+t,this,this.onGetTopDirListBack,null,null),this.updateCurDirectLabel()}},n.onClickParentFolder=function(){this.directTree.length>1?(H.instance.curSelectDir=this.directTree[this.directTree.length-2],this.directTree.splice(this.directTree.length-1,1),this.updateCurDirectLabel(),this.getFileList()):this.backToRootDir()},n.onFreshList=function(){this.getFileList()},n.onClickTopDirectLbl=function(t){t!=this.directTree.length-1&&(H.instance.curSelectDir=this.directTree[t],this.directTree.splice(t+1,this.directTree.length-t-1),this.updateCurDirectLabel(),this.getFileList())},n.updateCurDirectLabel=function(){this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=1;t<this.directTree.length;t++)4>t&&(this.uiSkin["flder"+(t-1)].text=this.directTree[t].directName+">",this.uiSkin["flder"+(t-1)].visible=!0,t>1&&(this.uiSkin["flder"+(t-1)].x=this.uiSkin["flder"+(t-2)].x+this.uiSkin["flder"+(t-2)].textField.textWidth+2))},n.onSetTifAi=function(){var t,i=[];for(var e in H.instance.haselectPic)t=H.instance.haselectPic[e],("TIF"==t.picClass.toUpperCase()||"TIFF"==t.picClass.toUpperCase())&&(t.hasTifAi||i.push(t.fid));if(i.length<=0)return E.showAlert("未选择tif文件或者tif文件已处理"),void 0;var n={fileId:i[0]};W.instance.Request(W.httpUrl+W.tifAiSetting,this,this.onTifAiBack,JSON.stringify(n),"post")},n.onTifAiBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&E.showAlert("请求处理成功，请等待AI处理完成")}},n.onShowBuyStorage=function(){E.instance.openView("VIEW_BUY_STORAGE_PANEL")},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onCreateNewFolder=function(){E.instance.openView("VIEW_CREATE_FOLDER_PANEL",!1,this.directTree)},i}(Dn),Ps=function(t){function i(){this.uiSkin=null,this.curPage=1,this.totalPage=1,this.pageSize=20,this.addOrEdit=0,this.curCustomer=null,this.businessManlist=null,i.__super.call(this)}s(i,"script.usercenter.CustomManagerController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.customeList.itemRender=Sc,this.uiSkin.customeList.repeatX=1,this.uiSkin.customeList.spaceY=0,this.uiSkin.customeList.renderHandler=new c(this,this.updateCustomeList),this.uiSkin.customeList.selectEnable=!0,this.uiSkin.customeList.selectHandler=new c(this,this.onSelectCustom),this.uiSkin.customeList.array=[];var i=new ah;this.uiSkin.addressPanel.addChild(i),i.addComponent(Sr),this.uiSkin.customInfoBox.visible=!1,this.uiSkin.addCustome.on("click",this,this.onShowCustomInfoBox),this.uiSkin.customName.maxChars=10,this.uiSkin.customPhone.restrict="0-9",this.uiSkin.customPhone.maxChars=11,this.uiSkin.closeAddBtn.on("click",this,this.onHideCustomInfoBox),this.uiSkin.prevPage.on("click",this,this.onLastPage),this.uiSkin.nextPage.on("click",this,this.onNextPage),this.uiSkin.searchBtn.on("click",this,function(){t.curPage=1,t.getCustomerList()}),this.uiSkin.payType.selectedIndex=0,this.uiSkin.confirmAddCustom.on("click",this,this.onAddCustomer),Ln.instance.on("UPDATE_CUSTOMER_LIST",this,this.updateCustomlist),Ln.instance.on("EDIT_CUSTOMER_INFO",this,this.editCustomer),W.instance.Request(W.httpUrl+W.listBusinessMan,this,this.getBusinessManBack,null,null),this.getCustomerList()},n.getBusinessManBack=function(t){if(!this.destroyed){for(var i=JSON.parse(t),e=i.data,n=[],s="",r=0;r<e.length;r++)n.push(new x(e[r])),s+=n[r].name+"_"+n[r].mobileNumber,r<e.length-1&&(s+=",");this.uiSkin.businessMan.labels=s,this.businessManlist=n}},n.getCustomerList=function(){var t="pageNo="+this.curPage+"&pageSize="+this.pageSize+"&customerName="+this.uiSkin.searchInput.text;W.instance.Request(W.httpUrl+W.listCustomer+t,this,this.listCustomerBack,null,null)},n.updateCustomlist=function(){this.uiSkin.customeList.selectedIndex=-1,this.getCustomerList(),Ln.instance.event("SELECT_CUSTOMER",null)},n.listCustomerBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.customers.length;n++)e.push(new L(i.data.customers[n]));this.totalPage=Math.ceil(i.data.totalCount/this.pageSize),this.totalPage<1&&(this.totalPage=1),this.uiSkin.customeList.array=e,this.uiSkin.pageText.text=this.curPage+"/"+this.totalPage}}},n.onLastPage=function(){this.curPage>1&&(this.curPage--,this.getCustomerList())},n.onNextPage=function(){this.curPage<this.totalPage&&(this.curPage++,this.getCustomerList())},n.onAddCustomer=function(){if(""==this.uiSkin.customName.text)return E.showAlert("请输入客户名称"),void 0;if(this.uiSkin.customPhone.text.length<11)return E.showAlert("请输入正确的联系电话"),void 0;var t={};t.mobileNumber=this.uiSkin.customPhone.text,t.customerName=this.uiSkin.customName.text,t.salerId=this.uiSkin.businessMan.selectedIndex>=0?this.businessManlist[this.uiSkin.businessMan.selectedIndex].id.toString():"0",t.defaultPayment=this.uiSkin.payType.selectedIndex+1,1==this.addOrEdit&&null!=this.curCustomer&&(t.id=this.curCustomer.id),0==this.addOrEdit?W.instance.Request(W.httpUrl+W.addCustomer,this,this.addCustomerback,JSON.stringify(t),"post"):W.instance.Request(W.httpUrl+W.updateCustomer,this,this.updateCustomer,JSON.stringify(t),"post")},n.addCustomerback=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.getCustomerList(),this.uiSkin.customInfoBox.visible=!1}},n.updateCustomer=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.getCustomerList(),this.uiSkin.customInfoBox.visible=!1}},n.editCustomer=function(t){this.addOrEdit=1,this.uiSkin.customInfoBox.visible=!0,this.curCustomer=t,this.uiSkin.customPhone.text=this.curCustomer.mobileNumber,this.uiSkin.customPhone.editable=!1,this.uiSkin.customName.text=this.curCustomer.customerName,this.uiSkin.payType.selectedIndex=this.curCustomer.defaultPayment-1;for(var i=0;i<this.businessManlist.length;i++)if(this.businessManlist[i].id==this.curCustomer.salerId){this.uiSkin.businessMan.selectedIndex=i;
break}},n.onShowCustomInfoBox=function(){this.uiSkin.customInfoBox.visible=!0,this.uiSkin.customPhone.text="",this.uiSkin.customName.text="",this.uiSkin.customPhone.editable=!0,this.addOrEdit=0},n.onHideCustomInfoBox=function(){this.uiSkin.customInfoBox.visible=!1},n.updateCustomeList=function(t){t.setData(t.dataSource)},n.onSelectCustom=function(t){var i=this;if(-1!=t){var n=this.uiSkin.customeList.array[t];e.timer.once(100,this,function(){for(var t=0;t<i.uiSkin.customeList.cells.length;t++)i.uiSkin.customeList.cells[t].selected(n.id);Ln.instance.event("SELECT_CUSTOMER",n)})}},n.onDestroy=function(){Ln.instance.off("UPDATE_CUSTOMER_LIST",this,this.updateCustomlist),Ln.instance.off("EDIT_CUSTOMER_INFO",this,this.editCustomer)},i}(Dn),Ds=function(t){function i(){this.uiSkin=null,this.picurl="http://large-thumbnail-image.oss-cn-hangzhou.aliyuncs.com/18014398509938750.jpg",this.allsilder=null,this.curselectColor=null,this.carvingPicInfoVos=null,this.curOrdervo=null,i.__super.call(this)}s(i,"script.characterpaint.CharacterMainControl",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,i.u3ddiv=Ti.document.querySelector("#unity-paint-container"),Ti.document.body.appendChild(i.u3ddiv),this.uiSkin.productlist.visible=!1,this.uiSkin.productlist.itemRender=Gl,this.uiSkin.productlist.repeatX=1,this.uiSkin.productlist.spaceY=2,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1,this.carvingPicInfoVos=new Array(5),this.uiSkin.productlist.array=this.carvingPicInfoVos,this.uiSkin.closebtn.on("click",this,this.closeView),this.uiSkin.mattype1.selectedIndex=0,this.uiSkin.mattype2.selectedIndex=0,this.uiSkin.mattype3.selectedIndex=0,this.uiSkin.depth1.text="1",this.uiSkin.depth2.text="10",this.uiSkin.depth3.text="10",this.uiSkin.lighton.on("change",this,this.onSwitchLigth),this.uiSkin.lightcolor.on("click",this,this.showColorChoosePanel),this.uiSkin.createlayer1.on("click",this,this.oncreateLayer1),this.uiSkin.createlayer2.on("click",this,this.oncreateLayer2),this.uiSkin.createlayer3.on("click",this,this.oncreateLayer3),this.allsilder=[this.uiSkin.alphasilder1,this.uiSkin.alphasilder2,this.uiSkin.alphasilder3];for(var e=0;e<this.allsilder.length;e++)this.allsilder[e].on("change",this,this.onChangeAlpha,[e]);this.uiSkin.closeOperate.on("click",this,function(){t.uiSkin.leftOptPanel.visible=!1;var e=Ti.clientWidth/1920;i.u3ddiv.style.right=334*e}),this.onResizeBrower(),this.uiSkin.backimglist.itemRender=xc,this.uiSkin.backimglist.vScrollBarSkin="",this.uiSkin.backimglist.repeatX=2;var n=["stone/stone1","stone/stone2","stone/stone3","wall/wall","wall/wall1","wall/wall2","wood/wood1","wood/wood2","wood/wood3"];this.uiSkin.backimglist.array=n,this.uiSkin.backimglist.renderHandler=new c(this,this.updateBackgroundList),this.uiSkin.backimglist.selectHandler=new c(this,this.onSelectHandler),this.uiSkin.backimglist.selectEnable=!0,this.uiSkin.colorlist.itemRender=Ec,this.uiSkin.colorlist.repeatX=2,this.uiSkin.colorlist.spaceX=2,this.uiSkin.colorlist.spaceY=5;var s=["FF0000","000000","808080","D3D3D3","FFFFFF","800000","F08080","A0522D","FF8C00","FFA500","DAA520","808000","BDB76B","FFFF00","6B8E23","9ACD32","ADFF2F","006400","008000","00FF00","90EE90","40E0D0","008B8B","00FFFF","00BFFF","1E90FF","4169E1","00008B","0000FF","48CD8B","7B68EE","8A2BE2","9400D3","800080","FF00FF","EE82EE"];this.uiSkin.colorlist.array=s,this.uiSkin.colorlist.renderHandler=new c(this,this.updateColorList),this.uiSkin.colorlist.selectHandler=new c(this,this.onSelectColor),this.uiSkin.colorlist.selectEnable=!0,this.uiSkin.colorpanel.visible=!1,this.uiSkin.closecolor.on("click",this,this.onCloseColorPanel);for(var r=[this.uiSkin.choosecolor1,this.uiSkin.choosecolor2,this.uiSkin.choosecolor3],e=0;e<r.length;e++)r[e].on("click",this,this.showColorPanel,[e]);this.uiSkin.changSizeBtn.on("click",this,this.onchangeFontSize),this.initU3dWeb(),Ti.window.layaCaller=this,(null==g.instance.company||""==g.instance.company)&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfo,null,"post"),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("ADD_PIC_FOR_ORDER",this,this.onUpdateOrderPic),Ln.instance.on("SELECT_CARVING_ITEM",this,this.onselectCarvingItem),Ln.instance.on("HIDE_U3D_DIV",this,this.hideU3dDiv),k.instance.selectAddress=null,this.resetOrderInfo()},e.hideU3dDiv=function(t){null!=i.u3ddiv&&(i.u3ddiv.style.display=t?"":"none")},e.onselectCarvingItem=function(t){for(var e=0;e<this.uiSkin.productlist.cells.length;e++)this.uiSkin.productlist.cells[e].selectItem(e==t);this.curOrdervo=this.uiSkin.productlist.array[t],this.uiSkin.leftOptPanel.visible=!0;var n=Ti.clientWidth/1920;i.u3ddiv.style.right=569*n},e.initProductList=function(){var t,i=0;for(var e in H.instance.haselectPic){t=H.instance.haselectPic[e];var n=new V(t);n.indexNum=i,this.carvingPicInfoVos[i++]=n}this.uiSkin.productlist.array=this.carvingPicInfoVos,H.instance.haselectPic={}},e.onUpdateOrderPic=function(){var t;for(var i in H.instance.haselectPic){t=H.instance.haselectPic[i];for(var e=new V(t),n=this.uiSkin.productlist.cells,s=0;s<n.length;s++)if(null==n[s].ordervo){e.indexNum=s,this.uiSkin.productlist.cells[s].setData(e),this.uiSkin.productlist.array[s]=e;break}}H.instance.haselectPic={}},e.onResizeBrower=function(){var t=Ti.clientWidth/1920;i.u3ddiv.style.left=296*t,i.u3ddiv.style.top=124*t,i.u3ddiv.style.bottom=120*t,i.u3ddiv.style.right=this.uiSkin.leftOptPanel.visible?569*t:334*t},e.resetOrderInfo=function(){var t=0,i=this.uiSkin.productlist.cells;if(i.length>0){for(var e={},n=0;n<i.length;n++){var s,r=i[n];if(null!=r.ordervo){if(null==r.ordervo.orderData||e.hasOwnProperty(r.ordervo.manufacturer_code))s=e[r.ordervo.manufacturer_code];else{s={},s.order_sn=k.getOrderSn(),s.client_code="CL10200",s.consignee=g.instance.companyShort+"#"+k.instance.selectAddress.receiverName,s.tel=k.instance.selectAddress.phone,s.address=k.instance.selectAddress.proCityArea,s.order_amountStr=0,s.shipping_feeStr="0",s.money_paidStr="0",s.discountStr="0",s.pay_timeStr=T.formatFullDateTime(new Date),s.delivery_dateStr=T.formatFullDateTime(new Date,!1),s.manufacturer_code=r.ordervo.manufacturer_code,s.manufacturer_name=r.ordervo.manufacturer_name,s.contact_phone=k.instance.getContactPhone(r.ordervo.manufacturer_code);k.instance.selectDelivery&&(s.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),s.orderItemList=[],e[r.ordervo.manufacturer_code]=s}null!=r.ordervo.orderData&&(s.order_amountStr+=r.getPrice(),r.ordervo.orderData.item_seq=n+1,s.orderItemList.push(r.ordervo.orderData))}}var a;for(var o in e)a=e[o],a.order_amountStr<2&&(a.order_amountStr=2),t+=Number(a.order_amountStr.toFixed(2))}t=parseFloat(t.toFixed(1))},e.onGetOutPutAddress=function(t){var i=this;if(!this.uiSkin.destroyed){var e=JSON.parse(t);if(!e.hasOwnProperty("status"))if(k.instance.initOutputAddr(e),k.instance.selectFactoryAddress=k.instance.outPutAddr.concat(),k.instance.outPutAddr.length>0){var n=k.instance.getSelectedOutPutCenter();W.instance.Request(W.httpUrl+"business/prodcategory?addr_id="+k.instance.selectAddress.searchZoneid+"&manufacturerList="+n.join(","),this,this.onGetProductBack,null,null);var s="manufacturerList="+k.instance.getManufactureCodeList().toString()+"&addr_id="+k.instance.selectAddress.searchZoneid;g.instance.getLastMonthRatio(this,function(){W.instance.Request(W.httpUrl+"business/deliverylist?"+s,this,i.onGetDeliveryBack,null,null)})}else k.instance.selectFactoryAddress=null,k.instance.productList=[];for(var r=this.uiSkin.productlist.cells,a=0;a<r.length;a++){var o=r[a];o.resetOrderData()}this.resetOrderInfo()}},e.onGetProductBack=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){var e=i;k.instance.productList=[];for(var n=[],s=0;s<e.length;s++)if(e[s].prodCat_name.indexOf("雕刻")<0&&n.indexOf(e[s].prodCat_name)<0){var r=new Y(e[s].prodCat_name);k.instance.productList.push(r),n.push(e[s].prodCat_name)}}},e.onGetDeliveryBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){k.instance.deliveryList={};for(var e=0;e<i.length;e++){var n=i[e].deliveryList;k.instance.deliveryList[i[e].manufacturer_code]=[];for(var s=0;s<n.length;s++){var r=new d(n[s]);r.belongManuCode=i[e].manufacturer_code,k.instance.deliveryList[i[e].manufacturer_code].push(r),"送货上门"==r.delivery_name&&(k.instance.selectDelivery=r)}}}}},e.updateProductList=function(t){t.setData(t.dataSource)},e.getCompanyInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&(g.instance.company=i.name,g.instance.companyShort=i.shortname)}},e.updateBackgroundList=function(t){t.setData(t.dataSource),t.setSelected(t.dataSource==this.uiSkin.backimglist.array[this.uiSkin.backimglist.selectedIndex])},e.onSelectHandler=function(t){for(var i=0;i<this.uiSkin.backimglist.cells.length;i++)this.uiSkin.backimglist.cells[i].setSelected(this.uiSkin.backimglist.cells[i].urlpath==this.uiSkin.backimglist.array[t]);Ti.window.UnityPaintWeb.changebackground(this.uiSkin.backimglist.array[t])},e.updateColorList=function(t){t.setData(t.dataSource)},e.onSelectColor=function(t){if(!(0>t)){if(this.curselectColor==this.uiSkin.lightcolor)return Ti.window.UnityPaintWeb.changeLigthColor("#"+this.uiSkin.colorlist.array[t]),void 0;this.curselectColor.bgColor="#"+this.uiSkin.colorlist.array[t],this.uiSkin.colorpanel.visible=!1}},e.showColorPanel=function(t){this.uiSkin.colorlist.selectedIndex=-1,this.uiSkin.colorpanel.visible=!0,this.curselectColor=this.uiSkin["choosecolor"+(t+1)]},e.showColorChoosePanel=function(){this.uiSkin.colorlist.selectedIndex=-1,this.uiSkin.colorpanel.visible=!0,this.curselectColor=this.uiSkin.lightcolor},e.onCloseColorPanel=function(){this.uiSkin.colorpanel.visible=!1},e.initU3dWeb=function(){Ti.window.UnityPaintWeb.createUnity()},e.unityIsReady=function(){this.uiSkin.productlist.visible=!0,this.initProductList()},e.selectCharacter=function(t){for(var i=0;i<this.uiSkin.productlist.cells.length;i++)this.uiSkin.productlist.cells[i].selectItem(i.toString()==t)},e.onChangeAlpha=function(t){Ti.window.UnityPaintWeb.changelayerAlpha(t+"&"+this.allsilder[t].value/100)},e.moveCameraLeft=function(){Ti.window.UnityPaintWeb.moveCamera("-0.1")},e.moveCameraRight=function(){Ti.window.UnityPaintWeb.moveCamera("0.1")},e.onSwitchLigth=function(){this.curOrdervo&&Ti.window.UnityPaintWeb.turnCharacterLight(W.biggerPicUrl+this.curOrdervo.picinfo.fid+".jpg")},e.oncreateLayer1=function(){var t="",i=parseInt(this.uiSkin.depth1.text)/100;t+="0&",t+=i+"&",t+=this.uiSkin.mattype1.selectedIndex+1+"&",t+=this.uiSkin.choosecolor1.bgColor,Ti.window.UnityPaintWeb.createLayer(t)},e.oncreateLayer2=function(){var t="";t+="1&";var i=parseInt(this.uiSkin.depth2.text)/100;t+=i+"&",t+=this.uiSkin.mattype2.selectedIndex+1+"&",t+=this.uiSkin.choosecolor2.bgColor,Ti.window.UnityPaintWeb.createLayer(t)},e.oncreateLayer3=function(){var t="";t+="2&";var i=parseInt(this.uiSkin.depth3.text)/100;t+=i+"&",t+=this.uiSkin.mattype3.selectedIndex+1+"&",t+=this.uiSkin.choosecolor3.bgColor,Ti.window.UnityPaintWeb.createLayer(t)},e.onchangeFontSize=function(){if(""!=this.uiSkin.fontsizeinput.text){var t=parseInt(this.uiSkin.fontsizeinput.text)/100;Ti.window.UnityPaintWeb.changefontSize(t.toString())}},e.closeView=function(){E.instance.closeView("VIEW_CHARACTER_DEMONSTRATE_PANEL"),E.instance.openView("VIEW_FIRST_PAGE")},e.onDestroy=function(){if(null!=i.u3ddiv){for(var t=0;5>t;t++)Ti.window.UnityPaintWeb.setCharacterEdgeIndex(t.toString()),Ti.window.UnityPaintWeb.setFrontFaceActive(0);Ti.window.UnityPaintWeb.stopRender(),Ti.window.UnityPaintWeb.setSceneActive("0"),i.u3ddiv.style.display="none",Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("ADD_PIC_FOR_ORDER",this,this.onUpdateOrderPic),Ln.instance.off("HIDE_U3D_DIV",this,this.hideU3dDiv),Ln.instance.off("SELECT_CARVING_ITEM",this,this.onselectCarvingItem)}},i.u3ddiv=null,i.script=null,i.scriptpr=null,i}(Dn),As=function(t){function i(){this.uiSkin=null,this.param=null,this.orderlist=null,this.mianvbox=0,this.requestnum=0,i.__super.call(this)}s(i,"script.dengxiang.DengxiangOrderController",t);var e=i.prototype;return e.onStart=function(){k.instance.getDynamicDeliveryFeeCfg(),this.uiSkin=this.owner;var t=1,i=0;if(this.uiSkin.orderlistpanel.vScrollBarSkin="",this.orderlist=[],null!=k.instance.tempPicOrderItemVoList)for(var e=0;e<k.instance.tempPicOrderItemVoList.length;e++){var n=new Xl(k.instance.tempPicOrderItemVoList[e]);this.uiSkin.ordervbox.addChild(n),t++,this.orderlist.push(n),i>0&&(this.uiSkin.ordervbox.height+=n.height+this.uiSkin.ordervbox.space),i++}this.uiSkin.productNum.text=this.orderlist.length.toString(),H.instance.haselectPic={},this.uiSkin.batchChange.on("click",this,this.onBatchChangeMaterial),this.uiSkin.selectAll.on("click",this,this.onSelectAll),this.uiSkin.batchDelete.on("click",this,this.onBatchDelete),this.uiSkin.goToNext.on("click",this,this.onOrderPaint),this.uiSkin.addpic.on("click",this,this.addDengxiangItem,[0]),this.uiSkin.btnaddpic.on("click",this,this.addDengxiangItem,[1]),Ln.instance.on("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.on("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.on("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.on("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.on("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.on("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.resetOrderInfo(),this.updateLblPos(g.instance.shrinkState),(null==g.instance.company||""==g.instance.company)&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfo,null,null)},e.addDengxiangItem=function(t){var i=new An({},1,["矩形","圆形"][t]+K.orderName[k.instance.orderType]+"产品",t),e=new V(i,2),n=this.uiSkin.ordervbox.numChildren;n++;if(this.orderlist.length+1>100)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0;this.uiSkin.ordervbox.numChildren>0&&(this.uiSkin.ordervbox.height+=this.uiSkin.ordervbox.space),e.indexNum=n;var s=new Xl(e);this.uiSkin.ordervbox.height+=s.height,this.uiSkin.ordervbox.addChild(s),this.orderlist.push(s);for(var r=0;r<this.uiSkin.ordervbox.numChildren;r++)0==r?this.uiSkin.ordervbox.getChildAt(0).y=0:this.uiSkin.ordervbox.getChildAt(r).y=this.uiSkin.ordervbox.getChildAt(r-1).y+this.uiSkin.ordervbox.getChildAt(r-1).height+this.uiSkin.ordervbox.space;this.uiSkin.ordervbox.refresh(),this.resetOrderInfo(),this.uiSkin.productNum.text=this.orderlist.length.toString()},e.updateLblPos=function(t){0==t?(this.uiSkin.opeBox.x=1456,this.uiSkin.pricelbl.x=1364,this.uiSkin.unitpricelbl.x=1273):(this.uiSkin.opeBox.x=1556,this.uiSkin.pricelbl.x=1468,this.uiSkin.unitpricelbl.x=1373)},e.resetOrderInfo=function(){if(!this.destroyed){var t=0,i=0;if(this.orderlist.length>0){var e={};k.instance.calculateProductDiscount(this.orderlist);for(var n=0;n<this.orderlist.length;n++){var s=this.orderlist[n];s.updateProductPrice();var r;if(null==s.ordervo.orderData||e.hasOwnProperty(s.ordervo.manufacturer_code))r=e[s.ordervo.manufacturer_code];else{r={},r.order_sn=k.getOrderSn(),r.client_code=g.instance.clientCode,r.consignee=g.instance.companyShort+"#"+k.instance.selectAddress.receiverName,r.tel=k.instance.selectAddress.phone,r.address=k.instance.selectAddress.proCityArea,r.order_amountStr=0,r.shipping_feeStr="0",r.money_paidStr="0",r.discountStr="1",r.pay_timeStr=T.formatFullDateTime(new Date),r.delivery_dateStr=T.formatFullDateTime(new Date,!1),r.manufacturer_code=s.ordervo.manufacturer_code,r.manufacturer_name=s.ordervo.manufacturer_name,r.contact_phone=k.instance.getContactPhone(s.ordervo.manufacturer_code);k.instance.selectDelivery&&(r.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),r.orderItemList=[],e[s.ordervo.manufacturer_code]=r}null!=this.orderlist[n].ordervo.orderData&&(r.order_amountStr+=this.orderlist[n].getPrice(),i+=parseFloat(this.orderlist[n].getNoDiscountPrice().toFixed(1)),this.orderlist[n].ordervo.orderData.itemSeq=n+1,r.orderItemList.push(this.orderlist[n].ordervo.orderData))}var a;for(var o in e)a=e[o],a.order_amountStr<2&&(a.order_amountStr=2),t+=Number(a.order_amountStr.toFixed(2))}var h=parseFloat(i.toFixed(1))-parseFloat(t.toFixed(1));0>h&&(h=0),k.instance.rawPrice=i.toFixed(1);var l=1;t=parseFloat(t.toFixed(1)),t*=l,this.uiSkin.textTotalPrice.text=i.toFixed(1),this.uiSkin.textDiscount.text=h.toFixed(1),this.uiSkin.textPayPrice.text=t.toFixed(1),g.instance.isHidePrice()&&(this.uiSkin.textTotalPrice.text="***",this.uiSkin.textDiscount.text="***",this.uiSkin.textPayPrice.text="***")}},e.onDeletePicOrder=function(t){var i=t.ordervo;this.orderlist.indexOf(t)>=0&&this.orderlist.splice(this.orderlist.indexOf(t),1);for(var e=0;e<this.uiSkin.ordervbox.numChildren;e++){var n=this.uiSkin.ordervbox.getChildAt(e).ordervo;n.indexNum>i.indexNum&&n.indexNum--,this.uiSkin.ordervbox.getChildAt(e).updateIndex()}this.uiSkin.ordervbox.removeChild(t),this.uiSkin.ordervbox.height-t.height-this.uiSkin.ordervbox.space<0?this.uiSkin.ordervbox.height=0:this.uiSkin.ordervbox.height-=t.height+this.uiSkin.ordervbox.space,0==this.uiSkin.ordervbox.numChildren&&(this.uiSkin.ordervbox.height=0),this.uiSkin.ordervbox.size(this.uiSkin.ordervbox.width,0),this.uiSkin.ordervbox.refresh(),this.resetOrderInfo(),this.uiSkin.productNum.text=this.orderlist.length.toString()},e.onSelectAll=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected=this.uiSkin.selectAll.selected},e.onBatchDelete=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&(this.onDeletePicOrder(this.orderlist[t]),t--)},e.onBatchChangeMaterial=function(){if(null==k.instance.selectAddress)return E.showAlert("请先选择收货地址"),void 0;k.instance.batchChangeMatItems=[];for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&k.instance.batchChangeMatItems.push(this.orderlist[t]);return k.instance.batchChangeMatItems.length<=0?(E.showAlert("请至少选择一个需要更换的产品"),void 0):(k.instance.curSelectMat=null,E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL"),k.instance.curSelectOrderItem=null,void 0)},e.changeProductNum=function(t){for(var i=0;i<this.orderlist.length;i++)this.orderlist[i].checkSel.selected&&(this.orderlist[i].inputnum.text=t,this.orderlist[i].onNumChange())},e.onAdjustHeight=function(t){this.uiSkin.ordervbox.height+=t},e.onPaySucess=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.onCancelPay=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.getCompanyInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.company=i.data.name,g.instance.companyShort=i.data.shortName,g.instance.founderPhone=i.data.founderMobileNumber,g.instance.isVipCompany="1"==i.vip)}},e.onOrderPaint=function(){var t=this;if("NaN"==this.uiSkin.textPayPrice.text)return E.showAlert("价格异常，请检查工艺或联系客服"),void 0;if(null==g.instance.companyShort)return W.instance.Request(W.httpUrl+"org/getInfo",this,function(i){if(!this.destroyed){var e=JSON.parse(i);"0"==e.code&&(g.instance.company=e.data.name,g.instance.companyShort=e.data.shortName,g.instance.founderPhone=e.data.founderMobileNumber),t.onOrderPaint()}},null,null),void 0;var i=this.getOrderData();if(null!=i){for(var e=[],n=0;n<i.length;n++)e=e.concat(i[n].orderItemList);if(e.length>100)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0;k.instance.finalOrderData=i;var s={count:e.length.toString()};W.instance.Request(W.httpUrl+"order/reserveItemSn?",this,this.ongetUidsBack,JSON.stringify(s),"post")}},e.ongetUidsBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=i.data,n=[],s=0;s<k.instance.finalOrderData.length;s++)n=n.concat(k.instance.finalOrderData[s].orderItemList);for(var s=0;s<e.length;s++)n[s].orderItemSn=e[s];this.initPackage(n)}}},e.initPackage=function(t){k.instance.addPackage(k.instance.selectAddress,t);var i=k.instance.finalOrderData;this.requestnum=0;for(var e=0;e<i.length;e++){var n=T.getLocalVar("timePrefer","2");parseInt(n)<2&&(n="2"),k.instance.curTimePrefer=parseInt(n);var s=k.instance.getOrderCapcaityData(i[e],k.instance.curTimePrefer);console.log("产能数据:"+s),W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,s,"post")}},e.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i.hasOwnProperty("status")||i.hasOwnProperty("code"))E.showAlert(i.message);else{for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}if(this.requestnum++,this.requestnum==k.instance.finalOrderData.length){if(null==k.instance.packageList||k.instance.packageList.length<=0)return;if(!k.instance.setVipPackageData())return E.showAlert("打包异常，请返回上一步重新打包"),void 0;for(var c=[],n=0;n<k.instance.finalOrderData.length;n++)c=c.concat(k.instance.finalOrderData[n].orderItemList);Ln.instance.event("SHOW_CONTENT_PANEL",[gh,0,{orders:c,delaypay:!1}]),k.instance.packageList=[]}else U.instance.showWaitingView()}}},e.getOrderData=function(){if(this.orderlist.length<=0)return E.showAlert("未选择下单图片"),null;for(var t={},i=0;i<this.orderlist.length;i++){var e=this.orderlist[i];if(!e.checkCanOrder())return null;var n;if(t.hasOwnProperty(e.ordervo.manufacturer_code))n=t[e.ordervo.manufacturer_code];else{n={},n.orderSn=k.getOrderSn(),n.clientCode=g.instance.clientCode,n.userCode=g.instance.userAccount,n.userOrgCode=g.instance.founderPhone,n.customerId=k.instance.selectAddress.customerId.toString(),n.addressId=k.instance.selectAddress.zoneid,n.clientVersion=g.instance.version,n.orderAmount=0,n.shippingFee="0",n.moneyPaid="0",n.discount="1",n.checkCapacity=!0,n.payTime=T.formatFullDateTime(new Date),n.deliveryDate=T.formatFullDateTime(new Date,!1),n.manufacturerCode=e.ordervo.manufacturer_code,n.manufacturerName=e.ordervo.manufacturer_name,n.contact_phone=k.instance.getContactPhone(e.ordervo.manufacturer_code);k.instance.selectDelivery&&(n.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),n.orderItemList=[],t[e.ordervo.manufacturer_code]=n}if(null==this.orderlist[i].ordervo.orderData)return E.showAlert("有图片未选择材料工艺"),null;n.orderAmount+=this.orderlist[i].getPrice(),this.orderlist[i].ordervo.orderData.itemSeq=i+1,n.orderItemList.push(this.orderlist[i].ordervo.orderData)}var s,r=[];for(var a in t){if(s=t[a],s.order_amountStr<2){s.orderAmount=2;var o=s.orderItemList;if(o.length>0)for(var h=Number((2/o.length).toFixed(2)),l=2-h*o.length,c=0;c<o.length;c++)o[c].itemPrice=0==c?((h+l)/o[c].itemNumber).toFixed(2):(h/o[c].itemNumber).toFixed(2)}s.moneyPaid=s.orderAmount.toFixed(1),s.orderAmount=s.orderAmount.toFixed(1),r.push(s)}var u=1,d=[];for(i=1;u>i;i++)for(var c=0;c<r.length;c++){var _=JSON.parse(JSON.stringify(r[c]));d.push(_)}return d.length>0&&(r=r.concat(d)),r},e.onShowSelectPic=function(){k.instance.tempPicOrderItemVoList=[];for(var t=0;t<this.orderlist.length;t++)k.instance.tempPicOrderItemVoList.push(this.orderlist[t].ordervo);Ln.instance.event("SHOW_CONTENT_PANEL",[Ro,0])},e.onDestroy=function(){Ln.instance.off("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.off("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.off("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.off("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.off("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.off("FIRST_PAGE_SHRINK",this,this.updateLblPos)},i}(Dn),Ls=function(t){function i(){this.uiSkin=null,this.curRequest=null,this.allOrganize=null,i.__super.call(this)}s(i,"script.usercenter.ApplyJoinMgrControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.applylist.itemRender=Ll,this.uiSkin.applylist.repeatX=1,this.uiSkin.applylist.spaceY=5,this.uiSkin.applylist.renderHandler=new c(this,this.updateApplyList),this.uiSkin.applylist.selectEnable=!1,this.uiSkin.distributePanel.visible=!1,this.uiSkin.applylist.array=[],this.uiSkin.applylist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.applylist.on("mouseout",this,this.resumeParentScroll),this.uiSkin.closedistribute.on("click",this,this.onCloseDistributePanel),this.uiSkin.confirmJoin.on("click",this,this.onAgreeJoin),this.uiSkin.closeBtn.on("click",this,function(){E.instance.closeView("APPLY_JOIN_LIST_PANEL")}),Ln.instance.on("AGREE_JOIN_REQUEST",this,this.showDistribute),Ln.instance.on("REFRESH_JOIN_REQUEST",this,this.refreshRequest),W.instance.Request(W.httpUrl+"org/getJoinList?",this,this.onGetJoinRequestBack,null,null)},e.refreshRequest=function(){W.instance.Request(W.httpUrl+"org/getJoinList?",this,this.onGetJoinRequestBack,null,null)},e.onGetJoinRequestBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.applylist.array=i.data)}},e.showDistribute=function(t){this.curRequest=t,this.uiSkin.distributePanel.visible=!0,null==this.allOrganize&&W.instance.Request(W.httpUrl+"org/dept/list?",this,this.onGetAllOrganizeBack,null,null)},e.onGetAllOrganizeBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){this.allOrganize=i.data;for(var e=[],n=0;n<i.data.length;n++)e.push(i.data[n].name);this.uiSkin.deptbox.labels=e.join(",")}}},e.onAgreeJoin=function(){if(null!=this.curRequest){if(this.uiSkin.deptbox.selectedIndex<0)return E.showAlert("请选择要分配到的组织"),void 0;var t={id:this.curRequest.id,action:"1",deptId:this.allOrganize[this.uiSkin.deptbox.selectedIndex].id};W.instance.Request(W.httpUrl+"org/handleJoinReq?",this,this.onhandleBack,JSON.stringify(t),"post")}},e.onhandleBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(W.instance.Request(W.httpUrl+"org/getJoinList?",this,this.onGetJoinRequestBack,null,null),this.uiSkin.distributePanel.visible=!1,E.showAlert("操作成功"))}},e.onCloseDistributePanel=function(){this.uiSkin.distributePanel.visible=!1},e.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},e.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},e.updateApplyList=function(t){t.setData(t.dataSource)},e.onDestroy=function(){Ln.instance.off("AGREE_JOIN_REQUEST",this,this.showDistribute),Ln.instance.off("REFRESH_JOIN_REQUEST",this,this.refreshRequest)},i}(Dn),ks=function(t){function i(){this.uiSkin=null,this.customlist=null,this.customNameInput=null,this.searchBtn=null,this.prevPage=null,this.nextPage=null,this.pageTxt=null,this.curPage=1,this.totalPage=1,this.pageSize=20,this.hasinit=!1,this.includeAll=0,i.__super.call(this)}s(i,"script.prefabScript.CustomListController",t);var e=i.prototype;return e.onEnable=function(){var t=this;this.uiSkin=this.owner,this.customNameInput=this.uiSkin.getChildByName("searchCustomName"),this.searchBtn=this.uiSkin.getChildByName("searchBtn"),this.prevPage=this.uiSkin.getChildByName("pageBox").getChildByName("prevPage"),this.nextPage=this.uiSkin.getChildByName("pageBox").getChildByName("nextPage"),this.pageTxt=this.uiSkin.getChildByName("pageBox").getChildByName("pageTxt"),this.customlist=this.uiSkin.getChildByName("customeList"),this.customlist.itemRender=oc,this.customlist.selectEnable=!0,this.customlist.spaceY=1,this.customlist.renderHandler=new c(this,this.updateCustomeItem),this.customlist.selectHandler=new c(this,this.onSelectCustomer),this.prevPage.on("click",this,this.onLastPage),this.nextPage.on("click",this,this.onNextPage),this.searchBtn.on("click",this,function(){t.curPage=1,t.getCustomerList()}),this.customNameInput.maxChars=10,this.customlist.array=[],this.getCustomerList()},e.onSelectCustomer=function(t){var i=this.customlist.array[t];Ln.instance.event("SELECT_CUSTOMER",i),this.uiSkin.visible=!1},e.updateCustomeItem=function(t){t.setData(t.dataSource)},e.getCustomerList=function(){var t="pageNo="+this.curPage+"&pageSize="+this.pageSize+"&customerName="+this.customNameInput.text;W.instance.Request(W.httpUrl+W.listCustomer+t,this,this.listCustomerBack,null,null)},e.listCustomerBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.customers.length;n++)e.push(new L(i.data.customers[n]));this.totalPage=Math.ceil(i.data.totalCount/this.pageSize),this.totalPage<1&&(this.totalPage=1),1==this.curPage&&(this.includeAll>=0&&e.unshift(new L({customerName:g.instance.company,id:"0",mobileNumber:g.instance.founderPhone})),1==this.includeAll&&e.unshift(new L({customerName:"全部",id:"-1",mobileNumber:""}))),this.customlist.array=e,this.hasinit||(Ln.instance.event("CUSTOMER_LIST_INIT_SUCESS",e[0]),this.hasinit=!0),this.pageTxt.text=this.curPage+"/"+this.totalPage}}},e.onLastPage=function(){this.curPage>1&&(this.curPage--,this.getCustomerList())},e.onNextPage=function(){this.curPage<this.totalPage&&(this.curPage++,this.getCustomerList())},i}(Dn),Ts=function(t){function i(){this.uiView=null,this.glowfilter=null,this.offsetx=0/0,this.offsety=0/0,this.glowColor=null,this.blur=0,i.__super.call(this)}s(i,"script.uiTool.GlowButton",t);var e=i.prototype;return e.onEnable=function(){var t=this;this.uiView=this.owner,this.glowfilter=new os(this.glowColor,this.blur,this.offsetx,this.offsety),this.uiView.on("mouseover",this,function(){tn.cursor="hand",t.uiView.filters=[t.glowfilter]}),this.uiView.on("mouseout",this,function(){tn.cursor="auto",t.uiView.filters=null})},i}(Dn),Rs=function(t){function i(){this.uiSkin=null,this.param=null,this.orderDatas=null,this.requestnum=0,i.__super.call(this)}s(i,"script.order.PackageOrderControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.productlist.itemRender=Fl,this.uiSkin.productlist.selectEnable=!1,this.uiSkin.productlist.spaceY=2,this.uiSkin.productlist.renderHandler=new c(this,this.updateOrderItem),this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.okbtn.on("click",this,this.onConfirmPackage),this.orderDatas=this.param;for(var t=0;t<this.orderDatas.length;t++){var i=[];i.push(this.orderDatas[t].itemNumber);for(var e=1;21>e;e++)i.push(0);this.orderDatas[t].numlist=i}this.uiSkin.addpackbtn.on("click",this,this.addnewPack);var n=T.getLocalVar("timePrefer","1");this.uiSkin.timepreferRdo.selectedIndex=parseInt(n),this.addnewPack(),this.uiSkin.productlist.array=this.orderDatas,this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel)},e.startDragPanel=function(t){this.uiSkin.dragImg.parent.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.parent.stopDrag()},e.addnewPack=function(){var t=new Bo;if(t.packname.maxChars=6,t.packname.focus=!0,t.packname.select(),this.uiSkin.packagebox.addChild(t),t.packname.on("input",this,this.onchangePackName,[t.packname,this.uiSkin.packagebox.numChildren-1]),t.delbtn.on("click",this,this.ondeletepack,[t,this.uiSkin.packagebox.numChildren-1]),t.x=55*(this.uiSkin.packagebox.numChildren-1),this.uiSkin.addpackbtn.x=110+55*this.uiSkin.packagebox.numChildren,t.packname.text="包裹"+this.uiSkin.packagebox.numChildren,k.instance.packageList.length>1)for(var i=0;i<this.uiSkin.productlist.cells.length;i++)this.uiSkin.productlist.cells[i].addpacakge();
this.uiSkin.packagebox.numChildren>=21&&(this.uiSkin.addpackbtn.visible=!1)},e.onchangePackName=function(t,i){null!=k.instance.packageList[i]&&(k.instance.packageList[i].packageName=t.text)},e.ondeletepack=function(t,i){if(i=this.uiSkin.packagebox.getChildIndex(t),0!=i){t.removeSelf(),this.uiSkin.addpackbtn.visible=!0;for(var e=i;e<this.uiSkin.packagebox.numChildren;e++)this.uiSkin.packagebox.getChildAt(e).x-=55;this.uiSkin.addpackbtn.x-=55;for(var n=this.orderDatas,e=0;e<n.length;e++){n[e].numlist[0]+=n[e].numlist[i];for(var s=i;20>s;s++)n[e].numlist[s]=n[e].numlist[s+1];n[e].numlist[20]=0}k.instance.packageList.splice(i,1);for(var e=0;e<this.uiSkin.productlist.cells.length;e++)this.uiSkin.productlist.cells[e].deletepack(i)}},e.onCloseView=function(){k.instance.packageList=[],E.instance.closeView("VIEW_PACKAGE_ORDER_PANEL")},e.onPlaceOrderBack=function(t){var i=JSON.parse(t);if(0==i.status){for(var e=0,n=[],s=0;s<i.orders.length;s++){var r=JSON.parse(i.orders[s]);e+=Number(r.money_paidStr),n.push(r.order_sn)}E.instance.openView("VIEW_SELECT_PAYTYPE_PANEL",!1,{amount:Number(e.toFixed(2)),orderid:n})}},e.onConfirmPackage=function(){var t=k.instance.finalOrderData;this.requestnum=0;for(var i=0;i<t.length;i++){k.instance.curTimePrefer=this.uiSkin.timepreferRdo.selectedIndex+1;var e=k.instance.getOrderCapcaityData(t[i],this.uiSkin.timepreferRdo.selectedIndex+1);W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,e,"post")}this.uiSkin.okbtn.disabled=!0},e.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i.hasOwnProperty("status"))this.uiSkin.okbtn.disabled=!1;else{for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItem_sn]={},k.instance.availableDeliveryDates[h.orderItem_sn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.delivery_date=e[n].default_deliveryDate,h.isUrgent=h.delivery_date==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItem_sn].deliveryDateList.push(e[n].deliveryDateList[l]),h.delivery_date==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.delivery_date==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItem_sn].urgentDate=e[n].deliveryDateList[l])}}if(this.requestnum++,this.requestnum==k.instance.finalOrderData.length){if(null==k.instance.packageList||k.instance.packageList.length<=0)return;k.instance.setPackageData(),E.instance.closeView("VIEW_PACKAGE_ORDER_PANEL"),E.instance.openView("VIEW_CHOOSE_DELIVERY_TIME_PANEL",!1,{orders:this.orderDatas,delaypay:!1}),k.instance.packageList=[]}else U.instance.showWaitingView()}}},e.updateOrderItem=function(t){t.setData(t.dataSource)},i}(Dn),ws=function(t){function i(){this.txt=null,this.txttype=0,this.ypos=0/0,i.__super.call(this)}s(i,"script.prefabScript.LinkTextControl",t);var e=i.prototype;return e.onStart=function(){this.txt=this.owner,0==this.txttype&&(this.txt.underline=!0,this.txt.underlineColor="#003DC6"),this.ypos=this.txt.y,this.txt.on("mouseover",this,this.onMouseOverHandler),this.txt.on("mouseout",this,this.onMouseOutHandler),this.txt.on("mousedown",this,this.onMouseDownHandler),this.txt.on("click",this,this.onMouseClickHandler)},e.onMouseClickHandler=function(){tn.cursor="auto"},e.onMouseDownHandler=function(){1==this.txttype&&(this.txt.color="#74F79B")},e.onMouseOutHandler=function(){tn.cursor="auto",1==this.txttype&&(this.txt.y=this.ypos,this.txt.color="#EDFFEC")},e.onMouseOverHandler=function(){tn.cursor="hand",1==this.txttype&&(this.txt.y=this.ypos-1,this.txt.color="#FFFFFF")},e.onDestroy=function(){tn.cursor="auto"},i}(Dn),Os=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.workpanel.MyWorkController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.picList.itemRender=Cc,this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=4,this.uiSkin.picList.repeatX=8,this.uiSkin.picList.spaceX=20,this.uiSkin.picList.renderHandler=new c(this,this.updatePicItem),this.uiSkin.picList.array=[];var t=e.loader.getRes("config.json?"+g.instance.configVersion),i=t.shortName;this.uiSkin.title.text="欢迎登录"+i+"广告自助下单系统",this.uiSkin.discountMs.text=this.uiSkin.discountMs.text.replace("品赋阳光",i),this.uiSkin.upgradeStorage.on("click",this,function(){E.instance.openView("VIEW_BUY_STORAGE_PANEL")}),this.uiSkin.orderBtn.on("click",this,function(){Ln.instance.event("SHOW_CONTENT_PANEL",[Th,0])}),this.uiSkin.uploadBtn.on("click",this,function(){Ln.instance.event("SHOW_CONTENT_PANEL",[Ih,1])}),this.uiSkin.teaching.on("click",this,function(){}),this.uiSkin.addWechat.on("click",this,function(){var t={};t.title="企业微信",t.url="bigpic/enterWeChat.jpg",E.instance.openView("PRODUCT_PROC_EFFECT_PANEL",!1,t)}),W.instance.Request(W.httpUrl+"org/getInfo",this,this.onGetLeftCapacitBack,null,null),W.instance.Request(W.httpUrl+"fs/getLatestFile?",this,this.onGetLatestPic,null,null)},n.updatePicItem=function(t){t.setData(t.dataSource)},n.onGetLeftCapacitBack=function(t){var i=JSON.parse(t);if(null!=this.uiSkin&&!this.uiSkin.destroyed&&"0"==i.code){var e=parseInt(i.data.storageUsedSize)/1024/1024,n=parseInt(i.data.storageDefaultSize)/1e3/1e3;g.instance.hasBuySorage=i.data.storageSize,g.instance.hasBuySorage>0&&(n=g.instance.hasBuySorage),this.uiSkin.capacityProgress.value=parseInt(i.data.storageUsedSize)<parseInt(i.data.storageDefaultSize)?parseInt(i.data.storageUsedSize)/parseInt(i.data.storageDefaultSize):1,this.uiSkin.leftCapacityLbl.text=e.toFixed(0)+"M/"+n+"G",g.instance.hasBuySorage>0}},n.onGetLatestPic=function(t){var i=JSON.parse(t);if(null!=this.uiSkin&&!this.uiSkin.destroyed&&"0"==i.code){for(var e=[],n=0;n<i.data.length;n++){var s=new p(i.data[n],1);e.push(s)}this.uiSkin.picList.array=e}},i}(Dn),Ms=function(t){function i(){this.uiSkin=null,this.curpage=1,this.totalPage=1,this.dateInput=null,this.dateInput2=null,this.curCustomer=null,this.picList=null,this.base64Arr=null,this.excelData=[],this.businessManlist=null,this.orderManlist=null,this.orderHistory=null,i.__super.call(this)}s(i,"script.usercenter.MyOrderControl",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.customListPanel.visible=!1,this.uiSkin.curCustomName.text="全部",this.uiSkin.curCustomName.editable=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),this.orderHistory={},this.uiSkin.orderList.itemRender=ac,this.uiSkin.orderList.repeatX=1,this.uiSkin.orderList.spaceY=2,this.uiSkin.orderList.renderHandler=new c(this,this.updateOrderList),this.uiSkin.orderList.selectEnable=!1,this.uiSkin.orderList.array=[],Ln.instance.on("PAY_ORDER_SUCESS",this,this.onRefreshOrder),this.uiSkin.orderList.mouseThrough=!0,this.uiSkin.writeOffRadio.selectedIndex=2,e.timer.frameLoop(1,this,this.updateDateInputPos);var i=new Date,n=new Date(i.getTime()-864e5),s="beginDate="+T.formatFullDateTime(n,!1)+" 00:00:00&endDate="+T.formatFullDateTime(new Date,!1)+" 23:59:59&option=2&page=1&customerId=-1&customerPayment=-1&cleared=-1";W.instance.Request(W.httpUrl+"order/list?"+s,this,this.onGetOrderListBack,null,null),this.uiSkin.lastpage.on("click",this,this.onLastPage),this.uiSkin.nextpage.on("click",this,this.onNextPage),this.uiSkin.orderBtn.on("click",this,function(){Ln.instance.event("SHOW_CONTENT_PANEL",[Th,0])}),this.uiSkin.ordertotalNum.text="0",this.uiSkin.ordertotalMoney.text="0元",this.uiSkin.paytype.selectedIndex=2,this.uiSkin.paytype.on("change",this,this.queryOrderList),this.uiSkin.writeOffRadio.on("change",this,this.queryOrderList),this.uiSkin.orderList.on("mousedown",this,this.onMouseDwons),this.uiSkin.orderList.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.btnsearch.on("click",this,this.queryOrderList),this.uiSkin.exportExcel.on("click",this,this.exportExcel),Ln.instance.on("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.on("OPEN_PANEL_VIEW",this,this.onHideInputDate),this.uiSkin.orderList.on("mouseover",this,this.pauseParentScroll),this.uiSkin.orderList.on("mouseout",this,this.resumeParentScroll),e.stage.on("mouseup",this,this.onMouseUpHandler),Ln.instance.on("DELETE_ORDER_BACK",this,this.getOrderListAgain),Ln.instance.on("CANCEL_PAY_ORDER",this,this.onCancelPayOrder),Ln.instance.on("SELECT_CUSTOMER",this,this.onSelectCustomer),W.instance.Request(W.httpUrl+W.listBusinessMan,this,this.getBusinessManBack,null,null),W.instance.Request(W.httpUrl+W.listOrderMakers,this,this.getOrderMakersBack,null,null),this.initDateSelector()},n.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onshowInputDate=function(){"VIEW_FIRST_PAGE"==E.instance.getTopViewName()&&(this.dateInput.hidden=!1,this.dateInput2.hidden=!1)},n.onHideInputDate=function(){null!=this.dateInput&&(this.dateInput.hidden=!0,this.dateInput2.hidden=!0)},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=222/Ti.pixelRatio,this.dateInput.style.height=44/Ti.pixelRatio,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.style.color="#003dc6",this.dateInput.style.border="2px solid #003dc6",this.dateInput.style.borderRadius="5px",this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>2592e6?(e=new Date(i.getTime()+2592e6),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1))}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=222/Ti.pixelRatio,this.dateInput2.style.height=44/Ti.pixelRatio,this.dateInput2.style.color="#003dc6",this.dateInput2.style.border="2px solid #003dc6",this.dateInput2.style.borderRadius="5px",this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>2592e6?(e=new Date(i.getTime()-2592e6),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1))}}},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=Ti.clientWidth/1920;this.dateInput.style.width=222*i,this.dateInput.style.height=44*i,this.dateInput.style.fontSize=24*i,this.dateInput2.style.fontSize=24*i,this.dateInput2.style.width=222*i,this.dateInput2.style.height=44*i,this.dateInput.style.top=(t.y-121)*i+"px",this.dateInput.style.left=(t.x+65)*i+"px",this.dateInput2.style.top=(t.y-121)*i+"px",this.dateInput2.style.left=(t.x+330)*i+"px"}},n.onLastPage=function(){this.curpage>1&&(this.curpage--,this.getOrderListAgain())},n.onNextPage=function(){this.curpage<this.totalPage&&(this.curpage++,this.getOrderListAgain())},n.queryOrderList=function(){this.curpage=1,this.getOrderListAgain()},n.onSelectCustomer=function(t){(null==this.curCustomer||this.curCustomer.id!=t.id)&&(this.curCustomer=t,this.uiSkin.curCustomName.text=t.customerName,parseInt(this.curCustomer.id)>0&&(this.uiSkin.curCustomName.text+="("+m.PAY_TYPE_NAME[this.curCustomer.defaultPayment-1]+")"),this.getOrderListAgain())},n.getOrderListAgain=function(){var t="beginDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59&option="+this.uiSkin.paytype.selectedIndex+"&page="+this.curpage;t+=null!=this.curCustomer?"&customerId="+this.curCustomer.id:"&customerId=-1",t+=2==this.uiSkin.writeOffRadio.selectedIndex?"&cleared=-1":"&cleared="+this.uiSkin.writeOffRadio.selectedIndex,t+=this.uiSkin.businessCombo.selectedIndex>0?"&salerId="+this.businessManlist[this.uiSkin.businessCombo.selectedIndex-1].id:"&salerId=0",t+="&customerPayment=-1",t+=this.uiSkin.orderPlaceCombo.selectedIndex>0?"&userId="+this.orderManlist[this.uiSkin.orderPlaceCombo.selectedIndex-1].userId:"&userId=0",W.instance.Request(W.httpUrl+"order/list?"+t,this,this.onGetOrderListBack,null,null)},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onRefreshOrder=function(){var t="beginDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59&option="+this.uiSkin.paytype.selectedIndex+"&page="+this.curpage;t+=null!=this.curCustomer?"&customerId="+this.curCustomer.id:"&customerId=-1",W.instance.Request(W.httpUrl+"order/list?"+t,this,this.onGetOrderListBack,null,null),E.instance.closeView("VIEW_CHOOSE_DELIVERY_TIME_PANEL")},n.onGetOrderListBack=function(t){if(!this.destroyed&&null!=t&&""!=t){var i=JSON.parse(t);if("0"==i.code){var e=parseInt(i.data.totalCount);this.totalPage=Math.ceil(e/100),this.totalPage<1&&(this.totalPage=1),this.uiSkin.ordertotalNum.text=e+"",this.uiSkin.ordertotalMoney.text=null!=i.data.totalAmount?i.data.totalAmount+"元":"0元",g.instance.isHidePrice()&&(this.uiSkin.ordertotalMoney.text="****"),this.orderHistory[this.curpage.toString()]=i.data.orders,this.uiSkin.pagenum.text=this.curpage+"/"+this.totalPage,this.uiSkin.orderList.array=i.data.orders}else E.showAlert("获取订单失败")}},n.updateOrderList=function(t){t.setData(t.dataSource)},n.onCancelPayOrder=function(){E.instance.closeView("VIEW_CHOOSE_DELIVERY_TIME_PANEL")},n.exportExcel=function(){Ti.window.uploadApp=this;var t=[];for(var i in this.orderHistory)parseInt(i)<=this.curpage&&(t=t.concat(this.orderHistory[i]));if(null==t||0==t.length)return E.showAlert("没有可导出的数据"),void 0;if(t.length>1e3)return E.showAlert("订单数量不能超过1000条，请尝试减少翻页数"),void 0;this.picList=[],this.excelData=[];for(var e=0;e<t.length;e++){var n=JSON.parse(t[e].detail),s=n.orderItemList;s.sort(this.sortProduct);for(var r=0;r<s.length;r++){var a=s[r].conponent.LWH.split("/"),o={};o.orderId=t[e].id,o.customerName=t[e].customerName,o.orderDate=t[e].createdAt,o.seq=s[r].itemSeq,o.fileName=s[r].conponent.filename,o.prodName=s[r].conponent.prodName,o.size=a[0]+"*"+a[1]+"(cm)",this.picList.push(s[r].conponent.thumbnailsPath);var h="";if(null!=s[r].conponent.procInfoList)for(var l=0;l<s[r].conponent.procInfoList.length;l++)h+=s[r].conponent.procInfoList[l].procDescription+"-";o.process=h,o.itemNum=s[r].itemNumber,o.area=(parseFloat(a[0])*parseFloat(a[1])/1e4).toFixed(2),o.unitSalePrice=null!=s[r].unitSalesPrice&&""!=s[r].unitSalesPrice?s[r].unitSalesPrice:s[r].itemPrice,o.totalSalesPrice=null!=s[r].totalSalesPrice&&""!=s[r].totalSalesPrice?s[r].totalSalesPrice:(parseFloat(s[r].itemPrice)*parseFloat(s[r].itemNumber)).toFixed(2),r==s.length-1?(o.deliveryFee=null!=n.deliveryFee&&""!=n.deliveryFee?n.deliveryFee:n.shippingFee,o.installationFee=null!=n.installationFee&&""!=n.installationFee?n.installationFee:"0",o.designFee=null!=n.designFee&&""!=n.designFee?n.designFee:"0",o.otherFee=null!=n.otherFee&&""!=n.otherFee?n.otherFee:"0",o.price=null!=n.totalSalesPrice&&""!=n.totalSalesPrice?n.totalSalesPrice:n.orderAmount):(o.price="",o.deliveryFee=""),o.deliverydate=null!=s[r].deliveryDate?T.getNextDayStr(s[r].deliveryDate+" 00:00:00"):"",o.picWidth=a[0],o.picHeight=a[1],this.excelData.push(o)}}this.uiSkin.exportExcel.disabled=!0,this.exportExcelData()},n.getAllImgBase64=function(){if(this.picList.length>0)Ti.window.getImgBase64(this.picList[0],this.getImageBase64Back),this.picList.splice(0,1);else{for(var t=0;t<this.base64Arr.length;t++)this.excelData[t].imgBase64=this.base64Arr[t];this.exportExcelData()}},n.getImageBase64Back=function(t){this.base64Arr.push(t),this.getAllImgBase64()},n.exportExcelData=function(){var t=this;Ti.window.exportExcelJs(this.excelData,this.dateInput.value+"至"+this.dateInput2.value+"订单数据"),e.timer.once(3e4,this,function(){t.uiSkin.exportExcel.disabled=!1})},n.sortProduct=function(t,i){return parseInt(t.item_seq)>parseInt(i.item_seq)?1:-1},n.getBusinessManBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data,n=[],s="全部";e.length>0&&(s+=",");for(var r=0;r<e.length;r++)n.push(new x(e[r])),s+=n[r].name+"_"+n[r].mobileNumber,r<e.length-1&&(s+=",");this.uiSkin.businessCombo.labels=s,this.uiSkin.businessCombo.selectedIndex=0,this.businessManlist=n}},n.getOrderMakersBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data,n="全部";e.length>0&&(n+=",");for(var s=0;s<e.length;s++)n+=e[s].nickName+"_"+e[s].mobileNumber,s<e.length-1&&(n+=",");this.uiSkin.orderPlaceCombo.labels=n,this.uiSkin.orderPlaceCombo.selectedIndex=0,this.orderManlist=e}},n.onDestroy=function(){e.stage.off("mouseup",this,this.onMouseUpHandler),e.timer.clearAll(this),null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2)),Ln.instance.off("DELETE_ORDER_BACK",this,this.getOrderListAgain),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onRefreshOrder),Ln.instance.off("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.off("OPEN_PANEL_VIEW",this,this.onHideInputDate),Ln.instance.off("SELECT_CUSTOMER",this,this.onSelectCustomer)},i}(Dn),Bs=function(t){function i(){this.uiSkin=null,this.hasFubai=!1,this.param=null,this.leastCutNum=0,this.cuttype=0,this.linelist=null,i.__super.call(this)}s(i,"script.order.InputCutNumControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.hasFubai=this.param,this.linelist=[],this.uiSkin.okbtn.on("click",this,this.closeView),this.uiSkin.productlist.itemRender=yc,this.uiSkin.productlist.repeatX=3,this.uiSkin.productlist.spaceY=20,this.uiSkin.productlist.spaceX=60,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1;var t=[],i=k.instance.curSelectMat;this.uiSkin.closeBtn.on("click",this,this.closeScene),this.uiSkin.cancelBtn.on("click",this,this.closeScene);var e=i.materialWidth-2;if(this.uiSkin.maxtips.text="（单份最大裁切宽度："+e+"cm）",null!=k.instance.curSelectOrderItem){var n={};n.finalWidth=k.instance.curSelectOrderItem.finalWidth,n.finalHeight=k.instance.curSelectOrderItem.finalHeight,n.fid=k.instance.curSelectOrderItem.ordervo.picinfo.fid,n.maxwidth=e,n.border=T.getBorderDistance(k.instance.curSelectMat.getAllSelectedTech()),n.orderitemvo=k.instance.curSelectOrderItem.ordervo,n.orderitemvo.cuttype=0,n.orderitemvo.cutnum=Math.ceil((k.instance.curSelectOrderItem.finalWidth+n.border)/e),n.orderitemvo.cutnum<2&&(n.orderitemvo.cutnum=2);var s=(k.instance.curSelectOrderItem.finalWidth+n.border)/n.orderitemvo.cutnum;s=parseFloat(s.toFixed(2)),n.orderitemvo.eachCutLength=[];for(var r=0;r<n.orderitemvo.cutnum;r++)n.orderitemvo.eachCutLength.push(s);t.push(n)}else for(var a=k.instance.batchChangeMatItems,o=T.getBorderDistance(k.instance.curSelectMat.getAllSelectedTech()),h=0;h<a.length;h++)if(a[h].finalWidth+o>i.materialWidth&&a[h].finalHeight+o>i.materialWidth){var n={};n.finalWidth=a[h].finalWidth,n.finalHeight=a[h].finalHeight,n.fid=a[h].ordervo.picinfo.fid,n.maxwidth=e,n.border=T.getBorderDistance(k.instance.curSelectMat.getAllSelectedTech()),n.orderitemvo=a[h].ordervo,n.orderitemvo.cuttype=0,n.orderitemvo.cutnum=Math.ceil((a[h].finalWidth+n.border)/e),n.orderitemvo.cutnum<2&&(n.orderitemvo.cutnum=2);var s=(a[h].finalWidth+n.border)/n.orderitemvo.cutnum;s=parseFloat(s.toFixed(2)),n.orderitemvo.eachCutLength=[];for(var r=0;r<n.orderitemvo.cutnum;r++)n.orderitemvo.eachCutLength.push(s);t.push(n)}this.uiSkin.productlist.array=t,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.productlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.productlist.on("mouseout",this,this.resumeParentScroll)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.pauseParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=null},e.resumeParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=this.uiSkin.mainpanel},e.updateProductList=function(t){t.setData(t.dataSource)},e.closeView=function(){for(var t=this.uiSkin.productlist.array,i=!1,e=0;e<t.length;e++)if(null!=t[e])for(var n=t[e].orderitemvo.eachCutLength,s=0;s<n.length;s++){if(n[s]<=0||n[s]>t[e].maxwidth)return E.showAlert("请检查每份切割长度是否有效（切割不能为空或0，也不能大于最大长度"+t[e].maxwidth+"cm)。"),void 0;if(0==i)for(var r=s+1;r<n.length;r++)Math.abs(n[r]-n[s])>.02&&(i=!0)}return i?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"您选择了非等分裁切下单，由此产生的少量色差或长度拼接问题，生产方不负责承担损失，请谨慎选择。",caller:this,callback:this.onFirmCut}),void 0):(Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("INPUT_CUT_NUM"),void 0)},e.onFirmCut=function(t){t&&(Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("INPUT_CUT_NUM"))},e.closeScene=function(){E.instance.closeView("INPUT_CUT_NUM")},i}(Dn),Ns=function(t){function i(){this.uiSkin=null,this.param=null,this.inputarr=null,this.focusindex=0,this.coutdown=60,this.uuId="",i.__super.call(this)}s(i,"script.login.ResetPwdControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnClose.on("click",this,this.onCloseScen),this.uiSkin.btngetcode.on("click",this,this.onGetCode),this.uiSkin.btnok.on("click",this,this.onChangepwd),this.uiSkin.inputpwd.maxChars=20,this.uiSkin.inputphone.maxChars=11,this.uiSkin.inputphone.restrict="0-9",this.uiSkin.inputcode.maxChars=6,this.uiSkin.codeValid.visible=!1,this.uiSkin.inputcfmpwd.maxChars=20,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.inputarr=[this.uiSkin.inputphone,this.uiSkin.inputpwd,this.uiSkin.inputcfmpwd,this.uiSkin.inputcode];for(var t=0;t<this.inputarr.length;t++)this.inputarr[t].on("keydown",this,this.onAccountKeyUp);e.stage.on("focuschange",this,this.onFocusChange),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.inputphone.focus=!0,this.focusindex=0},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.onGetCode=function(){if(this.uiSkin.inputphone.text.length<11)return Ti.window.alert("请填写正确的手机号"),void 0;this.uiSkin.btngetcode.disabled=!0;var t={mobileNumber:this.uiSkin.inputphone.text,smsToken:T.uuid()};this.uuId=t.smsToken,W.instance.Request(W.httpUrl+"sys/getMobileSmsCode?",this,this.onGetPhoneCodeBack,JSON.stringify(t),"post")},n.onGetPhoneCodeBack=function(t){var i=JSON.parse(t);if("0"==i.code){{i.code}this.uiSkin.btngetcode.label="60秒后重试",e.timer.loop(1e3,this,this.countdownCode)}else this.uiSkin.btngetcode.disabled=!1},n.countdownCode=function(){this.coutdown--,this.coutdown>0?this.uiSkin.btngetcode.label=this.coutdown+"秒后重试":(this.uiSkin.btngetcode.disabled=!1,this.uiSkin.btngetcode.label="获取验证码",this.uiSkin.codeValid.visible=!0,e.timer.clear(this,this.countdownCode))},n.onChangepwd=function(){if(""==this.uiSkin.inputcode.text)return E.showAlert("请填写验证码"),void 0;if(""==this.uiSkin.inputpwd.text)return E.showAlert("请填写新的密码"),void 0;if(this.uiSkin.inputpwd.text.length<6)return Ti.window.alert("密码长度至少6位"),void 0;if(this.uiSkin.inputpwd.text!=this.uiSkin.inputcfmpwd.text)return E.showAlert("两次填写的密码不一致"),void 0;var t={};t.mobileNumber=this.uiSkin.inputphone.text,t.smsCode=this.uuId+"@"+this.uiSkin.inputcode.text,t.password=this.uiSkin.inputpwd.text,W.instance.Request(W.httpUrl+"sys/updatePassword?",this,this.onChangePwdBack,JSON.stringify(t),"post")},n.onChangePwdBack=function(t){if(""!=t){var i=JSON.parse(t);"0"==i.code&&E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.showloginView,msg:"修改成功"})}},n.showloginView=function(){this.onCloseScen()},n.onFocusChange=function(){null!=e.stage.focus&&this.inputarr.indexOf(e.stage.focus.parent)>=0&&(this.focusindex=this.inputarr.indexOf(e.stage.focus.parent))},n.onAccountKeyUp=function(t){9==t.keyCode&&(this.focusindex=++this.focusindex%this.inputarr.length,this.inputarr[this.focusindex].focus=!0),13==t.keyCode},n.onCloseScen=function(){E.instance.openView("VIEW_lOGPANEL",!0),E.instance.closeView("VIEW_CHANGEPWD"),e.stage.off("focuschange",this,this.onFocusChange),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),Fs=function(t){function i(){this.uiSkin=null,this.param=null,this.orderDatas=null,this.delaypay=!1,this.requestnum=0,this.curclicknum=0,this.FORBIDTIME=[0,3e4,6e4,18e4],this.canoccypay=!0,this.leftforbidtime=0,this.placeorderNum=0,this.manufactcodeStr=null,this.searchzoneid=null,this.retryTime=0,this.curSelectedManufacture=null,i.__super.call(this)}s(i,"script.order.ChooseDeliveryTimeControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.orderlist.itemRender=mc,this.uiSkin.orderlist.selectEnable=!1,this.uiSkin.orderlist.spaceY=2,this.uiSkin.orderlist.renderHandler=new c(this,this.updateOrderItem),this.uiSkin.deliveryTypelist.itemRender=lc,this.uiSkin.deliveryTypelist.selectEnable=!1,this.uiSkin.deliveryTypelist.spaceY=2,this.uiSkin.deliveryTypelist.renderHandler=new c(this,this.updateDelvieryItem),this.uiSkin.deliveryTypelist.array=[],this.uiSkin.savebtn.on("click",this,this.onSaveOrder),this.uiSkin.paybtn.on("click",this,this.onPayOrder),this.orderDatas=this.param.orders,this.delaypay=this.param.delaypay,this.uiSkin.savebtn.visible=!this.delaypay,this.uiSkin.orderlist.array=this.orderDatas,this.uiSkin.timepreferRdo.selectedIndex=k.instance.curTimePrefer-2,this.uiSkin.setdefaultbtn.on("click",this,this.setDefaultTimePrefer),this.uiSkin.timepreferRdo.on("change",this,this.resetTimePrefer),this.delaypay||"0"==k.instance.selectAddress.customerId?this.delaypay&&"0"!=k.instance.finalOrderData[0].customerId?(this.uiSkin.curCustomer.text="当前客户："+this.param.customerName,this.param.defaultPayType>=0&&(this.uiSkin.curCustomer.text+="("+m.PAY_TYPE_NAME[this.param.defaultPayType-1]+")"),this.uiSkin.curCustomer.visible=!0):this.uiSkin.curCustomer.visible=!1:(this.uiSkin.curCustomer.text="当前客户："+k.instance.selectAddress.customerName,this.uiSkin.curCustomer.visible=!0,k.instance.selectAddress.defaultPayType>=0&&(this.uiSkin.curCustomer.text+="("+m.PAY_TYPE_NAME[k.instance.selectAddress.defaultPayType-1]+")"));for(var t=[],i=0;i<k.instance.finalOrderData.length;i++){t.push(k.instance.finalOrderData[i].manufacturerCode),this.searchzoneid=k.instance.finalOrderData[i].addressId;var n=new ch;n.selbtn.label=k.instance.finalOrderData[i].manufacturerName,n.selfIcon.visible=!1,n.selbtn.width=n.selbtn.text.textWidth+40,n.width=n.selbtn.width,this.uiSkin.manufatureList.addChild(n),0==i&&(n.selbtn.selected=!0,this.curSelectedManufacture=k.instance.finalOrderData[i].manufacturerCode)}if(this.manufactcodeStr=t.toString(),null==k.instance.deliveryList||k.instance.deliveryList.length<t.length){var s="manufacturerList="+t.toString()+"&addr_id="+this.searchzoneid;W.instance.Request(W.httpUrl+"business/deliverylist?"+s,this,this.onGetDeliveryBack,null,null)}else this.initDeliveryInfo();for(var r=0,i=0;i<this.orderDatas.length;i++){var a=Number(this.orderDatas[i].itemPrice)*Number(this.orderDatas[i].itemNumber);a=parseFloat(a.toFixed(1)),r+=a}this.uiSkin.rawprice.text=k.instance.rawPrice+"元",this.param.delaypay&&(this.uiSkin.rawprice.text=k.instance.finalOrderData[0].moneyPaid+"元"),this.uiSkin.disocuntprice.text=r.toFixed(1)+"元",this.uiSkin.totalprice.text=r.toFixed(1)+"元",this.uiSkin.delmoney.text="0元",this.uiSkin.countdown.visible=!1,this.uiSkin.productNum.text=this.orderDatas.length+"",g.instance.isHidePrice()&&(this.uiSkin.disocuntprice.text="***",this.uiSkin.totalprice.text="***",this.uiSkin.delmoney.text="***",this.uiSkin.rawprice.text="***"),this.uiSkin.firstDiscount.visible=!1,this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,e.timer.loop(1e3,this,this.onCountDownTime),Ln.instance.on("UPDATE_PRICE_BY_DELIVERYDATE",this,this.updatePrice),Ln.instance.on("BATCH_CHANGE_OCCUPY_DATE",this,this.retryBatchOccupy),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.initDeliveryDateLabel(),this.updatePrice(),Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateDeliveryDateBox),this.updateDeliveryDateBox(g.instance.shrinkState)},n.updateDeliveryDateBox=function(t){this.uiSkin.deliverdateBoc.space=0==t?50:95},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.initDeliveryDateLabel=function(){for(var t=T.getNextFiveDays(k.instance.currentDayStr+" 00:00:00"),i=0;i<t.length;i++)this.uiSkin["deliveryDate"+i].text=t[i]},n.retryGetDelivery=function(){var t="manufacturerList="+this.manufactcodeStr.toString()+"&addr_id="+this.searchzoneid;W.instance.Request(W.httpUrl+"business/deliverylist?"+t,this,this.onGetDeliveryBack,null,null)},n.onGetDeliveryBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){k.instance.deliveryList={};for(var e=0;e<i.length;e++){var n=i[e].deliveryList;k.instance.deliveryList[i[e].manufacturer_code]=[];for(var s=0;s<n.length;s++){var r=new d(n[s]);r.belongManuCode=i[e].manufacturer_code,k.instance.deliveryList[i[e].manufacturer_code].push(r),"送货上门"==r.delivery_name&&(k.instance.selectDelivery=r)}}this.initDeliveryInfo()}}},n.initDeliveryInfo=function(){(null==k.instance.getDeliveryList()[0].deliveryVoArr||0==k.instance.getDeliveryList()[0].deliveryVoArr.length)&&E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"当前收货地址没有配送服务，请重新选择收货地址下单"}),this.uiSkin.deliveryTypelist.array=k.instance.getDeliveryList();for(var t=k.instance.getDeliveryList(),i=0;i<t.length;i++)if(t[i].manufacturer_code==this.curSelectedManufacture){var e=[];e.push(t[i]),this.uiSkin.deliveryTypelist.array=e;break}},n.showMaufactureList=function(){for(var t=0;t<k.instance.finalOrderData.length;t++){var i=new ch;i.selbtn.label=k.instance.finalOrderData[t].manufacturerName,i.selfIcon.visible=!1}},n.onCountDownTime=function(){for(var t=(this.orderDatas,0);t<this.orderDatas.length;t++)(1==this.orderDatas[t].isUrgent||null!=this.orderDatas[t].deliveryDate)&&this.orderDatas[t].lefttime>0&&(this.orderDatas[t].lefttime--,0==this.orderDatas[t].lefttime&&(this.orderDatas[t].isUrgent=0,this.orderDatas[t].deliveryDate=null,this.orderDatas[t].outtime=!0));this.leftforbidtime>0?(this.leftforbidtime--,this.uiSkin.countdown.text="（"+this.leftforbidtime+"秒之后可重新选择交付策略）",this.uiSkin.countdown.visible=!0):this.uiSkin.countdown.visible=!1},n.retryBatchOccupy=function(t,i,e,n,s,r){var a=this,o="orderItem_sn="+t+"&manufacturer_code="+i+"&prod_code="+e+"&isUrgent="+n+"&delivery_date="+s;W.instance.Request(W.httpUrl+"business/setCapacityPreOccupy?"+o,this,function(i){if(!a.uiSkin.destroyed){var e=JSON.parse(i);if(!e.hasOwnProperty("status")){if(1==e.feedBack)for(var o=k.instance.getProductOrderDataList(t),h=0;h<o.length;h++){var l=o[h];l.outtime=!1,l.lefttime=150,l.isUrgent=n,l.deliveryDate=s,l.discount=r}else for(var o=k.instance.getProductOrderDataList(t),h=0;h<o.length;h++){var l=o[h];
l.isUrgent=0,l.deliveryDate=null,l.discount=1}a.uiSkin.orderlist.array=a.orderDatas,a.updatePrice()}}},null,null)},n.onOccupyCapacityBack=function(t){if(!this.destroyed){var i=JSON.parse(t);i.hasOwnProperty("status")||(this.uiSkin.orderlist.array=this.orderDatas,this.updatePrice())}},n.updatePrice=function(){for(var t=this.uiSkin.deliveryTypelist.cells,i=0;i<t.length;i++)t[i].refreshRadio();for(var e=0,n=[],s=[],i=0;i<this.orderDatas.length;i++){var r=0,a=this.orderDatas[i].discountProcessPrice*this.orderDatas[i].itemNumber,o=this.orderDatas[i].materialPrice*this.orderDatas[i].itemNumber,h=1;(1==this.orderDatas[i].isUrgent||null!=this.orderDatas[i].deliveryDate)&&(h=this.orderDatas[i].discount),r=a*h+o,this.orderDatas[i].matCost=this.orderDatas[i].one_mat_cost*this.orderDatas[i].itemNumber,this.orderDatas[i].matCost=this.orderDatas[i].matCost.toFixed(2),this.orderDatas[i].procCost=this.orderDatas[i].one_proc_cost*this.orderDatas[i].itemNumber,this.orderDatas[i].procCost=this.orderDatas[i].procCost.toFixed(2),this.orderDatas[i].grossMargin=this.orderDatas[i].oneNoDiscountGrossMargin*this.orderDatas[i].itemNumber+this.orderDatas[i].oneDiscountGrossMargin*this.orderDatas[i].itemNumber*h,this.orderDatas[i].grossMargin=this.orderDatas[i].grossMargin.toFixed(2),this.orderDatas[i].taxFee=r-parseFloat(this.orderDatas[i].matCost)-parseFloat(this.orderDatas[i].procCost)-parseFloat(this.orderDatas[i].grossMargin),this.orderDatas[i].taxFee=this.orderDatas[i].taxFee.toFixed(1);var l=k.instance.getManufacturerCode(this.orderDatas[i].orderItemSn);1==this.orderDatas[i].isUrgent&&s.indexOf(l)<0?s.push(l):0==this.orderDatas[i].isUrgent&&n.indexOf(l)<0&&n.push(l),r=parseFloat(r.toFixed(1)),e+=r}var c=0,u=0;if(null!=k.instance.deliveryList){for(i=0;i<n.length;i++)0==i?c+=k.instance.getDeliveryPrice(k.instance.deliveryList[n[i]],k.instance.curCommmonDeliveryType[n[i]]):null!=k.instance.curCommmonDeliveryType[n[i]]&&k.instance.curCommmonDeliveryType[n[i]]!=k.instance.curCommmonDeliveryType[n[0]]&&(c+=k.instance.getDeliveryPrice(k.instance.deliveryList[n[i]],k.instance.curCommmonDeliveryType[n[i]]));for(i=0;i<s.length;i++)u+=k.instance.getDeliveryPrice(k.instance.deliveryList[s[i]],k.instance.curUrgentDeliveryType[s[i]])}this.uiSkin.delmoney.text=(c+u).toFixed(1)+"元",this.uiSkin.disocuntprice.text=e.toFixed(1)+"元";var d=parseFloat((c+u).toFixed(1))+parseFloat(e.toFixed(1));d<2*k.instance.finalOrderData.length&&(d=2*k.instance.finalOrderData.length),this.uiSkin.totalprice.text=d.toFixed(1)+"元";for(var i=0;i<this.uiSkin.deliveryTypelist.cells.length;i++)this.uiSkin.deliveryTypelist.cells[i].refreshLabel();g.instance.isHidePrice()&&(this.uiSkin.disocuntprice.text="***",this.uiSkin.totalprice.text="***",this.uiSkin.delmoney.text="***",this.uiSkin.rawprice.text="***")},n.onPayOrder=function(){for(var t="",i=0;i<k.instance.finalOrderData.length;i++){t=k.instance.finalOrderData[i].addressId;break}W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+t+"&manufacturer_type=喷印输出中心&client_code="+g.instance.clientCode,this,this.onGetOutPutAddress,null,null)},n.onGetOutPutAddress=function(t){if(!this.uiSkin.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(var e=i,n=0;n<k.instance.finalOrderData.length;n++){for(var s=!1,r=0;r<e.length;r++)k.instance.finalOrderData[n].manufacturerCode==e[r].org_code&&(s=!0);if(0==s)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"当前的输出中心无效，请重新下单。"}),void 0}var a=this.getOrderData();if(null==a)return;{a[0].placeorderNum}if(null==a)return;this.uiSkin.paybtn.mouseEnabled=!1,this.delaypay?W.instance.Request(W.httpUrl+"order/update?",this,this.onUpdateOrderBack,JSON.stringify(a),"post"):W.instance.Request(W.httpUrl+"order/submit",this,this.onPlaceOrderBack,JSON.stringify(a),"post")}}},n.onUpdateOrderBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=0,n=[],s=0;s<i.data.length;s++){var r=i.data[s];e+=Number(r.moneyPaid),n.push(r.orderSn)}var a=this.getPayLeftTime();a>0?E.instance.openView("VIEW_SELECT_PAYTYPE_PANEL",!1,{amount:Number(e.toFixed(2)),orderid:n,lefttime:a}):E.showAlert("支付超时，请重新选择交付时间")}this.uiSkin.paybtn.mouseEnabled=!0}},n.onPlaceOrderBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=0,n=[],s=0;s<i.data.length;s++){var r=i.data[s];e+=Number(r.moneyPaid),n.push(r.orderSn)}var a=this.getPayLeftTime();a>0?E.instance.openView("VIEW_SELECT_PAYTYPE_PANEL",!1,{amount:Number(e.toFixed(2)),orderid:n,lefttime:a}):E.showAlert("支付超时，请重新选择交付时间")}this.uiSkin.paybtn.mouseEnabled=!0}},n.getPayLeftTime=function(){for(var t=(this.orderDatas,0),i=0;i<this.orderDatas.length;i++)(1==this.orderDatas[i].isUrgent||null!=this.orderDatas[i].deliveryDate)&&(this.orderDatas[i].lefttime<t||0==t)&&(t=this.orderDatas[i].lefttime);return t},n.resetDeliveryTime=function(){for(var t=0;t<this.orderDatas.length;t++)this.orderDatas[t].isUrgent=0,this.orderDatas[t].deliveryDate=null,this.orderDatas[t].outtime=!1,this.orderDatas[t].lefttime=0,this.orderDatas[t].discount=1;this.uiSkin.orderlist.array=this.orderDatas,this.updatePrice()},n.setDefaultTimePrefer=function(){T.setLocalVar("timePrefer",this.uiSkin.timepreferRdo.selectedIndex+2),E.showAlert("设置成功")},n.resetTimePrefer=function(){if(0==this.canoccypay)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"您操作的太频繁了，请稍后再试"}),void 0;this.canoccypay=!1,this.curclicknum++,this.uiSkin.timepreferRdo.mouseEnabled=!1,this.curclicknum>3&&(this.curclicknum=3),this.leftforbidtime=this.FORBIDTIME[this.curclicknum]/1e3,e.timer.once(this.FORBIDTIME[this.curclicknum],this,this.enableClickOccupy);var t=k.instance.finalOrderData;this.requestnum=0,k.instance.curTimePrefer=this.uiSkin.timepreferRdo.selectedIndex+2,this.resetDeliveryTime();for(var i=0;i<t.length;i++){var n=k.instance.getOrderCapcaityData(t[i],this.uiSkin.timepreferRdo.selectedIndex+2);W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAllAvailableDateBack,n,"post")}},n.enableClickOccupy=function(){this.canoccypay=!0,this.uiSkin.timepreferRdo.mouseEnabled=!0},n.ongetAllAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}this.requestnum++,this.requestnum==k.instance.finalOrderData.length&&(this.uiSkin.orderlist.array=this.orderDatas,this.updatePrice()),this.initDeliveryDateLabel()}}},n.getOrderData=function(){for(var t=k.instance.finalOrderData,i=0;i<t.length;i++){var n=t[i].orderItemList,s=t[i].packageList,r=0;t[i].placeorderNum=n[0].orderItemSn;var a=!1,o=!1;if(k.instance.hasCommonOrderItem(t[i].manufacturerCode)&&T.stringIsEmpty(k.instance.curCommmonDeliveryType[t[i].manufacturerCode]))return this.retryTime<=1?(e.timer.frameOnce(10,this,this.retryGetDelivery),this.retryTime++):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"请选择普通配送方式"}),null;if(k.instance.hasUrgentOrderItem(t[i].manufacturerCode)&&T.stringIsEmpty(k.instance.curUrgentDeliveryType[t[i].manufacturerCode]))return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"请选择加急配送方式"}),null;var h=k.instance.getDeliveryOrgCode(k.instance.deliveryList[t[i].manufacturerCode])+"#"+k.instance.curCommmonDeliveryType[t[i].manufacturerCode],l=k.instance.getDeliveryOrgCode(k.instance.deliveryList[t[i].manufacturerCode])+"#"+k.instance.curUrgentDeliveryType[t[i].manufacturerCode],c=k.instance.getDeliveryPrice(k.instance.deliveryList[t[i].manufacturerCode],k.instance.curCommmonDeliveryType[t[i].manufacturerCode]),u=k.instance.getDeliveryPrice(k.instance.deliveryList[t[i].manufacturerCode],k.instance.curUrgentDeliveryType[t[i].manufacturerCode]);t[i].logistic_code=k.instance.hasCommonOrderItem(t[i].manufacturerCode)?h:"";for(var d=0;d<s.length;d++)s[d].logisticCode=t[i].logistic_code;for(var _=0;_<n.length;_++){if(null==n[_].isUrgent||0==n[_].isUrgent&&null==n[_].deliveryDate)return E.showAlert("有产品未设置交货时间"),null;if(null==n[_].discount)return E.showAlert("请重新选择交货时间"),null;1==n[_].isUrgent?(n[_].logistics_type=l,o=!0):(delete n[_].logistics_type,a=!0);var p=0,f=n[_].discountProcessPrice*n[_].itemNumber,m=n[_].materialPrice*n[_].itemNumber,g=1;(1==this.orderDatas[i].isUrgent||null!=this.orderDatas[i].deliveryDate)&&(g=n[_].discount),p=f*g+m,p=parseFloat(p.toFixed(1)),n[_].actualAmount=p.toString(),r+=p}if(t[i].orderAmount=r,t[i].orderAmount<2&&(t[i].orderAmount=2,n.length>0))for(var v=Number((2/n.length).toFixed(2)),S=2-v*n.length,_=0;_<n.length;_++)n[_].itemPrice=0==_?((v+S)/n[_].itemNumber).toFixed(2):(v/n[_].itemNumber).toFixed(2);0!=i&&k.instance.curCommmonDeliveryType[t[i].manufacturerCode]==k.instance.curCommmonDeliveryType[t[0].manufacturerCode]&&(c=0),t[i].shippingFee=(c*(a?1:0)+u*(o?1:0)).toFixed(1),t[i].moneyPaid=(t[i].orderAmount+c*(a?1:0)+u*(o?1:0)).toFixed(1),t[i].orderAmount=t[i].orderAmount.toFixed(1)}for(var i=0;i<t.length;i++)for(var n=t[i].orderItemList,_=0;_<n.length;_++)delete n[_].outtime;var y=k.instance.finalOrderData;return y},n.onSaveOrder=function(){var t=this;if(null==g.instance.companyShort)return W.instance.Request(W.httpUrl+"org/getInfo",this,function(i){if(!this.destroyed){var e=JSON.parse(i);0==e.status&&(g.instance.company=e.data.name,g.instance.companyShort=e.data.shortName,g.instance.founderPhone=e.data.founderMobileNumber),t.onSaveOrder()}},null,null),void 0;var i=k.instance.finalOrderData;if(null!=i){this.uiSkin.savebtn.mouseEnabled=!1;for(var e=0;e<i.length;e++){var n=i[e].orderItemList;i[e].placeorderNum=n[0].orderItemSn}W.instance.Request(W.httpUrl+"order/submit",this,this.onSaveOrderBack,JSON.stringify(i),"post")}},n.onSaveOrderBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(Ln.instance.event("SHOW_CONTENT_PANEL",[Wh,0]),E.showAlert("保存订单成功，您可以到我的订单继续支付")):this.uiSkin.savebtn.mouseEnabled=!0}},n.onGiveUpOrder=function(){this.delaypay?E.instance.closeView("VIEW_CHOOSE_DELIVERY_TIME_PANEL"):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定关闭页面不保存订单吗？",caller:this,callback:this.confirmClose,ok:"确定",cancel:"取消"})},n.confirmClose=function(t){t&&E.instance.openView("VIEW_FIRST_PAGE",!0)},n.onCloseView=function(){E.instance.closeView("VIEW_CHOOSE_DELIVERY_TIME_PANEL")},n.updateOrderItem=function(t){t.setData(t.dataSource)},n.updateDelvieryItem=function(t){t.setData(t.dataSource)},n.onDestroy=function(){Ln.instance.off("UPDATE_PRICE_BY_DELIVERYDATE",this,this.updatePrice),Ln.instance.off("BATCH_CHANGE_OCCUPY_DATE",this,this.retryBatchOccupy),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("FIRST_PAGE_SHRINK",this,this.updateDeliveryDateBox),k.instance.resetData(),e.timer.clearAll(this)},i}(Dn),Vs=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.workpanel.EffectPreviewController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,i.u3ddiv=Ti.document.querySelector("#unity-container"),i.u3ddiv.style.display="",this.uiSkin.closeBtn.on("click",this,this.closeView),Ti.document.body.appendChild(i.u3ddiv),Ti.window.layaCaller=this,this.initU3dWeb(),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.onResizeBrower()},e.initU3dWeb=function(){Ti.window.Unity3dWeb.createUnity()},e.closeView=function(){E.instance.closeView("EFFECT_PREVIEW_PANEL")},e.onResizeBrower=function(){var t=Ti.clientWidth/1920;i.u3ddiv.style.left=40*t,i.u3ddiv.style.top=40*t,i.u3ddiv.style.bottom=40*t,i.u3ddiv.style.right=40*t},e.unityIsReady=function(){console.log("unity is ready:"+JSON.stringify(this.param)),null!=this.param&&Ti.window.Unity3dWeb.sendProcInfo(JSON.stringify(this.param))},e.onDestroy=function(){null!=i.u3ddiv&&(Ti.window.Unity3dWeb.stopRender(),Ti.window.Unity3dWeb.setSceneActive("0"),i.u3ddiv.style.display="none",Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower))},i.u3ddiv=null,i.script=null,i.scriptpr=null,i}(Dn),Us=function(t){function i(){this.uiSkin=null,this.dateInput=null,this.dateInput2=null,i.__super.call(this)}s(i,"script.usercenter.InvoiceHistoryController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.invoicelist.itemRender=Al,this.uiSkin.invoicelist.repeatX=1,this.uiSkin.invoicelist.spaceY=2,this.uiSkin.invoicelist.renderHandler=new c(this,this.updateInvoiceList),this.uiSkin.invoicelist.selectEnable=!1,this.uiSkin.invoicelist.array=[],this.uiSkin.closebtn.on("click",this,this.closeView),this.initDateSelector(),this.uiSkin.dragimg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragimg.on("mouseup",this,this.stopDragPanel),e.timer.frameLoop(1,this,this.updateDateInputPos),Ln.instance.on("UPDATE_INVOICE_LIST",this,this.requestInvoiceList)},n.startDragPanel=function(t){this.uiSkin.dragimg.startDrag(),t.stopPropagation()},n.stopDragPanel=function(){this.uiSkin.dragimg.stopDrag()},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=150/Ti.pixelRatio,this.dateInput.style.height=20/Ti.pixelRatio,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>31104e6?(e=new Date(i.getTime()+31104e6),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1)),t.requestInvoiceList()}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=150/Ti.pixelRatio,this.dateInput2.style.height=20/Ti.pixelRatio,this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.requestInvoiceList(),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>31104e6?(e=new Date(i.getTime()-31104e6),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1)),t.requestInvoiceList()}}},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=0;Ti.width>e.stage.width&&(i=(Ti.width-e.stage.width)/2),this.dateInput.style.top=(t.y-25)/Ti.pixelRatio+"px",this.dateInput.style.left=(t.x+15/Ti.pixelRatio+i)/Ti.pixelRatio+"px",this.dateInput2.style.top=(t.y-25)/Ti.pixelRatio+"px",this.dateInput2.style.left=(t.x+205+i)/Ti.pixelRatio+"px"}},n.requestInvoiceList=function(){var t="bgnDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59";W.instance.Request(W.httpUrl+"group/list-invoice",this,this.listBack,t,"post")},n.listBack=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&(this.uiSkin.invoicelist.array=i.data)}},n.updateInvoiceList=function(t){t.setData(t.dataSource)},n.closeView=function(){E.instance.closeView("VIEW_INVOICE_HISTORY_PANEL")},n.onDestroy=function(){null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2)),Ln.instance.off("UPDATE_INVOICE_LIST",this,this.requestInvoiceList)},i}(Dn),Ws=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.characterpaint.CharacterTypeChooseControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.panel_main.vScrollBarSkin="",this.uiSkin.panel_main.hScrollBarSkin="",this.uiSkin.closebtn.on("click",this,this.closeView),this.uiSkin.qiegebtn.on("click",this,this.onShowOrderPanel),this.uiSkin.glowbtn.disabled=!0,this.uiSkin.ironbtn.disabled=!0},e.closeView=function(){E.instance.closeView("VIEW_CHARACTER_TYPE_PANEL")},e.onShowOrderPanel=function(){k.instance.orderType="Zipai",E.instance.openView("VIEW_CARVING_ORDER_PANEL",!0)},i}(Dn),Hs=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"utils.LoadingPrgControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.prg.value=0,this.uiSkin.prgtxt.text="0%",Ln.instance.on("UPDATE_LOADING_PROGRESS",this,this.onUpdatePrg)},e.onUpdatePrg=function(t){console.log("prg rec:"+t),this.uiSkin.prg.value=t,this.uiSkin.prgtxt.text=Math.floor(100*t)+"%",t>=1&&E.instance.closeView("VIEW_LOADING_PRO")},e.onDestroy=function(){Ln.instance.off("UPDATE_LOADING_PROGRESS",this,this.onUpdatePrg)},i}(Dn),Gs=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.usercenter.OrderDetailControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.orderoanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="";var t=parseInt(this.param.status);0==t?(this.uiSkin.orderState.text="未支付",this.uiSkin.orderState.color="#FF0000"):10==t?(this.uiSkin.orderState.text="支付中",this.uiSkin.orderState.color="#52B232",this.countDownPayTime(),e.timer.loop(1e3,this,this.countDownPayTime)):1==t?(this.uiSkin.orderState.text="已支付排产成功",this.uiSkin.orderState.color="#52B232"):102==t||103==t?(this.uiSkin.orderState.text="已支付排产中",this.uiSkin.orderState.color="#0022EE"):4==t?(this.uiSkin.orderState.text="已撤单",this.uiSkin.orderState.color="#52B232"):100==t?(this.uiSkin.orderState.text="已支付排产失败",this.uiSkin.orderState.color="#EE4400"):(this.uiSkin.orderState.text="订单异常",this.uiSkin.orderState.color="#52B232"),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.orderSn.text=this.param.id;var i=JSON.parse(this.param.detail),n=i.orderItemList;this.uiSkin.moneyPaidlbl.text=null!=i.moneyPaid?Number(i.moneyPaid).toFixed(2):Number(i.money_paidStr).toFixed(2),g.instance.isHidePrice()&&(this.uiSkin.moneyPaidlbl.text="***"),n.sort(this.sortProduct),this.uiSkin.outputtxt.text=i.manufacturerName,this.uiSkin.orderbox.autoSize=!0,this.uiSkin.comondeltype.text=null!=i.logistic_code&&""!=i.logistic_code?i.logistic_code.split("#")[1]:"",this.uiSkin.orderbox.itemRender=Ql,this.uiSkin.orderbox.repeatX=1,this.uiSkin.orderbox.spaceY=2,this.uiSkin.orderbox.renderHandler=new c(this,this.updateOrderList),this.uiSkin.orderbox.selectEnable=!1,this.uiSkin.urgentdelType.text="";for(var s=0;s<n.length;s++)n[s].orderId=this.param.id,1==n[s].isUrgent&&null!=n[s].logistics_type&&""!=n[s].logistics_type&&(this.uiSkin.urgentdelType.text=n[s].logistics_type.split("#")[1]);this.uiSkin.prodNum.text=n.length+"",this.uiSkin.orderTime.text=this.param.createdAt,this.uiSkin.address.text=i.packageList[0].addr,this.uiSkin.orderbox.array=n,this.uiSkin.orderbox.size(this.uiSkin.orderbox.width,this.uiSkin.orderbox.getBounds().height),this.uiSkin.closebtn.on("click",this,this.onCloseView),this.uiSkin.deliveryState.on("click",this,this.onGetDeliveryState),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.countDownPayTime=function(){if(null!=this.param.payDate){var t=new Date(Date.parse(T.convertDateStr(this.param.payDate))),i=Math.ceil((t.getTime()-(new Date).getTime())/1e3);if(i>0){var n=T.getCountDownString(i);this.uiSkin.orderState.text="支付中("+n+"后可继续支付)"}else this.uiSkin.orderState.text="未支付",e.timer.clear(this,this.countDownPayTime),this.uiSkin.orderState.color="#FF0000"}},n.updateOrderList=function(t){t.setData(t.dataSource)},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.sortProduct=function(t,i){return parseInt(t.itemSeq)>parseInt(i.itemSeq)?1:-1},n.refrshVbox=function(){this.uiSkin.orderbox.refresh(),this.uiSkin.orderbox.size(this.uiSkin.orderbox.width,this.uiSkin.orderbox.getBounds().height)},n.onGetDeliveryState=function(){var t="orderSn="+this.param.id;W.instance.Request(W.httpUrl+"business/getDeliveryOrder?"+t,this,this.onGetStateBack,null,null)},n.onGetStateBack=function(t){var i=JSON.parse(t);null!=i&&i.deliveryList.length>0?E.instance.openView("DELIVERY_PACKAGE_PANEL",!1,i.deliveryList):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"生产未完成，未查询到物流信息"})},n.onCloseView=function(){e.timer.clear(this,this.countDownPayTime),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("VIEW_ORDER_DETAIL_PANEL")},i}(Dn),zs=function(t){function i(){this.uiSkin=null,this.param=null,this.curpage=1,this.totalpage=1,i.__super.call(this)}s(i,"script.usercenter.PublicChargeRecordController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.recordlist.itemRender=rc,this.uiSkin.recordlist.repeatX=1,this.uiSkin.recordlist.spaceY=5,this.uiSkin.recordlist.renderHandler=new c(this,this.updateRecordList),this.uiSkin.recordlist.selectEnable=!1,this.uiSkin.recordlist.array=new Array(12),this.uiSkin.closebtn.on("click",this,this.closePanel),this.uiSkin.recordlist.array=[],this.uiSkin.prevbtn.on("click",this,this.onLastPage),this.uiSkin.nextbtn.on("click",this,this.onNextPage);var t="page=1";W.instance.Request(W.httpUrl+"org/getCorporateRechargeList?"+t,this,this.getchargeRecordBack,null,null)},e.onLastPage=function(){if(this.curpage>1){this.curpage--;var t="page="+this.curpage;W.instance.Request(W.httpUrl+"org/getCorporateRechargeList?"+t,this,this.getchargeRecordBack,null,null)}},e.onNextPage=function(){if(this.curpage<this.totalpage){this.curpage++;var t="page="+this.curpage;W.instance.Request(W.httpUrl+"org/getCorporateRechargeList?"+t,this,this.getchargeRecordBack,null,null)}},e.getchargeRecordBack=function(t){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.recordlist.array=i.data.infos,this.totalpage=Math.ceil(i.data.totalCount/30),0==this.totalpage&&(this.totalpage=1),this.uiSkin.pagetxt.text=this.curpage+"/"+this.totalpage)},e.updateRecordList=function(t){t.setData(t.dataSource)},e.closePanel=function(){E.instance.closeView("VIEW_PUBLIC_CHARGE_RECORD_PANEL")},i}(Dn),Ys=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.prodCustomer.CustomerProdCategoryController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onCloseView),this.uiSkin.categoryList.itemRender=Cl,this.uiSkin.categoryList.vScrollBarSkin="",this.uiSkin.categoryList.repeatX=8,this.uiSkin.categoryList.spaceY=20,this.uiSkin.categoryList.spaceX=40,this.uiSkin.categoryList.renderHandler=new c(this,this.updateCategoryItem);for(var t=[],i=0;50>i;i++){var e={};e.cateName="T恤"+i,t.push(e)}this.uiSkin.categoryList.array=t,this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.categoryList.refresh()},e.updateCategoryItem=function(t){t.setData(t.dataSource)},e.onCloseView=function(){E.instance.closeView("VIEW_PRODUCT_CATEGORY_PANEL"),E.instance.openView("VIEW_FIRST_PAGE")},e.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),Xs=function(t){function i(){this.uiSkin=null,this.viewArr=null,this.btntxtArr=null,this.curView=null,this.titleTxt=null,this.param=null,this.curViewIndex=-1,i.__super.call(this)}s(i,"script.usercenter.UserMainControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.panel_main.vScrollBarSkin="",this.uiSkin.panel_main.hScrollBarSkin="",this.viewArr=[mo,ah,null,null,null,Lo,el,null,null,null,wh,Qo,il],this.btntxtArr=[],this.titleTxt=["企业资料","收货地址","购物车","我的订单","发票管理","账户充值","我的账单","","","组织管理","申请列表","活动充值","地址管理"];for(var t=0;12>t;t++)2!=t&&(this.uiSkin["btntxt"+t].on("click",this,this.onShowEditView,[t]),this.uiSkin["btntxt"+t].on("mouseover",this,this.onMouseOverHandler),this.uiSkin["btntxt"+t].on("mouseout",this,this.onMouseOutHandler)),this.btntxtArr.push(this.uiSkin["btntxt"+t]);null!=this.param&&"number"==typeof this.param&&Math.floor(this.param)==this.param?this.onShowEditView(this.param):this.onShowEditView(0),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,1!=g.instance.accountType&&(this.uiSkin.btntxt9.removeSelf(),this.uiSkin.btntxt10.removeSelf()),0==g.instance.accountType&&null!=g.instance.privilege&&"0"==g.instance.privilege[5]&&this.uiSkin.btntxt6.removeSelf(),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("PAUSE_SCROLL_VIEW",this,this.onPauseScroll),Ln.instance.on("SHOW_CHARGE_VIEW",this,this.showCharge)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.onMouseOutHandler=function(){tn.cursor="auto"},e.onMouseOverHandler=function(){tn.cursor="hand"},e.onPauseScroll=function(t){this.uiSkin.panel_main.vScrollBar.target=t?this.uiSkin.panel_main:null},e.showCharge=function(){this.onShowEditView(5)},e.onShowEditView=function(t){if(8==t)return E.instance.openView("VIEW_CHANGEPWD"),void 0;if(7==t)return E.instance.openView("VIEW_PICMANAGER",!0),void 0;if(this.curViewIndex!=t){for(this.curViewIndex=t,this.uiSkin.toptitle.text=this.titleTxt[t],this.uiSkin.bannertitile.text="/ "+this.titleTxt[t];this.uiSkin.sp_container.numChildren>0;)this.uiSkin.sp_container.getChildAt(0).destroy(!0),this.uiSkin.sp_container.removeChildAt(0);for(var i=0;i<this.btntxtArr.length;i++)null!=this.btntxtArr[i]&&(this.btntxtArr[i].color="#262B2E",this.btntxtArr[i].alpha=.8);this.btntxtArr[t].color="#52B232",this.btntxtArr[t].alpha=1,this.viewArr[t]?(this.curView=new this.viewArr[t],this.curView.on("resize",this,this.onLoadComplete),this.uiSkin.sp_container.addChild(this.curView),this.uiSkin.sp_container.height=this.curView.height):this.uiSkin.sp_container.height=0,this.uiSkin.panel_main.refresh(),this.uiSkin.panel_main.scrollTo(0,0)}},e.onLoadComplete=function(){this.curView&&(this.uiSkin.sp_container.height=this.curView.height,this.uiSkin.panel_main.refresh())},e.onBackToMain=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("PAUSE_SCROLL_VIEW",this,this.onPauseScroll),Ln.instance.off("SHOW_CHARGE_VIEW",this,this.showCharge)},i.MY_ORDER=3,i}(Dn),qs=function(i){function n(){this.uiSkin=null,this.param=null,this.list=[],this.treedic={},this.curselectItemId="",this.selectAddress=null,this.outPutAddr=null,this.goodsInCar=[],this.deliveryAddress=null,n.__super.call(this)}s(n,"script.product.ProductMarketControl",i);var r=n.prototype;return r.onStart=function(){this.uiSkin=this.owner,this.uiSkin.panel_main.vScrollBarSkin="",this.uiSkin.panel_main.hScrollBarSkin="",this.uiSkin.panel_main.width=Ti.width,this.uiSkin.panel_main.height=Ti.height,this.uiSkin.downbox.height=710,this.uiSkin.myaddresstxt.on("click",this,this.onShowSelectAddress),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress),this.uiSkin.productCateList.itemRender=_c,this.uiSkin.productCateList.vScrollBarSkin="",this.uiSkin.productCateList.repeatX=1,this.uiSkin.productlist.spaceY=5,this.uiSkin.productCateList.renderHandler=new c(this,this.updateProductcateList),this.uiSkin.productCateList.selectEnable=!0,this.uiSkin.productCateList.selectHandler=new c(this,this.onSelectCategory),this.uiSkin.productCateList.array=[],this.uiSkin.textTotalPrice.style.fontSize=22,this.uiSkin.textTotalPrice.style.font="SimHei",this.uiSkin.textDeliveryType.style.fontSize=22,this.uiSkin.textDeliveryType.style.font="SimHei",this.uiSkin.textPayPrice.style.fontSize=22,this.uiSkin.textPayPrice.style.font="SimHei",this.uiSkin.productlist.itemRender=Ol,this.uiSkin.productlist.vScrollBarSkin="",this.uiSkin.productlist.repeatX=1,this.uiSkin.productlist.spaceY=2,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1,this.uiSkin.productlist.array=[],this.uiSkin.haschooselist.itemRender=Ol,this.uiSkin.haschooselist.vScrollBarSkin="",this.uiSkin.haschooselist.repeatX=1,this.uiSkin.haschooselist.renderHandler=new c(this,this.updateProductList),this.uiSkin.haschooselist.selectEnable=!1,this.uiSkin.haschooselist.array=[],this.uiSkin.panelbottom.hScrollBarSkin="",this.uiSkin.panelbottom.width=Ti.width,this.uiSkin.height=Ti.height>e.stage.height?1080:Ti.height,null!=g.instance.getDefaultAddress()&&(W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+g.instance.getDefaultAddress().searchZoneid+"&manufacturer_type=喷印输出中心",this,this.onGetOutPutAddress,null,null),this.uiSkin.myaddresstxt.text=g.instance.getDefaultAddress().addressDetail,this.selectAddress=g.instance.getDefaultAddress()),(null==g.instance.company||""==g.instance.company)&&W.instance.Request(W.httpUrl+"group/get-request?",this,this.getCompanyInfo,null,"post"),this.uiSkin.paybtn.on("click",this,this.onPayProductNow),Ln.instance.on("PRODUCT_ADD_GOODS",this,this.onAddGoods),Ln.instance.on("PRODUCT_DELETE_GOODS",this,this.onDeleteGoods),this.resetOrderInfo()},r.getCompanyInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.status&&null!=i[0]&&null!=i[0].info&&""!=i[0].info){var e=JSON.parse(i[0].info);g.instance.company=e.gp_name,g.instance.companyShort=e.gp_shortname}}},r.onAddGoods=function(t){for(var i=0;i<this.goodsInCar.length;i++)if(t.prod_code==this.goodsInCar[i].prod_code)return this.goodsInCar[i].goodsNum+=t.goodsNum,this.uiSkin.haschooselist.array=this.goodsInCar,void 0;this.goodsInCar.push(t),this.uiSkin.haschooselist.array=this.goodsInCar,this.resetOrderInfo()},r.onDeleteGoods=function(t){this.uiSkin.haschooselist.deleteItem(this.uiSkin.haschooselist.array.indexOf(t.productvo)),this.resetOrderInfo()},r.onGetOutPutAddress=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(this.initOutputAddr(i);this.uiSkin.outputbox.numChildren>0;)this.uiSkin.outputbox.removeChildAt(0);if(this.outPutAddr.length>0){for(var e=0;e<this.outPutAddr.length;e++){var n=new so;n.holaday.text="",this.uiSkin.outputbox.addChild(n),n.checkselect.selected=!0,n.qqContact.on("click",this,this.onClickOpenQQ),n.factorytxt.text=this.outPutAddr[e].name}this.uiSkin.downbox.y=295+40*(this.outPutAddr.length-1)+(this.outPutAddr.length-1)*this.uiSkin.outputbox.space,this.outPutAddr.length>0&&(W.instance.Request(W.httpUrl+"business/prodcategory?addr_id="+this.selectAddress.searchZoneid,this,this.onGetMerchanProductBack,null,null),W.instance.Request(W.httpUrl+"business/deliverylist?"+this.outPutAddr[0].org_code+"&addr_id="+this.selectAddress.searchZoneid,this,this.onGetDeliveryBack,null,null))}else this.uiSkin.downbox.y=295}this.uiSkin.panel_main.refresh()},r.onGetMerchanProductBack=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(var e=i,n=[],s=[],r=0;r<e.length;r++)if(n.indexOf(e[r].prodCat_name)<0){var a=new Y(e[r].prodCat_name);
s.push(a),n.push(e[r].prodCat_name)}this.uiSkin.productCateList.array=s}},r.onSelectCategory=function(t){var i;for(var e in this.uiSkin.productCateList.cells)i=this.uiSkin.productCateList.cells[e],i.ShowSelected=i.matvo==this.uiSkin.productCateList.array[t];W.instance.Request(W.httpUrl+"business/merchandiselist?client_code=CL10600&addr_id="+this.selectAddress.searchZoneid+"&prodCat_name="+this.uiSkin.productCateList.array[t].matclassname,this,this.onGetProductListBack,null,null)},r.initMerchanTree=function(){},r.resetOrderInfo=function(){for(var t=0,i=0;i<this.goodsInCar.length;i++)t+=Number(this.goodsInCar[i].goodsNum*this.goodsInCar[i].mer_price);this.uiSkin.textTotalPrice.innerHTML="<span color='#262B2E' size='20'>折后总额：</span><span color='#FF4400' size='20'>"+t.toFixed(2)+"</span><span color='#262B2E' size='20'>元</span>",this.uiSkin.textDeliveryType.innerHTML="<span color='#262B2E' size='20'>运费总额：</span><span color='#FF4400' size='20'>0</span><span color='#262B2E' size='20'>元</span>",this.uiSkin.textPayPrice.innerHTML="<span color='#262B2E' size='20'>应付总额：</span><span color='#FF4400' size='20'>"+t.toFixed(2)+"</span><span color='#262B2E' size='20'>元</span>"},r.onClickOpenQQ=function(){t.open("tencent://message/?uin=10987654321")},r.onShowSelectAddress=function(){E.instance.openView("VIEW_SELECT_ADDRESS")},r.onSelectedSelfAddress=function(t){t&&(this.selectAddress=t,this.uiSkin.myaddresstxt.text=this.selectAddress.addressDetail,W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+this.selectAddress.searchZoneid+"&manufacturer_type=喷印输出中心",this,this.onGetOutPutAddress,null,null))},r.initOutputAddr=function(t){this.outPutAddr=[];for(var i=0;i<t.length;i++){var e=new b(t[i]);this.outPutAddr.push(e)}},r.updateProductList=function(t){t.setData(t.dataSource)},r.onResizeBrower=function(){this.uiSkin.height=Ti.height>e.stage.height?1080:Ti.height,this.uiSkin.panel_main.height=Ti.height,this.uiSkin.panel_main.width=Ti.width,this.uiSkin.panelbottom.width=Ti.width},r.updateProductcateList=function(t){t.setData(t.dataSource)},r.onGetProductListBack=function(t){var i=JSON.parse(t);if(null!=i){for(var e=[],n=0;n<i.length;n++){var s=new P(i[n]);e.push(s)}this.uiSkin.productlist.array=e}},r.onGetDeliveryBack=function(t){for(var i=this,n=JSON.parse(t);this.uiSkin.deliverbox.numChildren>0;)this.uiSkin.deliverbox.removeChildAt(0);if(!n.hasOwnProperty("status"))for(var s=0;s<n.length;s++){var r=new d(n[s]),a=new bo;a.addresstxt.text=r.deliveryDesc,"送货上门"==r.delivery_name&&(a.btnsel.selected=!0,a.selCheck.selected=!0,this.deliveryAddress=r),a.on("click",this,this.onSelectDeliverAdd,[a,r]),this.uiSkin.deliverbox.addChild(a)}e.timer.frameOnce(2,this,function(){i.uiSkin.deliversp.size(1280,i.uiSkin.deliverbox.height)})},r.onSelectDeliverAdd=function(t,i){for(var e=0;e<this.uiSkin.deliverbox.numChildren;e++){var n=this.uiSkin.deliverbox.getChildAt(e);n&&(n.btnsel.selected=!1,n.selCheck.selected=!1)}t.btnsel.selected=!0,t.selCheck.selected=!0,this.deliveryAddress=i},r.onPayProductNow=function(){var t={};if(this.goodsInCar.length<=0)return E.showAlert("未选择任何产品"),void 0;if(null==this.selectAddress)return E.showAlert("请选择收货地址"),void 0;if(null==this.deliveryAddress)return E.showAlert("请选择配送中心"),void 0;for(var i=0;i<this.goodsInCar.length;i++){var e;if(t.hasOwnProperty(this.goodsInCar[i].manufacturer_code))e=t[this.goodsInCar[i].manufacturer_code];else{e={},e.order_sn=k.getOrderSn(),e.client_code="CL10200",e.consignee=g.instance.companyShort+"#"+this.selectAddress.receiverName,e.tel=this.selectAddress.phone,e.address=this.selectAddress.proCityArea,e.order_amountStr=0,e.shipping_feeStr="0",e.money_paidStr="0",e.discount="1",e.pay_timeStr=T.formatFullDateTime(new Date),e.delivery_dateStr=T.formatFullDateTime(new Date,!1),e.manufacturer_code=this.goodsInCar[i].manufacturer_code,e.manufacturer_name=this.goodsInCar[i].manufacturer_name;null!=this.deliveryAddress&&(e.logistic_code=this.deliveryAddress.deliverynet_code+"#"+this.deliveryAddress.delivery_name),e.orderItemList=[],t[this.goodsInCar[i].manufacturer_code]=e}if(null==this.goodsInCar[i])return;e.order_amountStr+=this.goodsInCar[i].mer_price*this.goodsInCar[i].goodsNum;var n=this.goodsInCar[i].getOrderData();n.item_seq=i+1,e.orderItemList.push(n)}var s,r=[];for(var a in t)s=t[a],s.money_paidStr=s.order_amountStr.toFixed(2),s.order_amountStr=s.order_amountStr.toFixed(2),r.push(s);W.instance.Request(W.httpUrl+"order/submit",this,this.onPlaceOrderBack,{data:JSON.stringify(r)},"post")},r.onPlaceOrderBack=function(t){var i=JSON.parse(t);if(0==i.status){for(var e=0,n=[],s=0;s<i.orders.length;s++){var r=JSON.parse(i.orders[s]);e+=Number(r.money_paidStr),n.push(r.order_sn)}E.instance.openView("VIEW_SELECT_PAYTYPE_PANEL",!1,{amount:Number(e.toFixed(2)),orderid:n})}},r.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress)},n}(Dn),Js=function(t){function i(){this.txtLogin=null,this.txtReg=null,this.versioninfo=null,this.actbtn=null,i.__super.call(this),ri.multiTouchEnabled=!1}s(i,"script.MainPageControl",t);var n=i.prototype;return n.onStart=function(){this.txtLogin=this.owner.txt_login,this.txtLogin.on("click",this,this.onShowLogin),this.txtReg=this.owner.txt_reg,this.txtReg.on("click",this,this.onShowReg);var t=this.owner.btnUpload;t.on("click",this,this.onShowUpload);var i=this.owner.paintOrderBtn;i.on("click",this,this.onShowPaintOrder);var n=(this.owner.characBtn,this.owner.btnUserCenter);n.on("click",this,this.onShowUserCenter);var s=this.owner.btnproduct;s.on("click",this,this.onProductView);var r=this.owner.productCustomization;r.on("click",this,this.onCustomerProductView),this.versioninfo=this.owner.enterinfo,this.versioninfo.y=Ti.clientHeight<e.stage.height?1920*Ti.clientHeight/Ti.clientWidth-this.versioninfo.height:e.stage.height-this.versioninfo.height,this.owner.height=1280*Ti.clientHeight/Ti.clientWidth;var a=this.owner.linktobus;a.on("click",this,this.onOpenGongshang),this.actbtn=this.owner.btnact,this.actbtn.visible=!1,this.actbtn.on("click",this,this.onGotoCharge),this.owner.linkicp.on("click",this,this.onOpenOficial),Ln.instance.on("LOGIN_SUCESS",this,this.onSucessLogin),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.owner.panel_main.height=Ti.height,this.owner.panel_main.hScrollBarSkin="",this.owner.panel_main.width=Ti.width,g.instance.isLogin?(this.txtLogin.text=g.instance.userAccount,this.txtReg.text="[退出]"):this.loginAccount(),H.instance.haselectPic={}},n.ongetdata=function(t){console.log(t)},n.onOpenGongshang=function(){Ti.window.open("http://www.gsxt.gov.cn/%7BF71C582A907AA9A77C0EF218C30915AFDDBCA77C96F73D4D09E3592B4A85097B87E62C5C18F2E9E75EE4EA5348B4AF45DB63374BC6AAC586EABEEBA8C48C8DD0A853A853A8F58D760E76817A817A8176817A024DB6A75CAB50ABF60D751CACB07FDF33E8223E00FC469D79017924DF021917AEB5D4C813F78F748F748F74-1561088596102%7D",null,null,!0)},n.ongetMaintianBack=function(t){var i=JSON.parse(t);this.destroyed||0==i.status&&(null==i.state&&(i.state=0),i.state>0&&(this.owner.maintaintxt.visible=!0,this.owner.maintaintxt.text=i.msg))},n.onOpenOficial=function(){Ti.window.open("http://beian.miit.gov.cn",null,null,!0)},n.loginAccount=function(){var t=T.getLocalVar("userToken","0");if(g.instance.token=t,"0"!=t&&""!=t){var i={};W.instance.Request(W.httpUrl+"sys/userEnter?",this,this.onLoginBack,JSON.stringify(i),"post")}},n.onGotoCharge=function(){E.instance.openView("VIEW_USERCENTER",!0,11)},n.getActivityInfo=function(){W.instance.Request(W.httpUrl+"account/getnotice?",this,this.ongetMaintianBack,"","")},n.getActivityInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.status&&null!=i.data&&i.data.length>0){this.actbtn.visible=!0;var e=new Date;g.instance.hashowact||10!=e.getDate()&&20!=e.getDate()||(E.instance.openView("VIEW_ACTIVITY_ADVETISE_PANEL",!1,i.data[0]),g.instance.hashowact=!0)}}},n.onLoginBack=function(t){var i=JSON.parse(t);"0"==i.code&&(g.instance.resetData(),g.instance.userAccount=i.data.mobileNumber,g.instance.isLogin=!0,g.instance.accountType=i.data.userType,g.instance.privilege=i.data.userPermisson,this.txtLogin.text=g.instance.userAccount,this.txtReg.text="[退出]",console.log(Ti.document.cookie.split("; ")),g.instance.loginTime=(new Date).getTime(),T.setLocalVar("loginTime",g.instance.loginTime),W.instance.Request(W.httpUrl+"group/opt-group-express?",this,this.getMyAddressBack,"opt=list&page=1","post"),W.instance.Request(W.httpUrl+"account/getnotice?",this,this.ongetMaintianBack,"",""),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post"))},n.getCompanyInfoBack=function(t){var i=JSON.parse(t);if(0==i.status){var i=JSON.parse(t);0==i.status&&(g.instance.isVipCompany="1"==i.vip,g.instance.checkJumpUrl())}},n.getMyAddressBack=function(t){var i=JSON.parse(t);0==i.status?(g.instance.initMyAddress(i.data),g.instance.defaultAddId=i["default"]):(205==i.status||404==i.status)&&E.instance.openView("VIEW_USERCENTER",!0)},n.onResizeBrower=function(){this.owner.height=1280*Ti.clientHeight/Ti.clientWidth,this.versioninfo.y=Ti.clientHeight<e.stage.height?1280*Ti.clientHeight/Ti.clientWidth-this.versioninfo.height:e.stage.height-this.versioninfo.height},n.onShowUpload=function(){g.instance.isLogin?E.instance.openView("VIEW_PICMANAGER",!0):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"))},n.onShowPaintOrder=function(){g.instance.isLogin?(k.instance.orderType="Penyin",E.instance.openView("VIEW_PAINT_ORDER",!0)):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"))},n.onShowChracterTypePanel=function(){g.instance.isLogin?E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!1):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"))},n.onShowUserCenter=function(){return g.instance.isLogin?(E.instance.openView("VIEW_USERCENTER",!0),void 0):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"),void 0)},n.onShowLogin=function(){g.instance.isLogin||E.instance.openView("VIEW_lOGPANEL")},n.onShowReg=function(){g.instance.isLogin?W.instance.Request(W.httpUrl+"sys/logout?",this,this.onLoginOutBack,"","post"):E.instance.openView("VIEW_REGPANEL",!0)},n.onLoginOutBack=function(t){var i=JSON.parse(t);0==i.status&&(g.instance.isLogin=!1,this.txtLogin.text="[登录]",this.txtReg.text="[注册]",T.setLocalVar("useraccount",""),T.setLocalVar("userpwd",""))},n.onSucessLogin=function(t){this.txtLogin.text=t,this.txtReg.text="[退出]",W.instance.Request(W.httpUrl+"group/opt-group-express?",this,this.getMyAddressBack,"opt=list&page=1","post")},n.onEnable=function(){ri.multiTouchEnabled=!1;var t=this.owner.panel_main;t.vScrollBarSkin=""},n.onHttpRequestError=function(t){console.log(t)},n.onHttpRequestProgress=function(t){console.log(t)},n.onHttpRequestComplete=function(t){console.log(t)},n.onBrowerResize=function(){this.owner},n.onProductView=function(){return g.instance.isLogin?(E.instance.openView("VIEW_PRODUCT_VIEW",!0),void 0):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"),void 0)},n.onCustomerProductView=function(){return g.instance.isLogin?(E.instance.openView("VIEW_PRODUCT_CATEGORY_PANEL",!0),void 0):(E.showAlert("请先登录"),E.instance.openView("VIEW_lOGPANEL"),void 0)},n.onTipClick=function(){},n.onDestroy=function(){Ln.instance.off("LOGIN_SUCESS",this,this.onSucessLogin),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),js=function(t){function i(){this.uiSkin=null,this.btnlist=null,this.param=null,this.customer=null,i.__super.call(this)}s(i,"script.order.OrderTypeChooseController",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,this.btnlist=[this.uiSkin.paintOrderBtn,this.uiSkin.dingzhiBtn,this.uiSkin.productBtn,this.uiSkin.zipaiBtn,this.uiSkin.kailiaoBtn,this.uiSkin.modelOrderBtn,this.uiSkin.biaoPinBtn,this.uiSkin.dengxiangBtn];for(var i=0;i<this.btnlist.length;i++)this.btnlist[i].visible=!1;this.customer=this.param,this.btnlist.push(this.uiSkin.paintOrderBtn),this.uiSkin.myaddresstxt.on("click",this,this.onShowSelectAddress),this.uiSkin.changeAddr.on("click",this,this.onShowSelectAddress),k.instance.resetData(),k.instance.curOrderCustomer=this.customer,this.uiSkin.paintOrderBtn.on("click",this,function(){if(null==k.instance.selectAddress)return E.showAlert("请先添加收货地址"),void 0;if(k.instance.outPutAddr.length<=0)return E.showAlert("您当前的收货地址没有可服务的输出中心，请选择其他收货地址"),void 0;k.instance.orderType="Penyin";var i,e=0;for(var n in H.instance.haselectPic)i=H.instance.haselectPic[n],e++;t.getProdcategory("Penyin"),0==e?Ln.instance.event("SHOW_CONTENT_PANEL",[Ro,0,t.customer]):Ln.instance.event("SHOW_CONTENT_PANEL",[qo,0])}),this.uiSkin.zipaiBtn.on("click",this,function(){t.getProdcategory("Zipai"),k.instance.orderType="Zipai",Ln.instance.event("SHOW_CONTENT_PANEL",[Qh,0])}),this.uiSkin.kailiaoBtn.on("click",this,function(){t.getProdcategory("Kailiao"),k.instance.orderType="Kailiao",Ln.instance.event("SHOW_CONTENT_PANEL",[ja,0])}),this.uiSkin.biaoPinBtn.on("click",this,function(){t.getProdcategory("Biaopin"),k.instance.orderType="Biaopin",Ln.instance.event("SHOW_CONTENT_PANEL",[ja,0])}),this.uiSkin.dengxiangBtn.on("click",this,function(){t.getProdcategory("Dengxiang"),k.instance.orderType="Dengxiang",Ln.instance.event("SHOW_CONTENT_PANEL",[Oo,0])}),this.uiSkin.productBtn.on("click",this,function(){t.getProdcategory("Chengpin"),k.instance.orderType="Moxing"}),Ln.instance.on("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress),null==this.customer||"0"==this.customer.id?null!=g.instance.getDefaultAddress()&&(W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+g.instance.getDefaultAddress().zoneid+"&manufacturer_type=喷印输出中心&client_code="+g.instance.clientCode,this,this.onGetOutPutAddress,null,null),this.uiSkin.myaddresstxt.text=g.instance.getDefaultAddress().addressDetail,this.uiSkin.myaddresstxt.width=this.uiSkin.myaddresstxt.textWidth,this.uiSkin.addbox.refresh(),k.instance.selectAddress=g.instance.getDefaultAddress()):W.instance.Request(W.httpUrl+W.listCustomerAddress+"customerId="+this.customer.id,this,this.getCustomerAddressBack,null,null,null),W.instance.Request(W.httpUrl+"business/getClientOrderSources?clientCode="+g.instance.clientCode,this,this.onGetClientOrderSource,null,null)},e.getCustomerAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new f(i.data.expressList[n])),e[n].customerId=this.customer.id,e[n].customerName=this.customer.customerName,e[n].defaultPayType=this.customer.defaultPayment;e.length>0&&(k.instance.selectAddress=e[0],this.uiSkin.myaddresstxt.text=e[0].addressDetail,this.uiSkin.myaddresstxt.width=this.uiSkin.myaddresstxt.textWidth,this.uiSkin.addbox.refresh(),W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+k.instance.selectAddress.zoneid+"&manufacturer_type=喷印输出中心&client_code="+g.instance.clientCode,this,this.onGetOutPutAddress,null,null))}}},e.onGetClientOrderSource=function(t){if(!this.uiSkin.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status"))for(var e,n=i,s=0;s<n.length;s++)"Penyin"==n[s].code?(this.btnlist[0].visible=!0,e=this.btnlist[0]):"Fuzhuang"==n[s].code?(this.btnlist[1].visible=!0,e=this.btnlist[1]):"Chengpin"==n[s].code?(this.btnlist[2].visible=!0,e=this.btnlist[2]):"Zipai"==n[s].code?(this.btnlist[3].visible=!0,e=this.btnlist[3]):"Kailiao"==n[s].code?(this.btnlist[4].visible=!0,e=this.btnlist[4]):"Moxing"==n[s].code?(this.btnlist[5].visible=!0,e=this.btnlist[5]):"Biaopin"==n[s].code?(this.btnlist[6].visible=!0,e=this.btnlist[6]):"Dengxiang"==n[s].code&&(this.btnlist[7].visible=!0,e=this.btnlist[7]),e.x=50+s%4*390,e.y=285+169*Math.floor(s/4)}},e.onbacktoFirst=function(){E.instance.openView("VIEW_FIRST_PAGE")},e.onShowSelectAddress=function(){E.instance.openView("VIEW_SELECT_ADDRESS",!1,this.customer)},e.onSelectedSelfAddress=function(t){k.instance.selectAddress&&(this.uiSkin.myaddresstxt.text=k.instance.selectAddress.addressDetail,this.uiSkin.myaddresstxt.width=this.uiSkin.myaddresstxt.textWidth,this.uiSkin.addbox.refresh(),null!=t&&k.instance.selectAddress.customerId==t.id&&(this.customer=t),k.instance.curOrderCustomer=this.customer,W.instance.Request(W.httpUrl+"business/manufacturers?addr_id="+k.instance.selectAddress.zoneid+"&manufacturer_type=喷印输出中心&client_code="+g.instance.clientCode,this,this.onGetOutPutAddress,null,null))},e.onGetOutPutAddress=function(t){if(!this.uiSkin.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(k.instance.initOutputAddr(i),k.instance.selectFactoryAddress=k.instance.outPutAddr.concat();this.uiSkin.outputbox.numChildren>0;)this.uiSkin.outputbox.removeChildAt(0);if(k.instance.outPutAddr.length>0){for(var e=0;e<k.instance.outPutAddr.length;e++){var n=new ql(k.instance.outPutAddr[e],e);this.uiSkin.outputbox.addChild(n)}var s="manufacturerList="+k.instance.getManufactureCodeList().toString()+"&addr_id="+k.instance.selectAddress.zoneid;W.instance.Request(W.httpUrl+"business/deliverylist?"+s,this,this.onGetDeliveryBack,null,null)}else k.instance.selectFactoryAddress=null,k.instance.productList=[]}}},e.getProdcategory=function(t){var i=k.instance.getSelectedOutPutCenter();return 0==i.length?(E.showAlert("您当前的收货地址没有可服务的输出中心，请选择其他收货地址"),void 0):(W.instance.Request(W.httpUrl+"business/prodcategory?addr_id="+k.instance.selectAddress.zoneid+"&orderSource="+t+"&client_code="+g.instance.clientCode+"&manufacturerList="+i.join(","),this,this.onGetProductBack,null,null),void 0)},e.onGetDeliveryBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){k.instance.deliveryList={};for(var e=0;e<i.length;e++){var n=i[e].deliveryList;k.instance.deliveryList[i[e].manufacturer_code]=[];for(var s=0;s<n.length;s++){var r=new d(n[s]);r.belongManuCode=i[e].manufacturer_code,k.instance.deliveryList[i[e].manufacturer_code].push(r),"送货上门"==r.delivery_name&&(k.instance.selectDelivery=r)}}}}},e.onGetProductBack=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")&&i.length>0){var e=i[0].children;k.instance.productList=[];for(var n=[],s=0;s<e.length;s++)if(n.indexOf(e[s].prodCat_name)<0){var r=new Y(e[s]);k.instance.productList.push(r),n.push(e[s].prodCat_name)}}},e.onDestroy=function(){Ln.instance.off("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress)},i}(Dn),Ks=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.uiTool.ButtonEffect",t);var e=i.prototype;return e.onEnable=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.on("mouseover",this,function(){tn.cursor="hand"}),this.uiSkin.on("mouseout",this,function(){tn.cursor="auto",t.uiSkin.scaleX=1,t.uiSkin.scaleY=1}),this.uiSkin.on("mousedown",this,function(){t.uiSkin.scaleX=.8,t.uiSkin.scaleY=.8}),this.uiSkin.on("mouseup",this,function(){t.uiSkin.scaleX=1,t.uiSkin.scaleY=1})},i}(Dn),Zs=function(t){function i(){this.uiSkin=null,this.curpage=1,this.totalPage=1,this.dateInput=null,this.dateInput2=null,i.__super.call(this)}s(i,"script.usercenter.TransactionControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.transactionlist.itemRender=El,this.uiSkin.transactionlist.repeatX=1,this.uiSkin.transactionlist.spaceY=5,this.uiSkin.transactionlist.renderHandler=new c(this,this.updateTransactList),this.uiSkin.transactionlist.selectEnable=!1,this.uiSkin.transactionlist.array=[],this.uiSkin.prebtn.on("click",this,this.onLastPage),this.uiSkin.nextbtn.on("click",this,this.onNextPage),this.uiSkin.btnsearch.on("click",this,this.queryOrderList),this.uiSkin.transactionlist.on("mousedown",this,this.onMouseDwons),this.uiSkin.transactionlist.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.transactionlist.on("mouseover",this,this.onMouseDwons),this.uiSkin.transactionlist.on("mouseout",this,this.onMouseUpHandler),e.stage.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.moneytxt.text="--",this.uiSkin.transactionlist.mouseThrough=!0,e.timer.frameLoop(1,this,this.updateDateInputPos);var t=new Date,i=new Date(t.getTime()-864e5),n="begindate="+T.formatFullDateTime(i,!1)+" 00:00:00&enddate="+T.formatFullDateTime(new Date,!1)+" 23:59:59&type=0&curpage=1";W.instance.Request(W.httpUrl+"account/listmoneylog",this,this.onGetTransactionBack,n,"post"),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post"),this.initDateSelector()},n.getCompanyInfoBack=function(t){var i=JSON.parse(t);0==i.status&&(g.instance.money=Number(i.balance),g.instance.actMoney=Number(i.activity_balance),g.instance.frezeMoney=Number(i.activity_locked_balance),this.uiSkin.moneytxt.text=g.instance.money.toString()+"元",g.instance.isHidePrice()&&(this.uiSkin.moneytxt.text="****"))},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.queryOrderList=function(){this.curpage=1,this.getOrderListAgain()},n.onLastPage=function(){this.curpage>1&&(this.curpage--,this.getOrderListAgain())},n.onNextPage=function(){this.curpage<this.totalPage&&(this.curpage++,this.getOrderListAgain())},n.getOrderListAgain=function(){var t=(new Date(this.dateInput2.value),new Date(this.dateInput.value),"begindate="+this.dateInput.value+" 00:00:00&enddate="+this.dateInput2.value+" 23:59:59&type=0&curpage="+this.curpage);W.instance.Request(W.httpUrl+"account/listmoneylog",this,this.onGetTransactionBack,t,"post")},n.onGetTransactionBack=function(t){if(null!=t&&""!=t){var i=JSON.parse(t);if(0==i.status){var e=i.total;this.totalPage=Math.ceil(e/30),this.totalPage<1&&(this.totalPage=1),this.uiSkin.itemNum.text=e+"",this.uiSkin.pagetxt.text=this.curpage+"/"+this.totalPage,this.uiSkin.transactionlist.array=i.data,this.uiSkin.payamount.text=i.outamount+"元",this.uiSkin.reatryamount.text=i.inamount+"元",g.instance.isHidePrice()&&(this.uiSkin.payamount.text="****",this.uiSkin.reatryamount.text="****")}else E.showAlert("获取账单失败")}},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=150/Ti.pixelRatio,this.dateInput.style.height=20/Ti.pixelRatio,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>26784e5?(e=new Date(i.getTime()+26784e5),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1))}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=150/Ti.pixelRatio,this.dateInput2.style.height=20/Ti.pixelRatio,this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>26784e5?(e=new Date(i.getTime()-26784e5),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1))}}},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=Ti.clientWidth/1920,e=0;this.dateInput.style.width=150*i/Ti.pixelRatio,this.dateInput.style.height=20*i/Ti.pixelRatio,this.dateInput2.style.width=150*i/Ti.pixelRatio,this.dateInput2.style.height=20*i/Ti.pixelRatio,this.dateInput.style.top=(t.y-15)*i+"px",this.dateInput.style.left=(t.x+5+e)*i+"px",this.dateInput2.style.top=(t.y-15)*i+"px",this.dateInput2.style.left=(t.x+190+e)*i+"px"}},n.updateTransactList=function(t){t.setData(t.dataSource)},n.onDestroy=function(){e.stage.off("mouseup",this,this.onMouseUpHandler),e.timer.clearAll(this),null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2))},i}(Dn),$s=function(t){function i(){this.uiSkin=null,this.directTree=[],this.param=null,this.curFileList=null,this.texture=null,i.__super.call(this)}s(i,"script.order.SelectPicControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.directTree=[],this.uiSkin.filetypeRadio.visible=!1,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.picList.itemRender=Ul,this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=10,this.uiSkin.picList.renderHandler=new c(this,this.updatePicInfoItem),this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=0;3>t;t++)this.uiSkin["flder"+t].on("click",this,this.onClickTopDirectLbl,[t]);this.uiSkin.btnroot.on("click",this,this.backToRootDir),this.uiSkin.btnprevfolder.on("click",this,this.onClickParentFolder),this.uiSkin.radiosel.on("click",this,this.onSelectAllPic),this.uiSkin.picList.array=[],W.instance.Request(W.httpUrl+"fs/list?dirId=0",this,this.onGetTopDirListBack,null,null),this.uiSkin.htmltext.style.fontSize=20,this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>0</span><span color='#222222' size='20'>张图片</span>",this.uiSkin.btncancel.on("click",this,this.onCancelChoose),this.uiSkin.btnok.on("click",this,this.onConfirmSelect),this.uiSkin.searchInput.on("input",this,this.onSearchInput),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),Ln.instance.on("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.on("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.on("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.startDragPanel=function(t){this.uiSkin.dragImg.parent.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.parent.stopDrag()},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.onConfirmSelect=function(){if(null!=this.param&&this.param.customer){var t;for(var i in H.instance.haselectPic){t=H.instance.haselectPic[i],this.param.callback.call(this.param.caller,t);break}H.instance.haselectPic={}}else if(this.param instanceof model.orderModel.MaterialItemVo){if(null==this.param.attchFileId||""==this.param.attchFileId)return E.showAlert("请选择合适的附件"),void 0}else{var t;for(var i in H.instance.haselectPic){if(t=H.instance.haselectPic[i],"Penyin"==k.instance.orderType&&0==T.isValidPic(t))return E.showAlert("只有格式为JPG,JPEG,TIF,TIFF,并且颜色格式为CMYK的图片才能下单"),void 0;if("Penyin"==k.instance.orderType&&T.isUnNormalPic(t))return E.showAlert("有图片大小异常，请尝试更换图片处理软件或另存图片，再重新上传。"),void 0;if("Zipai"==k.instance.orderType&&0==T.isValidPicZipai(t))return E.showAlert("有图片不能用于字牌下单，请重新上传或选择其他图片"),void 0}Ln.instance.event("ADD_PIC_FOR_ORDER")}this.onCloseView()},e.confirmOrderNow=function(t){t&&(Ln.instance.event("ADD_PIC_FOR_ORDER"),this.onCloseView())},e.checkIsValidYixing=function(){return!0},e.confirmChoose=function(t){t&&(this.texture=null,this.onCloseView())},e.onCloseView=function(){E.instance.closeView("VIEW_SELECT_PIC_TO_ORDER"),Ln.instance.event("HIDE_U3D_DIV",!0)},e.onCancelChoose=function(){this.param instanceof model.orderModel.MaterialItemVo&&Ln.instance.event("CANCEL_CHOOSE_ATTACH",this.param),this.onCloseView()},e.onSelectAllPic=function(){var t=H.instance.curFileList;if(null!=t&&!(this.param instanceof model.orderModel.MaterialItemVo)){for(var i=0;i<t.length;i++)if(1==t[i].picType)if(this.uiSkin.radiosel.selected){var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);!e&&T.checkFileIsImg(t[i])&&0!=t[i].picPhysicWidth&&(H.instance.haselectPic[t[i].fid]=t[i])}else{var e=H.instance.haselectPic.hasOwnProperty(t[i].fid);e&&delete H.instance.haselectPic[t[i].fid]}for(var i=0;i<this.uiSkin.picList.cells.length;i++)null!=this.uiSkin.picList.cells[i].picInfo&&T.checkFileIsImg(this.uiSkin.picList.cells[i].picInfo)&&0!=this.uiSkin.picList.cells[i].picInfo.picPhysicWidth&&(this.uiSkin.picList.cells[i].sel.visible=this.uiSkin.radiosel.selected,this.uiSkin.picList.cells[i].sel.selected=this.uiSkin.radiosel.selected);var n,s=0;for(var r in H.instance.haselectPic)n=H.instance.haselectPic[r],s++;this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>"+s+"</span><span color='#222222' size='20'>张图片</span>"}},e.seletPicToOrder=function(t){var i=t[0];if(T.checkFileIsImg(i)&&0!=i.picPhysicWidth)if(this.param instanceof model.orderModel.MaterialItemVo)if(this.param.attchFileId==i.fid)this.param.attchMentFileId="",this.param.attchFileId="",null!=t[2]&&t[2].canCelSelected(),this.texture=null;else{if(null!=k.instance.curSelectOrderItem)var e=k.instance.curSelectOrderItem.ordervo.picinfo;if(null!=e){var n=Math.abs(e.picPhysicWidth-i.picPhysicWidth)/e.picPhysicWidth,s=Math.abs(e.picPhysicHeight-i.picPhysicHeight)/e.picPhysicHeight;if(n>.01||s>.01)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"图片尺寸和当前下单图片尺寸不匹配"}),null!=t[2]&&t[2].canCelSelected(),void 0}if(K.yiXingCutProcess(this.param.preProc_Code)&&this.checkIsValidYixing(t[1]))this.texture=t[1];else if(K.yiXingCutProcess(this.param.preProc_Code)&&!this.checkIsValidYixing(t[1]))return E.showAlert("该图片不符合异形切割要求"),null!=t[2]&&t[2].canCelSelected(),void 0;this.param.attchMentFileId=W.originPicPicUrl+i.fid+"."+i.picClass,this.param.attchFileId=i.fid,K.yiXingCutProcess(this.param.preProc_Code)&&(this.param.picInfoVo=i)}else{var r=H.instance.haselectPic.hasOwnProperty(i.fid);r?delete H.instance.haselectPic[i.fid]:H.instance.haselectPic[i.fid]=i;var a,o=0;for(var h in H.instance.haselectPic)a=H.instance.haselectPic[h],o++;this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>"+o+"</span><span color='#222222' size='20'>张图片</span>"}},e.onGetTopDirListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(H.instance.initCurDirFiles(i),this.uiSkin.radiosel.selected=!1,this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList):205==i.status&&E.instance.openView("VIEW_USERCENTER",!0)}},e.getFileList=function(){W.instance.Request(W.httpUrl+"fs/list?dirId="+H.instance.curSelectDir.dpath,this,this.onGetDirFileListBack,null,null)},e.onGetDirFileListBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.radiosel.selected=!1,H.instance.initCurDirFiles(i),this.uiSkin.picList.array=H.instance.curFileList,this.curFileList=H.instance.curFileList)}},e.onSearchInput=function(){if(null!=this.curFileList){for(var t=[],i=0;i<this.curFileList.length;i++)this.curFileList[i].directName.indexOf(this.uiSkin.searchInput.text)>=0&&t.push(this.curFileList[i]);this.uiSkin.picList.array=t}},e.onDestroy=function(){Ln.instance.event("CLOSE_PANEL_VIEW","VIEW_SELECT_PIC_TO_ORDER"),Ln.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),Ln.instance.off("UPDATE_FILE_LIST",this,this.getFileList),Ln.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.onSlecteDirect=function(){},e.onSelectChildFolder=function(t){H.instance.curSelectDir=t,this.directTree.push(H.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},e.onClickTopDirectLbl=function(t){t!=this.directTree.length-1&&(H.instance.curSelectDir=this.directTree[t],this.directTree.splice(t+1,this.directTree.length-t-1),this.updateCurDirectLabel(),this.getFileList())},e.onClickParentFolder=function(){this.directTree.length>1?(H.instance.curSelectDir=this.directTree[this.directTree.length-2],this.directTree.splice(this.directTree.length-1,1),this.updateCurDirectLabel(),this.getFileList()):this.backToRootDir()
},e.backToRootDir=function(){this.directTree.length<=0||(H.instance.curSelectDir=H.instance.rootDir,this.directTree=[],W.instance.Request(W.httpUrl+"fs/list?dirId=0",this,this.onGetTopDirListBack,null,null),this.updateCurDirectLabel())},e.updateCurDirectLabel=function(){this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=0;t<this.directTree.length;t++)3>t&&(this.uiSkin["flder"+t].text=this.directTree[t].directName+">",this.uiSkin["flder"+t].visible=!0)},e.updateDirectItem=function(t){t.setData(t.dataSource)},e.updatePicInfoItem=function(t){t.setData(t.dataSource)},i}(Dn),Qs=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.workpanel.ImageEffectControlller",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onClosePanel),this.uiSkin.mainpanel.on("click",this,this.onClosePanel),this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.img.on("loaded",this,this.onLoadedImg),this.uiSkin.img.skin=this.param.url,this.uiSkin.titlelbl.text=this.param.title,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onLoadedImg=function(){this.destroyed||this.uiSkin.img.width<this.uiSkin.contentPanel.width&&(this.uiSkin.img.x=(this.uiSkin.contentPanel.width-this.uiSkin.img.width)/2)},n.onClosePanel=function(){E.instance.closeView("PRODUCT_PROC_EFFECT_PANEL")},i}(Dn),tr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.workpanel.RelatedChooseController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.piclist.itemRender=Pc,this.uiSkin.piclist.selectEnable=!0,this.uiSkin.piclist.spaceY=20,this.uiSkin.piclist.spaceX=30,this.uiSkin.piclist.renderHandler=new c(this,this.updatePicInfoItem),this.uiSkin.piclist.selectHandler=new c(this,this.onselected),this.uiSkin.piclist.array=this.param.files,this.uiSkin.originList.itemRender=Ic,this.uiSkin.originList.selectEnable=!0,this.uiSkin.originList.spaceX=5,this.uiSkin.originList.renderHandler=new c(this,this.updateOriginInfoItem),this.uiSkin.originList.selectHandler=new c(this,this.onselectedOriginFile),this.uiSkin.title.text=["异形","反面","局部铺白"][H.instance.curOperateSelType]+"关联图片选择",this.uiSkin.originList.array=this.param.originfiles,this.param.originfiles.length>0&&this.setOriginImg(this.param.originfiles[0]),Ti.window.uploadApp=this,this.uiSkin.closeBtn.on("click",this,this.onCloseView),this.uiSkin.cancelBtn.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmRelated),this.uiSkin.batchOk.on("click",this,this.onConfirmBatchRelated),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.setOriginImg=function(t){A.instance.curOriginFile=t,this.uiSkin.originFileName.text=t.directName,this.uiSkin.originPic.skin=W.smallerrPicUrl+t.fid+".jpg",this.uiSkin.effectPic.skin=W.smallerrPicUrl+t.fid+".jpg",this.uiSkin.yixingPic.skin=W.smallerrPicUrl+t.fid+".jpg",this.uiSkin.effectPic.alpha=1==H.instance.curOperateSelType?.5:1,t.picWidth>t.picHeight?(this.uiSkin.originPic.width=280,this.uiSkin.originPic.height=280/t.picWidth*t.picHeight):(this.uiSkin.originPic.height=280,this.uiSkin.originPic.width=280/t.picHeight*t.picWidth),this.uiSkin.effectPic.width=this.uiSkin.originPic.width,this.uiSkin.effectPic.height=this.uiSkin.originPic.height},n.updatePicInfoItem=function(t){t.setData(t.dataSource)},n.onselected=function(t){for(var i=0;i<this.uiSkin.piclist.cells.length;i++)this.uiSkin.piclist.cells[i].setChoose(i==t);this.selectRelatedPic(this.param.files[t])},n.updateOriginInfoItem=function(t){t.setData(t.dataSource)},n.onselectedOriginFile=function(t){for(var i=0;i<this.uiSkin.originList.cells.length;i++)this.uiSkin.originList.cells[i].setChoose(i==t);this.setOriginImg(this.param.originfiles[t])},n.readImageBack=function(t){this.uiSkin.yixingPic.skin=t},n.selectRelatedPic=function(t){null!=t&&(A.instance.curRelatedFile=t,0==H.instance.curOperateSelType?Ti.window.getYixingTransparent(W.smallerrPicUrl+t.fid+".jpg",!0,this.readImageBack):1==H.instance.curOperateSelType?(this.uiSkin.backPartPic.skin=W.smallerrPicUrl+t.fid+".jpg",this.uiSkin.backPartPic.alpha=.6,this.uiSkin.backPartPic.scaleX=-1):(Ti.window.getYixingTransparent(W.smallerrPicUrl+A.instance.curOriginFile.fid+".jpg",!1,this.readOriginImageBack),Ti.window.getYixingTransparent(W.smallerrPicUrl+t.fid+".jpg",!0,this.readPartWhiteImageBack)))},n.readOriginImageBack=function(t){this.uiSkin.effectPic.skin=t},n.readPartWhiteImageBack=function(t){this.uiSkin.backPartPic.skin=t},n.onConfirmRelated=function(){if(null==A.instance.curRelatedFile)return E.showAlert("请选择关联图片"),void 0;if(null!=H.instance.curOperateFile){if(H.instance.curOperateFile.fid==A.instance.curRelatedFile.fid)return;H.instance.setYingxingImg(A.instance.curRelatedFile,A.instance.curOriginFile),H.instance.curOperateFile=null}this.onCloseView()},n.onConfirmBatchRelated=function(){if(null==A.instance.curRelatedFile)return E.showAlert("请选择关联图片"),void 0;if(null!=H.instance.curOperateFile){if(H.instance.curOperateFile.fid==A.instance.curRelatedFile.fid)return;H.instance.setYingxingImg(A.instance.curRelatedFile),H.instance.curOperateFile=null}this.onCloseView()},n.onCloseView=function(){E.instance.closeView("RELATED_PIC_CHOOSE_PANEL")},n.onDestroy=function(){A.instance.resetData()},i}(Dn),ir=function(t){function i(){this.uiSkin=null,this.param=null,this.orderlist=null,this.mianvbox=0,this.requestnum=0,i.__super.call(this)}s(i,"script.workpanel.PaintOrderSettingController",t);var e=i.prototype;return e.onStart=function(){k.instance.getDynamicDeliveryFeeCfg(),this.uiSkin=this.owner;var t=1,i=0;if(this.uiSkin.orderlistpanel.vScrollBarSkin="",this.orderlist=[],null!=k.instance.tempPicOrderItemVoList)for(var e=0;e<k.instance.tempPicOrderItemVoList.length;e++){var n=new nc(k.instance.tempPicOrderItemVoList[e]);this.uiSkin.ordervbox.addChild(n),t++,this.orderlist.push(n),i>0&&(this.uiSkin.ordervbox.height+=n.height+this.uiSkin.ordervbox.space),i++}var s;for(var r in H.instance.haselectPic){s=H.instance.haselectPic[r];var a=new V(s);a.indexNum=t++;var n=new nc(a);this.uiSkin.ordervbox.addChild(n),this.orderlist.push(n),i>0&&(this.uiSkin.ordervbox.height+=n.height+this.uiSkin.ordervbox.space),i++}this.uiSkin.productNum.text=this.orderlist.length.toString(),H.instance.haselectPic={},this.uiSkin.batchChange.on("click",this,this.onBatchChangeMaterial),this.uiSkin.selectAll.on("click",this,this.onSelectAll),this.uiSkin.batchDelete.on("click",this,this.onBatchDelete),this.uiSkin.goToNext.on("click",this,this.onOrderPaint),this.uiSkin.btnaddpic.on("click",this,this.onShowSelectPic),Ln.instance.on("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.on("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.on("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.on("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.on("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.on("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.resetOrderInfo(),this.updateLblPos(g.instance.shrinkState),"0"!=k.instance.selectAddress.customerId?(this.uiSkin.curCustomer.text="当前客户："+k.instance.selectAddress.customerName,this.uiSkin.curCustomer.visible=!0,k.instance.selectAddress.defaultPayType>=0&&(this.uiSkin.curCustomer.text+="("+m.PAY_TYPE_NAME[k.instance.selectAddress.defaultPayType-1]+")")):this.uiSkin.curCustomer.visible=!1,(null==g.instance.company||""==g.instance.company)&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfo,null,null)},e.updateLblPos=function(t){0==t?(this.uiSkin.opeBox.x=1456,this.uiSkin.pricelbl.x=1364,this.uiSkin.unitpricelbl.x=1273):(this.uiSkin.opeBox.x=1556,this.uiSkin.pricelbl.x=1468,this.uiSkin.unitpricelbl.x=1373)},e.resetOrderInfo=function(){if(!this.destroyed){var t=0,i=0;if(this.orderlist.length>0){var e={};k.instance.calculateProductDiscount(this.orderlist);for(var n=0;n<this.orderlist.length;n++){var s=this.orderlist[n];s.updateProductPrice();var r;if(null==s.ordervo.orderData||e.hasOwnProperty(s.ordervo.manufacturer_code))r=e[s.ordervo.manufacturer_code];else{r={},r.order_sn=k.getOrderSn(),r.client_code=g.instance.clientCode,r.consignee=g.instance.companyShort+"#"+k.instance.selectAddress.receiverName,r.tel=k.instance.selectAddress.phone,r.address=k.instance.selectAddress.proCityArea,r.order_amountStr=0,r.shipping_feeStr="0",r.money_paidStr="0",r.discountStr="1",r.pay_timeStr=T.formatFullDateTime(new Date),r.delivery_dateStr=T.formatFullDateTime(new Date,!1),r.manufacturer_code=s.ordervo.manufacturer_code,r.manufacturer_name=s.ordervo.manufacturer_name,r.contact_phone=k.instance.getContactPhone(s.ordervo.manufacturer_code);k.instance.selectDelivery&&(r.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),r.orderItemList=[],e[s.ordervo.manufacturer_code]=r}null!=this.orderlist[n].ordervo.orderData&&(r.order_amountStr+=this.orderlist[n].getPrice(),i+=parseFloat(this.orderlist[n].getNoDiscountPrice().toFixed(1)),this.orderlist[n].ordervo.orderData.itemSeq=n+1,r.orderItemList.push(this.orderlist[n].ordervo.orderData))}var a;for(var o in e)a=e[o],a.order_amountStr<2&&(a.order_amountStr=2),t+=Number(a.order_amountStr.toFixed(2))}var h=parseFloat(i.toFixed(1))-parseFloat(t.toFixed(1));0>h&&(h=0),k.instance.rawPrice=i.toFixed(1);var l=1;t=parseFloat(t.toFixed(1)),t*=l,this.uiSkin.textTotalPrice.text=i.toFixed(1),this.uiSkin.textDiscount.text=h.toFixed(1),this.uiSkin.textPayPrice.text=t.toFixed(1),g.instance.isHidePrice()&&(this.uiSkin.textTotalPrice.text="***",this.uiSkin.textDiscount.text="***",this.uiSkin.textPayPrice.text="***")}},e.onDeletePicOrder=function(t){var i=t.ordervo;this.orderlist.indexOf(t)>=0&&this.orderlist.splice(this.orderlist.indexOf(t),1);for(var e=0;e<this.uiSkin.ordervbox.numChildren;e++){var n=this.uiSkin.ordervbox.getChildAt(e).ordervo;n.indexNum>i.indexNum&&n.indexNum--,this.uiSkin.ordervbox.getChildAt(e).updateIndex()}this.uiSkin.ordervbox.removeChild(t),this.uiSkin.ordervbox.height-t.height-this.uiSkin.ordervbox.space<0?this.uiSkin.ordervbox.height=0:this.uiSkin.ordervbox.height-=t.height+this.uiSkin.ordervbox.space,0==this.uiSkin.ordervbox.numChildren&&(this.uiSkin.ordervbox.height=0),this.uiSkin.ordervbox.size(this.uiSkin.ordervbox.width,0),this.uiSkin.ordervbox.refresh(),this.resetOrderInfo(),this.uiSkin.productNum.text=this.orderlist.length.toString()},e.onSelectAll=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected=this.uiSkin.selectAll.selected},e.onBatchDelete=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&(this.onDeletePicOrder(this.orderlist[t]),t--)},e.onBatchChangeMaterial=function(){if(null==k.instance.selectAddress)return E.showAlert("请先选择收货地址"),void 0;k.instance.batchChangeMatItems=[];for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&k.instance.batchChangeMatItems.push(this.orderlist[t]);return k.instance.batchChangeMatItems.length<=0?(E.showAlert("请至少选择一个需要更换的产品"),void 0):(k.instance.curSelectMat=null,E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL"),k.instance.curSelectOrderItem=null,void 0)},e.changeProductNum=function(t){for(var i=0;i<this.orderlist.length;i++)this.orderlist[i].checkSel.selected&&(this.orderlist[i].inputnum.text=t,this.orderlist[i].onNumChange())},e.onAdjustHeight=function(t){this.uiSkin.ordervbox.height+=t},e.onPaySucess=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.onCancelPay=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.getCompanyInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.company=i.data.name,g.instance.companyShort=i.data.shortName,g.instance.founderPhone=i.data.founderMobileNumber,g.instance.isVipCompany="1"==i.vip)}},e.onOrderPaint=function(){var t=this;if("NaN"==this.uiSkin.textPayPrice.text)return E.showAlert("价格异常，请检查工艺或联系客服"),void 0;if(null==g.instance.companyShort)return W.instance.Request(W.httpUrl+"org/getInfo",this,function(i){if(!this.destroyed){var e=JSON.parse(i);"0"==e.code&&(g.instance.company=e.data.name,g.instance.companyShort=e.data.shortName,g.instance.founderPhone=e.data.founderMobileNumber),t.onOrderPaint()}},null,null),void 0;var i=this.getOrderData();if(null!=i){for(var e=[],n=0;n<i.length;n++)e=e.concat(i[n].orderItemList);if(e.length>100)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0;k.instance.finalOrderData=i;var s={count:e.length.toString()};W.instance.Request(W.httpUrl+"order/reserveItemSn?",this,this.ongetUidsBack,JSON.stringify(s),"post")}},e.ongetUidsBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=i.data,n=[],s=0;s<k.instance.finalOrderData.length;s++)n=n.concat(k.instance.finalOrderData[s].orderItemList);for(var s=0;s<e.length;s++)n[s].orderItemSn=e[s];Ln.instance.event("SHOW_CONTENT_PANEL",[vo,0,n])}}},e.initPackage=function(t){k.instance.addPackage(k.instance.selectAddress,t);var i=k.instance.finalOrderData;this.requestnum=0;for(var e=0;e<i.length;e++){var n=T.getLocalVar("timePrefer","2");parseInt(n)<2&&(n="2"),k.instance.curTimePrefer=parseInt(n);var s=k.instance.getOrderCapcaityData(i[e],k.instance.curTimePrefer);console.log("产能数据:"+s),W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,s,"post")}},e.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i.hasOwnProperty("status")||i.hasOwnProperty("code"))E.showAlert(i.message);else{for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}if(this.requestnum++,this.requestnum==k.instance.finalOrderData.length){if(null==k.instance.packageList||k.instance.packageList.length<=0)return;if(!k.instance.setVipPackageData())return E.showAlert("打包异常，请返回上一步重新打包"),void 0;for(var c=[],n=0;n<k.instance.finalOrderData.length;n++)c=c.concat(k.instance.finalOrderData[n].orderItemList);Ln.instance.event("SHOW_CONTENT_PANEL",[gh,0,{orders:c,delaypay:!1}]),k.instance.packageList=[]}else U.instance.showWaitingView()}}},e.getOrderData=function(){if(this.orderlist.length<=0)return E.showAlert("未选择下单图片"),null;for(var t={},i=0;i<this.orderlist.length;i++){var e=this.orderlist[i];if(!e.checkCanOrder())return null;var n;if(t.hasOwnProperty(e.ordervo.manufacturer_code))n=t[e.ordervo.manufacturer_code];else{n={},n.orderSn=k.getOrderSn(),n.clientCode=g.instance.clientCode,n.userCode=g.instance.userAccount,n.userOrgCode=g.instance.founderPhone,n.customerId=k.instance.selectAddress.customerId.toString(),n.addressId=k.instance.selectAddress.zoneid,n.clientVersion=g.instance.version,n.orderAmount=0,n.shippingFee="0",n.moneyPaid="0",n.discount="1",n.checkCapacity=!0,n.payTime=T.formatFullDateTime(new Date),n.deliveryDate=T.formatFullDateTime(new Date,!1),n.manufacturerCode=e.ordervo.manufacturer_code,n.manufacturerName=e.ordervo.manufacturer_name,n.contact_phone=k.instance.getContactPhone(e.ordervo.manufacturer_code);k.instance.selectDelivery&&(n.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),n.orderItemList=[],t[e.ordervo.manufacturer_code]=n}if(null==this.orderlist[i].ordervo.orderData)return E.showAlert("有图片未选择材料工艺"),null;n.orderAmount+=this.orderlist[i].getPrice(),this.orderlist[i].ordervo.orderData.itemSeq=i+1,n.orderItemList.push(this.orderlist[i].ordervo.orderData)}var s,r=[];for(var a in t){if(s=t[a],s.order_amountStr<2){s.orderAmount=2;var o=s.orderItemList;if(o.length>0)for(var h=Number((2/o.length).toFixed(2)),l=2-h*o.length,c=0;c<o.length;c++)o[c].itemPrice=0==c?((h+l)/o[c].itemNumber).toFixed(2):(h/o[c].itemNumber).toFixed(2)}s.moneyPaid=s.orderAmount.toFixed(1),s.orderAmount=s.orderAmount.toFixed(1),r.push(s)}var u=1,d=[];for(i=1;u>i;i++)for(var c=0;c<r.length;c++){var _=JSON.parse(JSON.stringify(r[c]));d.push(_)}return d.length>0&&(r=r.concat(d)),r},e.onShowSelectPic=function(){k.instance.tempPicOrderItemVoList=[];for(var t=0;t<this.orderlist.length;t++)k.instance.tempPicOrderItemVoList.push(this.orderlist[t].ordervo);Ln.instance.event("SHOW_CONTENT_PANEL",[Ro,0])},e.onDestroy=function(){Ln.instance.off("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.off("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.off("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.off("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.off("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.off("FIRST_PAGE_SHRINK",this,this.updateLblPos)},i}(Dn),er=function(t){function i(){this.uiSkin=null,this.curpage=1,this.totalPage=1,this.dateInput=null,this.dateInput2=null,this.address=null,this.curbillList=null,this.postAddress=null,i.__super.call(this)}s(i,"script.usercenter.InvoiceManager",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.invoicelist.itemRender=Il,this.uiSkin.invoicelist.repeatX=1,this.uiSkin.invoicelist.spaceY=2,this.uiSkin.invoicelist.renderHandler=new c(this,this.updateInvoiceList),this.uiSkin.invoicelist.selectEnable=!1,this.uiSkin.invoicelist.array=[],this.uiSkin.detaillist.itemRender=bl,this.uiSkin.detaillist.repeatX=1,this.uiSkin.detaillist.spaceY=2,this.uiSkin.detaillist.renderHandler=new c(this,this.updateInvoiceDetailList),this.uiSkin.detaillist.selectEnable=!1,this.uiSkin.detaillist.array=[],e.timer.frameLoop(1,this,this.updateDateInputPos),this.uiSkin.detailbox.visible=!1,this.uiSkin.enterprizeInfoPanel.visible=!1,this.uiSkin.companyInfoBtn.on("click",this,this.onShowEnterPrizeInfo),this.uiSkin.updateOK.on("click",this,this.onUpdateEnterPrizeInfo),this.uiSkin.detailBtn.on("click",this,this.onShowDetailPanel),this.uiSkin.closedetail.on("click",this,this.onCloseDetail),this.uiSkin.adressBtn.on("click",this,this.showAddressPanle),this.uiSkin.queryBtn.on("click",this,this.reuqestCostList),this.uiSkin.confirmInvoiceBtn.on("click",this,this.confirmRequestInvoice),this.uiSkin.invoiceHistory.on("click",this,this.showHistory),this.uiSkin.companyName.text="",this.uiSkin.taxNumber.text="",this.uiSkin.bankName.text="",this.uiSkin.bankName.maxChars=100,this.uiSkin.companyName.maxChars=20,this.uiSkin.taxNumber.maxChars=20,W.instance.Request(W.httpUrl+"group/get-invoice-info",this,this.getEnterInfo,null,"post"),this.initDateSelector(),Ln.instance.on("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.on("OPEN_PANEL_VIEW",this,this.onHideInputDate),Ln.instance.on("SELECT_ORDER_ADDRESS",this,this.onSelectedAddress),Ln.instance.on("INVOICE_SELECTED_CHANGE",this,this.updateSummary)},n.getEnterInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&(this.uiSkin.companyName.text=i.data[0].name,this.uiSkin.taxNumber.text=i.data[0].code,this.uiSkin.bankName.text=i.data[0].bank,this.postAddress=i.data[0].addr)}},n.showHistory=function(){E.instance.openView("VIEW_INVOICE_HISTORY_PANEL")},n.onShowEnterPrizeInfo=function(){this.uiSkin.enterprizeInfoPanel.visible=!0},n.onUpdateEnterPrizeInfo=function(){this.uiSkin.enterprizeInfoPanel.visible=!1},n.onShowDetailPanel=function(){this.uiSkin.detailbox.visible=!0,null!=this.curbillList&&(this.uiSkin.detaillist.array=this.curbillList),this.onHideInputDate()},n.onCloseDetail=function(){this.uiSkin.detailbox.visible=!1,this.onshowInputDate("")},n.showAddressPanle=function(){E.instance.openView("VIEW_SELECT_ADDRESS",!1)},n.onshowInputDate=function(){"VIEW_USERCENTER"==E.instance.getTopViewName()&&(this.dateInput.hidden=!1,this.dateInput2.hidden=!1)},n.onHideInputDate=function(){null!=this.dateInput&&(this.dateInput.hidden=!0,this.dateInput2.hidden=!0)},n.updateInvoiceList=function(t){t.setData(t.dataSource)},n.updateInvoiceDetailList=function(t){t.setData(t.dataSource)},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=150/Ti.pixelRatio,this.dateInput.style.height=20/Ti.pixelRatio,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>31104e6?(e=new Date(i.getTime()+31104e6),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1))}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=150/Ti.pixelRatio,this.dateInput2.style.height=20/Ti.pixelRatio,this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>31104e6?(e=new Date(i.getTime()-31104e6),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1))}}},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=0;Ti.width>e.stage.width&&(i=(Ti.width-e.stage.width)/2),this.dateInput.style.top=(t.y-15)/Ti.pixelRatio+"px",this.dateInput.style.left=(t.x+15/Ti.pixelRatio+i)/Ti.pixelRatio+"px",this.dateInput2.style.top=(t.y-15)/Ti.pixelRatio+"px",this.dateInput2.style.left=(t.x+205+i)/Ti.pixelRatio+"px"}},n.reuqestCostList=function(){var t="bgnDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59";W.instance.Request(W.httpUrl+"group/get-factory-bill",this,this.getBillBack,t,"post")},n.getBillBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.status){this.curbillList=i.data;for(var n=i.data,s={},r=[],a=0;a<n.length;a++)if(s.hasOwnProperty(n[a].fc_id))s[n[a].fc_id].amount+=parseFloat(n[a].fct_amount);else{var o=new _;o.fcId=n[a].fc_id,o.fcName=n[a].fc_name,o.amount=parseFloat(n[a].fct_amount),o.startTime=this.dateInput.value,o.endTime=this.dateInput2.value,s[n[a].fc_id]=o,r.push(o)}this.uiSkin.invoicelist.array=r,e.timer.frameOnce(2,this,this.updateSummary)}}},n.updateSummary=function(){for(var t=this.uiSkin.invoicelist.array,i=[],e=0,n=0;n<t.length;n++){var s=t[n];null!=s&&s.selected&&(i.push(s),e+=s.amount)}this.uiSkin.invoiceNum.text=i.length+"",this.uiSkin.totalMoney.text=e.toFixed(1)},n.confirmRequestInvoice=function(){if(""==this.uiSkin.companyName.text||""==this.uiSkin.taxNumber.text||""==this.uiSkin.bankName.text)return E.showAlert("请填写企业信息"),this.onShowEnterPrizeInfo(),void 0;if(null==this.postAddress||""==this.postAddress)return E.showAlert("请选择邮寄地址"),E.instance.openView("VIEW_SELECT_ADDRESS"),void 0;if(null!=this.uiSkin.invoicelist.array&&0!=this.uiSkin.invoicelist.array.length){for(var t=this.uiSkin.invoicelist.array,i=[],e=0,n=0;n<t.length;n++){var s=t[n];null!=s&&s.selected&&(i.push(s),e+=s.amount)}if(0==i.length)return E.showAlert("未选择任何需要申请的发票"),void 0;var r="请确认发票信息：企业名称："+this.uiSkin.companyName.text+"，企业纳税号："+this.uiSkin.taxNumber.text+"，企业开户行："+this.uiSkin.bankName.text+"，发票邮寄地址："+this.postAddress+"，发票总金额："+e.toFixed(1)+"元";E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:r,caller:this,callback:this.confirmOpen})}},n.confirmOpen=function(t){if(t){var i="";i+="name="+this.uiSkin.companyName.text+"&addr="+this.postAddress+"&bank="+this.uiSkin.bankName.text+"&code="+this.uiSkin.taxNumber.text,W.instance.Request(W.httpUrl+"group/update-invoice-info",this,this.updateInfoBack,i,"post")}},n.updateInfoBack=function(t){var i=JSON.parse(t);if(0==i.status){for(var e=this.uiSkin.invoicelist.array,n="",s="",r="",a=0;a<e.length;a++){var o=e[a];null!=o&&o.selected&&(s=o.startTime,r=o.endTime,n+=o.fcId+",")}var h="idList="+n.substr(0,n.length-1)+"&bgnDate="+s+"&endDate="+r;W.instance.Request(W.httpUrl+"group/apply-invoice",this,this.applyBack,h,"post")}},n.applyBack=function(t){var i=JSON.parse(t);0==i.status&&(E.showAlert("申请成功，请等待开票"),this.reuqestCostList())},n.onSelectedAddress=function(t){this.address=t,this.postAddress=this.address.addressDetail},n.onDestroy=function(){e.timer.clearAll(this),null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2)),Ln.instance.off("SELECT_ORDER_ADDRESS",this,this.onSelectedAddress),Ln.instance.off("INVOICE_SELECTED_CHANGE",this,this.updateSummary),Ln.instance.off("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.off("OPEN_PANEL_VIEW",this,this.onHideInputDate)},i}(Dn),nr=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.product.ProductMainControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.productlist.itemRender=wl,this.uiSkin.productlist.vScrollBarSkin="",this.uiSkin.productlist.repeatX=3,this.uiSkin.productlist.spaceY=20,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1;for(var t=["https://detail.tmall.com/item.htm?id=526318658145&ali_refid=a3_430583_1006:1108235969:N:1MQTVLPp62GPhglCIaZd/g==:d9254f3b567d036adb3b0c3d81c6eac7&ali_trackid=1_d9254f3b567d036adb3b0c3d81c6eac7&spm=a230r.1.14.1","https://detail.tmall.com/item.htm?spm=a230r.1.14.13.3e402ebdwcU30Y&id=555521978270&cm_id=140105335569ed55e27b&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.20.3e402ebdwcU30Y&id=563368098306&ns=1&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.27.3e402ebdwcU30Y&id=559210560379&ns=1&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.76.3e402ebdwcU30Y&id=582945215363&ns=1&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.83.3e402ebdwcU30Y&id=565700275650&ns=1&abbucket=10","https://item.taobao.com/item.htm?spm=a230r.1.14.278.3e402ebdwcU30Y&id=18471253099&ns=1&abbucket=10#detail","https://detail.tmall.com/item.htm?spm=a230r.1.14.73.3e402ebdwcU30Y&id=569329939430&ns=1&abbucket=10","https://detail.tmall.com/item.htm?id=571469150299&ali_refid=a3_430583_1006:1110650643:N:J9qj8Ni7SIVwWdQdeSY+dw==:5659d26af13796aa642628f226441b9a&ali_trackid=1_5659d26af13796aa642628f226441b9a&spm=a230r.1.14.1","https://detail.tmall.com/item.htm?spm=a230r.1.14.14.68675639S5nZ2i&id=4043459487&cm_id=140105335569ed55e27b&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.46.68675639S5nZ2i&id=537478190853&ns=1&abbucket=10","https://detail.tmall.com/item.htm?spm=a230r.1.14.93.68675639S5nZ2i&id=575639443142&ns=1&abbucket=10&sku_properties=21433:32102","https://detail.tmall.com/item.htm?spm=a230r.1.14.141.68675639S5nZ2i&id=587606286953&ns=1&abbucket=10&sku_properties=21433:21366"],i=["门型x展架广告牌展示架立式易拉宝80x180海报设计落地式定制制作","广告牌展示架kt板展架立式落地式宣传海报支架招聘展板招工牌架子","铝合金亮盖水滴易拉宝广告海报架80 200易拉宝展架设计制作X展架","kt板展架立式落地海报架广告架子支架易拉宝广告牌展示架定制制作","拉网展架签名签到墙展示架立式落地式布艺拉网背景墙海报布广告牌","广告牌展示牌kt板展架展板海报架立牌宣传架子立式水牌落地式招聘","资料架杂志架报刊架书刊架置物宣传架展示架展架报纸收纳架子落地","广告牌展示架kt板展架立式落地式户外双面海报架宣传立牌展板架子","展会橱窗吊旗悬挂杆铝合金海报挂轴杆挂画轴吊挂夹天花吊画广告牌","申佳铝合金A3三证合一营业执照相框挂墙a4摆台工商税务画框证书框","磁吸电梯广告框海报框挂墙广告框架展板海报相框铝合金画框海报框","实木广告框架亚克力相框挂墙免打孔木质海报框教练教师展示墙画框","相框挂墙免打孔洗照片加画框外框创意简约冲印定制来图定做相架框"],e=[],n=0;n<t.length;n++){var s={url:t[n],pid:n};s.pname=i[n],s.allsize=["120*150","160*200"],s.price=35+2*n,e.push(s)}this.uiSkin.productlist.array=e},e.updateProductList=function(t){t.setData(t.dataSource)},i}(Dn),sr=function(t){function i(){this.uiSkin=null,this.province=null,this.zoneid=null,this.areaid=null,this.param=null,this.address=null,this.isAddOrEdit=!0,this.hasinit=!1,this.httpUrl=null,this.customer=null,this.deliveryList=null,i.__super.call(this)}s(i,"script.usercenter.AddressEditControl",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,this.httpUrl=this.param.url,this.customer=this.param.customer,null!=this.param.address&&(this.isAddOrEdit=!1,this.address=this.param.address),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.input_username.maxChars=8,this.uiSkin.input_phone.maxChars=20,this.uiSkin.input_phone.restrict="0-9-",this.uiSkin.input_address.maxChars=50,this.uiSkin.provList.itemRender=Kl,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.cityList.itemRender=Kl,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.areaList.itemRender=Kl,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.townList.itemRender=Kl,this.uiSkin.townList.vScrollBarSkin="",this.uiSkin.townList.selectEnable=!0,this.uiSkin.townList.repeatX=1,this.uiSkin.townList.spaceY=2,this.uiSkin.townList.renderHandler=new c(this,this.updateCityList),this.uiSkin.townList.selectHandler=new c(this,this.selectTown),this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.btnSelTown.on("click",this,this.onShowTown),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.townbox.visible=!1,0==this.isAddOrEdit&&(this.uiSkin.input_username.text=this.address.receiverName,this.uiSkin.input_phone.text=this.address.phone,this.uiSkin.input_address.text=this.address.address),this.uiSkin.on("click",this,this.hideAddressPanel),this.uiSkin.btnok.on("click",this,this.onSubmitAdd),this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initAddr,null,null),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.getDeliveryList.on("click",this,function(){if(null!=t.zoneid){var i="clientCode="+g.instance.clientCode+"&addrId="+t.zoneid+"&webCode="+g.instance.webCode;
W.instance.Request(W.httpUrl+"business/getDeliveryType?"+i,this,t.getDeliveryListBack,null,null)}}),this.uiSkin.deliveryBox.visible=null!=this.customer&&"0"!=this.customer.id||!this.isAddOrEdit?!0:!1},e.startDragPanel=function(t){this.uiSkin.dragImg.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.stopDrag()},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.getDeliveryListBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i;if(null!=e){for(var n="",s=-1,r=0;r<e.length;r++)n+=e[r].name,r<e.length-1&&(n+=","),null!=this.address&&this.address.defaultDeliveryType==e[r].name&&(s=r);this.uiSkin.defaulDeliveryType.labels=n,n.length>0?this.uiSkin.defaulDeliveryType.selectedIndex=s>=0?s:0:(this.uiSkin.defaulDeliveryType.labels=" ",this.uiSkin.defaulDeliveryType.selectedIndex=0),this.deliveryList=e}}},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1)},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowTown=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!0,t.stopPropagation()},e.updateCityList=function(t){t.setData(t.dataSource)},e.initAddr=function(t){if(!this.destroyed){var i=JSON.parse(t);this.uiSkin.provList.array=i.data;var e=0;if(0==this.isAddOrEdit){var n=this.address.preAddName.split(" ");if(null!=n[0])for(var s=0;s<this.uiSkin.provList.array.length;s++)if(this.uiSkin.provList.array[s].areaName==n[0]){e=s;break}}this.selectProvince(e)}},e.selectProvince=function(t){var i=this;this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.province.id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh();var n=0;if(0==i.isAddOrEdit&&0==i.hasinit){var s=i.address.preAddName.split(" ");if(null!=s[1])for(var r=0;r<i.uiSkin.cityList.array.length;r++)if(i.uiSkin.cityList.array[r].areaName==s[1]){n=r;break}}i.uiSkin.citytxt.text=i.uiSkin.cityList.array[n].areaName,i.uiSkin.cityList.selectedIndex=n,i.selectCity(n)}},null,null)},e.selectCity=function(t){var i=this;this.uiSkin.citybox.visible=!1,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.cityList.array[t].id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh();var n=0;if(0==i.isAddOrEdit&&0==i.hasinit){var s=i.address.preAddName.split(" ");if(null!=s[2])for(var r=0;r<i.uiSkin.areaList.array.length;r++)if(i.uiSkin.areaList.array[r].areaName==s[2]){n=r;break}}i.uiSkin.areatxt.text=i.uiSkin.areaList.array[n].areaName,i.uiSkin.areaList.selectedIndex=n,i.selectArea(n),i.areaid=i.uiSkin.areaList.array[n].id}},null,null),this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName},e.selectArea=function(t){var i=this;-1!=t&&(this.areaid=this.uiSkin.areaList.array[t].id,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.areaList.array[t].id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);if(i.uiSkin.btnSelTown.visible=e.data.length>0,0==e.data.length){i.zoneid=i.areaid;var n="clientCode="+g.instance.clientCode+"&addrId="+i.zoneid+"&webCode="+g.instance.webCode;return W.instance.Request(W.httpUrl+"business/getDeliveryType?"+n,this,i.getDeliveryListBack,null,null),void 0}i.uiSkin.townList.array=e.data,i.uiSkin.townList.refresh();var s=0;if(0==i.isAddOrEdit&&0==i.hasinit){var r=i.address.preAddName.split(" ");if(null!=r[3])for(var a=0;a<i.uiSkin.townList.array.length;a++)if(i.uiSkin.townList.array[a].areaName==r[3]){s=a;break}}i.uiSkin.towntxt.text=i.uiSkin.townList.array[s].areaName,i.zoneid=i.uiSkin.townList.array[s].id;var n="clientCode="+g.instance.clientCode+"&addrId="+i.zoneid+"&webCode="+g.instance.webCode;W.instance.Request(W.httpUrl+"business/getDeliveryType?"+n,this,i.getDeliveryListBack,null,null)}},null,null),this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1)},e.selectTown=function(t){if(-1!=t){this.hasinit=!0,this.uiSkin.townbox.visible=!1,this.uiSkin.towntxt.text=this.uiSkin.townList.array[t].areaName,this.zoneid=this.uiSkin.townList.array[t].id;var i="clientCode="+g.instance.clientCode+"&addrId="+this.zoneid+"&webCode="+g.instance.webCode;W.instance.Request(W.httpUrl+"business/getDeliveryType?"+i,this,this.getDeliveryListBack,null,null)}},e.onSubmitAdd=function(){if(""==this.uiSkin.input_username.text)return E.showAlert("请填写收货人姓名"),void 0;if(""==this.uiSkin.input_phone.text||this.uiSkin.input_phone.text.length<11)return E.showAlert("请填写正确的收货人电话"),void 0;if(""==this.uiSkin.input_address.text)return E.showAlert("请填写具体的地址"),void 0;if(T.hasForbidenChars(this.uiSkin.input_address.text))return E.showAlert('地址中不能包含\\、*、/、#、"、制表符等特殊字符'),void 0;var t=this.areaid,i=this.uiSkin.province.text+" "+this.uiSkin.citytxt.text+" "+this.uiSkin.areatxt.text+" "+(this.uiSkin.btnSelTown.visible?this.uiSkin.towntxt.text:""),e={};e.cnee=this.uiSkin.input_username.text,e.mobileNumber=this.uiSkin.input_phone.text,e.region=this.zoneid+"|"+t,e.addr=this.uiSkin.input_address.text,e.regionName=i,null!=this.customer&&(e.customerId=this.customer.id),this.uiSkin.defaulDeliveryType.selectedIndex>=0&&null!=this.deliveryList&&null!=this.deliveryList[this.uiSkin.defaulDeliveryType.selectedIndex]&&(e.defaultDelivery=this.deliveryList[this.uiSkin.defaulDeliveryType.selectedIndex].name),0==this.isAddOrEdit&&(e.id=this.address.id),this.isAddOrEdit?W.instance.Request(W.httpUrl+this.httpUrl,this,this.addAddressback,JSON.stringify(e),"post"):W.instance.Request(W.httpUrl+this.httpUrl,this,this.addAddressback,JSON.stringify(e),"post")},e.addAddressback=function(t){var i=JSON.parse(t);"0"==i.code&&(null==this.customer&&this.isAddOrEdit&&g.instance.addNewAddress(i.data),Ln.instance.event("UPDATE_MYADDRESS_LIST",g.instance.addressList[g.instance.addressList.length-1]),this.onCloseView())},e.onCloseView=function(){E.instance.closeView("VIEW_ADD_NEW_ADDRESS"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),rr=function(t){function i(){this.uiSkin=null,this.param=null,this.tempSelect=null,i.__super.call(this)}s(i,"script.order.SelectDeliveryControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.list_delivery.itemRender=Bl,this.uiSkin.list_delivery.vScrollBarSkin="",this.uiSkin.list_delivery.selectEnable=!0,this.uiSkin.list_delivery.spaceY=8,this.uiSkin.list_delivery.renderHandler=new c(this,this.updateAddressItem),this.uiSkin.list_delivery.selectHandler=new c(this,this.onSlecteDelivery),this.uiSkin.list_delivery.array=[],this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.okbtn.on("click",this,this.onConfirmSelectAddress),null!=this.param&&W.instance.Request(W.httpUrl+"business/deliverylist?"+this.param+"&addr_id="+k.instance.selectAddress.zoneid,this,this.onGetDeliveryBack,null,null)},n.onGetDeliveryBack=function(t){var i=this,n=JSON.parse(t);if(!n.hasOwnProperty("status")){k.instance.deliveryList=[];for(var s=0;s<n.length;s++){var r=new d(n[s]);"送货上门"==r.delivery_name&&(this.tempSelect=r),k.instance.deliveryList.push(r)}null==this.tempSelect&&k.instance.deliveryList.length>0&&(this.tempSelect=k.instance.deliveryList[0]),e.timer.once(10,null,function(){for(var t=i.uiSkin.list_delivery.cells,e=0;e<t.length;e++)t[e].ShowSelected=t[e].deliveryVo==i.tempSelect})}},n.onSlecteDelivery=function(t){var i;for(var e in this.uiSkin.list_delivery.cells)i=this.uiSkin.list_delivery.cells[e],i.ShowSelected=i.deliveryVo==this.uiSkin.list_delivery.array[t];this.tempSelect=this.uiSkin.list_delivery.array[t]},n.updateAddressItem=function(t){t.setData(t.dataSource)},n.onConfirmSelectAddress=function(){null!=this.tempSelect&&(k.instance.selectDelivery=this.tempSelect,Ln.instance.event("SELECT_DELIVERY_TYPE")),this.onCloseView()},n.onCloseView=function(){E.instance.closeView("VIEW_SELECT_DELIVERY_TYPE")},i}(Dn),ar=function(t){function i(){this.uiSkin=null,this.menuBtnOriginX=62,this.menuBtnList=null,this.curShrinkState=0,this.viewArr=null,this.curView=null,this.curViewIndex=-1,i.__super.call(this)}s(i,"script.FirstPageController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.leftMenuPanel.vScrollBarSkin="",this.uiSkin.contentPanel.vScrollBarSkin="",this.uiSkin.accountlbl.text=g.instance.userName,this.viewArr=[Wh,Ih,Fh,mo,Lo,Lh,eh,$h,Xo],this.menuBtnList=[this.uiSkin.workBtn,this.uiSkin.picBtn,this.uiSkin.orderbtn,this.uiSkin.companyBtn,this.uiSkin.moneyBtn,this.uiSkin.settingBtn,this.uiSkin.customBtn,this.uiSkin.transactionBtn,this.uiSkin.statisticalBtn];for(var i=0;i<this.menuBtnList.length;i++)this.menuBtnList[i].on("click",this,this.onClickMenu,[i]),this.menuBtnList[i].getChildByName("menuName").on("click",this,this.onClickMenu,[i]);this.uiSkin.shrinkBtn.on("click",this,this.onShrink),this.switchLeftPanelState(),this.onClickMenu(0),this.uiSkin.gotoFirst.on("click",this,function(){t.curView.scene instanceof ui.inuoView.MyWorkPanelUI==0&&(t.curViewIndex=-1,t.onClickMenu(0))}),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("SHOW_CONTENT_PANEL",this,this.changeContentPanel),Ln.instance.on("UPDAE_USER_NAME",this,this.updateUserName),W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null,null),this.uiSkin.exitBtn.on("click",this,this.onExit)},n.showTeaching=function(t){},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onPauseScroll=function(t){this.uiSkin.mainPanel.vScrollBar.target=t?this.uiSkin.mainPanel:null},n.getMyAddressBack=function(t){var i=JSON.parse(t);"0"==i.code?(g.instance.initMyAddress(i.data.expressList),g.instance.defaultAddId=i.data.defaultId):("1058"==i.code||"404"==i.code)&&E.instance.openView("VIEW_REGPANEL",!0)},n.getCompanyInfoBack=function(t){var i=JSON.parse(t);"0"==i.code&&(g.instance.isVipCompany="1"==i.data.vip,g.instance.checkJumpUrl(),g.instance.dirId=i.data.dirId,g.instance.company=i.data.name,g.instance.companyShort=i.data.shortName,g.instance.founderPhone=i.data.founderMobileNumber)},n.ongetMaintianBack=function(t){var i=JSON.parse(t);this.destroyed||0==i.status&&(null==i.state&&(i.state=0),i.state>0&&(this.owner.maintaintxt.visible=!0,this.owner.maintaintxt.text=i.msg))},n.onShrink=function(){this.curShrinkState=0==this.curShrinkState?1:0,g.instance.shrinkState=this.curShrinkState,Ln.instance.event("FIRST_PAGE_SHRINK",[this.curShrinkState]),this.uiSkin.arrow.scaleX=0==this.curShrinkState?1:-1,this.switchLeftPanelState()},n.switchLeftPanelState=function(){this.uiSkin.leftMenuPanel.width=0==this.curShrinkState?296:120,this.uiSkin.coverbg.visible=this.curShrinkState,this.uiSkin.contentPanel.left=0==this.curShrinkState?296:120;for(var t=0;t<this.menuBtnList.length;t++)this.menuBtnList[t].x=0==this.curShrinkState?this.menuBtnOriginX:42,this.menuBtnList[t].getChildByName("menuName").visible=0==this.curShrinkState;this.uiSkin.headimg.x=0==this.curShrinkState?this.menuBtnOriginX:(this.uiSkin.leftMenuPanel.width-this.uiSkin.headimg.width)/2,this.uiSkin.accountlbl.x=0==this.curShrinkState?this.menuBtnOriginX:(this.uiSkin.leftMenuPanel.width-this.uiSkin.accountlbl.textField.textWidth)/2,this.uiSkin.exitBtn.text=0==this.curShrinkState?"退出登录":"退出",this.uiSkin.exitBtn.x=0==this.curShrinkState?this.menuBtnOriginX:(this.uiSkin.leftMenuPanel.width-this.uiSkin.exitBtn.width)/2,this.uiSkin.shrinkBtn.x=0==this.curShrinkState?268:100},n.onClickMenu=function(t){if(this.curViewIndex!=t){for(this.curViewIndex=t;this.uiSkin.contentPanel.numChildren>0;)this.uiSkin.contentPanel.removeChildAt(0);this.curView&&this.curView.destroy(!0);for(var i=0;i<this.menuBtnList.length;i++)null!=this.menuBtnList[i]&&(this.menuBtnList[i].selected=!1,this.menuBtnList[i].getChildByName("menuName").color="#FFFFFF");this.menuBtnList[t].selected=!0,this.menuBtnList[t].getChildByName("menuName").color="#0",this.viewArr[t]?(this.curView=new this.viewArr[t],this.curView.on("resize",this,this.onLoadComplete),this.uiSkin.contentPanel.addChild(this.curView),this.uiSkin.contentPanel.height=this.curView.height):this.uiSkin.contentPanel.height=0,this.uiSkin.mainPanel.refresh(),this.uiSkin.mainPanel.scrollTo(0,0)}},n.changeContentPanel=function(t,i,e){if(void 0===i&&(i=0),this.viewArr.indexOf(t)>=0)this.curViewIndex=-1,this.onClickMenu(this.viewArr.indexOf(t));else{for(this.curViewIndex=i;this.uiSkin.contentPanel.numChildren>0;)this.uiSkin.contentPanel.removeChildAt(0);this.curView&&this.curView.destroy(!0);for(var n=0;n<this.menuBtnList.length;n++)null!=this.menuBtnList[n]&&(this.menuBtnList[n].selected=!1,this.menuBtnList[n].getChildByName("menuName").color="#FFFFFF");this.menuBtnList[i].selected=!0,this.menuBtnList[i].getChildByName("menuName").color="#0",this.curView=new t,e&&(this.curView.param=e),this.curView.on("resize",this,this.onLoadComplete),this.uiSkin.contentPanel.addChild(this.curView),this.uiSkin.mainPanel.refresh(),this.uiSkin.mainPanel.scrollTo(0,0)}},n.onLoadComplete=function(){this.curView&&(this.uiSkin.contentPanel.height=this.curView.height,this.uiSkin.mainPanel.refresh())},n.onExit=function(){W.instance.Request(W.httpUrl+"sys/logout?",this,this.onLoginOutBack,"","post")},n.onLoginOutBack=function(t){var i=JSON.parse(t);"0"==i.code&&(T.setLocalVar("userToken",""),g.instance.isLogin=!1,g.instance.resetData(),E.instance.openView("VIEW_lOGPANEL",!0))},n.updateUserName=function(){this.uiSkin.accountlbl.text=g.instance.userName},n.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("PAUSE_SCROLL_VIEW",this,this.onPauseScroll),Ln.instance.off("SHOW_CONTENT_PANEL",this,this.changeContentPanel),Ln.instance.off("UPDAE_USER_NAME",this,this.updateUserName)},i}(Dn),or=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.product.BuyProductControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnclose.on("click",this,this.closePanel),this.uiSkin.proname.text=this.param.pname,this.uiSkin.productimg.skin="product/p"+(1+this.param.pid)+".jpg",this.uiSkin.pricetxt.text=this.param.price+"元";var t=this.param.allsize;this.uiSkin.size0.label=t[0],this.uiSkin.size1.label=t[1],this.uiSkin.btnbuy.on("click",this,this.onClickBuy),this.uiSkin.size0.selected=!0,this.uiSkin.size0.on("click",this,this.onClickSize,[this.uiSkin.size0]),this.uiSkin.size1.on("click",this,this.onClickSize,[this.uiSkin.size1]),this.uiSkin.numinput.restrict="0-9",this.uiSkin.numinput.maxChars=3,this.uiSkin.numinput.on("input",this,this.onNumChange)},e.onClickSize=function(t){this.uiSkin.size0.selected=t==this.uiSkin.size0,this.uiSkin.size1.selected=t==this.uiSkin.size1},e.onNumChange=function(){""==this.uiSkin.numinput.text&&(this.uiSkin.numinput.text="1");var t=parseInt(this.uiSkin.numinput.text);0>=t&&(this.uiSkin.numinput.text="1",t=1),this.uiSkin.pricetxt.text=(t*this.param.price).toString()+"元"},e.onClickBuy=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"购买成功"}),this.closePanel()},e.closePanel=function(){E.instance.closeView("VIEW_BUY_PRODUCT_VIEW")},i}(Dn),hr=function(t){function i(){this.uiSkin=null,this.matvo=null,this.param=null,this.leastCutNum=0,this.cuttype=0,i.__super.call(this)}s(i,"script.order.AvgCutPanelControl",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.matvo=this.param,this.uiSkin.okbtn.on("click",this,this.closeView),this.uiSkin.productlist.itemRender=yl,this.uiSkin.productlist.vScrollBarSkin="",this.uiSkin.productlist.repeatX=3,this.uiSkin.productlist.spaceY=10,this.uiSkin.productlist.spaceX=10,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1;{var i=[];k.instance.curSelectMat}if(null!=k.instance.curSelectOrderItem){var e={};e.finalWidth=k.instance.curSelectOrderItem.finalWidth,e.finalHeight=k.instance.curSelectOrderItem.finalHeight,e.fid=k.instance.curSelectOrderItem.ordervo.picinfo.fid,e.orderitemvo=k.instance.curSelectOrderItem.ordervo,e.orderitemvo.horiCutNum=1,e.orderitemvo.verCutNum=1,i.push(e)}else for(var n=k.instance.batchChangeMatItems,s=0;s<n.length;s++){var e={};e.finalWidth=n[s].finalWidth,e.finalHeight=n[s].finalHeight,e.fid=n[s].ordervo.picinfo.fid,e.orderitemvo=n[s].ordervo,e.orderitemvo.horiCutNum=1,e.orderitemvo.verCutNum=1,i.push(e)}this.uiSkin.productlist.array=i,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.productlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.productlist.on("mouseout",this,this.resumeParentScroll),this.uiSkin.closeBtn.on("click",this,function(){t.closeView()})},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.pauseParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=null},e.resumeParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=this.uiSkin.mainpanel},e.updateProductList=function(t){t.setData(t.dataSource)},e.closeView=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("AVG_CUT_VIEW")},i}(Dn),lr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.order.MoreProductController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.productList.itemRender=wc,this.uiSkin.productList.vScrollBarSkin="",this.uiSkin.productList.selectEnable=!0,this.uiSkin.productList.spaceY=10,this.uiSkin.productList.renderHandler=new c(this,this.updateMatNameItem),this.uiSkin.closeBtn.on("click",this,this.onSlecteMat),this.uiSkin.productList.array=this.param.childMatList,this.uiSkin.categoryName.text=this.param.matclassname,Ln.instance.on("SET_DEFAULT_PRODUCT",this,this.setDefaultProduct)},e.setDefaultProduct=function(t){var i=this,e="name="+this.param.matclassname+"&categoryid="+this.param.nodeId+"&productid="+t.prodCode;W.instance.Request(W.httpUrl+"account/update-product-default-category?",this,function(e){var n=JSON.parse(e);0==n.status&&(i.param.defaultProductId=t.prodCode)},e,"post")},e.updateMatNameItem=function(t){t.setData(t.dataSource)},e.onSlecteMat=function(){E.instance.closeView("VIEW_MORE_PRODUCT_PANEL")},e.onDestroy=function(){Ln.instance.off("SET_DEFAULT_PRODUCT",this,this.setDefaultProduct)},i}(Dn),cr=function(t){function i(){this.uiSkin=null,this.param=null,this.materialPanel=null,this.procListPanel=null,this.startx=24,this.starty=20,this.matAndProceItemList=null,this.processItemSpaceX=10,this.processItemSpaceY=26,this.curSelectProcess=null,i.__super.call(this)}s(i,"script.workpanel.MatAndProcFlowController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.initLeftPanel(),this.matAndProceItemList=[];var t=new Vl(2,null,"选择材料");this.uiSkin.matProcContainer.addChild(t),this.matAndProceItemList.push(t),t.x=this.startx,t.y=this.starty,this.uiSkin.confirmBtn.on("click",this,this.onConfirmMatProcess),this.uiSkin.closeBtn.on("click",this,this.closeView),this.uiSkin.effectBtn.on("click",this,this.showEffectPanel),Ln.instance.on("SHOW_SELECT_TECH",this,this.initTechView),Ln.instance.on("CANCEL_CHOOSE_ATTACH",this,this.onCancaleChooseAttach),Ln.instance.on("SHOW_MATERIAL_LIST_PANEL",this,this.showMaterialPanel),Ln.instance.on("SELECT_PROCESS",this,this.selectProcess),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("CHOOSE_PROCESS_ITEM",this,this.onChooseProcess),this.uiSkin.operateArea.vScrollBarSkin="",this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.showMaterialPanel()},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.initLeftPanel=function(){if(this.uiSkin.originimg.skin="",this.uiSkin.backimg.skin="",this.uiSkin.yixingimg.skin="",this.uiSkin.partImg.skin="",null!=this.param){if(this.param.picWidth>this.param.picHeight?(this.uiSkin.originimg.width=280,this.uiSkin.originimg.height=280/this.param.picWidth*this.param.picHeight,this.uiSkin.yixingimg.width=128,this.uiSkin.yixingimg.height=128/this.param.picWidth*this.param.picHeight):(this.uiSkin.originimg.height=280,this.uiSkin.originimg.width=280/this.param.picHeight*this.param.picWidth,this.uiSkin.yixingimg.width=128,this.uiSkin.yixingimg.height=128/this.param.picWidth*this.param.picHeight),this.uiSkin.backimg.width=this.uiSkin.originimg.width,this.uiSkin.backimg.height=this.uiSkin.originimg.height,this.uiSkin.partImg.width=this.uiSkin.yixingimg.width,this.uiSkin.partImg.height=this.uiSkin.yixingimg.height,"-1"==this.param.fid)return;this.uiSkin.originimg.visible=!0,this.uiSkin.originimg.skin=W.biggerPicUrl+this.param.fid+this.param.tailFix,this.uiSkin.backimg.visible="0"!=this.param.backFid&&""!=this.param.backFid,"0"!=this.param.backFid&&""!=this.param.backFid&&(this.uiSkin.backimg.skin=W.biggerPicUrl+this.param.backFid+this.param.tailFix),this.uiSkin.yixingimg.visible="0"!=this.param.yixingFid&&""!=this.param.yixingFid,"0"!=this.param.yixingFid&&""!=this.param.yixingFid&&(this.uiSkin.yixingimg.skin=W.biggerPicUrl+this.param.yixingFid+this.param.tailFix),this.uiSkin.partImg.visible="0"!=this.param.partWhiteFid&&""!=this.param.partWhiteFid,"0"!=this.param.partWhiteFid&&""!=this.param.partWhiteFid&&(this.uiSkin.partImg.skin=W.biggerPicUrl+this.param.partWhiteFid+this.param.tailFix)}},n.showMaterialPanel=function(){null==this.materialPanel&&(this.materialPanel=new Yh),this.removeProclistPanel(),this.uiSkin.operateArea.addChild(this.materialPanel)},n.removeMatlistPanel=function(){null!=this.materialPanel&&this.materialPanel.removeSelf()},n.showProcPanel=function(){this.removeMatlistPanel(),null==this.procListPanel&&(this.procListPanel=new yh),this.uiSkin.operateArea.addChild(this.procListPanel),k.instance.curSelectMat&&Ln.instance.event("SELECT_NEW_PROCESS",[k.instance.curSelectMat.procTreeList])},n.removeProclistPanel=function(){null!=this.procListPanel&&this.procListPanel.removeSelf()},n.initTechView=function(){if(null!=k.instance.curSelectMat){var t=this.matAndProceItemList[0];t.updateData(0,k.instance.curSelectMat);for(var i=1;i<this.matAndProceItemList.length;i++)this.matAndProceItemList[i].removeSelf();this.matAndProceItemList.splice(1,this.matAndProceItemList.length-1),this.starty=20,this.showProcPanel(),this.addProcessItem(2,null)}},n.addProcessItem=function(t,i){if(2==t&&null==i)var e=new Vl(2,null,"选择工艺");else e=new Vl(1,i);this.uiSkin.matProcContainer.addChild(e),e.width+this.matAndProceItemList[this.matAndProceItemList.length-1].x+this.matAndProceItemList[this.matAndProceItemList.length-1].width+this.processItemSpaceX>this.uiSkin.matProcContainer.width?(e.x=this.startx,this.starty+=e.height+this.processItemSpaceY,e.y=this.starty):(e.x=this.matAndProceItemList[this.matAndProceItemList.length-1].x+this.matAndProceItemList[this.matAndProceItemList.length-1].width+this.processItemSpaceX,e.y=this.starty),this.matAndProceItemList.push(e),this.updatePanelheight()},n.selectProcess=function(t){var i=this.matAndProceItemList[this.matAndProceItemList.length-1];null!=i&&(i.updateData(1,t),this.curSelectProcess=t,i.width+i.x>this.uiSkin.matProcContainer.width&&(i.x=this.startx,this.starty+=i.height+this.processItemSpaceY,i.y=this.starty),t.nextMatList.length>0&&this.addProcessItem(2,null),this.updatePanelheight())},n.onChooseProcess=function(t){if(t){null!=this.materialPanel.parent&&this.removeMatlistPanel(),null==this.procListPanel.parent&&this.uiSkin.operateArea.addChild(this.procListPanel),2==this.matAndProceItemList[this.matAndProceItemList.length-1].getType()&&(this.matAndProceItemList[this.matAndProceItemList.length-1].removeSelf(),this.matAndProceItemList.splice(this.matAndProceItemList.length-1,1));for(var i=1;i<this.matAndProceItemList.length;i++){var e=this.matAndProceItemList[i],n=e.getVo();if(null!=n&&t.nextMatList.indexOf(n)>=0){for(var s=i;s<this.matAndProceItemList.length;s++){var r=this.matAndProceItemList[s].getVo();null!=r&&(r.selected=!1),this.matAndProceItemList[s].removeSelf()}this.matAndProceItemList.splice(i,this.matAndProceItemList.length-i);break}}this.starty=this.matAndProceItemList[this.matAndProceItemList.length-1].y,this.updatePanelheight(),null!=t.parentMaterialVo?Ln.instance.event("SELECT_NEW_PROCESS",[t.parentMaterialVo.nextMatList]):k.instance.curSelectMat&&Ln.instance.event("SELECT_NEW_PROCESS",[k.instance.curSelectMat.procTreeList])}},n.updatePanelheight=function(){this.uiSkin.matProcContainer.height=this.starty+96+20,this.uiSkin.operateArea.y=this.uiSkin.matProcContainer.height,this.uiSkin.operateArea.height=this.uiSkin.rightbox.height-this.uiSkin.matProcContainer.height-20},n.onCancaleChooseAttach=function(){},n.onConfirmMatProcess=function(){if(null==k.instance.curSelectMat||""==k.instance.curSelectMat.getTechDes(!0))return E.showAlert("请选择一个工艺"),void 0;if(null!=this.curSelectProcess){var t=k.instance.curSelectMat.getAllSelectedTech(),i=k.instance.curSelectOrderItem;null==i&&(i=k.instance.batchChangeMatItems[0]);for(var e=0;e<t.length;e++)if(t[e].attachmentList.indexOf("SPFBdakou")>=0&&null!=i&&0==i.ordervo.holeList.length)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"非标打扣工艺未设置打孔信息，请重新设置"}),void 0;if(t.length>0&&t[t.length-1].is_mandatory&&t[t.length-1].nextMatList.length>0&&t[t.length-1].nextMatList[0].parentMaterialVo==t[t.length-1])return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"后置工艺必须选一个"}),void 0;for(var e=0;e<t.length;e++)if((t[e].attachmentList.indexOf("SPpeijian")>=0||t[e].attachmentList.indexOf("SPMat")>=0)&&(null==t[e].selectAttachVoList||0==t[e].selectAttachVoList.length))return E.showAlert("未选择配件"),void 0;var n=this.curSelectProcess.nextMatList;if(null!=n)for(var e=0;e<n.length;e++){if(n[e].attachmentList.indexOf("SPpj")>=0)return E.showAlert("当前有必选工艺，请选择"),void 0;if("3"==n[e].showType)return E.showAlert("当前有必选工艺，请选择"),void 0;if(n[e].parentMaterialVo.nextProcRequired)return E.showAlert("当前有必选工艺，请选择"),void 0}k.instance.curSelectMat.getProductDiscount(this.updatePicOrderProduct,this),E.instance.closeView("VIEW_SET_MATERIAL_PROCESS_PANEL")}},n.updatePicOrderProduct=function(){if(k.instance.curSelectOrderItem)k.instance.curSelectOrderItem.changeProduct(k.instance.curSelectMat);else if(k.instance.batchChangeMatItems&&k.instance.batchChangeMatItems.length>0)for(var t=0;t<k.instance.batchChangeMatItems.length;t++)k.instance.batchChangeMatItems[t].changeProduct(k.instance.curSelectMat);Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},n.showEffectPanel=function(){if(null==k.instance.curSelectMat)return E.showAlert("请先选择材料"),void 0;var t,i=new F;null!=k.instance.curSelectOrderItem?t=k.instance.curSelectOrderItem:null!=k.instance.batchChangeMatItems&&k.instance.batchChangeMatItems.length>0&&(t=k.instance.batchChangeMatItems[0]),k.instance.curSelectMat.prodName.indexOf("车贴")>=0?k.instance.curSelectMat.prodName.indexOf("白胶")>=0?i.matType=1:k.instance.curSelectMat.prodName.indexOf("黑胶")>=0?i.matType=4:k.instance.curSelectMat.prodName.indexOf("灰胶")>=0&&(i.matType=5):k.instance.curSelectMat.prodName.indexOf("磨砂")>=0?i.matType=3:k.instance.curSelectMat.prodName.indexOf("超透")>=0||k.instance.curSelectMat.prodName.indexOf("透明")>=0?i.matType=2:k.instance.curSelectMat.prodName.indexOf("双喷布")>=0&&(i.matType=6,i.backImageUrl=W.biggerPicUrl+t.ordervo.picinfo.fid+t.ordervo.picinfo.tailFix),i.imageUrl=W.biggerPicUrl+t.ordervo.picinfo.fid+t.ordervo.picinfo.tailFix,i.finalWidth=t.finalWidth,i.finalHeighth=t.finalHeight,i.imageType=".png"==t.ordervo.picinfo.tailFix?3:1;for(var e=k.instance.curSelectMat.getAllSelectedTech(),n=0;n<e.length;n++){var s=e[n];K.yiXingCutProcess(s.procCode)?i.yixingImageUrl=W.biggerPicUrl+t.ordervo.picinfo.yixingFid+".jpg":s.procName.indexOf("局部铺白")>=0?(i.partWhiteImageUrl=W.biggerPicUrl+t.ordervo.picinfo.partWhiteFid+".jpg",i.whiteFillType=2):s.procName.indexOf("满铺白")>=0?i.whiteFillType=1:s.procName.indexOf("有色铺白")>=0?i.whiteFillType=3:s.procName.indexOf("全彩")>=0?i.colorType=1:s.procName.indexOf("彩白彩")>=0?i.colorType=3:s.procName.indexOf("彩白")>=0?i.colorType=2:s.procName.indexOf("白彩")>=0?i.colorType=4:s.procName.indexOf("纯白")>=0?i.colorType=5:s.procName.indexOf("镜像")>=0&&(i.mirrorImage=-1)}E.instance.openView("EFFECT_PREVIEW_PANEL",!1,i)},n.closeView=function(){E.instance.closeView("VIEW_SET_MATERIAL_PROCESS_PANEL")},n.onDestroy=function(){Ln.instance.off("SHOW_SELECT_TECH",this,this.initTechView),Ln.instance.off("CANCEL_CHOOSE_ATTACH",this,this.onCancaleChooseAttach),Ln.instance.off("SHOW_MATERIAL_LIST_PANEL",this,this.showMaterialPanel),Ln.instance.off("SELECT_PROCESS",this,this.selectProcess),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("CHOOSE_PROCESS_ITEM",this,this.onChooseProcess)},i}(Dn),ur=function(t){function i(){this.uiSkin=null,this.curmoney=0,i.__super.call(this)}s(i,"script.picUpload.BuyStorageController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.paybtn.on("click",this,this.onBuyStorage),this.uiSkin.storagetype.selectHandler=new c(this,this.onSelectStorage),this.uiSkin.storagetype.selectedIndex=g.instance.hasBuySorage>0?(g.instance.hasBuySorage-50)/10:0,g.instance.hasBuySorage>0?(this.uiSkin.curStorageTxt.text=g.instance.hasBuySorage+"G",this.uiSkin.outtime.text=T.formatFullDateTime(new Date(g.instance.storageExpiredDate))):(this.uiSkin.curStorageTxt.text="未购买",this.uiSkin.outtimebox.visible=!1),this.updateMoney(),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onSelectStorage=function(t){var i=this,n=50+10*t;n<g.instance.hasBuySorage&&(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"不能降低存储空间"}),e.timer.frameOnce(2,this,function(){i.uiSkin.storagetype.selectedIndex=(g.instance.hasBuySorage-50)/10})),this.updateMoney()},n.updateMoney=function(){this.curmoney=0;var t=50+10*this.uiSkin.storagetype.selectedIndex;W.instance.Request(W.httpUrl+"fs/getStoragePrice?size="+t,this,this.onGetPriceBack,null,null)},n.onGetPriceBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.uiSkin.paymoney.text=i.data+"元",this.curmoney=parseInt(i.data))}},n.onBuyStorage=function(){if(this.uiSkin.storagetype.selectedIndex>=0&&this.curmoney>0){E.instance.closeView("VIEW_BUY_STORAGE_PANEL");var t=50+10*this.uiSkin.storagetype.selectedIndex;E.instance.openView("VIEW_SELECT_PAYTYPE_PANEL",!1,{amount:this.curmoney,size:t})}},n.onBuyBack=function(){},n.onCloseView=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("VIEW_BUY_STORAGE_PANEL")},i}(Dn),dr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"utils.PicturePopUpController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainview.scaleX=.2,this.uiSkin.mainview.scaleY=.2,Ni.to(this.uiSkin.mainview,{scaleX:1,scaleY:1},300,dn.backOut),this.uiSkin.closebtn.on("click",this,this.onCloseScene),this.uiSkin.msgtxt.text=this.param.msg,this.uiSkin.tipimg.skin=this.param.picurl,null!=this.param.ok&&(this.uiSkin.okbtn.label=this.param.ok),null!=this.param.cancel&&(this.uiSkin.cancelbtn.label=this.param.cancel),this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.mainpanel.height=Ti.height,this.uiSkin.mainpanel.width=Ti.width,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.okbtn.on("click",this,this.onConfirmHandler),this.uiSkin.cancelbtn.on("click",this,this.onCancelHandler)
},e.onResizeBrower=function(){this.uiSkin.mainpanel.height=Ti.height,this.uiSkin.mainpanel.width=Ti.width},e.onConfirmHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!0),this.onCloseScene()},e.onCancelHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!1),this.onCloseScene()},e.onCloseScene=function(){E.instance.closeView("VIEW_POPUPDIALOG_WITH_PICTURE"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),_r=function(t){function i(){this.uiSkin=null,this.curpage=1,this.totalPage=1,this.dateInput=null,this.dateInput2=null,this.dateInputCharge=null,this.curCustomer=null,this.picList=null,this.base64Arr=null,this.excelData=[],this.pageSize=30,i.__super.call(this)}s(i,"script.usercenter.CustomerTransactController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.customListPanel.visible=!1,this.uiSkin.curCustomName.editable=!1,this.uiSkin.customerName.editable=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),this.uiSkin.addChargePanel.visible=!1,this.uiSkin.addChargeBtn.on("click",this,function(){return null==t.curCustomer?(E.showAlert("请先选择客户"),void 0):(t.uiSkin.addChargePanel.visible=!0,t.uiSkin.customerName.text=t.curCustomer.customerName,t.onHideInputDate(),t.dateInputCharge.hidden=!1,void 0)}),this.uiSkin.writeoffBtn.on("click",this,this.onWriteOffOrder),this.uiSkin.closeCharge.on("click",this,function(){t.uiSkin.addChargePanel.visible=!1,t.dateInputCharge.hidden=!0,t.onshowInputDate(null)}),this.uiSkin.confirmAdd.on("click",this,this.confirmAddCharge),this.uiSkin.commentInput.maxChars=20,this.uiSkin.orderList.itemRender=fc,this.uiSkin.orderList.repeatX=1,this.uiSkin.orderList.spaceY=2,this.uiSkin.orderList.renderHandler=new c(this,this.updateOrderList),this.uiSkin.orderList.selectEnable=!1,this.uiSkin.orderList.array=[],this.uiSkin.orderList.mouseThrough=!0,e.timer.frameLoop(1,this,this.updateDateInputPos);new Date;this.uiSkin.lastpage.on("click",this,this.onLastPage),this.uiSkin.nextpage.on("click",this,this.onNextPage),this.uiSkin.paytype.selectedIndex=0,this.uiSkin.paytype.on("change",this,this.queryOrderList),this.uiSkin.orderList.on("mousedown",this,this.onMouseDwons),this.uiSkin.orderList.on("mouseup",this,this.onMouseUpHandler),this.uiSkin.btnsearch.on("click",this,this.queryOrderList),Ln.instance.on("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.on("OPEN_PANEL_VIEW",this,this.onHideInputDate),this.uiSkin.orderList.on("mouseover",this,this.pauseParentScroll),this.uiSkin.orderList.on("mouseout",this,this.resumeParentScroll),e.stage.on("mouseup",this,this.onMouseUpHandler),Ln.instance.on("SELECT_CUSTOMER",this,this.onSelectCustomer),Ln.instance.on("DELETE_CUSTOMER_TRANSACTION",this,this.getOrderListAgain),Ln.instance.on("CUSTOMER_LIST_INIT_SUCESS",this,this.onCustomerlistInitSucess),Ln.instance.on("UPDATE_CUSTOMER_BALANCE",this,this.updateCurCustomer),this.initDateSelector()},n.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onshowInputDate=function(){"VIEW_FIRST_PAGE"!=E.instance.getTopViewName()||this.uiSkin.addChargePanel.visible||(this.dateInput.hidden=!1,this.dateInput2.hidden=!1),this.uiSkin.addChargePanel.visible&&(this.dateInputCharge.hidden=!1)},n.onHideInputDate=function(){null!=this.dateInput&&(this.dateInput.hidden=!0,this.dateInput2.hidden=!0)},n.initDateSelector=function(){var t=this,i=new Date((new Date).getTime()-864e5),e=new Date;this.dateInput=Ti.document.createElement("input"),this.dateInput.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInput.style.width=222,this.dateInput.style.height=44,this.dateInput.type="date",this.dateInput.style.position="absolute",this.dateInput.style.zIndex=999,this.dateInput.style.color="#003dc6",this.dateInput.style.border="2px solid #003dc6",this.dateInput.style.borderRadius="5px",this.dateInput.value=T.formatFullDateTime(i,!1),Ti.document.body.appendChild(this.dateInput),this.dateInput.onchange=function(){if(""!=t.dateInput.value){var i=new Date(t.dateInput.value),e=new Date(t.dateInput2.value);e.getTime()-i.getTime()>2592e6?(e=new Date(i.getTime()+2592e6),t.dateInput2.value=T.formatFullDateTime(e,!1)):e.getTime()-i.getTime()<0&&(t.dateInput2.value=T.formatFullDateTime(i,!1))}},this.dateInput2=Ti.document.createElement("input"),this.dateInput2.style="filter:alpha(opacity=100);opacity:100;left:980px;top:240",this.dateInput2.style.width=222,this.dateInput2.style.height=44,this.dateInput2.style.color="#003dc6",this.dateInput2.style.border="2px solid #003dc6",this.dateInput2.style.borderRadius="5px",this.dateInput2.type="date",this.dateInput2.style.position="absolute",this.dateInput2.style.zIndex=999,Ti.document.body.appendChild(this.dateInput2),this.dateInput2.value=T.formatFullDateTime(e,!1),this.dateInput2.onchange=function(){if(""!=t.dateInput2.value){var i=new Date(t.dateInput2.value),e=new Date(t.dateInput.value);i.getTime()-e.getTime()>2592e6?(e=new Date(i.getTime()-2592e6),t.dateInput.value=T.formatFullDateTime(e,!1)):i.getTime()-e.getTime()<0&&(t.dateInput.value=T.formatFullDateTime(i,!1))}},this.dateInputCharge=Ti.document.createElement("input"),this.dateInputCharge.style="filter:alpha(opacity=100);opacity:100;left:795px;top:240",this.dateInputCharge.style.width=322,this.dateInputCharge.style.height=44,this.dateInputCharge.type="datetime-local",this.dateInputCharge.style.position="absolute",this.dateInputCharge.style.zIndex=999,this.dateInputCharge.style.color="#003dc6",this.dateInputCharge.style.border="2px solid #003dc6",this.dateInputCharge.style.borderRadius="5px",this.dateInputCharge.value=T.formatFullDateTime(i,!0).replace(" ","T"),Ti.document.body.appendChild(this.dateInputCharge),this.dateInputCharge.hidden=!0},n.updateDateInputPos=function(){if(null!=this.dateInput){var t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.ordertime.x,this.uiSkin.ordertime.y),!0),i=Ti.clientWidth/1920;this.dateInput.style.width=222*i,this.dateInput.style.height=44*i,this.dateInput.style.fontSize=24*i,this.dateInput2.style.fontSize=24*i,this.dateInput2.style.width=222*i,this.dateInput2.style.height=44*i,this.dateInput.style.top=(t.y-121)*i+"px",this.dateInput.style.left=(t.x+65)*i+"px",this.dateInput2.style.top=(t.y-121)*i+"px",this.dateInput2.style.left=(t.x+330)*i+"px",t=this.uiSkin.ordertime.localToGlobal(new Oe(this.uiSkin.getmoneyDate.x,this.uiSkin.getmoneyDate.y),!0),this.dateInputCharge.style.width=330*i,this.dateInputCharge.style.height=44*i,this.dateInputCharge.style.fontSize=24*i,this.dateInputCharge.style.fontSize=24*i,this.dateInputCharge.style.top=(t.y-20)*i+"px",this.dateInputCharge.style.left=(t.x+307)*i+"px"}},n.onLastPage=function(){this.curpage>1&&(this.curpage--,this.getOrderListAgain())},n.onNextPage=function(){this.curpage<this.totalPage&&(this.curpage++,this.getOrderListAgain())},n.queryOrderList=function(){this.curpage=1,this.getOrderListAgain()},n.onCustomerlistInitSucess=function(t){null!=t&&null==this.curCustomer&&(this.curCustomer=t,this.uiSkin.curCustomName.text=t.customerName+"("+m.PAY_TYPE_NAME[t.defaultPayment-1]+")",this.uiSkin.balanceTxt.text="客户余额:"+this.curCustomer.balanceMoney.toFixed(2)+"元",this.getOrderListAgain())},n.onSelectCustomer=function(t){(null==this.curCustomer||this.curCustomer.id!=t.id)&&(this.curCustomer=t,this.uiSkin.curCustomName.text=t.customerName+"("+m.PAY_TYPE_NAME[t.defaultPayment-1]+")",this.uiSkin.balanceTxt.text="客户余额:"+this.curCustomer.balanceMoney.toFixed(2)+"元",this.getOrderListAgain())},n.getOrderListAgain=function(){var t="beginDate="+this.dateInput.value+" 00:00:00&endDate="+this.dateInput2.value+" 23:59:59&transactionType="+this.uiSkin.paytype.selectedIndex+"&pageNo="+this.curpage+"&pageSize="+this.pageSize;null!=this.curCustomer&&(t+="&customerId="+this.curCustomer.id),W.instance.Request(W.httpUrl+"org/customer/transaction/paging?"+t,this,this.onGetOrderListBack,null,null)},n.onMouseDwons=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},n.onMouseUpHandler=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},n.onGetOrderListBack=function(t){if(!this.destroyed&&null!=t&&""!=t){var i=JSON.parse(t);if("0"==i.code){var e=parseInt(i.data.totalCount);this.totalPage=Math.ceil(e/this.pageSize),this.totalPage<1&&(this.totalPage=1),this.uiSkin.pagenum.text=this.curpage+"/"+this.totalPage,this.uiSkin.payMoney.text=i.data.receivableAccount,this.uiSkin.totalSellMoney.text=i.data.totalReceivableAccount;for(var n=[],s=0;s<i.data.customerTransactions.length;s++){var r=new w(i.data.customerTransactions[s]);n.push(r)}this.uiSkin.orderList.array=n}else E.showAlert("获取流水失败")}},n.updateOrderList=function(t){t.setData(t.dataSource)},n.confirmAddCharge=function(){if(""==this.uiSkin.transactionNum.text)return E.showAlert("请填写流水号"),this.dateInputCharge.hidden=!0,void 0;if(""==this.uiSkin.getMoney.text)return E.showAlert("请填写收款金额"),this.dateInputCharge.hidden=!0,void 0;var t={};t.customerId=this.curCustomer.id,t.amount=this.uiSkin.getMoney.text,t.serialNo=this.uiSkin.transactionNum.text,t.channel=this.uiSkin.channel.selectedLabel,t.comment=this.uiSkin.commentInput.text,t.collectTime=this.dateInputCharge.value.replace("T"," "),W.instance.Request(W.httpUrl+"org/collection/add?",this,this.addcollectback,JSON.stringify(t),"post")},n.addcollectback=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(this.getOrderListAgain(),this.uiSkin.addChargePanel.visible=!1,this.dateInputCharge.hidden=!0,this.onshowInputDate(null))}},n.onWriteOffOrder=function(){return null==this.curCustomer?(E.showAlert("请先选择客户"),void 0):(E.instance.openView("WRITE_OFF_ORDER_PANEL",!1,this.curCustomer),void 0)},n.updateCurCustomer=function(t){this.curCustomer.id==t.id&&(this.curCustomer.balance=t.balance,this.curCustomer.balanceMoney=parseFloat(this.curCustomer.balance),this.uiSkin.balanceTxt.text="客户余额:"+this.curCustomer.balanceMoney.toFixed(2)+"元")},n.onDestroy=function(){e.stage.off("mouseup",this,this.onMouseUpHandler),e.timer.clearAll(this),null!=this.dateInput&&(Ti.document.body.removeChild(this.dateInput),Ti.document.body.removeChild(this.dateInput2),Ti.document.body.removeChild(this.dateInputCharge)),Ln.instance.off("DELETE_ORDER_BACK",this,this.getOrderListAgain),Ln.instance.off("COMMON_CLOSE_PANEL_VIEW",this,this.onshowInputDate),Ln.instance.off("OPEN_PANEL_VIEW",this,this.onHideInputDate),Ln.instance.off("SELECT_CUSTOMER",this,this.onSelectCustomer),Ln.instance.off("DELETE_CUSTOMER_TRANSACTION",this,this.getOrderListAgain),Ln.instance.off("CUSTOMER_LIST_INIT_SUCESS",this,this.onCustomerlistInitSucess),Ln.instance.off("UPDATE_CUSTOMER_BALANCE",this,this.updateCurCustomer)},i}(Dn),pr=function(t){function i(){this.uiSkin=null,this.tabBtns=[],this.curTabIndex=-1,this.hasSelectAddress=null,this.hasSelectGroup=null,this.curPage=1,this.totalPage=1,this.addressPageSize=20,this.province=null,this.zoneid=null,this.areaid=null,this.grpCurPage=1,this.grpTotalPage=1,this.hasinit=!1,this.pageSize=50,this.param=null,this.MAX_NUM=100,this.curCustomer=null,i.__super.call(this)}s(i,"script.order.SelectPackAddressController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.curCustomer=this.param,(null==this.curCustomer||"0"==this.curCustomer.id)&&(this.uiSkin.groupTab.visible=!1),this.tabBtns.push(this.uiSkin.addressTab),this.tabBtns.push(this.uiSkin.groupTab),this.uiSkin.addressTab.on("click",this,this.clickTabBtn,[0]),this.uiSkin.groupTab.on("click",this,this.clickTabBtn,[1]),this.uiSkin.addressList.itemRender=Rc,this.uiSkin.addressList.repeatX=1,this.uiSkin.addressList.spaceY=0,this.uiSkin.addressList.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addressList.selectEnable=!1,this.hasSelectAddress={};var t=[];this.uiSkin.addressList.array=t,this.uiSkin.selectall.on("change",this,this.changeSelectedAll),this.uiSkin.searchInput.text="",this.uiSkin.searchInput.maxChars=8,this.uiSkin.selectNum.text="0",this.uiSkin.provList.itemRender=Oc,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.provList.array=[{id:0,areaName:"空"}],this.uiSkin.cityList.itemRender=Oc,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.cityList.array=[{id:0,areaName:"空"}],this.uiSkin.areaList.itemRender=Oc,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.areaList.array=[{id:0,areaName:"空"}],this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.on("click",this,this.hideAddressPanel),this.uiSkin.prePage.on("click",this,this.onPrevPage),this.uiSkin.nextPage.on("click",this,this.onNextPage),this.uiSkin.searchInput.maxChars=20,this.uiSkin.searchbtn.on("click",this,this.onSearchAddress),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initAddr,null,null),this.hasSelectGroup={},this.uiSkin.groupList.itemRender=uc,this.uiSkin.groupList.repeatX=6,this.uiSkin.groupList.spaceY=20,this.uiSkin.groupList.spaceX=5,this.uiSkin.groupList.renderHandler=new c(this,this.updateGroupList),this.uiSkin.groupList.selectEnable=!1,t=[],this.uiSkin.searchGroupInput.text="",this.uiSkin.groupList.array=t,this.uiSkin.searchGroupInput.maxChars=20,this.uiSkin.pageNum.text="1/1",this.uiSkin.gpPrevPage.on("click",this,this.onGpPrevPage),this.uiSkin.gpNextPage.on("click",this,this.onGpNextPage),this.uiSkin.searchGrpBtn.on("click",this,this.onSearchGroup),this.uiSkin.closebtn.on("click",this,this.closeView),this.uiSkin.okbtn.on("click",this,this.onOkBtn),this.clickTabBtn(0),this.updateList(),Ln.instance.on("CHANGE_ADDRESS_SELECTED_STATE",this,this.addressSelected),Ln.instance.on("CHANGE_ADDRESS_GROUP_SELECTED_STATE",this,this.addressGroupSelected)},e.clickTabBtn=function(t){this.curTabIndex!=t&&(this.curTabIndex>=0&&(this.tabBtns[this.curTabIndex].selected=!1),this.tabBtns[t].selected=!0,this.curTabIndex=t,this.uiSkin.addressbox.visible=0==t,this.uiSkin.groupBox.visible=1==t,1==t&&0==this.hasinit&&(this.hasinit=!0,this.refreshGroupList()))},e.updateAddressList=function(t){t.setData(t.dataSource)},e.changeSelectedAll=function(){for(var t=0;t<this.uiSkin.addressList.array.length;t++)this.uiSkin.addressList.array[t].selected=this.uiSkin.selectall.selected,this.uiSkin.addressList.array[t].selected&&!this.hasSelectAddress.hasOwnProperty(this.uiSkin.addressList.array[t].id)?this.hasSelectAddress[this.uiSkin.addressList.array[t].id]=this.uiSkin.addressList.array[t]:!this.uiSkin.addressList.array[t].selected&&this.hasSelectAddress.hasOwnProperty(this.uiSkin.addressList.array[t].id)&&delete this.hasSelectAddress[this.uiSkin.addressList.array[t].id];for(t=0;t<this.uiSkin.addressList.cells.length;t++)t<this.uiSkin.addressList.array.length&&this.uiSkin.addressList.cells[t].changeSelectState(this.uiSkin.selectall.selected);this.refreshNum()},e.addressSelected=function(t){t.selected&&!this.hasSelectAddress.hasOwnProperty(t.id)&&null!=t?this.hasSelectAddress[t.id]=t:!t.selected&&this.hasSelectAddress.hasOwnProperty(t.id)&&delete this.hasSelectAddress[t.id],this.refreshNum()},e.refreshNum=function(){var t=0;for(var i in this.hasSelectAddress)t++;for(var i in this.hasSelectGroup)t+=this.hasSelectGroup[i].count;this.uiSkin.selectNum.text=t+""},e.updateCityList=function(t){t.setData(t.dataSource)},e.initAddr=function(t){var i=JSON.parse(t);i.data.unshift({id:0,areaName:"空"}),this.uiSkin.provList.array=i.data},e.selectProvince=function(t){var i=this;return this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,this.uiSkin.cityList.selectedIndex=0,this.selectCity(0),0==this.province.id?(this.uiSkin.cityList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.province.id,this,function(t){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh()},null,null),void 0)},e.selectCity=function(t){var i=this;return this.uiSkin.citybox.visible=!1,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName,this.uiSkin.areaList.selectedIndex=0,this.selectArea(0),0==this.uiSkin.cityList.array[t].id?(this.uiSkin.areaList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.cityList.array[t].id,this,function(t){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh()},null,null),void 0)},e.selectArea=function(t){-1!=t&&(this.areaid=this.uiSkin.areaList.array[t].id,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1)},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,t.stopPropagation()},e.onPrevPage=function(){this.curPage<=1||(this.curPage--,this.updateList())},e.onNextPage=function(){this.curPage>=this.totalPage||(this.curPage++,this.updateList())},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1)},e.onSearchAddress=function(){this.curPage=1,this.updateList()},e.updateList=function(){var t="";this.uiSkin.provList.selectedIndex>0&&(t+=this.uiSkin.province.text,this.uiSkin.cityList.selectedIndex>0&&(t+=" "+this.uiSkin.citytxt.text),this.uiSkin.areaList.selectedIndex>0&&(t+=" "+this.uiSkin.areatxt.text)),null==this.curCustomer||"0"==this.curCustomer.id?0==g.instance.passedAddress.length?W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null):this.uiSkin.addressList.array=g.instance.passedAddress:this.updateCustomeList()},e.updateCustomeList=function(){var t="";this.uiSkin.areaList.selectedIndex>0?t=this.uiSkin.areaList.array[this.uiSkin.areaList.selectedIndex].id:this.uiSkin.cityList.selectedIndex>0?t=this.uiSkin.cityList.array[this.uiSkin.cityList.selectedIndex].id:this.uiSkin.provList.selectedIndex>0&&(t=this.uiSkin.provList.array[this.uiSkin.provList.selectedIndex].id);var i="customerId="+this.curCustomer.id+"&pageNo="+this.curPage+"&pageSize="+this.addressPageSize+"&region="+t+"&keyword="+this.uiSkin.searchInput.text;W.instance.Request(W.httpUrl+W.listCustomerAddress+i,this,this.getCustomerAddressBack,null,null,null)},e.getCustomerAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new f(i.data.expressList[n])),e[n].customerId=this.curCustomer.id,e[n].customerName=this.curCustomer.customerName,e[n].defaultPayType=this.curCustomer.defaultPayment;this.totalPage=Math.ceil(i.data.totalCount/this.pageSize),this.totalPage<1&&(this.totalPage=1),this.uiSkin.pageNum.text=this.curPage+"/"+this.totalPage,this.uiSkin.addressList.array=e}}},e.getMyAddressBack=function(t){var i=JSON.parse(t);if(0==i.status){for(var e=[],n=0;n<i.data.length;n++)e.push(new Tn(i.data[n])),e[n].selected=this.hasSelectAddress.hasOwnProperty(e[n].id);this.uiSkin.addressList.array=e,this.totalPage=i.totalpage,this.totalPage<1&&(this.totalPage=1),this.uiSkin.pageNum.text=this.curPage+"/"+this.totalPage}},e.updateGroupList=function(t){t.setData(t.dataSource)},e.onSearchGroup=function(){this.grpCurPage=1,this.refreshGroupList()},e.addressGroupSelected=function(t,i){i.selected&&!this.hasSelectGroup.hasOwnProperty(i.groupId)&&null!=i?this.hasSelectGroup[i.groupId]=i:!i.selected&&this.hasSelectGroup.hasOwnProperty(i.groupId)&&delete this.hasSelectGroup[i.groupId],this.refreshNum()},e.onCloseView=function(t){"VIEW_ADDRESS_GROUP_MGR_PANEL"==t&&this.refreshGroupList()},e.refreshGroupList=function(){var t="customerId="+this.curCustomer.id+"&name="+this.uiSkin.searchGroupInput.text+"&pageNo="+this.grpCurPage+"&pageSize="+this.pageSize;W.instance.Request(W.httpUrl+"org/express/group/paging?"+t,this,this.listGroupBack,null,null)},e.listGroupBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressGroupList.length;n++)e.push(new B(i.data.expressGroupList[n]));this.uiSkin.groupList.array=e,this.grpTotalPage=Math.ceil(i.data.totalCount/this.pageSize),this.grpTotalPage<1&&(this.grpTotalPage=1),this.uiSkin.grPageNum.text=this.grpCurPage+"/"+this.grpTotalPage}}},e.onGpPrevPage=function(){this.grpCurPage<=1||(this.grpCurPage--,this.refreshGroupList())},e.onGpNextPage=function(){this.grpCurPage>=this.grpTotalPage||(this.grpCurPage++,this.refreshGroupList())},e.onOkBtn=function(){var t=[];for(var i in this.hasSelectGroup)t.push(i);var e={expressGroupIds:t};t.length>0?W.instance.Request(W.httpUrl+"org/express/group/listExpress?",this,this.getGroupAddressBack,JSON.stringify(e),"post"):this.sendAddressToPackage([])},e.getGroupAddressBack=function(t){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.length;n++)e.push(new Tn(i.data[n]));this.sendAddressToPackage(e)}},e.sendAddressToPackage=function(t){var i=[];for(var e in this.hasSelectAddress)i.push(this.hasSelectAddress[e]);return t=t.concat(i),k.instance.packageList.length+t.length>this.MAX_NUM?(E.showAlert("一次下单最多添加"+this.MAX_NUM+"个包裹，当前包裹数量为"+(k.instance.packageList.length+t.length)+"个"),void 0):(Ln.instance.event("SELECT_PACK_ADDRESS_OK",[t]),this.closeView(),void 0)},e.closeView=function(){E.instance.closeView("VIEW_SELECT_PACK_ADDRESS_PANEL")},e.onDestroy=function(){Ln.instance.off("CHANGE_ADDRESS_SELECTED_STATE",this,this.addressSelected),Ln.instance.off("CHANGE_ADDRESS_GROUP_SELECTED_STATE",this,this.addressGroupSelected)},i}(Dn),fr=function(t){function i(){this.prodCustomerVo=null,this.maxWidth=500,this.downPos=null,this.uiSkin=null,this.customerPicInfo=null,i.__super.call(this)}s(i,"script.prodCustomer.ProdEditController",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.customImg.on("mousedown",this,this.startDragImg),this.uiSkin.customImg.on("mouseup",this,this.stopDragImg),this.uiSkin.customImg.on("mouseout",this,function(){}),this.uiSkin.customImg.on("mouseover",this,function(){t.uiSkin.dragBox.visible=!0,t.uiSkin.rotateBox.visible=!0}),this.uiSkin.dragBox.on("mouseover",this,function(){tn.cursor="nw-resize"}),this.uiSkin.dragBox.on("mouseout",this,function(){tn.cursor="auto"}),this.uiSkin.rotateBox.on("mouseover",this,function(){tn.cursor="nw-resize"}),this.uiSkin.rotateBox.on("mouseout",this,function(){tn.cursor="auto"}),this.downPos=new Oe,this.uiSkin.dragBox.on("mousedown",this,this.onStartResize),this.uiSkin.dragBox.on("mouseup",this,this.onStopResize),this.uiSkin.rotateBox.on("mousedown",this,this.onStartRotate),this.uiSkin.rotateBox.on("mouseup",this,this.onStopRotate),this.uiSkin.on("mouseup",this,this.onStopRotate),this.followFrame(),this.uiSkin.chooseImg.on("click",this,this.showSelectImg),this.uiSkin.resetBtn.on("click",this,this.resetCustomerImg),this.uiSkin.on("click",this,this.hideFrame)},n.setData=function(t){this.prodCustomerVo=t,this.prodCustomerVo.prodWidth>this.prodCustomerVo.prodHeight?(this.uiSkin.prodImg.width=this.maxWidth,this.uiSkin.prodImg.height=this.maxWidth/this.prodCustomerVo.prodWidth*this.prodCustomerVo.prodHeight,this.uiSkin.maskimg.width=this.maxWidth,this.uiSkin.maskimg.height=this.maxWidth/this.prodCustomerVo.prodWidth*this.prodCustomerVo.prodHeight):(this.uiSkin.prodImg.height=this.maxWidth,this.uiSkin.prodImg.width=this.maxWidth/this.prodCustomerVo.prodHeight*this.prodCustomerVo.prodWidth,this.uiSkin.maskimg.height=this.maxWidth,this.uiSkin.maskimg.width=this.maxWidth/this.prodCustomerVo.prodHeight*this.prodCustomerVo.prodWidth),this.uiSkin.prodImg.skin=this.prodCustomerVo.prodImg,this.uiSkin.maskimg.skin=this.prodCustomerVo.maskImg},n.setCustomerImg=function(t){t&&(this.customerPicInfo=t,this.uiSkin.customImg.skin=W.biggerPicUrl+t.fid+".jpg",t.picWidth>t.picHeight?(this.uiSkin.customImg.width=this.maxWidth,this.uiSkin.customImg.height=this.maxWidth/t.picWidth*t.picHeight):(this.uiSkin.customImg.height=this.maxWidth,this.uiSkin.customImg.width=this.maxWidth/t.picHeight*t.picWidth))},n.showSelectImg=function(){E.instance.openView("VIEW_SELECT_PIC_TO_ORDER",!1,{caller:this,callback:this.setCustomerImg,customer:!0})},n.resetCustomerImg=function(){this.customerPicInfo&&(this.customerPicInfo.picWidth>this.customerPicInfo.picHeight?(this.uiSkin.customImg.width=this.maxWidth,this.uiSkin.customImg.height=this.maxWidth/this.customerPicInfo.picWidth*this.customerPicInfo.picHeight):(this.uiSkin.customImg.height=this.maxWidth,this.uiSkin.customImg.width=this.maxWidth/this.customerPicInfo.picHeight*this.customerPicInfo.picWidth),this.uiSkin.customImg.x=this.maxWidth/2,this.uiSkin.customImg.y=this.maxWidth/2,this.uiSkin.customImg.rotation=0,this.followFrame())},n.hideFrame=function(t){t.target!=this.uiSkin.imgframe&&t.target!=this.uiSkin.customImg&&t.target!=this.uiSkin.dragBox&&t.target!=this.uiSkin.rotateBox&&(this.uiSkin.imgframe.visible=!1,this.uiSkin.dragBox.visible=!1,this.uiSkin.rotateBox.visible=!1)},n.startDragImg=function(t){this.uiSkin.imgframe.visible=!0,e.timer.frameLoop(1,this,this.followFrame),this.uiSkin.customImg.startDrag(new on(0,0,500,500)),t.stopPropagation()},n.stopDragImg=function(){this.uiSkin.customImg.stopDrag(),e.timer.clear(this,this.followFrame)},n.followFrame=function(){this.uiSkin.imgframe.width=this.uiSkin.customImg.width,this.uiSkin.imgframe.height=this.uiSkin.customImg.height,this.uiSkin.imgframe.x=this.uiSkin.customImg.x,this.uiSkin.imgframe.y=this.uiSkin.customImg.y,this.uiSkin.imgframe.rotation=this.uiSkin.customImg.rotation,this.uiSkin.dragBox.x=this.uiSkin.customImg.x-this.uiSkin.customImg.width/2-5,this.uiSkin.dragBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2-5,this.uiSkin.rotateBox.x=this.uiSkin.customImg.x+this.uiSkin.customImg.height/2*Math.sin(this.uiSkin.customImg.rotation/180*Math.PI),this.uiSkin.rotateBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2*Math.cos(this.uiSkin.customImg.rotation/180*Math.PI),this.uiSkin.rotateBox.rotation=this.uiSkin.customImg.rotation},n.onStartResize=function(t){t.stopPropagation(),this.uiSkin.dragBox.startDrag(),this.downPos.x=this.uiSkin.dragBox.x,this.downPos.y=this.uiSkin.dragBox.y,e.timer.frameLoop(1,this,this.onUpdateSize)},n.onUpdateSize=function(){var t=2*(this.downPos.x-this.uiSkin.dragBox.x),i=2*(this.downPos.y-this.uiSkin.dragBox.y);return this.uiSkin.customImg.width+t<10?(this.uiSkin.dragBox.x=this.uiSkin.customImg.width-this.uiSkin.dragBox.width/2,this.uiSkin.dragBox.y=this.uiSkin.customImg.height-this.uiSkin.dragBox.width/2,this.uiSkin.dragBox.stopDrag(),e.timer.clear(this,this.onUpdateSize),void 0):this.uiSkin.customImg.height+i<10?(this.uiSkin.dragBox.x=this.uiSkin.customImg.width-this.uiSkin.dragBox.width/2,this.uiSkin.dragBox.y=this.uiSkin.customImg.height-this.uiSkin.dragBox.width/2,this.uiSkin.dragBox.stopDrag(),e.timer.clear(this,this.onUpdateSize),void 0):(this.uiSkin.customImg.width=this.uiSkin.customImg.width+t>=10?this.uiSkin.customImg.width+t:10,this.uiSkin.customImg.height=this.uiSkin.customImg.height+i>=10?this.uiSkin.customImg.height+i:10,this.uiSkin.dragBox.x=this.uiSkin.customImg.x-this.uiSkin.customImg.width/2-5,this.uiSkin.dragBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2-5,this.uiSkin.imgframe.width=this.uiSkin.customImg.width,this.uiSkin.imgframe.height=this.uiSkin.customImg.height,this.uiSkin.imgframe.x=this.uiSkin.customImg.x,this.uiSkin.imgframe.y=this.uiSkin.customImg.y,this.uiSkin.rotateBox.x=this.uiSkin.customImg.x+this.uiSkin.customImg.height/2*Math.sin(this.uiSkin.customImg.rotation/180*Math.PI),this.uiSkin.rotateBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2*Math.cos(this.uiSkin.customImg.rotation/180*Math.PI),this.downPos.x=this.uiSkin.dragBox.x,this.downPos.y=this.uiSkin.dragBox.y,void 0)},n.onStopResize=function(t){t.stopPropagation(),this.uiSkin.dragBox.stopDrag(),e.timer.clear(this,this.onUpdateSize)},n.onStartRotate=function(t){t.stopPropagation(),this.uiSkin.rotateBox.startDrag(),this.downPos.x=this.uiSkin.rotateBox.x,this.downPos.y=this.uiSkin.rotateBox.y,e.timer.frameLoop(1,this,this.onUpdateRotateion)},n.onUpdateRotateion=function(){var t=new Oe(e.stage.mouseX,e.stage.mouseY),i=this.uiSkin.globalToLocal(t),n=Math.atan2(this.uiSkin.customImg.y-i.y,this.uiSkin.customImg.x-i.x);console.log("locapt:"+i.x+","+i.y),console.log("angle:"+n),this.uiSkin.customImg.rotation=n/Math.PI*180-90,this.uiSkin.imgframe.rotation=this.uiSkin.customImg.rotation,this.uiSkin.dragBox.x=this.uiSkin.customImg.x-this.uiSkin.customImg.width/2-5,this.uiSkin.dragBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2-5,this.uiSkin.rotateBox.x=this.uiSkin.customImg.x+this.uiSkin.customImg.height/2*Math.sin(this.uiSkin.customImg.rotation/180*Math.PI),this.uiSkin.rotateBox.y=this.uiSkin.customImg.y-this.uiSkin.customImg.height/2*Math.cos(this.uiSkin.customImg.rotation/180*Math.PI),this.uiSkin.rotateBox.rotation=this.uiSkin.customImg.rotation},n.onStopRotate=function(t){t.stopPropagation(),this.uiSkin.rotateBox.stopDrag(),e.timer.clear(this,this.onUpdateRotateion)},n.onDestroy=function(){e.timer.clearAll(this)},i}(Dn),mr=function(t){function i(){this.uiSkin=null,this.startposx=10,this.param=null,this.itemheight=40,this.itemspaceH=30,this.itemspaceV=10,this.allitemlist=null,this.hasShowItemList=null,this.firstTechlist=null,this.linelist=null,this.hasFinishAllFlow=!1,this.curclickItem=null,i.__super.call(this)}s(i,"script.order.SelectMaterialControl",t);var n=i.prototype;return n.onStart=function(){this.hasFinishAllFlow=!1,this.uiSkin=this.owner,this.uiSkin.main_panel.vScrollBarSkin="",this.uiSkin.main_panel.hScrollBarSkin="",this.uiSkin.main_panel.vScrollBar.mouseWheelEnable=!1,this.uiSkin.main_panel.hScrollBar.mouseWheelEnable=!1,this.uiSkin.tablist.itemRender=jl,this.uiSkin.tablist.vScrollBarSkin="",this.uiSkin.tablist.selectEnable=!0,this.uiSkin.tablist.spaceY=2,this.uiSkin.tablist.renderHandler=new c(this,this.updateMatClassItem),this.uiSkin.tablist.selectHandler=new c(this,this.onSlecteMatClass),this.uiSkin.originimg.skin="",this.uiSkin.backimg.skin="",this.uiSkin.yixingimg.skin="",this.uiSkin.yingxBack.skin="",null!=this.param&&(this.param.picWidth>this.param.picHeight?(this.uiSkin.originimg.width=250,this.uiSkin.originimg.height=250/this.param.picWidth*this.param.picHeight):(this.uiSkin.originimg.height=250,this.uiSkin.originimg.width=250/this.param.picHeight*this.param.picWidth),this.uiSkin.yixingimg.width=this.uiSkin.originimg.width,this.uiSkin.yixingimg.height=this.uiSkin.originimg.height,this.uiSkin.backimg.width=this.uiSkin.originimg.width,this.uiSkin.backimg.height=this.uiSkin.originimg.height,this.uiSkin.yingxBack.width=this.uiSkin.originimg.width,this.uiSkin.yingxBack.height=this.uiSkin.originimg.height,this.uiSkin.originimg.visible=!0,this.uiSkin.originimg.skin=W.biggerPicUrl+this.param.fid+".jpg"),this.uiSkin.matlist.itemRender=Tl,this.uiSkin.matlist.vScrollBarSkin="",this.uiSkin.matlist.selectEnable=!0,this.uiSkin.matlist.spaceY=10,this.uiSkin.matlist.renderHandler=new c(this,this.updateMatNameItem),this.uiSkin.selecttech.text="无",this.uiSkin.hasSelMat.text="无",this.uiSkin.matlist.array=[];
var t=[];if(null!=k.instance.productList)for(var i=0;i<k.instance.productList.length;i++)if("户内写真"==k.instance.productList[i].matclassname)t.unshift(k.instance.productList[i]);else if("户外写真"==k.instance.productList[i].matclassname)if(t.length>0&&"户内写真"==t[0].matclassname){var e=t.shift();t.unshift(k.instance.productList[i]),t.unshift(e)}else t.unshift(k.instance.productList[i]);else t.push(k.instance.productList[i]);this.uiSkin.tablist.array=t,this.uiSkin.techcontent.vScrollBar.hide=!0,this.uiSkin.techcontent.hScrollBar.hide=!0,this.uiSkin.subtn.on("click",this,this.onSubItemNum),this.uiSkin.addbtn.on("click",this,this.onAddItemNum),this.uiSkin.numinput.on("input",this,this.onNumChange),this.uiSkin.numinput.text="1",this.uiSkin.numinput.restrict="0-9",k.instance.productList&&k.instance.productList.length>0&&(this.uiSkin.tablist.selectedIndex=0,this.uiSkin.tablist.cells[0].ShowSelected=!0),this.uiSkin.box_tech.visible=!1,this.uiSkin.backBtn.label="工艺",this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmTech),this.uiSkin.backBtn.on("click",this,this.onSwitchPanel),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("SHOW_SELECT_TECH",this,this.initTechView),Ln.instance.on("CLOSE_PANEL_VIEW",this,this.onUpdateTechDes),Ln.instance.on("CLOSE_PANEL_VIEW",this,this.checkShowEffectImg),Ln.instance.on("CANCEL_CHOOSE_ATTACH",this,this.onCancaleChooseAttach),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel)},n.startDragPanel=function(t){t.target!=this.uiSkin.techcontent.vScrollBar.slider.bar&&t.target!=this.uiSkin.techcontent.hScrollBar.slider.bar&&(this.uiSkin.dragImg.startDrag(),t.stopPropagation())},n.stopDragPanel=function(){this.uiSkin.dragImg.stopDrag()},n.onSubItemNum=function(){var t=parseInt(this.uiSkin.numinput.text);t>1&&t--,this.uiSkin.numinput.text=t.toString(),this.onNumChange()},n.onAddItemNum=function(){var t=parseInt(this.uiSkin.numinput.text);t++,this.uiSkin.numinput.text=t.toString(),this.onNumChange()},n.onNumChange=function(){Ln.instance.event("BATCH_CHANGE_PRODUCT_NUM",this.uiSkin.numinput.text)},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.updateMatClassItem=function(t){t.setData(t.dataSource)},n.onSlecteMatClass=function(t){var i;for(var e in this.uiSkin.tablist.cells)i=this.uiSkin.tablist.cells[e],i.ShowSelected=i.matclassvo==this.uiSkin.tablist.array[t];this.refreshMatList(t)},n.updateFactoryItem=function(t){t.setData(t.dataSource)},n.onSlecteFactory=function(t){this.refreshMatList(t)},n.refreshMatList=function(t){var i=this,e=this.uiSkin.tablist.array[t];if(null!=e.childMatList){var n=e.childMatList;this.uiSkin.matlist.array=n}else{var s=k.instance.getSelectedOutPutCenter();W.instance.Request(W.httpUrl+"business/listProduct?webCode=001&addressId="+k.instance.selectAddress.zoneid+"&prodCatName="+e.matclassname+"&manufacturerCodeList="+s.toString()+"&customerCode="+g.instance.founderPhone+"&clientCode="+g.instance.clientCode+"&orderSource="+k.instance.orderType,this,function(n){if(!this.destroyed){var s=JSON.parse(n);if(!s.hasOwnProperty("status")){e.childMatList=[];for(var r={},a=0;a<s.length;a++)if(r.hasOwnProperty(s[a].prodCode))r[s[a].prodCode].priority>k.instance.getManuFacturePriority(s[a].manufacturerCode)?(o=new v(s[a]),o.priority=k.instance.getManuFacturePriority(o.manufacturerCode),r[s[a].prodCode]=o):s[a].isClientProd&&(o=new v(s[a]),r[s[a].uniqueCode]=o);else{var o=new v(s[a]);o.priority=k.instance.getManuFacturePriority(o.manufacturerCode),r[s[a].prodCode]=o}for(var h in r)e.childMatList.push(r[h]);e.childMatList.sort(i.sortMaterial),e.childMatList=e.childMatList.concat(e.childCategoryList),i.uiSkin.tablist.selectedIndex==t&&(i.uiSkin.matlist.array=e.childMatList)}}},null,null)}},n.sortMaterial=function(t,i){for(var e=t.materialCode,n=i.materialCode,s="",r=0;r<e.length;r++)e.charCodeAt(r)<=57&&e.charCodeAt(r)>=48&&(s+=e[r]);for(var a="",r=0;r<n.length;r++)n.charCodeAt(r)<=57&&n.charCodeAt(r)>=48&&(a+=n[r]);return parseInt(s)<=parseInt(a)?-1:1},n.updateMatNameItem=function(t){t.setData(t.dataSource)},n.showCaibcPreview=function(){E.instance.openView("VIEW_CBC_PREVIEW_PANEL",!1)},n.onSwitchPanel=function(){if(this.uiSkin.box_mat.visible){if(null==k.instance.curSelectMat)return E.showAlert("请先选择一种材料"),void 0;this.showTechView()}else this.uiSkin.box_mat.visible=!0,this.uiSkin.box_tech.visible=!1,this.uiSkin.backBtn.label="工艺"},n.showTechView=function(){this.uiSkin.box_mat.visible=!1,this.uiSkin.box_tech.visible=!0,this.uiSkin.backBtn.label="材料",null==k.instance.curSelectMat&&E.showAlert("未选择材料"),null!=k.instance.curSelectMat&&0==k.instance.curSelectMat.procTreeList.length&&E.showAlert("未获取到工艺流")},n.initTechView=function(){this.uiSkin.hasSelMat.text=k.instance.curSelectMat.prodName,this.uiSkin.mattext.text="已选材料:"+k.instance.curSelectMat.prodName,this.updateSelectedTech(),this.showTechView(),this.checkShowEffectImg();this.hasShowItemList=[],this.linelist=[],this.firstTechlist=[];for(var t=k.instance.curSelectMat.procTreeList,i=(this.uiSkin.techcontent.height-t.length*this.itemheight-this.itemspaceV*(t.length-1))/2;this.uiSkin.techcontent.numChildren>0;)this.uiSkin.techcontent.removeChildAt(0);if(t.length>0){var e=(k.instance.curSelectMat.manufacturerCode,k.instance.curSelectMat);if(this.destroyed)return;if(e!=k.instance.curSelectMat)return;k.instance.curSelectProcList=[];for(var n=e.procTreeList,s=0;s<n.length;s++){var r=new Rl;r.setData(n[s]),r.on("click",this,this.onClickMat,[r,n[s]]),r.x=this.startposx,r.y=i,i+=r.height+this.itemspaceV,this.uiSkin.techcontent.addChild(r),this.firstTechlist.push(r),this.hasShowItemList.push(r)}}this.allitemlist=[]},n.drawCurves=function(t,i){var e=new ls;this.uiSkin.techcontent.addChild(e);i.y-t.y;e.graphics.drawLine(0,t.y+.5*this.itemheight,.5*this.itemspaceH,t.y+.5*this.itemheight,"#ff4400",1),e.graphics.drawLine(.5*this.itemspaceH,t.y+.5*this.itemheight,.5*this.itemspaceH,i.y+.5*this.itemheight,"#ff4400",1),e.graphics.drawLine(.5*this.itemspaceH,i.y+.5*this.itemheight,this.itemspaceH,i.y+.5*this.itemheight,"#ff4400",1),e.x=t.x+t.width,this.linelist.push(e)},n.onGetProFlowt=function(t,i){var e=this,n=k.instance.curSelectMat.manufacturerCode;W.instance.Request(W.httpUrl+"business/procflowlist?manufacturer_code="+n+"&procCat_name="+i.procCat_Name,this,function(n){if(!e.uiSkin.destroyed){var s=JSON.parse(n);s.hasOwnProperty("status")||(k.instance.curSelectProcList=s,i.initProcFlow(s),e.onClickMat(t,i))}},null,null)},n.onClickMat=function(t,i){if(null==i.nextMatList&&i instanceof model.orderModel.ProcessCatVo)return this.onGetProFlowt(t,i),void 0;if(i instanceof model.orderModel.MaterialItemVo&&K.yiXingCutProcess(i.procCode)&&!k.instance.checkCanSelYixing())return E.showAlert("图片未关联异形切割图片或者关联的异形切割图片不符合下单要求，请重新关联异形切割图片"),void 0;if(i instanceof model.orderModel.MaterialItemVo&&K.backSideUnSame(i.procCode)&&!k.instance.checkCanDoubleSide())return E.showAlert("图片未关联反面图片，请关联后再下单"),void 0;if(i instanceof model.orderModel.MaterialItemVo&&K.whitePartProcess(i.procCode)&&!k.instance.checkCanPartWhite())return E.showAlert("图片未关联局部铺白图片，请关联后再下单"),void 0;this.hasFinishAllFlow=!1;for(var e=0;e<this.hasShowItemList.length;e++)this.hasShowItemList[e].stopshine();this.curclickItem=t,t.isSelected&&(this.refreshHashowItem(t.techmainvo,t.x),this.updateSelectedTech()),this.hasShowNextMaterial(i)||this.hideItems(t.x,!0),t.setSelected(!0),t.setTechSelected(!0),this.showNextMaterialItems(t),T.needChooseAttachPic(i)&&E.instance.openView("VIEW_SELECT_PIC_TO_ORDER",!1,i),i.attachmentList.indexOf("SPpeijian")>=0||i.attachmentList.indexOf("SPMat")>=0?E.instance.openView("VIEW_SELECT_ATTACH",!1,i):i.attachmentList.indexOf("SPpj")>=0?E.instance.openView("INPUT_CUT_NUM",!1,!1):i.attachmentList.indexOf("SPdfcq")>=0?E.instance.openView("AVG_CUT_VIEW",!1,i):i.attachmentList.indexOf("SPFBdakou")>=0&&E.instance.openView("VIEW_DAKOU_PANEL",!1,i),this.updateSelectedTech()},n.showNextMaterialItems=function(t){var i=t.techmainvo;if(null!=i)if(i.nextMatList&&i.nextMatList.length>0&&!this.hasShowNextMaterial(i)){var n=i.nextMatList,s=t.y+.5*this.itemheight-(n.length*this.itemheight+this.itemspaceV*(n.length-1))/2;0>s&&(s=0);for(var r=t.x+t.width+this.itemspaceH,a=0;a<n.length;a++){var o=this.getItembox();o.setData(n[a]),this.hasShowItemList.push(o),o.on("click",this,this.onClickMat,[o,n[a]]),null!=n[a].parentMaterialVo&&n[a].parentMaterialVo.nextProcRequired||n[a].attachmentList.indexOf("SPpj")>=0?o.startshine():o.stopshine(),o.x=r,o.y=s,this.drawCurves(t,o),s+=o.height+this.itemspaceV,this.uiSkin.techcontent.addChild(o)}null!=o&&o.x+o.width>this.uiSkin.techcontent.width?(this.uiSkin.techcontent.hScrollBar.hide=!1,e.timer.frameOnce(2,this,function(){this.uiSkin.techcontent.scrollTo(o.x+o.width,this.uiSkin.techcontent.vScrollBar.value)})):this.uiSkin.techcontent.hScrollBar.visible=!1,null!=o&&o.y+o.height>this.uiSkin.techcontent.height?(this.uiSkin.techcontent.vScrollBar.hide=!1,e.timer.frameOnce(2,this,function(){this.uiSkin.techcontent.scrollTo(this.uiSkin.techcontent.hScrollBar.value,o.y+o.height)})):null!=o&&o.y<0?(this.uiSkin.techcontent.vScrollBar.hide=!1,e.timer.frameOnce(2,this,function(){this.uiSkin.techcontent.scrollTo(this.uiSkin.techcontent.hScrollBar.value,o.y)})):this.uiSkin.techcontent.vScrollBar.visible=!1}else this.hasFinishAllFlow=!0},n.hasShowNextMaterial=function(t){var i=t.nextMatList;if(null!=i)for(var e=0;e<this.hasShowItemList.length;e++)if(this.hasShowItemList[e].techmainvo==i[0])return!0;return!1},n.onClickAttach=function(t){return t.isSelected?this.hideItems(t.x,!0):this.firstTechlist.indexOf(t)>=0?this.hideItems(t.x,!1):this.hideItems(t.x,!0),t.isSelected?(t.setSelected(!1),t.setTechSelected(!1),this.firstTechlist.indexOf(t)>=0&&this.cancelTech(t.processCatVo.nextMatList),this.updateSelectedTech(),void 0):(t.setSelected(!0),this.updateSelectedTech(),this.hideItems(this.firstTechlist[0].x,!1,!0),void 0)},n.hideItems=function(t,i,e){void 0===e&&(e=!1);for(var n=0;n<this.hasShowItemList.length;n++)this.hasShowItemList[n].x>t?(this.hasShowItemList[n].removeSelf(),this.hasShowItemList[n].setSelected(!1),i&&null!=this.hasShowItemList[n].techmainvo&&(this.hasShowItemList[n].techmainvo.selected=!1),this.allitemlist.push(this.hasShowItemList[n]),this.hasShowItemList[n].offAll(),this.hasShowItemList.splice(n,1),n--):this.hasShowItemList[n].x==t&&(e||this.hasShowItemList[n].setSelected(!1),i&&null!=this.hasShowItemList[n].techmainvo&&(this.hasShowItemList[n].techmainvo.selected=!1));for(var n=0;n<this.linelist.length;n++)this.linelist[n].x>t&&(this.linelist[n].graphics.clear(!0),this.linelist[n].removeSelf(),this.linelist.splice(n,1),n--)},n.refreshHashowItem=function(t,i){for(var e=0;e<this.hasShowItemList.length;e++)if(this.hasShowItemList[e].x>i){if(this.hasShowItemList[e].setSelected(!1),null!=this.hasShowItemList[e].techmainvo&&(this.hasShowItemList[e].techmainvo.selected=!1,this.hasShowItemList[e].techmainvo.attachmentList.indexOf("SPFBdakou")>=0))if(null!=k.instance.curSelectOrderItem)k.instance.curSelectOrderItem.ordervo.holeList=[];else if(null!=k.instance.batchChangeMatItems)for(var e=0;e<k.instance.batchChangeMatItems.length;e++)k.instance.batchChangeMatItems[e].ordervo.holeList=[];t.nextMatList.indexOf(this.hasShowItemList[e].techmainvo)<0?(this.hasShowItemList[e].removeSelf(),this.allitemlist.push(this.hasShowItemList[e]),this.hasShowItemList[e].offAll(),this.hasShowItemList.splice(e,1),e--):null!=this.hasShowItemList[e].techmainvo.parentMaterialVo&&this.hasShowItemList[e].techmainvo.parentMaterialVo.nextProcRequired&&this.hasShowItemList[e].startshine()}for(var e=0;e<this.linelist.length;e++)this.linelist[e].x>i+this.itemspaceH+140&&(this.linelist[e].graphics.clear(!0),this.linelist[e].removeSelf(),this.linelist.splice(e,1),e--)},n.updateSelectedTech=function(){this.uiSkin.selecttech.text=k.instance.curSelectMat.getTechDes(!0),this.checkShowEffectImg()},n.cancelTech=function(t){if(t)for(var i=0;i<t.length;i++)t[i].selected=!1,this.cancelTech(t[i].nextMatList)},n.onCancaleChooseAttach=function(){null!=this.curclickItem&&(this.hideItems(this.curclickItem.x,!0),this.updateSelectedTech())},n.checkShowEffectImg=function(){if(null!=this.param&&!(null!=k.instance.batchChangeMatItems&&k.instance.batchChangeMatItems.length>0)){for(var t=k.instance.curSelectMat.getAllSelectedTech(),i="",e="",n=!1,s=0;s<t.length;s++)"SPTE10320"==t[s].procCode||"SPTE230414160834510"==t[s].procCode?n=!0:K.backSideUnSame(t[s].procCode)?i=k.instance.curSelectOrderItem.ordervo.picinfo.backFid:K.yiXingCutProcess(t[s].procCode)&&(e=k.instance.curSelectOrderItem.ordervo.picinfo.yixingFid);this.uiSkin.backimg.visible=""!=i||n,this.uiSkin.yingxBack.visible=(""!=i||n)&&""!=e,""!=i&&(this.uiSkin.backimg.skin=W.biggerPicUrl+i+".jpg"),n&&(this.uiSkin.backimg.skin=W.biggerPicUrl+this.param.fid+".jpg"),this.uiSkin.yixingimg.visible=""!=e,""!=e&&(this.uiSkin.yixingimg.skin=W.biggerPicUrl+e+".jpg",this.uiSkin.yingxBack.visible&&(this.uiSkin.yingxBack.skin=W.biggerPicUrl+e+".jpg"))}},n.getItembox=function(){if(this.allitemlist.length>0)return this.allitemlist.splice(0,1)[0];var t=new Rl;return t},n.onConfirmTech=function(){if(!this.hasFinishAllFlow,null==k.instance.curSelectMat||""==k.instance.curSelectMat.getTechDes(!0))return E.showAlert("请选择一个工艺"),void 0;if(this.curclickItem.techmainvo.nextProcRequired&&this.curclickItem.techmainvo.nextMatList.length>0&&this.curclickItem.techmainvo.nextMatList[0].parentMaterialVo==this.curclickItem.techmainvo)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"后置工艺必须选一个"}),void 0;var t=k.instance.curSelectMat.getAllSelectedTech(),i=k.instance.curSelectOrderItem;null==i&&(i=k.instance.batchChangeMatItems[0]);for(var e=0;e<t.length;e++)if(t[e].attachmentList.indexOf("SPFBdakou")>=0&&null!=i&&0==i.ordervo.holeList.length)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"非标打扣工艺未设置打孔信息，请重新设置"}),void 0;if(t.length>0&&t[t.length-1].is_mandatory&&t[t.length-1].nextMatList.length>0&&t[t.length-1].nextMatList[0].parentMaterialVo==t[t.length-1])return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"后置工艺必须选一个"}),void 0;for(var e=0;e<t.length;e++)if((t[e].attachmentList.indexOf("SPpeijian")>=0||t[e].attachmentList.indexOf("SPMat"))&&(null==t[e].selectAttachVoList||0==t[e].selectAttachVoList.length))return E.showAlert("未选择配件"),void 0;var n=this.curclickItem.techmainvo.nextMatList;if(null!=n&&1==n.length)for(var e=0;e<n.length;e++){if(n[e].attachmentList.indexOf("SPpj")>=0)return E.showAlert("当前有必选工艺，请选择"),void 0;if("3"==n[e].showType)return E.showAlert("当前有必选工艺，请选择"),void 0}k.instance.curSelectMat.getProductDiscount(this.updatePicOrderProduct,this)},n.updatePicOrderProduct=function(){if(k.instance.curSelectOrderItem)k.instance.curSelectOrderItem.changeProduct(k.instance.curSelectMat);else if(k.instance.batchChangeMatItems&&k.instance.batchChangeMatItems.length>0)for(var t=0;t<k.instance.batchChangeMatItems.length;t++)k.instance.batchChangeMatItems[t].changeProduct(k.instance.curSelectMat);Ln.instance.event("UPDATE_ORDER_ITEM_TECH"),this.onCloseView()},n.onUpdateTechDes=function(t){"VIEW_SELECT_ATTACH"==t&&null!=this.curclickItem&&null!=this.curclickItem.techmainvo&&((this.curclickItem.techmainvo.attachmentList.indexOf("SPpeijian")>=0||this.curclickItem.techmainvo.attachmentList.indexOf("SPMat")>=0)&&(null==this.curclickItem.techmainvo.attachList||0==this.curclickItem.techmainvo.attachList.length?this.hideItems(this.curclickItem.x,!0):this.updateNextMaterialItems()),this.updateSelectedTech())},n.updateNextMaterialItems=function(){var t=this.curclickItem.techmainvo.nextMatList;if(null!=t)for(var i=0;i<this.hasShowItemList.length;i++){var e=t.indexOf(this.hasShowItemList[i].techmainvo);e>=0&&this.hasShowItemList[i].updateState()}},n.onCloseView=function(){E.instance.closeView("VIEW_SELECT_MATERIAL")},n.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("SHOW_SELECT_TECH",this,this.initTechView),Ln.instance.off("CLOSE_PANEL_VIEW",this,this.onUpdateTechDes),Ln.instance.off("CLOSE_PANEL_VIEW",this,this.checkShowEffectImg),Ln.instance.off("CANCEL_CHOOSE_ATTACH",this,this.onCancaleChooseAttach)},i}(Dn),gr=function(t){function i(){this.uiSkin=null,this.province=null,this.zoneid=null,this.areaid=null,this.businessManlist=null,this.orderManlist=null,this.tabBtns=null,this.curTabIndex=-1,i.__super.call(this)}s(i,"script.usercenter.StatisticalAnalyController",t);var e=i.prototype;return e.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.customListPanel.visible=!1,this.uiSkin.curCustomName.text="全部",this.uiSkin.curCustomName.editable=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),this.tabBtns=[],this.tabBtns.push(this.uiSkin.customerTab),this.tabBtns.push(this.uiSkin.productTab),this.tabBtns.push(this.uiSkin.areaTab),this.uiSkin.yearComBox.labels="2026,2025,2024",this.uiSkin.monthComBox.labels="全年,01,02,03,04,05,06,07,08,09,10,11,12";var i=new Date;this.uiSkin.yearComBox.selectedLabel=i.getFullYear()+"",this.uiSkin.monthComBox.selectedIndex=0,this.uiSkin.customerTab.on("click",this,this.clickTabBtn,[0]),this.uiSkin.productTab.on("click",this,this.clickTabBtn,[1]),this.uiSkin.areaTab.on("click",this,this.clickTabBtn,[2]),this.uiSkin.provList.itemRender=Oc,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.provList.array=[{id:0,areaName:"空"}],this.uiSkin.cityList.itemRender=Oc,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.cityList.array=[{id:0,areaName:"空"}],this.uiSkin.areaList.itemRender=Oc,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.areaList.array=[{id:0,areaName:"空"}],this.uiSkin.townList.itemRender=Oc,this.uiSkin.townList.vScrollBarSkin="",this.uiSkin.townList.selectEnable=!0,this.uiSkin.townList.repeatX=1,this.uiSkin.townList.spaceY=2,this.uiSkin.townList.renderHandler=new c(this,this.updateCityList),this.uiSkin.townList.selectHandler=new c(this,this.selectTown),this.uiSkin.townList.array=[{id:0,areaName:"空"}],this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.btnSelTown.on("click",this,this.onShowTown),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.on("click",this,this.hideAddressPanel),this.clickTabBtn(0),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initAddr,null,null),W.instance.Request(W.httpUrl+W.listBusinessMan,this,this.getBusinessManBack,null,null),W.instance.Request(W.httpUrl+W.listOrderMakers,this,this.getOrderMakersBack,null,null)},e.clickTabBtn=function(t){this.curTabIndex!=t&&(this.curTabIndex>=0&&(this.tabBtns[this.curTabIndex].selected=!1),this.tabBtns[t].selected=!0,this.curTabIndex=t,this.uiSkin.customerQueryBox.visible=0==t,this.uiSkin.productQueryBox.visible=1==t,this.uiSkin.areaQueryBox.visible=2==t)},e.updateCityList=function(t){t.setData(t.dataSource)},e.initAddr=function(t){if(!this.destroyed){var i=JSON.parse(t);i.data.unshift({id:0,areaName:"空"}),this.uiSkin.provList.array=i.data}},e.selectProvince=function(t){var i=this;return this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,this.uiSkin.cityList.selectedIndex=0,this.selectCity(0),0==this.province.id?(this.uiSkin.cityList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.province.id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh()}},null,null),void 0)},e.selectCity=function(t){var i=this;return this.uiSkin.citybox.visible=!1,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName,this.uiSkin.areaList.selectedIndex=0,this.selectArea(0),0==this.uiSkin.cityList.array[t].id?(this.uiSkin.areaList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.cityList.array[t].id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh()}},null,null),void 0)},e.selectArea=function(t){var i=this;-1!=t&&(this.areaid=this.uiSkin.areaList.array[t].id,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1,this.uiSkin.townList.selectedIndex=0,this.selectTown(0),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.areaList.array[t].id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.townList.array=e.data,i.uiSkin.townList.refresh()}},null,null))},e.selectTown=function(t){-1!=t&&(this.areaid=this.uiSkin.townList.array[t].id,this.uiSkin.towntxt.text=this.uiSkin.townList.array[t].areaName,this.uiSkin.townbox.visible=!1)},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1)},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,this.uiSkin.townbox.visible=!1,t.stopPropagation()},e.onShowTown=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!0,t.stopPropagation()},e.getBusinessManBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data,n=[],s="全部";e.length>0&&(s+=",");for(var r=0;r<e.length;r++)n.push(new x(e[r])),s+=n[r].name+"_"+n[r].mobileNumber,r<e.length-1&&(s+=",");this.uiSkin.businessCombo.labels=s,this.uiSkin.businessCombo.selectedIndex=0,this.businessManlist=n}},e.getOrderMakersBack=function(t){if(!this.destroyed){var i=JSON.parse(t),e=i.data,n="全部";e.length>0&&(n+=",");for(var s=0;s<e.length;s++)n+=e[s].nickName+"_"+e[s].mobileNumber,s<e.length-1&&(n+=",");this.uiSkin.orderPlaceCombo.labels=n,this.uiSkin.orderPlaceCombo.selectedIndex=0,this.orderManlist=e}},i}(Dn),vr=function(i){function e(){this.uiSkin=null,e.__super.call(this)}s(e,"script.usercenter.ChargeActivityController",i);var n=e.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.accout.text=g.instance.userAccount,W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post"),this.uiSkin.moneytxt.text="--",W.instance.Request(W.httpUrl+"group/get-activities?",this,this.getActivityInfoBack,null,"post"),this.uiSkin.actpanel.visible=!0,this.uiSkin.noactbox.visible=!1,this.uiSkin.actbox.visible=!1,this.uiSkin.totalreturn.editable=!1,this.uiSkin.chargeamount.editable=!1;for(var i=0;8>i;i++)this.uiSkin["moneybtn"+i].on("click",this,this.onChangeMoney,[i]);this.uiSkin.chargeamount.maxChars=8,this.uiSkin.joinact.on("click",this,this.onjoinActivity),this.uiSkin.recordbtn.on("click",this,this.showRecordView),this.uiSkin.groupCharge.visible=!1,this.uiSkin.grpchargeBtn.on("click",this,this.onGrpChargeConfirm),this.uiSkin.closeGroup.on("click",null,function(){t.uiSkin.groupCharge.visible=!1}),this.uiSkin.copyname.on("click",this,this.copytext,[this.uiSkin.companyname.text]),this.uiSkin.copybank.on("click",this,this.copytext,[this.uiSkin.bank.text]),this.uiSkin.copyaccount.on("click",this,this.copytext,[this.uiSkin.account.text]),this.uiSkin.finishcharge.on("click",this,this.onSendFinishCharge),Ln.instance.on("CANCEL_CHARGE_RECORD",this,this.updateAccountData)},n.updateAccountData=function(){W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post")},n.showRecordView=function(){E.instance.openView("VIEW_CHARGE_RECORD_PANEL",!1)},n.onChangeMoney=function(t){var i=[1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4];this.uiSkin.chargeamount.text=i[t].toString(),this.uiSkin.totalreturn.text=(1.15*i[t]).toFixed(0)},n.getActivityInfoBack=function(t){var i=JSON.parse(t);if(0==i.status)if(null!=i.data&&i.data.length>0){this.curactinfo=i.data[0],this.uiSkin.actbox.visible=!0,this.uiSkin.noactbox.visible=!1,this.uiSkin.zhiufbaobtn.selected=!0;var e=i.data[0];this.uiSkin.acttitle.text=e.ra_name,this.uiSkin.actrule.text="活动规则："+e.ra_text,this.uiSkin.chargeamount.text="10000",this.uiSkin.totalreturn.text="11500"}else this.uiSkin.noactbox.visible=!0,this.uiSkin.actbox.visible=!1},n.onjoinActivity=function(){if(""==this.uiSkin.chargeamount.text||"0"==this.uiSkin.chargeamount.text)return E.showAlert("请输入充值金额"),void 0;var t=parseFloat(this.uiSkin.chargeamount.text);if(t%1e3!=0)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"充值金额必须是1000的倍数。"}),void 0;var i="rid="+this.curactinfo.ra_id+"&amount="+t;W.instance.Request(W.httpUrl+"group/join-activity?",this,this.joinActBack,i,"post")},n.joinActBack=function(t){var i=JSON.parse(t);0==i.status&&(Ti.window.open("about:self","_self").location.href=W.httpUrl+"group/pay-activity?rarid="+i.data.rar_id)},n.copytext=function(i){var e=Ti.document.createElement("input");e.type="text",e.value=i,Ti.document.body.appendChild(e),e.select(),t.document.execCommand("copy"),Ti.document.body.removeChild(e)},n.onSendFinishCharge=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"请确认您已完成对公转账，并且转账金额与您选择的活动金额相等。",caller:this,callback:this.onConfirmSend})},n.onConfirmSend=function(t){if(t){var i=parseFloat(this.uiSkin.chargeamount.text);if(i%1e3!=0)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"充值金额必须是1000的倍数。"}),void 0;var e="rid="+this.curactinfo.ra_id+"&amount="+i;W.instance.Request(W.httpUrl+"group/join-activity?",this,this.joinGroupChargeActBack,e,"post")}},n.joinGroupChargeActBack=function(t){var i=JSON.parse(t);if(0==i.status){var e=parseFloat(this.uiSkin.chargeamount.text),n="amount="+e+"&id="+i.data.rar_id;W.instance.Request(W.httpUrl+"account/recharge-activity-confirm-before?",this,this.joinGrpChhargeBack,n,"post")}},n.joinGrpChhargeBack=function(t){var i=JSON.parse(t);0==i.status&&(E.showAlert("申请成功，请等待工作人员审核"),this.uiSkin.groupCharge.visible=!1)},n.onGrpChargeConfirm=function(){this.uiSkin.groupCharge.visible=!0},n.confirmSucess=function(t){t&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,"post")},n.getCompanyInfoBack=function(t){var i=JSON.parse(t);0==i.status&&(g.instance.money=Number(i.balance),g.instance.actMoney=Number(i.activity_balance),g.instance.frezeMoney=Number(i.activity_locked_balance),this.uiSkin.moneytxt.text=g.instance.money.toString()+"元",this.uiSkin.actMoney.text=g.instance.actMoney.toString()+"元",this.uiSkin.frezeMoney.text=g.instance.frezeMoney.toString()+"元",g.instance.isHidePrice()&&(this.uiSkin.moneytxt.text="****",this.uiSkin.actMoney.text="****",this.uiSkin.frezeMoney.text="****"))},n.onDestroy=function(){Ln.instance.off("CANCEL_CHARGE_RECORD",this,this.updateAccountData)},e}(Dn),Sr=function(t){function i(){this.customerVo=null,this.addressPage=1,this.addressTotalPage=1,this.addressPageSize=20,this.tabBtns=[],this.curTabIndex=-1,this.grpCurPage=1,this.grpTotalPage=1,this.pageSize=50,this.hasinit=!1,this.uiSkin=null,i.__super.call(this)}s(i,"script.usercenter.CustomerAddressMgr",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.addlist.itemRender=$l,this.tabBtns.push(this.uiSkin.addressTab),this.tabBtns.push(this.uiSkin.groupTab),this.uiSkin.addressTab.on("click",this,this.clickTabBtn,[0]),this.uiSkin.groupTab.on("click",this,this.clickTabBtn,[1]),this.uiSkin.addlist.repeatX=1,this.uiSkin.addlist.spaceY=0,this.uiSkin.addlist.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addlist.selectEnable=!1;var t=[];this.uiSkin.addlist.array=t,this.uiSkin.btnaddAddress.on("click",this,this.onClickAdd),this.uiSkin.prevBtn.on("click",this,this.onAddressPrevPage),this.uiSkin.nextBtn.on("click",this,this.onAddressNextPage),this.uiSkin.numAddress.text="已经保存0条地址",this.uiSkin.addlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.addlist.on("mouseout",this,this.resumeParentScroll),this.uiSkin.groupList.itemRender=bc,this.uiSkin.groupList.repeatX=6,this.uiSkin.groupList.spaceY=20,this.uiSkin.groupList.spaceX=5,this.uiSkin.groupList.renderHandler=new c(this,this.updateGroupList),this.uiSkin.groupList.selectEnable=!1;var i=[];i=[],this.uiSkin.searchGroupInput.text="",this.uiSkin.groupList.array=i,this.uiSkin.createGroupBox.visible=!1,this.uiSkin.addGroup.on("click",this,this.onshowCreateGroup),this.uiSkin.closeNewGroup.on("click",this,this.oncloseCreateGroup),this.uiSkin.newGroupName.maxChars=8,this.uiSkin.searchGroupInput.maxChars=20,this.uiSkin.confirmCreateGroup.on("click",this,this.createGroupNow),this.uiSkin.gpPrevPage.on("click",this,this.onGpPrevPage),this.uiSkin.gpNextPage.on("click",this,this.onGpNextPage),this.uiSkin.searchGrpBtn.on("click",this,this.onSearchGroup),this.clickTabBtn(0),Ln.instance.on("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.on("SELECT_CUSTOMER",this,this.selectCustomer),Ln.instance.on("UPDATE_ADDRESS_GROUP_LIST",this,this.refreshGroupList)},e.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},e.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},e.clickTabBtn=function(t){this.curTabIndex!=t&&(this.curTabIndex>=0&&(this.tabBtns[this.curTabIndex].selected=!1),this.tabBtns[t].selected=!0,this.curTabIndex=t,this.uiSkin.addressbox.visible=0==t,this.uiSkin.groupBox.visible=1==t,this.uiSkin.createGroupBox.visible=!1,1==t&&0==this.hasinit&&(this.hasinit=!0,this.refreshGroupList()))},e.selectCustomer=function(t){return null==t?(this.customerVo=null,this.uiSkin.customerBox.visible=!1,this.uiSkin.addlist.array=[],this.uiSkin.numAddress.text="已经保存0条地址",void 0):(this.uiSkin.customerBox.visible=!0,this.customerVo=t,this.uiSkin.customerBox.visible=!0,this.uiSkin.customeName.text=this.customerVo.customerName,this.updateList(),this.refreshGroupList(),void 0)},e.onAddressPrevPage=function(){this.addressPage<=1||(this.addressPage--,this.updateList())},e.onAddressNextPage=function(){this.addressPage>=this.addressTotalPage||(this.addressPage++,this.updateList())},e.updateList=function(){var t="customerId="+this.customerVo.id+"&pageNo="+this.addressPage+"&pageSize="+this.addressPageSize;W.instance.Request(W.httpUrl+W.listCustomerAddress+t,this,this.getMyAddressBack,null,null,null)},e.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new f(i.data.expressList[n]));this.addressTotalPage=Math.ceil(i.data.totalCount/this.addressPageSize),this.addressTotalPage<1&&(this.addressTotalPage=1),this.uiSkin.addressPageTxt.text=this.addressPage+"/"+this.addressTotalPage,e.sort(this.compareAddress),this.uiSkin.addlist.array=e,this.uiSkin.numAddress.text="已经保存"+i.data.totalCount+"条地址"}}},e.compareAddress=function(t,i){return parseInt(t.id)<parseInt(i.id)?-1:1
},e.onClickAdd=function(){return null==this.customerVo?(E.showAlert("请先选择需要添加地址的客户"),void 0):(E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:W.addCustomerAddress,customer:this.customerVo}),void 0)},e.updateAddressList=function(t){t.setData(t.dataSource)},e.updateGroupList=function(t){t.setData(t.dataSource)},e.onshowCreateGroup=function(){this.uiSkin.createGroupBox.visible=!0},e.oncloseCreateGroup=function(){this.uiSkin.createGroupBox.visible=!1},e.createGroupNow=function(){var t={};return this.uiSkin.newGroupName.text.length<=0?(E.showAlert("请输入分组名"),void 0):(t.name=this.uiSkin.newGroupName.text,t.customerId=this.customerVo.id,W.instance.Request(W.httpUrl+"org/express/group/add?",this,this.createGroupBack,JSON.stringify(t),"post"),void 0)},e.createGroupBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&this.refreshGroupList(),this.oncloseCreateGroup()}},e.onSearchGroup=function(){this.grpCurPage=1,this.refreshGroupList()},e.onCloseView=function(t){"VIEW_ADDRESS_GROUP_MGR_PANEL"==t&&this.refreshGroupList()},e.refreshGroupList=function(){if(null==this.customerVo)return E.showAlert("请先选择客户"),void 0;var t="customerId="+this.customerVo.id+"&name="+this.uiSkin.searchGroupInput.text+"&pageNo="+this.grpCurPage+"&pageSize="+this.pageSize;W.instance.Request(W.httpUrl+"org/express/group/paging?"+t,this,this.listGroupBack,null,null)},e.listGroupBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressGroupList.length;n++)e.push(new B(i.data.expressGroupList[n]));this.uiSkin.groupList.array=e,this.grpTotalPage=Math.ceil(i.data.totalCount/this.pageSize),this.grpTotalPage<1&&(this.grpTotalPage=1),this.uiSkin.grPageNum.text=this.grpCurPage+"/"+this.grpTotalPage}}},e.onGpPrevPage=function(){this.grpCurPage<=1||(this.grpCurPage--,this.refreshGroupList())},e.onGpNextPage=function(){this.grpCurPage>=this.grpTotalPage||(this.grpCurPage++,this.refreshGroupList())},e.onDestroy=function(){Ln.instance.off("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.off("SELECT_CUSTOMER",this,this.selectCustomer),Ln.instance.off("UPDATE_ADDRESS_GROUP_LIST",this,this.refreshGroupList)},i}(Dn),yr=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.uiTool.BtnMouseCusor",t);var e=i.prototype;return e.onEnable=function(){this.uiSkin=this.owner,this.uiSkin.on("mouseover",this,function(){tn.cursor="hand"}),this.uiSkin.on("mouseout",this,function(){tn.cursor="auto"})},i}(Dn),Cr=function(t){function i(){this.uiSkin=null,this.param=null,this.paylefttime=0,i.__super.call(this)}s(i,"script.order.PayTypeSelectControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainview.scaleX=.2,this.uiSkin.mainview.scaleY=.2,Ni.to(this.uiSkin.mainview,{scaleX:1,scaleY:1},300,dn.backOut),this.uiSkin.payall.selected=!0,this.uiSkin.paytype.selectedIndex=0,0==g.instance.accountType&&g.instance.privilege.indexOf("order:submit")<0&&g.instance.privilege.indexOf("order:submit-with-balances")>=0&&(this.uiSkin.paytype.selectedIndex=1),this.uiSkin.accountmoney.text="0元",this.uiSkin.needpay.text=this.param.amount+"元",this.uiSkin.realpay.text=this.param.amount+"元",null!=this.param.lefttime?(this.paylefttime=this.param.lefttime,this.uiSkin.paytime.text=T.getCountDownString(this.paylefttime),e.timer.loop(1e3,this,this.countdownpay)):this.uiSkin.countdownbox.visible=!1,g.instance.isHidePrice()&&(this.uiSkin.needpay.text="****",this.uiSkin.realpay.text="****"),W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfoBack,null,null),this.uiSkin.paybtn.on("click",this,this.onPayOrder),this.uiSkin.cancelbtn.on("click",this,this.onCancel),this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.countdownpay=function(){this.paylefttime>0?(this.paylefttime--,this.uiSkin.paytime.text=T.getCountDownString(this.paylefttime)):(E.instance.closeView("VIEW_SELECT_PAYTYPE_PANEL"),E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"支付超时，您可以去我的订单页面继续支付",caller:this,callback:this.closeOrderView}))},n.closeOrderView=function(){Ln.instance.event("SHOW_CONTENT_PANEL",[Wh,0])},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.getCompanyInfoBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.money=Number(i.data.balance),g.instance.actMoney=0,g.instance.frezeMoney=0,g.instance.factoryMoney=Number(i.data.factoryBalance),this.uiSkin.accountmoney.text=g.instance.money.toString()+"元",this.uiSkin.actmoney.text=g.instance.actMoney.toString()+"元",this.uiSkin.factoryMoney.text=g.instance.factoryMoney.toString()+"元",g.instance.actMoney>=this.param.amount?this.uiSkin.paytype.selectedIndex=2:g.instance.money>=this.param.amount?this.uiSkin.paytype.selectedIndex=1:g.instance.factoryMoney>=this.param.amount&&(this.uiSkin.paytype.selectedIndex=2),g.instance.isHidePrice()&&(this.uiSkin.accountmoney.text="****",this.uiSkin.actmoney.text="****"))}},n.onPayOrder=function(){if(null!=this.param.orderid){this.param.orderid.join(",")}if(0==this.uiSkin.paytype.selectedIndex){if(0==g.instance.accountType&&g.instance.privilege.indexOf("order:submit")<0||g.instance.isHidePrice())return E.showAlert("您没有在线支付的权限,请联系管理者开放权限"),void 0;null!=this.param.orderid?W.instance.Request(W.httpUrl+"order/pay?",this,this.getOnlinePayUrlBack,JSON.stringify(this.param.orderid),"post"):null!=this.param.size&&W.instance.Request(W.httpUrl+"fs/payForStorage?",this,this.getOnlinePayUrlBack,JSON.stringify({size:this.param.size.toString()}),"post")}else{if(0==g.instance.accountType&&g.instance.privilege.indexOf("order:submit-with-balances")<0)return E.showAlert("您没有余额支付的权限,请联系管理者开放权限"),void 0;if(1==this.uiSkin.paytype.selectedIndex&&g.instance.money<this.param.amount)return E.showAlert("账户余额不足"),void 0;if(2==this.uiSkin.paytype.selectedIndex&&g.instance.factoryMoney<this.param.amount)return E.showAlert("代充余额不足"),void 0;if(3==this.uiSkin.paytype.selectedIndex&&g.instance.factoryMoney<this.param.amount)return E.showAlert("代充余额不足"),void 0;var t=this.uiSkin.paytype.selectedIndex-1;null!=this.param.orderid?W.instance.Request(W.httpUrl+"order/payWithBal?",this,this.payMoneyBack,JSON.stringify({orderSn:this.param.orderid,kind:t.toString()}),"post"):null!=this.param.size&&W.instance.Request(W.httpUrl+"fs/payForStorage?",this,this.payMoneyBack,JSON.stringify({size:this.param.size,"&kind":t}),"post")}},n.getOnlinePayUrlBack=function(t){var i=JSON.parse(t);"0"==i.code&&(Ti.window.open("about:self","_self").location.href=i.data)},n.payMoneyBack=function(t){var i=JSON.parse(t);"0"==i.code&&(Ln.instance.event("PAY_ORDER_SUCESS"),E.instance.closeView("VIEW_SELECT_PAYTYPE_PANEL"),Ln.instance.event("SHOW_CONTENT_PANEL",[Wh,0]),g.instance.firstOrder="0",E.showAlert("支付成功"))},n.confirmSucess=function(t){t&&(Ln.instance.event("PAY_ORDER_SUCESS"),E.instance.closeView("VIEW_SELECT_PAYTYPE_PANEL"),Ln.instance.event("SHOW_CONTENT_PANEL",[Wh,0]))},n.onCancel=function(){null!=this.param.orderid?E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定取消支付吗？取消支付您可以到订单界面查询支付状态或继续支付。",caller:this,callback:this.confirmCancel}):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定取消支付吗？",caller:this,callback:this.confirmCancel})},n.confirmCancel=function(t){t&&(E.instance.closeView("VIEW_SELECT_PAYTYPE_PANEL"),Ln.instance.event("CANCEL_PAY_ORDER"),Ln.instance.event("SHOW_CONTENT_PANEL",[Wh,0]))},n.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),e.timer.clearAll(this)},i}(Dn),Er=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.prodCustomer.ProdChooseController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onCloseView),this.uiSkin.prodList.itemRender=Yl,this.uiSkin.prodList.repeatX=8,this.uiSkin.prodList.spaceY=20,this.uiSkin.prodList.spaceX=40,this.uiSkin.prodList.renderHandler=new c(this,this.updateProdItem),this.uiSkin.prodList.vScrollBarSkin="",this.uiSkin.conditionList.itemRender=cc,this.uiSkin.conditionList.repeatX=1,this.uiSkin.conditionList.spaceY=10,this.uiSkin.conditionList.renderHandler=new c(this,this.updateParamItem);for(var t=[],i=0;50>i;i++){var e={};e.cateName="T恤"+i,t.push(e)}this.uiSkin.prodList.array=t;var n=[],s=new G;s.paramName="颜色",s.paramList=[];var r=new D;r.lblName="红色",r.value="#FF0000",s.paramList.push(r);var r=new D;r.lblName="黑色",r.value="#FF0000",s.paramList.push(r),n.push(s);var s=new G;s.paramName="尺码",s.paramList=[];var r=new D;r.lblName="S",r.value="s",s.paramList.push(r);var r=new D;r.lblName="M",r.value="m",s.paramList.push(r),n.push(s),this.uiSkin.conditionList.array=n,this.uiSkin.myaddresstxt.on("click",this,this.onShowSelectAddress),null!=g.instance.getDefaultAddress()&&(this.uiSkin.myaddresstxt.text=g.instance.getDefaultAddress().addressDetail,k.instance.selectAddress=g.instance.getDefaultAddress()),Ln.instance.on("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.onShowSelectAddress=function(){E.instance.openView("VIEW_SELECT_ADDRESS")},e.onSelectedSelfAddress=function(){k.instance.selectAddress&&(this.uiSkin.myaddresstxt.text=k.instance.selectAddress.addressDetail)},e.onCloseView=function(){E.instance.closeView("VIEW_PRODUCT_CHOOSE_PANEL"),E.instance.openView("VIEW_FIRST_PAGE")},e.updateProdItem=function(t){t.setData(t.dataSource)},e.updateParamItem=function(t){t.setData(t.dataSource)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.prodList.refresh()},e.onDestroy=function(){Ln.instance.off("SELECT_ORDER_ADDRESS",this,this.onSelectedSelfAddress),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),br=function(t){function i(){this.uiSkin=null,this.divElement=null,this.videoElement=null,i.__super.call(this)}s(i,"script.workpanel.VideoPlayPanel",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closebtn.on("click",this,this.closeVideo),this.creatVideo()},e.creatVideo=function(){var t=this;"undefined"==typeof Ti.window.videojs?(this.script=Ti.document.createElement("script"),this.script.src="videoTool/video.min.js",this.script.onload=function(){t.initVideo()},this.script.onerror=function(t){console.log("error"+t)},Ti.document.body.appendChild(this.script)):this.initVideo()},e.initVideo=function(){this.destroyed||(this.divElement=Ti.createElement("video"),this.divElement.id="myVideo",this.divElement.className="video-js vjs-big-play-centered vjs-fluid",this.divElement.style="position: absolute;top:50%;left:50%;transform: translate(-50%,-50%);",Ti.document.body.appendChild(this.divElement),Ti.window.initTeachingVideo())},e.closeVideo=function(){E.instance.closeView("VIEW_PLAY_VIDEO_PANEL")},e.onDestroy=function(){Ti.window.disposeVideo()},i}(Dn),Ir=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.prefabScript.TopBannerControl",t);var e=i.prototype;return e.onEnable=function(){this.uiSkin=this.owner;var t=this.uiSkin.getChildByName("firstPage"),i=this.uiSkin.getChildByName("userName"),e=this.uiSkin.getChildByName("logout"),n=this.uiSkin.getChildByName("myorder");i.text=g.instance.isLogin?g.instance.userAccount:"未登录",t.on("click",this,this.showFirstPage),e.on("click",this,this.showLogOut),n.on("click",this,this.showOrderList)},e.onStart=function(){},e.showOrderList=function(){E.instance.openView("VIEW_USERCENTER",!0,3)},e.showFirstPage=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.showLogOut=function(){W.instance.Request(W.httpUrl+"sys/logout?",this,this.onLoginOutBack,"","post")},e.onLoginOutBack=function(t){var i=JSON.parse(t);0==i.status&&(T.setLocalVar("useraccount",""),T.setLocalVar("userpwd",""),T.setLocalVar("userToken",""),g.instance.isLogin=!1,g.instance.resetData(),E.instance.openView("VIEW_FIRST_PAGE",!0))},i}(Dn),xr=function(t){function i(){this.uiSkin=null,this.matvo=null,this.param=null,this.attachSpaceX=10,this.attachSpaceY=30,this.selectAttach=null,this.attachesItems=null,i.__super.call(this)}s(i,"script.order.SelectAttchesControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.matvo=this.param,null!=this.matvo.attachList&&this.matvo.attachList.length>0?this.initAttachesList(this.matvo.attachList):W.instance.Request(W.httpUrl+"business/acccatlist?prod_code="+k.instance.curSelectMat.prodCode+"&proc_name="+this.matvo.procName,this,this.onAccCatlistBack,null,null),this.uiSkin.matName.text=this.matvo.procName,this.selectAttach=[],this.uiSkin.closeBtn.on("click",this,this.closeScene),this.uiSkin.btnok.on("click",this,this.onSureClose),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),Ln.instance.on("ADD_TECH_ATTACH",this,this.onAddAttach),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel)},e.initAttachesList=function(t){this.attachesItems=[];for(var i=0,e=0;e<t.length;e++){var n=new ic;n.setData(t[e]),this.uiSkin.attachPanel.addChild(n),n.selbtn.on("click",this,this.onSelectAttach,[t[e],e]),0==e?(n.x=0,n.y=0):n.width+this.attachesItems[e-1].x+this.attachesItems[e-1].width+this.attachSpaceX>this.uiSkin.attachPanel.width?(n.x=0,i+=n.height+this.attachSpaceY,n.y=i):(n.x=this.attachesItems[e-1].x+this.attachesItems[e-1].width+this.attachSpaceX,n.y=i),this.attachesItems.push(n)}},e.startDragPanel=function(t){this.uiSkin.dragImg.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.stopDrag()},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.onAccCatlistBack=function(t){var i=JSON.parse(t);i.hasOwnProperty("status")||null!=i[0]&&W.instance.Request(W.httpUrl+"business/accessorylist?manufacturer_code="+k.instance.curSelectMat.manufacturerCode+"&accessoryCat_name="+i[0].accessoryCat_Name+"&customer_code="+g.instance.founderPhone,this,this.onGetAccessorylistBack,null,null)},e.onGetAccessorylistBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i){this.matvo.attachList=[];for(var e=0;e<i.length;e++){var n=new O(i[e]);n.materialItemVo=this.matvo,this.matvo.attachList.push(n)}this.matvo.attachList.sort(this.sortAttach),this.initAttachesList(this.matvo.attachList)}}},e.sortAttach=function(t,i){for(var e=t.accessory_code,n=i.accessory_code,s="",r=0;r<e.length;r++)e.charCodeAt(r)<=57&&e.charCodeAt(r)>=48&&(s+=e[r]);for(var a="",r=0;r<n.length;r++)n.charCodeAt(r)<=57&&n.charCodeAt(r)>=48&&(a+=n[r]);return parseInt(s)<=parseInt(a)?-1:1},e.updateAttachClassItem=function(t){t.setData(t.dataSource)},e.onAddAttach=function(t){this.matvo.selectAttachVoList=[],this.matvo.selectAttachVoList.push(t),this.onCloseView()},e.onSureClose=function(){return this.attachesItems.length>0&&(null==this.selectAttach||0==this.selectAttach.length)?(E.showAlert("请选择附件"),void 0):(this.matvo.selectAttachVoList=this.selectAttach,this.onCloseView(),void 0)},e.onSelectAttach=function(t,i){for(var e=0;e<this.attachesItems.length;e++)this.attachesItems[e].ShowSelected(e==i);this.selectAttach=[],this.selectAttach.push(t)},e.closeScene=function(){E.instance.closeView("VIEW_SELECT_ATTACH"),Ln.instance.off("ADD_TECH_ATTACH",this,this.onAddAttach),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.onCloseView=function(){return this.attachesItems.length>0&&(null==this.selectAttach||0==this.selectAttach.length)?(E.showAlert("请选择附件"),void 0):(this.matvo.selectAttachVoList=this.selectAttach,Ln.instance.event("CLOSE_PANEL_VIEW","VIEW_SELECT_ATTACH"),E.instance.closeView("VIEW_SELECT_ATTACH"),Ln.instance.off("ADD_TECH_ATTACH",this,this.onAddAttach),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),"SPTE10210"==this.matvo.procCode&&k.instance.checkNeedReChooseCfpj()&&E.instance.openView("INPUT_CUT_NUM",!1,!0),void 0)},i}(Dn),Pr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.usercenter.OrderPriceSettingController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.orderoanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="";parseInt(this.param.status);this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.orderSn.text=this.param.id,this.orderdata=JSON.parse(this.param.detail);var t=this.orderdata.orderItemList;this.uiSkin.deliveryCost.text=this.orderdata.shippingFee,this.uiSkin.moneyPaidlbl.text=null!=this.orderdata.moneyPaid?Number(this.orderdata.moneyPaid).toFixed(2):Number(this.orderdata.money_paidStr).toFixed(2),g.instance.isHidePrice()&&(this.uiSkin.moneyPaidlbl.text="***"),t.sort(this.sortProduct),this.uiSkin.orderbox.itemRender=Jl,this.uiSkin.orderbox.repeatX=1,this.uiSkin.orderbox.spaceY=2,this.uiSkin.orderbox.renderHandler=new c(this,this.updateOrderList),this.uiSkin.orderbox.selectEnable=!1;for(var i=0;i<t.length;i++)t[i].orderId=this.param.id;this.uiSkin.orderbox.array=t,this.uiSkin.orderbox.size(this.uiSkin.orderbox.width,this.uiSkin.orderbox.getBounds().height),this.uiSkin.closebtn.on("click",this,this.onCloseView),this.uiSkin.layoutCost.on("input",this,this.updateSellPrice),this.uiSkin.designCost.on("input",this,this.updateSellPrice),this.uiSkin.deliveryCost.on("input",this,this.updateSellPrice),this.uiSkin.otherCost.on("input",this,this.updateSellPrice),this.uiSkin.okbtn.on("click",this,this.onSettingConfirm),this.uiSkin.shareBtn.on("click",this,this.onShare),this.uiSkin.layoutCost.text=null!=this.orderdata.installationFee&&""!=this.orderdata.installationFee?this.orderdata.installationFee:"0",this.uiSkin.designCost.text=null!=this.orderdata.designFee&&""!=this.orderdata.designFee?this.orderdata.designFee:"0",this.uiSkin.deliveryCost.text=null!=this.orderdata.deliveryFee&&""!=this.orderdata.designFee?this.orderdata.deliveryFee:"0",this.uiSkin.otherCost.text=null!=this.orderdata.otherFee&&""!=this.orderdata.otherFee?this.orderdata.otherFee:"0",this.uiSkin.sellPrice.text=null!=this.orderdata.totalSalesPrice&&""!=this.orderdata.totalSalesPrice?this.orderdata.totalSalesPrice:"0",Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("UPDATE_ORDER_PRICE",this,this.updateSellPrice),this.updateSellPrice()},e.onShare=function(){Ti.window.open("about:self","_blank").location.href=Ti.window.location+"?orderID="+this.param.id},e.updateOrderList=function(t){t.setData(t.dataSource)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.sortProduct=function(t,i){return parseInt(t.itemSeq)>parseInt(i.itemSeq)?1:-1},e.refrshVbox=function(){this.uiSkin.orderbox.refresh(),this.uiSkin.orderbox.size(this.uiSkin.orderbox.width,this.uiSkin.orderbox.getBounds().height)},e.updateSellPrice=function(){for(var t=0,i=this.uiSkin.orderbox.array,e=0;e<i.length;e++)t+=null!=i[e].totalSalesPrice&&""!=i[e].totalSalesPrice?parseFloat(this.uiSkin.orderbox.array[e].totalSalesPrice):Number(i[e].itemPrice)*Number(i[e].itemNumber);var n=parseFloat(this.uiSkin.layoutCost.text),s=parseFloat(this.uiSkin.designCost.text),r=parseFloat(this.uiSkin.deliveryCost.text),a=parseFloat(this.uiSkin.otherCost.text);this.uiSkin.sellPrice.text=(t+n+r+s+a).toFixed(2)},e.onSettingConfirm=function(){if(""==this.uiSkin.layoutCost.text||""==this.uiSkin.designCost.text||""==this.uiSkin.deliveryCost.text||""==this.uiSkin.otherCost.text)return E.showAlert("价格不能为空，请输入正确的价格费用。"),void 0;this.orderdata.totalSalesPrice=this.uiSkin.sellPrice.text,this.orderdata.installationFee=parseFloat(this.uiSkin.layoutCost.text).toFixed(2),this.orderdata.designFee=parseFloat(this.uiSkin.designCost.text).toFixed(2),this.orderdata.deliveryFee=parseFloat(this.uiSkin.deliveryCost.text).toFixed(2),this.orderdata.otherFee=parseFloat(this.uiSkin.otherCost.text).toFixed(2);var t=[this.orderdata];W.instance.Request(W.httpUrl+"order/updateSalesPrice?",this,this.onUpdateOrderBack,JSON.stringify(t),"post")},e.onUpdateOrderBack=function(t){var i=JSON.parse(t);"0"==i.code&&(Ln.instance.event("DELETE_ORDER_BACK"),this.onCloseView())},e.onCloseView=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("ORDER_PRICE_SETTING_PANEL"),Ln.instance.off("UPDATE_ORDER_PRICE",this,this.updateSellPrice)},i}(Dn),Dr=function(t){function i(){this.uiSkin=null,this.province=null,this.param=null,this.phonecode="",this.coutdown=60,this.curStep=0,this.proid="",this.cityid="",this.areaid="",this.townid="",this.hasInit=!1,this.companyareaId=null,this.thirdid=null,this.uuId="",this.inputListUser=null,this.inputListCompany=null,this.curInputIndex=0,this.serviceTxt="尊敬的用户：\n   shortName是专业的为广告及相关产品委托生产、买卖、交付等提供服务的网站（下称“本网站”），为广告相关产品及其他产品的委托生产、买卖、交付等的双方用户提供居间服务及其他相关服务，在此特别提醒用户认真阅读本《服务协议》(下称“本协议”)中各个条款，并确认是否同意本协议条款。用户的使用行为将视为对本协议的接受，并同意接受本协议各项条款的约束。\n\n一、本协议条款的确认\n   1、本网站的各项服务的所有权归companyName。本协议内容包括协议正文及所有本网站已经发布或将来可能发布的各类规则。所有规则为协议不可分割的一部分，与本协议正文具有同等法律效力。以任何方式进入本网站即表示用户已充分阅读、理解并同意接受本协议的条款。\n   2、本网站有权根据业务需要酌情修订本协议，并以网站公告或直接更新的形式进行更新，不再单独通知。经修订的协议条款一经公布，即产生效力。如用户不同意相关修订，可以选择停止使用。如用户继续使用本网站，则将视为用户已接受经修订的协议条款。\n\n二、服务要求及保密\n1、用户必须符合下列要求：\n （1）应当是具备完全民事权利能力和与所从事的民事行为相适应的行为能力的自然人、法人或其他组织；\n （2）自行配备上网的所需设备，并自行负担上网及其他与此服务有关的电话、网络等费用；\n （3）按本网站要求完成注册，保证向本网站提供的任何资料、注册信息的真实性、正确性及完整性，保证本网站可以通过上述联系方式与用户进行联系；当上述资料发生变更时，及时更新用户资料；\n （4）账号使用权仅属于初始注册人，禁止赠与、借用、租用、转让或售卖，否则，本网站有权收回账号；\n （5）用户保证各项行为符合各项法律、法规、政策规定，以及本网站各项协议等的要求；\n （6）用户为委托方或买方的，保证遵守印刷、出版等行业的法律、法规、政策规定，且保证要求制作的产品不会侵犯他人的知识产权；\n （7）用户为广告经营者的，应当在注册时验证广告经营资格；若后续资格有变动的，应及时变更登记信息。\n2、本网站对用户的隐私资料进行保护，承诺不会在未获得用户许可的情况下擅自将用户的个人资料信息出租或出售给任何第三方，但以下情况除外：\n （1）为完成用户与第三方交易； \n （2）用户同意让第三方共享资料；\n （3）用户同意公开其个人资料，享受为其提供的商品和服务；\n （4）根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露；\n （5）本网站发现用户违反了本网站服务条款或其它规定。\n   若本网站有合理理由怀疑用户资料信息为错误、不实、失效或不完整，本网站有权暂停或终止用户的帐号，并拒绝现在或将来使用本站网络服务的全部或部分，同时保留追索用户不当得利返还的权利。\n\n三、平台服务和地位 \n   本网站仅作为用户物色交易对象，就货物和服务的交易进行协商，以及获取各类与交易相关的居间服务的场所，不涉及用户间因交易而产生的法律关系及法律纠纷。本网站不能控制或保证交易信息的真实性、合法性、准确性，亦不能控制或保证交易所涉及的物品及服务的质量、安全或合法性，以及相关交易各方履行在贸易协议项下的各项义务的能力。但本网站会尽力协助各方履行各自义务。用户注册并选择本网站提供的服务，即视为认可由本网站为其提供居间服务及有关服务的内容，同时认可通过本网站指定的账号或支付平台由本网站监管、代付有关款项。\n\n四、结束服务\n   用户或本网站可随时根据实际情况中断一项或多项网络服务。本网站不需对任何个人或第三方负责而随时中断服务。结束用户服务后，用户使用网络服务的权利马上中止。从那时起，用户没有权利要求本网站，本网站也没有义务传送任何未处理的信息或提供未完成的服务给用户或第三方。用户在使用服务期间因使用服务与其他用户之间发生的关系，不因本协议的终止而终止。\n\n五、服务费用。 \n   本网站保留在征得用户同意后，收取服务费用的权利。用户因进行交易、获取有偿服务等发生的所有应纳税赋，由用户自行承担。\n\n六、广告展示\n   用户在本网站发表宣传资料或参与广告策划，展示商品或服务，都只是在相应的用户之间发生，本网站不承担任何责任。\n\n七、服务内容的所有权\n   本网站有关文字、软件、声音、图片、录象、图表、广告及其他文件的全部内容受版权、商标、和其它财产所有权属于本网站所有，受法律的保护。\n\n八、责任限制\n   如因不可抗力或其他本网站无法控制的原因使本网站无法正常运营的，本网站不承担责任。\n\n九、争议解决和管辖\n   本协议的订立、执行和解释及争议的解决均应适用中国法律。\n如用户与本网站发生任何争议，双方应尽力友好协商解决；协商不成时，任何一方均应向本网站所属公司住所地人民法院提起诉讼。\n",i.__super.call(this)}s(i,"script.login.RegisterCntrol",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.contractpanel.hScrollBarSkin="",this.uiSkin.contractpanel.vScrollBarSkin="",this.uiSkin.input_conpwd.maxChars=20,this.uiSkin.input_conpwd.type="password",this.uiSkin.input_phone.maxChars=11,this.uiSkin.input_phone.restrict="0-9",this.uiSkin.input_phonecode.maxChars=46,this.uiSkin.input_pwd.maxChars=20,this.uiSkin.nameInput.maxChars=20,this.uiSkin.applyJoinPanel.visible=!1,this.uiSkin.step1Panel.visible=!0,this.uiSkin.step2Panel.visible=!1,this.inputListUser=[this.uiSkin.input_phone,this.uiSkin.input_pwd,this.uiSkin.inputCode,this.uiSkin.input_phonecode],this.inputListCompany=[this.uiSkin.input_companyname,this.uiSkin.contactName,this.uiSkin.contactPhone,this.uiSkin.detail_addr];for(var i=0;i<this.inputListUser.length;i++)this.inputListUser[i].on("input",this,this.checkNextBtnState),this.inputListUser[i].on("keydown",this,this.onInputKeyDown,[this.inputListUser]),this.inputListUser[i].on("focus",this,this.onInputFocus,[i]),this.inputListCompany[i].on("keydown",this,this.onInputKeyDown,[this.inputListCompany]),this.inputListCompany[i].on("focus",this,this.onInputFocus,[i]);this.uiSkin.createAccountInput.maxChars=11,this.uiSkin.createAccountInput.restrict="0-9",this.uiSkin.codeValid.visible=!1,this.uiSkin.commentInput.maxChars=8,this.uiSkin.applyEnter.on("click",this,function(){t.uiSkin.applyJoinPanel.visible=!0}),this.uiSkin.closeJoin.on("click",this,function(){t.uiSkin.applyJoinPanel.visible=!1}),this.uiSkin.confirmJoin.on("click",this,this.onJoinCompany),this.checkNextBtnState(),this.uiSkin.inputCode.maxChars=8,this.uiSkin.sevicepro.leading=5;var n=e.loader.getRes("config.json?"+g.instance.configVersion),s=n.companyName,r=n.shortName;this.uiSkin.sevicepro.text=this.serviceTxt.replace("companyName",s).replace("shortName",r),this.uiSkin.txtpanel.vScrollBarSkin="",this.uiSkin.txtpanel.hScrollBarSkin="",this.uiSkin.provList.itemRender=Kl,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.cityList.itemRender=Kl,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.areaList.itemRender=Kl,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.townList.itemRender=Kl,this.uiSkin.townList.vScrollBarSkin="",this.uiSkin.townList.selectEnable=!0,this.uiSkin.townList.repeatX=1,this.uiSkin.townList.spaceY=2,this.uiSkin.townList.renderHandler=new c(this,this.updateCityList),this.uiSkin.townList.selectHandler=new c(this,this.selectTown),this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.btnSelTown.on("click",this,this.onShowTown),this.uiSkin.btnGetCode.on("click",this,this.onGetPhoneCode),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.townbox.visible=!1,this.uiSkin.txtRefresh.on("click",this,this.onRefreshVerify),this.uiSkin.gotoNext.on("click",this,this.onRegister),this.uiSkin.gotoFirst.on("click",this,this.onCloseScene),this.uiSkin.on("click",this,this.hideAddressPanel),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.updateStep(),null!=this.param&&2==this.param.step&&(this.uiSkin.contractpanel.visible=!1,this.gotoRegisterCompany()),Ti.window.uploadApp=this,this.uiSkin.okbtn.disabled=!0,this.uiSkin.agreebox.on("click",this,this.onAgreeService),this.uiSkin.okbtn.on("click",this,this.onReadService),this.uiSkin.applyBtn.on("click",this,this.onApplayCompanyRegister)},n.onInputKeyDown=function(t,i){9==i.keyCode&&(this.curInputIndex++,this.curInputIndex=this.curInputIndex%t.length,t[this.curInputIndex].focus=!0)},n.onInputFocus=function(t){this.curInputIndex=t,this.hideAddressPanel(null)},n.updateStep=function(){this.uiSkin.sencondStep.filters=0==this.curStep?[T.grayscaleFilter]:null},n.onReadService=function(){this.uiSkin.contractpanel.visible=!1;for(var t=T.getVerifyCodes(4),i=0;i<t.length;i++)this.uiSkin["code"+i].text=t[i];this.inputListUser[0].focus=!0},n.onAgreeService=function(){this.uiSkin.okbtn.disabled=!this.uiSkin.agreebox.selected},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onGetPhoneCode=function(){if(this.uiSkin.input_phone.text.length<11)return Ti.window.alert("请填写正确的手机号"),void 0;this.uiSkin.btnGetCode.disabled=!0;var t={mobileNumber:this.uiSkin.input_phone.text,smsToken:T.uuid()};this.uuId=t.smsToken,W.instance.Request(W.httpUrl+"sys/getMobileSmsCode?",this,this.onGetPhoneCodeBack,JSON.stringify(t),"post")},n.onGetPhoneCodeBack=function(t){if(!this.destroyed){var i=JSON.parse(t);this.coutdown=60,"0"==i.code?(this.phonecode=i.code,this.uiSkin.btnGetCode.label="60秒后重试",e.timer.loop(1e3,this,this.countdownCode)):this.uiSkin.btnGetCode.disabled=!1}},n.countdownCode=function(){this.coutdown--,this.coutdown>0?this.uiSkin.btnGetCode.label=this.coutdown+"秒后重试":(this.uiSkin.btnGetCode.disabled=!1,this.uiSkin.btnGetCode.label="获取验证码",e.timer.clear(this,this.countdownCode),this.uiSkin.codeValid.visible=!0)},n.onRefreshVerify=function(){for(var t=T.getVerifyCodes(4),i=0;i<t.length;i++)this.uiSkin["code"+i].text=t[i]},n.onCloseScene=function(){e.timer.clear(this,this.countdownCode),E.instance.closeView("VIEW_REGPANEL"),E.instance.openView("VIEW_lOGPANEL",!0),"undefined"!=typeof Ti.window.orientation&&g.instance.isLogin&&E.showAlert("注册成功！\n欢迎通过电脑访问www.ps.vip下单。"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.checkNextBtnState=function(){var t=!0;this.uiSkin.input_phone.text.length<11&&(t=!1),this.uiSkin.input_phone.text.length<11&&(t=!1),this.uiSkin.input_pwd.text.length<6&&(t=!1),""==this.uiSkin.input_phonecode.text&&(t=!1),this.uiSkin.inputCode.text.length<4&&(t=!1),this.uiSkin.gotoNext.disabled=!t},n.onRegister=function(){var t=this.uiSkin.inputCode.text.toLocaleLowerCase()==(this.uiSkin.code0.text+this.uiSkin.code1.text+this.uiSkin.code2.text+this.uiSkin.code3.text).toLocaleLowerCase();if(t){if(this.uiSkin.input_phone.text.length<11)return Ti.window.alert("请填写正确的手机号"),void 0;if(this.uiSkin.input_pwd.text.length<6)return Ti.window.alert("密码长度至少6位"),void 0;var i={};i.mobileNumber=this.uiSkin.input_phone.text,i.password=this.uiSkin.input_pwd.text,i.smsCode=this.uuId+"@"+this.uiSkin.input_phonecode.text,i.nickName=this.uiSkin.input_phone.text,W.instance.Request(W.httpUrl+"sys/registerUser?",this,this.onRegisterBack,JSON.stringify(i),"post")}else Ti.window.alert("图片验证码错误")},n.onRegisterBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(0==i.code){this.uiSkin.step1Panel.visible=!1,this.uiSkin.step2Panel.visible=!0,this.uiSkin.input_companyname.focus=!0,this.curStep=1,this.updateStep();var e={};e.mobileNumber=this.uiSkin.input_phone.text,e.auth=this.uiSkin.input_pwd.text,e.method=0,W.instance.Request(W.httpUrl+"sys/login?",this,this.onLoginBack,JSON.stringify(e),"post")}}},n.onLoginBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.resetData(),g.instance.isLogin=!0,g.instance.userAccount=i.data.mobileNumber,g.instance.accountType=i.data.userType,g.instance.privilege=i.data.userPermisson,g.instance.token=i.data.token,g.instance.userName=i.data.nickName,g.instance.step=i.data.step,g.instance.firstOrder=i.data.firstOrder,null!=i.data.token&&""!=i.data.token&&(g.instance.token=i.data.token,T.setLocalVar("userToken",g.instance.token)),Ln.instance.event("LOGIN_SUCESS",this.uiSkin.input_phone.text),T.setLocalVar("useraccount",this.uiSkin.input_phone.text),T.setLocalVar("userpwd",this.uiSkin.input_pwd.text),g.instance.loginTime=(new Date).getTime(),T.setLocalVar("loginTime",g.instance.loginTime),this.uiSkin.contactPhone.text=g.instance.userAccount,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initView,null,null))}},n.gotoRegisterCompany=function(){this.uiSkin.step1Panel.visible=!1,this.uiSkin.step2Panel.visible=!0,this.uiSkin.input_companyname.focus=!0,this.curStep=1,this.updateStep(),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initView,null,null)},n.onDestroy=function(){e.timer.clearAll(this)},n.hideAddressPanel=function(t){null!=t&&t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,this.uiSkin.mainpanel.vScrollBar.target=this.uiSkin.mainpanel)
},n.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,this.uiSkin.mainpanel.vScrollBar.target=null,t.stopPropagation()},n.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!1,this.uiSkin.mainpanel.vScrollBar.target=null,t.stopPropagation()},n.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,this.uiSkin.townbox.visible=!1,this.uiSkin.mainpanel.vScrollBar.target=null,t.stopPropagation()},n.onShowTown=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,this.uiSkin.townbox.visible=!0,this.uiSkin.mainpanel.vScrollBar.target=null,t.stopPropagation()},n.updateCityList=function(t){t.setData(t.dataSource)},n.initView=function(t){if(!this.destroyed){var i=JSON.parse(t);this.uiSkin.provList.array=i.data;var e=0;if(0==this.hasInit&&""!=this.proid)for(var n=0;n<this.uiSkin.provList.array.length;n++)if(this.uiSkin.provList.array[n].id==this.proid){e=n;break}this.selectProvince(e)}},n.selectProvince=function(t){var i=this;null!=this.uiSkin.provList.array[t]&&(null==this.uiSkin||this.uiSkin.destroyed||(this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,this.proid=this.province.id,W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.proid,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.citytxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh();var n=0;if(0==i.hasInit&&""!=i.cityid)for(var s=0;s<i.uiSkin.cityList.array.length;s++)if(i.uiSkin.cityList.array[s].id==i.cityid){n=s;break}i.uiSkin.citytxt.text=i.uiSkin.cityList.array[n].areaName,i.selectCity(n)}},null,null),Ln.instance.event("PAUSE_SCROLL_VIEW",!0)))},n.selectCity=function(t){var i=this;if(null!=this.uiSkin&&!this.uiSkin.destroyed){this.uiSkin.citybox.visible=!1,this.cityid=this.uiSkin.cityList.array[t].id;var e=this.cityid;W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+e,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.areatxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh();var n=0;if(0==i.hasInit&&""!=i.areaid)for(var s=0;s<i.uiSkin.areaList.array.length;s++)if(i.uiSkin.areaList.array[s].id==i.areaid){n=s;break}i.uiSkin.areatxt.text=i.uiSkin.areaList.array[n].areaName,i.selectArea(n)}},null,null),this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName,Ln.instance.event("PAUSE_SCROLL_VIEW",!0)}},n.selectArea=function(t){var i=this;if(null!=this.uiSkin&&!this.uiSkin.destroyed&&(Ln.instance.event("PAUSE_SCROLL_VIEW",!0),-1!=t)){this.areaid=this.uiSkin.areaList.array[t].id;var e=this.areaid;W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+e,this,function(t){if(null!=i.uiSkin&&null!=i.uiSkin.towntxt&&!i.uiSkin.destroyed){var e=JSON.parse(t);if(i.uiSkin.btnSelTown.visible=e.data.length>0,0==e.data.length)return i.companyareaId=i.areaid,void 0;i.uiSkin.townList.array=e.data,i.uiSkin.townList.refresh();var n=0;if(0==i.hasInit&&""!=i.townid)for(var s=0;s<i.uiSkin.townList.array.length;s++)if(i.uiSkin.townList.array[s].id==i.townid){n=s;break}i.uiSkin.towntxt.text=i.uiSkin.townList.array[n].areaName,i.companyareaId=i.uiSkin.townList.array[n].id}},null,null),this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1}},n.selectTown=function(t){Ln.instance.event("PAUSE_SCROLL_VIEW",!0),this.hasInit=!0,-1!=t&&(this.uiSkin.townbox.visible=!1,this.uiSkin.towntxt.text=this.uiSkin.townList.array[t].areaName,this.companyareaId=this.uiSkin.townList.array[t].id,this.townid=this.companyareaId)},n.onApplayCompanyRegister=function(){if(this.uiSkin.input_companyname.text.length<6&&E.showAlert("企业名称长度至少6位"),T.hasForbidenChars(this.uiSkin.input_companyname.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;if(""==this.uiSkin.contactName.text)return E.showAlert("请填写联系人"),void 0;if(T.hasForbidenChars(this.uiSkin.contactName.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;if(this.uiSkin.contactPhone.text.length<11)return Ti.window.alert("请填写正确的联系人手机号"),void 0;if(T.hasForbidenChars(this.uiSkin.detail_addr.text))return E.showAlert('请不要填写\\、*、/、#、"等特殊字符'),void 0;var t={};t.name=this.uiSkin.input_companyname.text,t.shortName=this.uiSkin.input_companyname.text.substr(0,6),t.regionId=this.companyareaId,t.addr=this.uiSkin.detail_addr.text,t.idCode=g.instance.userAccount;var i=this.uiSkin.province.text+" "+this.uiSkin.citytxt.text+" "+this.uiSkin.areatxt.text+" "+(this.uiSkin.btnSelTown.visible?this.uiSkin.towntxt.text:"");t.cnee=this.uiSkin.contactName.text,t.mobileNumber=this.uiSkin.contactPhone.text,t.region=this.companyareaId+"|"+this.areaid,t.regionName=i,W.instance.Request(W.httpUrl+"sys/registerOrg?",this,this.onSaveCompnayBack,JSON.stringify(t),"post")},n.onSaveCompnayBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(g.instance.firstOrder="1",g.instance.isLogin=!1,this.onCloseScene()):E.showAlert("公司注册失败，请检查信息是否填写正确")}},n.onJoinCompany=function(){if(this.uiSkin.createAccountInput.text.length<11)return E.showAlert("请输入正确的企业创建者账号"),void 0;if(""==this.uiSkin.commentInput.text)return E.showAlert("填写备注信息更容易通过申请"),void 0;var t={mobileNumber:this.uiSkin.createAccountInput.text,msg:this.uiSkin.commentInput.text};W.instance.Request(W.httpUrl+"sys/joinOrg?",this,this.onJoinOrganizeBack,JSON.stringify(t),"post"),this.uiSkin.applyJoinPanel.visible=!1},n.onJoinOrganizeBack=function(t){var i=JSON.parse(t);"0"==i.code&&(this.onCloseScene(),E.showAlert("申请成功，请等待管理者审核"))},i}(Dn),Ar=function(t){function i(){this.uiSkin=null,this.param=null,this.orderlist=null,this.mianvbox=0,this.requestnum=0,i.__super.call(this)}s(i,"script.lailiao.LailiaoOrderController",t);var e=i.prototype;return e.onStart=function(){k.instance.getDynamicDeliveryFeeCfg(),this.uiSkin=this.owner,this.uiSkin.title.text=K.orderName[k.instance.orderType]+"下单";var t=1,i=0;if(this.uiSkin.orderlistpanel.vScrollBarSkin="",this.orderlist=[],null!=k.instance.tempPicOrderItemVoList)for(var e=0;e<k.instance.tempPicOrderItemVoList.length;e++){var n=new kl(k.instance.tempPicOrderItemVoList[e]);this.uiSkin.ordervbox.addChild(n),t++,this.orderlist.push(n),i>0&&(this.uiSkin.ordervbox.height+=n.height+this.uiSkin.ordervbox.space),i++}var s;for(var r in H.instance.haselectPic)if(s=H.instance.haselectPic[r],"GRAY"==s.colorspace.toUpperCase()){var a=new V(s);a.indexNum=t++;var n=new kl(a);this.uiSkin.ordervbox.addChild(n),this.orderlist.push(n),i>0&&(this.uiSkin.ordervbox.height+=n.height+this.uiSkin.ordervbox.space),i++}this.uiSkin.productNum.text=this.orderlist.length.toString(),H.instance.haselectPic={},this.uiSkin.batchChange.on("click",this,this.onBatchChangeMaterial),this.uiSkin.selectAll.on("click",this,this.onSelectAll),this.uiSkin.batchDelete.on("click",this,this.onBatchDelete),this.uiSkin.goToNext.on("click",this,this.onOrderPaint),this.uiSkin.btnaddpic.on("click",this,this.onShowSelectPic),this.uiSkin.addpic.on("click",this,this.addLailiaoItem),Ln.instance.on("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.on("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.on("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.on("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.on("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.on("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.resetOrderInfo(),this.updateLblPos(g.instance.shrinkState),(null==g.instance.company||""==g.instance.company)&&W.instance.Request(W.httpUrl+"org/getInfo",this,this.getCompanyInfo,null,null)},e.addLailiaoItem=function(){var t=new kn({},1,K.orderName[k.instance.orderType]+"产品"),i=new V(t,1),e=this.uiSkin.ordervbox.numChildren;e++;if(this.orderlist.length+1>100)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0;this.uiSkin.ordervbox.numChildren>0&&(this.uiSkin.ordervbox.height+=this.uiSkin.ordervbox.space),i.indexNum=e;var n=new kl(i);this.uiSkin.ordervbox.height+=n.height,this.uiSkin.ordervbox.addChild(n),this.orderlist.push(n);for(var s=0;s<this.uiSkin.ordervbox.numChildren;s++)0==s?this.uiSkin.ordervbox.getChildAt(0).y=0:this.uiSkin.ordervbox.getChildAt(s).y=this.uiSkin.ordervbox.getChildAt(s-1).y+this.uiSkin.ordervbox.getChildAt(s-1).height+this.uiSkin.ordervbox.space;this.uiSkin.ordervbox.refresh(),this.resetOrderInfo(),this.uiSkin.productNum.text=this.orderlist.length.toString()},e.updateLblPos=function(t){0==t?(this.uiSkin.opeBox.x=1456,this.uiSkin.pricelbl.x=1364,this.uiSkin.unitpricelbl.x=1273):(this.uiSkin.opeBox.x=1556,this.uiSkin.pricelbl.x=1468,this.uiSkin.unitpricelbl.x=1373)},e.resetOrderInfo=function(){if(!this.destroyed){var t=0,i=0;if(this.orderlist.length>0){var e={};k.instance.calculateProductDiscount(this.orderlist);for(var n=0;n<this.orderlist.length;n++){var s=this.orderlist[n];s.updateProductPrice();var r;if(null==s.ordervo.orderData||e.hasOwnProperty(s.ordervo.manufacturer_code))r=e[s.ordervo.manufacturer_code];else{r={},r.order_sn=k.getOrderSn(),r.client_code=g.instance.clientCode,r.consignee=g.instance.companyShort+"#"+k.instance.selectAddress.receiverName,r.tel=k.instance.selectAddress.phone,r.address=k.instance.selectAddress.proCityArea,r.order_amountStr=0,r.shipping_feeStr="0",r.money_paidStr="0",r.discountStr="1",r.pay_timeStr=T.formatFullDateTime(new Date),r.delivery_dateStr=T.formatFullDateTime(new Date,!1),r.manufacturer_code=s.ordervo.manufacturer_code,r.manufacturer_name=s.ordervo.manufacturer_name,r.contact_phone=k.instance.getContactPhone(s.ordervo.manufacturer_code);k.instance.selectDelivery&&(r.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),r.orderItemList=[],e[s.ordervo.manufacturer_code]=r}null!=this.orderlist[n].ordervo.orderData&&(r.order_amountStr+=this.orderlist[n].getPrice(),i+=parseFloat(this.orderlist[n].getNoDiscountPrice().toFixed(1)),this.orderlist[n].ordervo.orderData.itemSeq=n+1,r.orderItemList.push(this.orderlist[n].ordervo.orderData))}var a;for(var o in e)a=e[o],a.order_amountStr<2&&(a.order_amountStr=2),t+=Number(a.order_amountStr.toFixed(2))}var h=parseFloat(i.toFixed(1))-parseFloat(t.toFixed(1));0>h&&(h=0),k.instance.rawPrice=i.toFixed(1);var l=1;t=parseFloat(t.toFixed(1)),t*=l,this.uiSkin.textTotalPrice.text=i.toFixed(1),this.uiSkin.textDiscount.text=h.toFixed(1),this.uiSkin.textPayPrice.text=t.toFixed(1),g.instance.isHidePrice()&&(this.uiSkin.textTotalPrice.text="***",this.uiSkin.textDiscount.text="***",this.uiSkin.textPayPrice.text="***")}},e.onDeletePicOrder=function(t){var i=t.ordervo;this.orderlist.indexOf(t)>=0&&this.orderlist.splice(this.orderlist.indexOf(t),1);for(var e=0;e<this.uiSkin.ordervbox.numChildren;e++){var n=this.uiSkin.ordervbox.getChildAt(e).ordervo;n.indexNum>i.indexNum&&n.indexNum--,this.uiSkin.ordervbox.getChildAt(e).updateIndex()}this.uiSkin.ordervbox.removeChild(t),this.uiSkin.ordervbox.height-t.height-this.uiSkin.ordervbox.space<0?this.uiSkin.ordervbox.height=0:this.uiSkin.ordervbox.height-=t.height+this.uiSkin.ordervbox.space,0==this.uiSkin.ordervbox.numChildren&&(this.uiSkin.ordervbox.height=0),this.uiSkin.ordervbox.size(this.uiSkin.ordervbox.width,0),this.uiSkin.ordervbox.refresh(),this.resetOrderInfo(),this.uiSkin.productNum.text=this.orderlist.length.toString()},e.onSelectAll=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected=this.uiSkin.selectAll.selected},e.onBatchDelete=function(){for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&(this.onDeletePicOrder(this.orderlist[t]),t--)},e.onBatchChangeMaterial=function(){if(null==k.instance.selectAddress)return E.showAlert("请先选择收货地址"),void 0;k.instance.batchChangeMatItems=[];for(var t=0;t<this.orderlist.length;t++)this.orderlist[t].checkSel.selected&&k.instance.batchChangeMatItems.push(this.orderlist[t]);return k.instance.batchChangeMatItems.length<=0?(E.showAlert("请至少选择一个需要更换的产品"),void 0):(k.instance.curSelectMat=null,E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL"),k.instance.curSelectOrderItem=null,void 0)},e.changeProductNum=function(t){for(var i=0;i<this.orderlist.length;i++)this.orderlist[i].checkSel.selected&&(this.orderlist[i].inputnum.text=t,this.orderlist[i].onNumChange())},e.onAdjustHeight=function(t){this.uiSkin.ordervbox.height+=t},e.onPaySucess=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.onCancelPay=function(){E.instance.openView("VIEW_FIRST_PAGE",!0)},e.getCompanyInfo=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&(g.instance.company=i.data.name,g.instance.companyShort=i.data.shortName,g.instance.founderPhone=i.data.founderMobileNumber,g.instance.isVipCompany="1"==i.vip)}},e.onOrderPaint=function(){var t=this;if("NaN"==this.uiSkin.textPayPrice.text)return E.showAlert("价格异常，请检查工艺或联系客服"),void 0;if(null==g.instance.companyShort)return W.instance.Request(W.httpUrl+"org/getInfo",this,function(i){if(!this.destroyed){var e=JSON.parse(i);"0"==e.code&&(g.instance.company=e.data.name,g.instance.companyShort=e.data.shortName,g.instance.founderPhone=e.data.founderMobileNumber),t.onOrderPaint()}},null,null),void 0;var i=this.getOrderData();if(null!=i){for(var e=[],n=0;n<i.length;n++)e=e.concat(i[n].orderItemList);if(e.length>100)return E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"下单图片不能超过100个，请分批下单。"}),void 0;k.instance.finalOrderData=i;var s={count:e.length.toString()};W.instance.Request(W.httpUrl+"order/reserveItemSn?",this,this.ongetUidsBack,JSON.stringify(s),"post")}},e.ongetUidsBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=i.data,n=[],s=0;s<k.instance.finalOrderData.length;s++)n=n.concat(k.instance.finalOrderData[s].orderItemList);for(var s=0;s<e.length;s++)n[s].orderItemSn=e[s];this.initPackage(n)}}},e.initPackage=function(t){k.instance.addPackage(k.instance.selectAddress,t);var i=k.instance.finalOrderData;this.requestnum=0;for(var e=0;e<i.length;e++){var n=T.getLocalVar("timePrefer","2");parseInt(n)<2&&(n="2"),k.instance.curTimePrefer=parseInt(n);var s=k.instance.getOrderCapcaityData(i[e],k.instance.curTimePrefer);console.log("产能数据:"+s),W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,s,"post")}},e.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i.hasOwnProperty("status")||i.hasOwnProperty("code"))E.showAlert(i.message);else{for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}if(this.requestnum++,this.requestnum==k.instance.finalOrderData.length){if(null==k.instance.packageList||k.instance.packageList.length<=0)return;if(!k.instance.setVipPackageData())return E.showAlert("打包异常，请返回上一步重新打包"),void 0;for(var c=[],n=0;n<k.instance.finalOrderData.length;n++)c=c.concat(k.instance.finalOrderData[n].orderItemList);Ln.instance.event("SHOW_CONTENT_PANEL",[gh,0,{orders:c,delaypay:!1}]),k.instance.packageList=[]}else U.instance.showWaitingView()}}},e.getOrderData=function(){if(this.orderlist.length<=0)return E.showAlert("未选择下单图片"),null;for(var t={},i=0;i<this.orderlist.length;i++){var e=this.orderlist[i];if(!e.checkCanOrder())return null;var n;if(t.hasOwnProperty(e.ordervo.manufacturer_code))n=t[e.ordervo.manufacturer_code];else{n={},n.orderSn=k.getOrderSn(),n.clientCode=g.instance.clientCode,n.userCode=g.instance.userAccount,n.userOrgCode=g.instance.founderPhone,n.customerId=k.instance.selectAddress.customerId.toString(),n.addressId=k.instance.selectAddress.zoneid,n.clientVersion=g.instance.version,n.orderAmount=0,n.shippingFee="0",n.moneyPaid="0",n.discount="1",n.checkCapacity=!0,n.payTime=T.formatFullDateTime(new Date),n.deliveryDate=T.formatFullDateTime(new Date,!1),n.manufacturerCode=e.ordervo.manufacturer_code,n.manufacturerName=e.ordervo.manufacturer_name,n.contact_phone=k.instance.getContactPhone(e.ordervo.manufacturer_code);k.instance.selectDelivery&&(n.logistic_code=k.instance.selectDelivery.deliverynet_code+"#"+k.instance.selectDelivery.delivery_name),n.orderItemList=[],t[e.ordervo.manufacturer_code]=n}if(null==this.orderlist[i].ordervo.orderData)return E.showAlert("有图片未选择材料工艺"),null;n.orderAmount+=this.orderlist[i].getPrice(),this.orderlist[i].ordervo.orderData.itemSeq=i+1,n.orderItemList.push(this.orderlist[i].ordervo.orderData)}var s,r=[];for(var a in t){if(s=t[a],s.order_amountStr<2){s.orderAmount=2;var o=s.orderItemList;if(o.length>0)for(var h=Number((2/o.length).toFixed(2)),l=2-h*o.length,c=0;c<o.length;c++)o[c].itemPrice=0==c?((h+l)/o[c].itemNumber).toFixed(2):(h/o[c].itemNumber).toFixed(2)}s.moneyPaid=s.orderAmount.toFixed(1),s.orderAmount=s.orderAmount.toFixed(1),r.push(s)}var u=1,d=[];for(i=1;u>i;i++)for(var c=0;c<r.length;c++){var _=JSON.parse(JSON.stringify(r[c]));d.push(_)}return d.length>0&&(r=r.concat(d)),r},e.onShowSelectPic=function(){k.instance.tempPicOrderItemVoList=[];for(var t=0;t<this.orderlist.length;t++)k.instance.tempPicOrderItemVoList.push(this.orderlist[t].ordervo);Ln.instance.event("SHOW_CONTENT_PANEL",[Ro,0])},e.onDestroy=function(){Ln.instance.off("DELETE_PIC_ORDER",this,this.onDeletePicOrder),Ln.instance.off("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight),Ln.instance.off("UPDATE_ORDER_ITEM_TECH",this,this.resetOrderInfo),Ln.instance.off("BATCH_CHANGE_PRODUCT_NUM",this,this.changeProductNum),Ln.instance.off("PAY_ORDER_SUCESS",this,this.onPaySucess),Ln.instance.off("CANCEL_PAY_ORDER",this,this.onCancelPay),Ln.instance.off("FIRST_PAGE_SHRINK",this,this.updateLblPos)},i}(Dn),Lr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.usercenter.DeliveryQueryController",t);var e=i.prototype;return e.onStart=function(){if(this.uiSkin=this.owner,this.uiSkin.packageList.vScrollBarSkin="",this.uiSkin.packageList.itemRender=pc,this.uiSkin.packageList.repeatX=1,this.uiSkin.packageList.spaceY=0,this.uiSkin.packageList.renderHandler=new c(this,this.updatePackageList),this.uiSkin.packageList.selectEnable=!1,null!=this.param)for(var t=0;t<this.param.length;t++)this.param[t].packageName="包裹-"+this.param[t].deliverySn;this.uiSkin.packageList.array=this.param,this.uiSkin.closebtn.on("click",this,this.onCloseView),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.onCloseView=function(){E.instance.closeView("DELIVERY_PACKAGE_PANEL")},e.updatePackageList=function(t){t.setData(t.dataSource)},e.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),kr=function(t){function i(){this.uiSkin=null,this.input=null,this.del=null,i.__super.call(this)}s(i,"script.prefabScript.CmykInputControl",t);var n=i.prototype;return n.onEnable=function(){var t=this;this.uiSkin=this.owner,this.input=this.uiSkin.getChildByName("inputTxt"),this.del=this.uiSkin.getChildByName("delBtn"),this.del.on("click",this,function(i){t.input.editable&&(t.input.text="",i.stopPropagation(),t.input.focus=!0)}),this.del.visible=!1,this.input.on("blur",this,this.onFocusOut),this.input.on("focus",this,this.onFocus),this.input.on("input",this,function(){t.del.visible=""!=t.input.text})},n.showError=function(t){this.uiSkin.getChildByName("errorlbl").visible=!0,this.uiSkin.getChildByName("errorlbl").text=t},n.onFocus=function(){this.uiSkin.skin="commers/inputfocus.png",this.del.visible=""!=this.input.text},n.onFocusOut=function(){var t=this;e.timer.once(500,this,function(){null!=t.del&&(t.del.visible=!1)}),this.uiSkin.skin="commers/inputbg.png"},i}(Dn),Tr=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.usercenter.AddressMgrControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.addlist.itemRender=xl,this.uiSkin.addressTab.visible=!1,this.uiSkin.groupTab.visible=!1,this.uiSkin.groupBox.visible=!1,this.uiSkin.customerBox.visible=!1,this.uiSkin.addlist.repeatX=1,this.uiSkin.addlist.spaceY=0,this.uiSkin.addlist.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addlist.selectEnable=!1;var t=[];this.uiSkin.addlist.array=t,this.uiSkin.defaultDelivery.visible=!1,this.uiSkin.btnaddAddress.on("click",this,this.onClickAdd),W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null),this.uiSkin.numAddress.text="已经保存"+g.instance.addressList.length+"条地址",this.uiSkin.addlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.addlist.on("mouseout",this,this.resumeParentScroll),Ln.instance.on("UPDATE_MYADDRESS_LIST",this,this.updateList)},e.pauseParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!1)},e.resumeParentScroll=function(){Ln.instance.event("PAUSE_SCROLL_VIEW",!0)},e.updateList=function(){W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null)},e.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){g.instance.initMyAddress(i.data.expressList),g.instance.defaultAddId=i.data.defaultId;var e=g.instance.addressList;e.sort(this.compareAddress),this.uiSkin.addlist.array=g.instance.addressList}}},e.compareAddress=function(t,i){return parseInt(t.id)<parseInt(i.id)?-1:1},e.onClickAdd=function(){g.instance.canAddNewAddress()?E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:"org/express/add?"}):E.showAlert("有地址在等待审核状态，禁止添加新地址，你可删除待审核地址或等待审核通过后重新添加")},e.updateAddressList=function(t){t.setData(t.dataSource)},e.onDestroy=function(){Ln.instance.off("UPDATE_MYADDRESS_LIST",this,this.updateList)},i}(Dn),Rr=function(t){function i(){this.uiSkin=null,this.param=null,this.caller=null,this.callBack=null,i.__super.call(this)}s(i,"script.picUpload.SetRelatedConfirmContoller",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.uiSkin.mainview.scaleX=.2,this.uiSkin.mainview.scaleY=.2,Ni.to(this.uiSkin.mainview,{scaleX:1,scaleY:1},300,dn.backOut);var i=this.param[0],n=this.param[1],s=this.param[2];this.caller=this.param[3],this.callBack=this.param[4],i.picWidth>i.picHeight?(this.uiSkin.originPic.width=180,this.uiSkin.originPic.height=180/i.picWidth*i.picHeight,this.uiSkin.relatedPic.width=this.uiSkin.originPic.width,this.uiSkin.relatedPic.height=this.uiSkin.originPic.height):(this.uiSkin.originPic.height=180,this.uiSkin.originPic.width=180/i.picHeight*i.picWidth,this.uiSkin.relatedPic.width=this.uiSkin.originPic.width,this.uiSkin.relatedPic.height=this.uiSkin.originPic.height),this.uiSkin.originPic.skin=W.smallerrPicUrl+i.fid+".jpg",this.uiSkin.relatedPic.skin=W.smallerrPicUrl+n.fid+".jpg",this.uiSkin.relatename.text=["异形","反面","局部铺白"][s],this.uiSkin.msgtxt.text="是否关联"+["异形","反面","局部铺白"][s]+"图形？",this.uiSkin.closebtn.on("click",this,function(){E.instance.closeView("VIEW_SET_RELATED_CONFIRM_PANEL")}),this.uiSkin.okbtn.on("click",this,function(){null!=t.caller&&null!=t.callBack&&t.callBack.call(t.caller,!0),E.instance.closeView("VIEW_SET_RELATED_CONFIRM_PANEL")}),this.uiSkin.cancelbtn.on("click",this,function(){null!=t.caller&&null!=t.callBack&&t.callBack.call(t.caller,!1),E.instance.closeView("VIEW_SET_RELATED_CONFIRM_PANEL")}),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.mainview.y=(this.uiSkin.height-this.uiSkin.mainview.height)/2+this.uiSkin.mainview.height/2,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,this.uiSkin.mainview.y=(this.uiSkin.height-this.uiSkin.mainview.height)/2+this.uiSkin.mainview.height/2},n.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),wr=function(t){function i(){this.uiSkin=null,this.tempaddress=null,this.customer=null,this.param=null,i.__super.call(this)}s(i,"script.order.SelectAddressControl",t);var n=i.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.customer=this.param,this.uiSkin.curCustomName.text=null!=this.customer&&"0"!=this.customer.id?this.customer.customerName+"("+m.PAY_TYPE_NAME[this.customer.defaultPayment-1]+")":g.instance.company,this.uiSkin.list_address.itemRender=Wl,this.uiSkin.list_address.vScrollBarSkin="",this.uiSkin.list_address.selectEnable=!0,this.uiSkin.list_address.spaceY=2,this.uiSkin.list_address.renderHandler=new c(this,this.updateAddressItem),this.uiSkin.list_address.selectHandler=new c(this,this.onSlecteAddress),this.uiSkin.curCustomName.editable=!1,this.uiSkin.customListPanel.visible=!1,this.uiSkin.showCustomList.on("click",this,function(){t.uiSkin.customListPanel.visible=!t.uiSkin.customListPanel.visible}),this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmSelectAddress),this.uiSkin.btnadd.on("click",this,this.onShowAddAdress),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.inputsearch.on("input",this,this.onSearchAddress),this.uiSkin.list_address.array=g.instance.passedAddress,this.uiSkin.closebtn.on("click",this,this.onCloseView),null==this.customer||"0"==this.customer.id?0==g.instance.passedAddress.length&&W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null):this.updateCustomeList(),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.tempaddress=k.instance.selectAddress,e.timer.once(10,null,function(){for(var i=t.uiSkin.list_address.cells,e=0;e<i.length;e++)i[e].ShowSelected=i[e].address==k.instance.selectAddress}),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),Ln.instance.on("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.on("SELECT_CUSTOMER",this,this.onSelectCustomer)},n.startDragPanel=function(t){t.target!=this.uiSkin.list_address.scrollBar.slider.bar&&(this.uiSkin.dragImg.parent.startDrag(),t.stopPropagation())},n.stopDragPanel=function(){this.uiSkin.dragImg.parent.stopDrag()},n.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code?(g.instance.initMyAddress(i.data.expressList),g.instance.defaultAddId=i.data.defaultId,this.uiSkin.list_address.array=g.instance.passedAddress):("205"==i.code||"404"==i.code)&&E.instance.openView("VIEW_USERCENTER",!0)}},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.updateList=function(){var t=this;null==this.customer||"0"==this.customer.id?(this.uiSkin.list_address.refresh(),e.timer.once(10,null,function(){for(var i=t.uiSkin.list_address.cells,e=0;e<i.length;e++)i[e].ShowSelected=i[e].address==t.tempaddress})):this.updateCustomeList()},n.onShowAddAdress=function(){null==this.customer||"0"==this.customer.id?g.instance.canAddNewAddress()?E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:"org/express/add?"}):E.showAlert("有地址在等待审核状态，禁止添加新地址，你可删除待审核地址或等待审核通过后重新添加"):E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:W.addCustomerAddress,customer:this.customer})},n.onSearchAddress=function(){if(""==this.uiSkin.inputsearch.text)return this.uiSkin.list_address.array=g.instance.passedAddress,void 0;for(var t=[],i=0;i<g.instance.passedAddress.length;i++)g.instance.passedAddress[i].addressDetail.indexOf(this.uiSkin.inputsearch.text)>=0&&t.push(g.instance.passedAddress[i]);this.uiSkin.list_address.array=t},n.onSlecteAddress=function(t){var i=this;this.tempaddress=this.uiSkin.list_address.array[t],e.timer.frameOnce(1,this,function(){var e;for(var n in i.uiSkin.list_address.cells)e=i.uiSkin.list_address.cells[n],e.ShowSelected=e.address==i.uiSkin.list_address.array[t]})},n.updateAddressItem=function(t){t.setData(t.dataSource)},n.onConfirmSelectAddress=function(){null!=this.tempaddress&&(k.instance.selectAddress=this.tempaddress,Ln.instance.event("SELECT_ORDER_ADDRESS",this.customer)),this.onCloseView()},n.onSelectCustomer=function(t){(null==this.customer||this.customer.id!=t.id)&&(this.tempaddress=null,this.uiSkin.list_address.selectedIndex=-1,this.customer=t,this.uiSkin.curCustomName.text=t.customerName+"("+m.PAY_TYPE_NAME[t.defaultPayment-1]+")","0"==this.customer.id?0==g.instance.passedAddress.length?W.instance.Request(W.httpUrl+"org/express/list?",this,this.getMyAddressBack,"page=1",null,null):this.uiSkin.list_address.array=g.instance.passedAddress:this.updateCustomeList())},n.updateCustomeList=function(){W.instance.Request(W.httpUrl+W.listCustomerAddress+"customerId="+this.customer.id,this,this.getCustomerAddressBack,null,null,null)},n.getCustomerAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new f(i.data.expressList[n])),e[n].customerId=this.customer.id,e[n].customerName=this.customer.customerName,e[n].defaultPayType=this.customer.defaultPayment;this.uiSkin.list_address.array=e}}},n.onCloseView=function(){E.instance.closeView("VIEW_SELECT_ADDRESS")},n.onDestroy=function(){Ln.instance.off("UPDATE_MYADDRESS_LIST",this,this.updateList),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("SELECT_CUSTOMER",this,this.onSelectCustomer)},i}(Dn),Or=function(t){function i(){this.uiSkin=null,this.param=null,this.orderDatas=null,this.requestnum=0,i.__super.call(this)}s(i,"script.order.PackageVipController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.packagelist.itemRender=hc,this.uiSkin.packagelist.repeatY=1,this.uiSkin.packagelist.spaceY=1,this.uiSkin.packagelist.renderHandler=new c(this,this.updatePackageList),this.uiSkin.packagelist.selectEnable=!1,this.uiSkin.packagelist.hScrollBarSkin="",this.uiSkin.packagelist.array=new Array(18),this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.mainpanel.hScrollBar.mouseWheelEnable=!1,this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.initProductList(),k.instance.addPackage(k.instance.selectAddress,this.orderDatas),this.uiSkin.packagelist.array=k.instance.packageList,this.uiSkin.curPackgaeNum.text=k.instance.packageList.length+"",this.uiSkin.packagelist.height=140*this.orderDatas.length+110;var t=T.getLocalVar("timePrefer","2");parseInt(t)<2&&(t="2"),this.uiSkin.timepreferRdo.selectedIndex=parseInt(t)-2,this.uiSkin.packagelist.on("mouseover",this,this.pauseMainScroll),this.uiSkin.packagelist.on("mouseout",this,this.resumeMainScroll),this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.okbtn.on("click",this,this.onConfirmPackage),this.uiSkin.addpackbtn.on("click",this,this.onShowAddress),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.on("UPDATE_PACKAGE_ORDER_ITEM_COUNT",this,this.updatePackCount),Ln.instance.on("SELECT_PACK_ADDRESS_OK",this,this.onaddPackage),Ln.instance.on("DELETE_PACKAGE_ITEM",this,this.onDeletePackageItem)
},e.initProductList=function(){this.orderDatas=this.param;for(var t=0;t<this.orderDatas.length;t++){var i=[];i.push(this.orderDatas[t].itemNumber),this.orderDatas[t].numlist=i;var e=new oo;e.setOrderData(this.orderDatas[t]),this.uiSkin.productbox.addChild(e)}this.uiSkin.productNum.text=this.orderDatas.length+"",this.uiSkin.textTotalPrice.text=k.instance.rawPrice;for(var n=0,t=0;t<this.orderDatas.length;t++){var s=Number(this.orderDatas[t].itemPrice)*Number(this.orderDatas[t].itemNumber);s=parseFloat(s.toFixed(1)),n+=s}this.uiSkin.textDiscount.text=(parseFloat(k.instance.rawPrice)-n).toFixed(1),this.uiSkin.textPayPrice.text=n.toFixed(1)+"元"},e.onaddPackage=function(t){for(var i=0;i<t.length;i++)k.instance.hasExistAddress(t[i].id)||k.instance.addPackage(t[i],this.orderDatas);this.uiSkin.packagelist.array=k.instance.packageList,this.uiSkin.curPackgaeNum.text=k.instance.packageList.length+""},e.updatePackCount=function(){for(var t=0;t<this.uiSkin.packagelist.cells.length;t++)this.uiSkin.packagelist.cells[t].updateNum()},e.onDeletePackageItem=function(){this.uiSkin.packagelist.array=k.instance.packageList,this.uiSkin.curPackgaeNum.text=k.instance.packageList.length+""},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},e.updatePackageList=function(t){t.setData(t.dataSource)},e.pauseMainScroll=function(){this.uiSkin.packagepanel.vScrollBar.target=null},e.resumeMainScroll=function(){this.uiSkin.packagepanel.vScrollBar.target=this.uiSkin.packagepanel},e.onShowAddress=function(){E.instance.openView("VIEW_SELECT_PACK_ADDRESS_PANEL",!1,k.instance.curOrderCustomer)},e.onConfirmPackage=function(){var t=k.instance.finalOrderData;this.requestnum=0;for(var i=0;i<t.length;i++){k.instance.curTimePrefer=this.uiSkin.timepreferRdo.selectedIndex+2;var e=k.instance.getOrderCapcaityData(t[i],this.uiSkin.timepreferRdo.selectedIndex+2);W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,e,"post")}this.uiSkin.okbtn.disabled=!0},e.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(i.hasOwnProperty("status")||i.hasOwnProperty("code"))this.uiSkin.okbtn.disabled=!1,E.showAlert(i.message);else{for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}if(this.requestnum++,this.requestnum==k.instance.finalOrderData.length){if(null==k.instance.packageList||k.instance.packageList.length<=0)return;if(!k.instance.setVipPackageData())return this.uiSkin.okbtn.disabled=!1,void 0;for(var c=[],n=0;n<k.instance.finalOrderData.length;n++)c=c.concat(k.instance.finalOrderData[n].orderItemList);Ln.instance.event("SHOW_CONTENT_PANEL",[gh,0,{orders:c,delaypay:!1}]),k.instance.packageList=[]}else U.instance.showWaitingView()}}},e.onCloseView=function(){k.instance.packageList=[],E.instance.setViewVisible("VIEW_PAINT_ORDER",!0)},e.onDestroy=function(){Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("UPDATE_PACKAGE_ORDER_ITEM_COUNT",this,this.updatePackCount),Ln.instance.off("SELECT_PACK_ADDRESS_OK",this,this.onaddPackage),Ln.instance.off("DELETE_PACKAGE_ITEM",this,this.onDeletePackageItem)},i}(Dn),Mr=function(t){function i(){this.uiSkin=null,this.fileListData=null,this.allFileData=null,this.curFinishNum=0,this.file=null,this.param=null,this.isUploading=!1,this.clientParam=null,this.checkpoint=0,this.callbackparam=null,this.ossFileName=null,this.reupTryTimes=0,this.totalFileNum=0,i.__super.call(this)}s(i,"script.picUpload.UpLoadAndOrderContrl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnClose.on("click",this,this.onCloseScene),this.uiSkin.btnOpenFile.on("click",this,this.onClickOpenFile),this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.fileList.itemRender=dc,this.uiSkin.fileList.vScrollBarSkin="",this.uiSkin.fileList.selectEnable=!1,this.uiSkin.fileList.spaceY=4,this.uiSkin.fileList.renderHandler=new c(this,this.updateFileItem),this.initFileOpen(),this.uiSkin.uploadinfo.visible=!1,this.uiSkin.uploadinfo.style.font="SimeHei",this.uiSkin.uploadinfo.style.fontSize=32,this.uiSkin.uploadinfo.style.bold=!0,this.uiSkin.uploadinfo.style.width=800,this.uiSkin.errortxt.visible=!1,this.uiSkin.goonbtn.visible=!1,this.uiSkin.goonbtn.on("click",this,this.reUploadFile),Ti.window.uploadApp=this,null!=this.param&&null!=this.param?(this.uiSkin.fileList.array=this.param,this.fileListData=this.param,this.totalFileNum=this.fileListData.length,this.onClickBegin()):this.uiSkin.fileList.array=[],this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("CANCAEL_UPLOAD_ITEM",this,this.onDeleteItem),Ln.instance.on("RE_UPLOAD_FILE",this,this.reUploadFile),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.reUploadFile=function(){this.uiSkin.errortxt.visible=!1,this.uiSkin.goonbtn.visible=!1,this.onClickBegin()},n.onClickOpenFile=function(){e.timer.clearAll(this),this.file.click()},n.initFileOpen=function(){var t=this;this.file=Ti.document.createElement("input"),this.file.style="filter:alpha(opacity=0);opacity:0;width: 100;height:34px;left:395px;top:-248",this.file.multiple="multiple",this.file.accept=".jpg,.jpeg,.tif,.tiff",this.file.type="file",this.file.style.position="absolute",this.file.style.zIndex=999,Ti.document.body.appendChild(this.file),this.file.onchange=function(){if(t.uiSkin.uploadinfo.visible=!1,!(t.isUploading||t.file.files.length<=0)){t.curFinishNum=0,t.fileListData=[];for(var i=0;i<t.file.files.length;i++){if(!T.isValidString(t.file.files[i].name))return E.showAlert("图片文件名不能包含特殊字符及表情，请修改后重新上传"),void 0;t.file.files[i].progress=0,t.file.files[i].unNormal=!1,t.fileListData.push(t.file.files[i])}t.uiSkin.fileList.array=t.fileListData,t.onClickBegin()}}},n.getSendRequest=function(){W.instance.Request(W.httpUrl+"fs/sts",this,this.onGetAuthor,null,null)},n.onGetAuthor=function(t){var i=this;if(!this.destroyed){var n=JSON.parse(t);if(null!=n&&null!=n.data){this.clientParam={},this.clientParam.accessKeyId=n.data.accessKeyId,this.clientParam.accessKeySecret=n.data.accessKeySecret,this.clientParam.stsToken=n.data.securityToken;var s=e.loader.getRes("config.json?"+g.instance.configVersion);this.clientParam.endpoint="oss-cn-hangzhou.aliyuncs.com",this.clientParam.bucket=s.bucket,console.log("oss:"+typeof Ti.window.OSS),"undefined"==typeof Ti.window.OSS?(this.script=Ti.document.createElement("script"),this.script.src="aliOss.min.js",this.script.onload=function(){Ti.window.createossClient(i.clientParam),i.onClickBegin()},this.script.onerror=function(t){console.log("error"+t)},Ti.document.body.appendChild(this.script)):(Ti.window.createossClient(this.clientParam),this.onClickBegin())}}},n.getFileImgdata=function(t){Ti.window.picProcess=this,Ti.window.getImagePixels(t)},n.onClickBegin=function(){if(e.timer.clear(this,this.reUploadFile),!this.isUploading){if(null==this.clientParam)return this.getSendRequest(),void 0;this.isUploading=!0,this.onBeginUpload(),this.fileListData.length>0&&(this.uiSkin.uploadinfo.visible=!0,this.uiSkin.uploadinfo.innerHTML="<span color='#0'>(已上传成功</span><span color='#003dc6'>"+this.curFinishNum+"</span><span color='#0'>/全部文件</span><span color='#003dc6'>"+this.totalFileNum+"</span><span color='#0'>)</span>")}},n.onBeginUpload=function(){if(null==this.callbackparam&&this.fileListData&&this.fileListData.length>0){var t={};t.dirId=H.instance.curSelectDir.dpath,t.name=this.fileListData[0].name,W.instance.Request(W.httpUrl+"fs/file/prepareUpload?",this,this.onReadyToUpload,JSON.stringify(t),"post")}else this.uploadFileImmediate()},n.continueUpLoad=function(){if(null==this.callbackparam&&this.fileListData&&this.fileListData.length>0){var t={};t.dirId=H.instance.curSelectDir.dpath,t.name=this.fileListData[0].name,W.instance.Request(W.httpUrl+"fs/file/prepareUpload?",this,this.onReadyToUpload,JSON.stringify(t),"post")}else this.uploadFileImmediate()},n.uploadFileImmediate=function(){if(this.fileListData&&this.fileListData.length>0)Ti.window.ossUpload({file:this.fileListData[0]},this.checkpoint,this.callbackparam,this.ossFileName);else{this.isUploading=!1;var t="总共上传"+this.totalFileNum+"文件,成功上传"+this.curFinishNum+"文件";E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"图像文件上传成功！",tips:t,cancel:"上传更多",caller:this,callback:this.confirmClose})}},n.confirmClose=function(t){t&&this.onCloseScene()},n.onReadyToUpload=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){this.callbackparam={},this.callbackparam.url=i.data.callbackUrl,this.callbackparam.body=i.data.callbackBody,this.callbackparam.contentType="application/x-www-form-urlencoded";var e=this.fileListData[0].name.split(".");this.ossFileName=i.data.objectName+"."+(null==e[e.length-1]?"jpg":e[e.length-1]),this.uploadFileImmediate()}else"100"==i.code&&(Ti.window.alert("已存在相同文件名图片！"),this.curFinishNum--,this.onCompleteUpload(null))}},n.onCompleteUpload=function(){this.fileListData[0]&&(this.fileListData[0].progress=100),this.fileListData.splice(0,1),this.uiSkin.fileList.refresh(),this.curFinishNum++,this.uiSkin.uploadinfo.innerHTML="<span color='#0'>(已上传成功</span><span color='#003dc6'>"+this.curFinishNum+"</span><span color='#0'>/全部文件</span><span color='#003dc6'>"+this.totalFileNum+"</span><span color='#0'>)</span>",this.checkpoint=0,this.callbackparam=null,this.ossFileName="",this.reupTryTimes=0,this.onBeginUpload()},n.onProgressHandler=function(t,i){this.checkpoint=t,Number(i)>=100&&(i="99"),this.fileListData[0]&&(this.fileListData[0].progress=Number(i)),this.updateProgress()},n.onUploadError=function(t){this.isUploading=!1,this.clientParam=null,this.fileListData[0].progress>=99&&(this.callbackparam=null,this.checkpoint=0,console.log("回调报错"));var i="user_phone="+g.instance.userAccount+"&error_msg="+JSON.stringify(t)+"&request_url=图片上传"+t.requestId;if(W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,i,"post"),this.reupTryTimes<10)e.timer.once(100,this,this.reUploadFile),this.reupTryTimes++;else{this.reupTryTimes=0,this.uiSkin.errortxt.visible=!0,this.uiSkin.errortxt.text=this.getErrorMsg(t);var i="user_phone="+g.instance.userAccount+"&error_msg="+JSON.stringify(t)+"&request_url=10图片上传"+t.requestId;W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,i,"post");for(var n=this.uiSkin.fileList.cells,s=0;s<n.length;s++)if(null!=n[s]&&n[s].fileobj==this.fileListData[0]){n[s].showReUploadbtn(),this.uiSkin.goonbtn.visible=!0;break}}},n.updateProgress=function(){for(var t=this.uiSkin.fileList.cells,i=0;i<t.length;i++)if(null!=t[i]&&t[i].fileobj==this.fileListData[0]){t[i].updateProgress(!0);break}},n.updateFileItem=function(t){t.setData(t.dataSource)},n.onDeleteItem=function(t){var i=this.fileListData.indexOf(t.fileobj);if(0!=i&&!(t.fileobj.progress>=99)){var i=this.fileListData.indexOf(t.fileobj);this.uiSkin.fileList.deleteItem(i)}},n.getErrorMsg=function(t){switch(t.status){case 0:if("cancel"==t.name)return"主动删除";break;case-1:return"自动重新上传";case 203:return"前端自己给后台回调";case 400:switch(t.code){case"FilePartInterity":case"FilePartNotExist":case"FilePartState":case"InvalidPart":case"InvalidPartOrder":case"InvalidArgument":return"清空断点,重新上传;";case"InvalidBucketName":case"InvalidDigest":case"InvalidEncryptionAlgorithmError":case"InvalidObjectName":case"InvalidPolicyDocument":case"InvalidTargetBucketForLogging":case"MalformedXML":case"RequestIsNotMultiPartContent":return"重新授权;继续上传;";case"RequestTimeout":return"请求超时，请重新上传"}break;case 403:return"授权无效，重新授权";case 411:return"缺少参数";case 404:return"重新授权;继续上传;";case 500:return"OSS内部发生错误,重新上传;";default:return"未知错误，请重新上传"}return""},n.onCloseScene=function(){this.isUploading||(Ti.window.uploadApp=null,e.timer.clearAll(this),Ln.instance.event("UPLOAD_FILE_SUCESS"),Ln.instance.off("CANCAEL_UPLOAD_ITEM",this,this.onDeleteItem),Ln.instance.off("RE_UPLOAD_FILE",this,this.reUploadFile),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),E.instance.closeView("VIEW_MYPICPANEL"),Ti.document.body.removeChild(this.file))},i}(Dn),Br=function(t){function i(){this.uiSkin=null,this.hasSelectAddressId=null,this.curPage=1,this.totalPage=1,this.pageSize=30,this.province=null,this.zoneid=null,this.areaid=null,this.param=null,this.grpVo=null,i.__super.call(this)}s(i,"script.usercenter.AddressListController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.grpVo=this.param,this.uiSkin.addressList.itemRender=Rc,this.uiSkin.addressList.repeatX=1,this.uiSkin.addressList.spaceY=0,this.uiSkin.addressList.renderHandler=new c(this,this.updateAddressList),this.uiSkin.addressList.selectEnable=!1,this.hasSelectAddressId=[];var t=[];this.uiSkin.addressList.array=t,this.uiSkin.selectall.on("change",this,this.changeSelectedAll),this.uiSkin.searchInput.maxChars=8,this.uiSkin.selectNum.text="0",this.uiSkin.provList.itemRender=Oc,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new c(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new c(this,this.selectProvince),this.uiSkin.provList.array=[{id:0,areaName:"空"}],this.uiSkin.cityList.itemRender=Oc,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new c(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new c(this,this.selectCity),this.uiSkin.cityList.array=[{id:0,areaName:"空"}],this.uiSkin.areaList.itemRender=Oc,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new c(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new c(this,this.selectArea),this.uiSkin.areaList.array=[{id:0,areaName:"空"}],this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.on("click",this,this.hideAddressPanel),this.uiSkin.prePage.on("click",this,this.onPrevPage),this.uiSkin.nextPage.on("click",this,this.onNextPage),this.uiSkin.searchInput.maxChars=20,this.uiSkin.searchbtn.on("click",this,this.onSearchAddress),this.uiSkin.okbtn.on("click",this,this.onAddAddress),W.instance.Request(W.httpUrl+"sys/areaInfo?parentId=0",this,this.initAddr,null,null),this.uiSkin.dragImg.on("mousedown",this,this.startDragPanel),this.uiSkin.dragImg.on("mouseup",this,this.stopDragPanel),this.uiSkin.closebtn.on("click",this,this.closeView),this.updateList(),Ln.instance.on("CHANGE_ADDRESS_SELECTED_STATE",this,this.addressSelected)},e.updateAddressList=function(t){t.setData(t.dataSource)},e.startDragPanel=function(t){this.uiSkin.dragImg.startDrag(),t.stopPropagation()},e.stopDragPanel=function(){this.uiSkin.dragImg.stopDrag()},e.changeSelectedAll=function(){for(var t=0;t<this.uiSkin.addressList.array.length;t++)if(this.uiSkin.addressList.array[t].selected=this.uiSkin.selectall.selected,this.uiSkin.addressList.array[t].selected&&this.hasSelectAddressId.indexOf(this.uiSkin.addressList.array[t].id)<0)this.hasSelectAddressId.push(this.uiSkin.addressList.array[t].id);else if(!this.uiSkin.addressList.array[t].selected&&this.hasSelectAddressId.indexOf(this.uiSkin.addressList.array[t].id)>=0){var i=this.hasSelectAddressId.indexOf(this.uiSkin.addressList.array[t].id);this.hasSelectAddressId.splice(i,1)}for(t=0;t<this.uiSkin.addressList.cells.length;t++)t<this.uiSkin.addressList.array.length&&this.uiSkin.addressList.cells[t].changeSelectState(this.uiSkin.selectall.selected);this.refreshNum()},e.addressSelected=function(t){if(t.selected&&this.hasSelectAddressId.indexOf(t.id)<0&&null!=t)this.hasSelectAddressId.push(t.id);else if(!t.selected&&this.hasSelectAddressId.indexOf(t.id)>=0){var i=this.hasSelectAddressId.indexOf(t.id);this.hasSelectAddressId.splice(i,1)}this.refreshNum()},e.refreshNum=function(){this.uiSkin.selectNum.text=this.hasSelectAddressId.length+""},e.updateCityList=function(t){t.setData(t.dataSource)},e.initAddr=function(t){if(!this.destroyed){var i=JSON.parse(t);i.data.unshift({id:0,areaName:"空"}),this.uiSkin.provList.array=i.data}},e.selectProvince=function(t){var i=this;return this.province=this.uiSkin.provList.array[t],this.uiSkin.provbox.visible=!1,this.uiSkin.province.text=this.province.areaName,this.uiSkin.cityList.selectedIndex=0,this.selectCity(0),0==this.province.id?(this.uiSkin.cityList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.province.id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.cityList.array=e.data,i.uiSkin.cityList.refresh()}},null,null),void 0)},e.selectCity=function(t){var i=this;return this.uiSkin.citybox.visible=!1,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t].areaName,this.uiSkin.areaList.selectedIndex=0,this.selectArea(0),0==this.uiSkin.cityList.array[t].id?(this.uiSkin.areaList.array=[{id:0,areaName:"空"}],void 0):(W.instance.Request(W.httpUrl+"sys/areaInfo?parentId="+this.uiSkin.cityList.array[t].id,this,function(t){if(!i.uiSkin.destroyed){var e=JSON.parse(t);e.data.unshift({id:0,areaName:"空"}),i.uiSkin.areaList.array=e.data,i.uiSkin.areaList.refresh()}},null,null),void 0)},e.selectArea=function(t){-1!=t&&(this.areaid=this.uiSkin.areaList.array[t].id,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t].areaName,this.uiSkin.areabox.visible=!1)},e.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,t.stopPropagation()},e.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,t.stopPropagation()},e.onPrevPage=function(){this.curPage<=1||(this.curPage--,this.hasSelectAddressId=[],this.updateList())},e.onNextPage=function(){this.curPage>=this.totalPage||(this.curPage++,this.hasSelectAddressId=[],this.updateList())},e.hideAddressPanel=function(t){t.target instanceof laya.ui.List||(this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1)},e.onSearchAddress=function(){this.curPage=1,this.updateList()},e.updateList=function(){var t="";this.uiSkin.areaList.selectedIndex>0?t=this.uiSkin.areaList.array[this.uiSkin.areaList.selectedIndex].id:this.uiSkin.cityList.selectedIndex>0?t=this.uiSkin.cityList.array[this.uiSkin.cityList.selectedIndex].id:this.uiSkin.provList.selectedIndex>0&&(t=this.uiSkin.provList.array[this.uiSkin.provList.selectedIndex].id);var i="customerId="+this.grpVo.customerId+"&pageNo="+this.curPage+"&pageSize="+this.pageSize+"&region="+t+"&keyword="+this.uiSkin.searchInput.text;W.instance.Request(W.httpUrl+W.listCustomerAddress+i,this,this.getMyAddressBack,null,null,null)},e.getMyAddressBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){for(var e=[],n=0;n<i.data.expressList.length;n++)e.push(new f(i.data.expressList[n]));this.totalPage=Math.ceil(i.data.totalCount/this.pageSize),this.totalPage<1&&(this.totalPage=1),this.uiSkin.pageNum.text=this.curPage+"/"+this.totalPage,e.sort(this.compareAddress),this.uiSkin.addressList.array=e}}},e.compareAddress=function(t,i){return parseInt(t.id)<parseInt(i.id)?-1:1},e.onAddAddress=function(){if(this.hasSelectAddressId.length>0){var t={};t.expressGroupId=this.grpVo.groupId,t.expressIds=this.hasSelectAddressId,W.instance.Request(W.httpUrl+"org/express/group/addExpress?",this,this.addAddressBack,JSON.stringify(t),"post")}else E.showAlert("请选择需要添加的地址！")},e.addAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&(Ln.instance.event("INSERT_ADDRESS_TO_GROUP",[parseInt(i.data.expressCount)]),this.closeView())},e.closeView=function(){E.instance.closeView("VIEW_ADDRESS_LIST_PANEL")},e.onDestroy=function(){Ln.instance.off("CHANGE_ADDRESS_SELECTED_STATE",this,this.addressSelected)},i}(Dn),Nr=function(t){function i(){this.uiSkin=null,this.curCell=null,i.__super.call(this)}s(i,"script.order.DakouSettingController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,this.uiSkin.btnok.on("click",this,this.closeView),this.uiSkin.productlist.itemRender=Ml,this.uiSkin.productlist.repeatX=3,this.uiSkin.productlist.spaceY=30,this.uiSkin.productlist.spaceX=40,this.uiSkin.productlist.renderHandler=new c(this,this.updateProductList),this.uiSkin.productlist.selectEnable=!1,this.uiSkin.batchEdit.selected=!0;var t=[];if(null!=k.instance.curSelectOrderItem){var i=new N;i.finalWidth=k.instance.curSelectOrderItem.finalWidth,i.finalHeight=k.instance.curSelectOrderItem.finalHeight,i.fid=k.instance.curSelectOrderItem.ordervo.picinfo.fid,i.orderitemvo=k.instance.curSelectOrderItem.ordervo,i.holeMargin=1,i.leftHoles=[],i.rightHoles=[],i.upHoles=[],i.upHoles.push(new Oe(i.finalWidth/2,i.holeMargin)),i.bottomHoles=[],t.push(i)}else for(var n=k.instance.batchChangeMatItems,s=0;s<n.length;s++){var i=new N;i.finalWidth=n[s].finalWidth,i.finalHeight=n[s].finalHeight,i.fid=n[s].ordervo.picinfo.fid,i.orderitemvo=n[s].ordervo,i.holeMargin=1,i.leftHoles=[],i.rightHoles=[],i.upHoles=[],i.bottomHoles=[],i.upHoles.push(new Oe(i.finalWidth/2,i.holeMargin)),t.push(i)}this.uiSkin.productlist.array=t,this.uiSkin.batchEdit.on("change",this,this.onBatchEditChange),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),this.uiSkin.closeBtn.on("click",this,this.closeView),this.uiSkin.cancelBtn.on("click",this,this.closeView),this.uiSkin.productlist.on("mouseover",this,this.pauseParentScroll),this.uiSkin.productlist.on("mouseout",this,this.resumeParentScroll),Ln.instance.on("SELECT_DAKOU_CELL",this,this.onSelectCell),Ln.instance.on("BATCH_EDIT_DAKOU_CELL",this,this.onBatchUpdate),this.allPicSizeSame(t),e.stage.on("keyup",this,this.moveHole)},n.allPicSizeSame=function(t){for(var i=!0,e=t[0].finalWidth,n=t[0].finalHeight,s=0;s<t.length;s++)if(Math.abs(t[s].finalWidth-e)>1||Math.abs(t[s].finalHeight-n)>0){i=!1;break}this.uiSkin.batchEdit.disabled=!(t.length>1&&i),this.uiSkin.batchEdit.selected=!this.uiSkin.batchEdit.disabled,this.onBatchEditChange()},n.onBatchEditChange=function(){for(var t=1;t<this.uiSkin.productlist.cells.length;t++)this.uiSkin.productlist.cells[t].mouseEnabled=!this.uiSkin.batchEdit.selected},n.onSelectCell=function(t){this.curCell=t},n.onBatchUpdate=function(){if(this.uiSkin.batchEdit.selected){for(var t=this.uiSkin.productlist.array[0],i=1;i<this.uiSkin.productlist.array.length;i++)this.uiSkin.productlist.array[i].leftHoles=t.leftHoles,this.uiSkin.productlist.array[i].rightHoles=t.rightHoles,this.uiSkin.productlist.array[i].upHoles=t.upHoles,this.uiSkin.productlist.array[i].bottomHoles=t.bottomHoles,this.uiSkin.productlist.array[i].holeMargin=t.holeMargin;for(i=1;i<this.uiSkin.productlist.cells.length;i++){var e=this.uiSkin.productlist.cells[i];null!=e&&null!=this.uiSkin.productlist.array[i]&&e.setData(this.uiSkin.productlist.array[i])}}},n.moveHole=function(t){null!=this.curCell&&this.curCell.moveHole(t)},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},n.pauseParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=null},n.resumeParentScroll=function(){this.uiSkin.mainpanel.vScrollBar.target=this.uiSkin.mainpanel},n.updateProductList=function(t){t.setData(t.dataSource)},n.onChangeDakNum=function(){for(var t=this.uiSkin.productlist.array,i=0;i<t.length;i++)t[i].orderitemvo.dkleftpos=1==t[i].orderitemvo.dakouNum?t[i].finalWidth/2:5,t[i].orderitemvo.dkrightpos=t[i].finalWidth-5;this.uiSkin.productlist.array=t,this.uiSkin.productlist.refresh()},n.closeView=function(){for(var t=this.uiSkin.productlist.array,i=0;i<t.length;i++)if(t[i].leftHoles.length+t[i].rightHoles.length+t[i].upHoles.length+t[i].bottomHoles.length<1)return E.showAlert("至少需要打一个孔"),void 0;for(var i=0;i<t.length;i++)t[i].orderitemvo.holeList=t[i].leftHoles.concat(t[i].rightHoles).concat(t[i].upHoles).concat(t[i].bottomHoles);Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower),Ln.instance.off("SELECT_DAKOU_CELL",this,this.onSelectCell),Ln.instance.off("BATCH_EDIT_DAKOU_CELL",this,this.onBatchUpdate),e.stage.off("keyup",this,this.moveHole),E.instance.closeView("VIEW_DAKOU_PANEL")},i}(Dn),Fr=function(t){function i(){this.uiSkin=null,i.__super.call(this)}s(i,"script.prodCustomer.CustomerEditController",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onCloseView),this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower);for(var t=0;6>t;t++){var i=new Io;this.uiSkin.prodVBox.addChild(i)}},e.onCloseView=function(){E.instance.closeView("VIEW_PRODUCT_CUSTOMIZATION_PANEL"),E.instance.openView("VIEW_FIRST_PAGE")},e.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth},i}(Dn),Vr=function(t){function i(){this.uiSkin=null,this.param=null,this.picvo=null,i.__super.call(this)}s(i,"script.picUpload.PictureCheckControl",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onClosePanel),this.uiSkin.mainpanel.on("click",this,this.onClosePanel),this.uiSkin.mainpanel.vScrollBarSkin="",this.uiSkin.mainpanel.hScrollBarSkin="",this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth;var t=0;if(t=this.uiSkin.height-100>800?800:this.uiSkin.height-100,this.uiSkin.yixingimg.visible=!1,this.param instanceof Array){this.picvo=this.param[0];var i=this.param[1],n=this.param[2]}else this.picvo=this.param;null!=this.param&&(this.uiSkin.img.skin=W.biggerPicUrl+this.picvo.fid+this.picvo.tailFix,this.picvo.picWidth>this.picvo.picHeight?(this.uiSkin.img.width=t,this.uiSkin.img.height=t/this.picvo.picWidth*this.picvo.picHeight):(this.uiSkin.img.height=t,this.uiSkin.img.width=t/this.picvo.picHeight*this.picvo.picWidth),this.uiSkin.img.y=(this.uiSkin.height-this.uiSkin.img.height)/2,this.uiSkin.fileName.text=this.picvo.directName,this.uiSkin.fileType.text="文件格式："+this.picvo.picClass.toUpperCase(),this.uiSkin.colorSpace.text="颜色模式："+this.picvo.colorspace.toUpperCase(),this.uiSkin.dpi.text="文件精度："+this.picvo.dpi+"dpi",this.uiSkin.sizetxt.text="文件尺寸："+this.picvo.picPhysicWidth+"*"+this.picvo.picPhysicHeight,null!=i&&(this.uiSkin.yixingimg.visible=!0,this.uiSkin.yixingimg.skin=i,this.uiSkin.yixingimg.width=this.uiSkin.img.width,this.uiSkin.yixingimg.height=this.uiSkin.img.height,this.uiSkin.yixingimg.scaleX=n,this.uiSkin.yixingimg.y=this.uiSkin.img.y)),Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=1920*Ti.clientHeight/Ti.clientWidth;var t=0;t=this.uiSkin.height-100>800?800:this.uiSkin.height-100,this.picvo.picWidth>this.picvo.picHeight?(this.uiSkin.img.width=t,this.uiSkin.img.height=t/this.picvo.picWidth*this.picvo.picHeight):(this.uiSkin.img.height=t,this.uiSkin.img.width=t/this.picvo.picHeight*this.picvo.picWidth),this.uiSkin.yixingimg.width=this.uiSkin.img.width,this.uiSkin.yixingimg.height=this.uiSkin.img.height,this.uiSkin.img.y=(this.uiSkin.height-this.uiSkin.img.height)/2,this.uiSkin.yixingimg.y=this.uiSkin.img.y},n.onDestroy=function(){e.loader.clearTextureRes(W.biggerPicUrl+this.param.fid+".jpg")},n.onClosePanel=function(){E.instance.closeView("VIEW_PICTURE_CHECK"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),Ur=function(t){function i(){this.uiSkin=null,this.tempaddress=null,i.__super.call(this)}s(i,"script.order.SelectFactoryControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.list_address.itemRender=sc,this.uiSkin.list_address.vScrollBarSkin="",this.uiSkin.list_address.selectEnable=!1,this.uiSkin.list_address.spaceY=8,this.uiSkin.list_address.renderHandler=new c(this,this.updateAddressItem),this.uiSkin.list_address.array=k.instance.outPutAddr,this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.okbtn.on("click",this,this.onConfirmSelectAddress)},e.onSlecteAddress=function(t){if(this.uiSkin.list_address.array[t]!=this.tempaddress){var i;for(var e in this.uiSkin.list_address.cells)i=this.uiSkin.list_address.cells[e],i.ShowSelected=i.address==this.uiSkin.list_address.array[t];this.tempaddress=this.uiSkin.list_address.array[t]}},e.updateAddressItem=function(t){t.setData(t.dataSource)},e.onConfirmSelectAddress=function(){this.onCloseView()},e.onCloseView=function(){E.instance.closeView("VIEW_SELECT_FACTORY")},i}(Dn),Wr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"script.picUpload.CreateFolderController",t);var n=i.prototype;return n.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onClosePanel),this.uiSkin.input_folename.maxChars=10,this.uiSkin.btnSureCreate.on("click",this,this.onSureCreeate),this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth,Ln.instance.on("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},n.onResizeBrower=function(){this.uiSkin.height=Ti.clientHeight*e.stage.width/Ti.clientWidth},n.onSureCreeate=function(){if(""!=this.uiSkin.input_folename.text)if(this.param.length>0){if(null==H.instance.curSelectDir)return E.showAlert("请选择一个父目录"),void 0;var t={dirId:H.instance.curSelectDir.dpath,dirName:this.uiSkin.input_folename.text};W.instance.Request(W.httpUrl+"fs/dir/create?",this,this.onCreateDirBack,JSON.stringify(t),"post")}else{var t={dirId:"0",dirName:this.uiSkin.input_folename.text};W.instance.Request(W.httpUrl+"fs/dir/create?",this,this.onCreateDirBack,JSON.stringify(t),"post")}},n.onCreateDirBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if("0"==i.code){var e=new p(i.data,0);Ln.instance.event("CREATE_FOLDER_SUCESS",e),this.onClosePanel()}}},n.onClosePanel=function(){E.instance.closeView("VIEW_CREATE_FOLDER_PANEL"),Ln.instance.off("BROWER_WINDOW_RESIZE",this,this.onResizeBrower)},i}(Dn),Hr=function(t){function i(){this.uiSkin=null,this.param=null,i.__super.call(this)}s(i,"utils.AddMsgControl",t);var e=i.prototype;return e.onStart=function(){this.uiSkin=this.owner,this.uiSkin.inputmsg.maxChars=50,this.uiSkin.btnok.on("click",this,this.onClickOk),this.uiSkin.btncancel.on("click",this,this.onCloseView),this.param&&null!=this.param.msg&&(this.uiSkin.inputmsg.text=this.param.msg)},e.onClickOk=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,this.uiSkin.inputmsg.text),this.onCloseView()},e.onCloseView=function(){E.instance.closeView("VIEW_ADD_MESSAGE")
},i}(Dn),Gr=function(t){function i(){this._customRenderCmd=null,this._customCmds=null,this._x=0,this._y=0,this._renderType=0,this._bRepaintCanvas=!1,this._lastContext=null,i.__super.call(this)}s(i,"laya.layagl.ConchSpriteAdpt",t);var r=i.prototype;return r.createData=function(){var t=308;this._conchData=new ParamData(t,!1),this._datai32=this._conchData._int32Data,this._dataf32=this._conchData._float32Data,this._dataf32[4]=1,this._datai32[3]=-1,this._datai32[1]=0,this._datai32[2]=0,this._datai32[22]=4294967295,this._datai32[5]=1,this._dataf32[8]=0,this._dataf32[9]=0,this._dataf32[10]=1,this._dataf32[11]=1,this._dataf32[16]=1,this._dataf32[17]=0,this._dataf32[18]=0,this._dataf32[19]=1,this._dataf32[20]=0,this._dataf32[21]=0,this._datai32[24]=-1,this._datai32[25]=-1,this._datai32[27]=-1,this._datai32[28]=0,this._datai32[29]=0,this._datai32[30]=1e6,this._datai32[31]=1e6,this._datai32[63]=0,this._datai32[71]=1,this._datai32[72]=771,this._datai32[68]=-1},r._createTransform=function(){return Ci.create(new Float32Array(6))},r._setTransform=function(t){var i=this._conchData._float32Data;i[15]=0,i[16]=t.a,i[17]=t.b,i[18]=t.c,i[19]=t.d,i[20]=t.tx,i[21]=t.ty},r._setGraphics=function(t){this._datai32[23]=t._commandEncoder.getPtrID()},r._setGraphicsCallBack=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(5,this.updateParticleFromNative.bind(this)),this._datai32[68]=5},r._setCacheAs=function(){_e.createCommandEncoder(),this._drawCanvasParamData||(this._drawCanvasParamData=new ParamData(132,!0)),this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._canvasBeginCmd||(this._canvasBeginCmd=ki.instance.createCommandEncoder(128,64,!1)),this._canvasEndCmd||(this._canvasEndCmd=ki.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(1,this.canvasBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(2,this.canvasEndRenderFromNative.bind(this)),this._datai32[56]=1,this._datai32[57]=2,this._datai32[58]=this._canvasBeginCmd.getPtrID(),this._datai32[59]=this._canvasEndCmd.getPtrID(),this._datai32[60]=_e._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),this._datai32[61]=this._drawCanvasParamData.getPtrID()},r._setX=function(t){this._x=this._dataf32[6]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},r._setY=function(t){this._y=this._dataf32[7]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},r._setPivotX=function(t){this._renderType|=2,this._dataf32[8]=t,this._dataf32[15]=1},r._getPivotX=function(){return this._dataf32[8]},r._setPivotY=function(t){this._renderType|=2,this._dataf32[9]=t,this._dataf32[15]=1},r._getPivotY=function(){return this._dataf32[9]},r._setAlpha=function(t){var i=this.getStyle();i.alpha=t,t=t>1?1:t,t=0>t?0:t;var e=this._datai32[22],n=e>>24;n=255*t,e=16777215&e|n<<24,this._datai32[22]=e,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()},r._setRenderType=function(t){this._datai32[0]=t,$i.GLS[t]||$i.createByRenderType(t),$i.GLSE[t]||$i.createByRenderTypeEnd(t)},r.parentRepaint=function(){},r._getAlpha=function(){return(this._datai32[22]>>>24)/255},r._setScaleX=function(t){this._style.scaleX=this._dataf32[10]=t,this._dataf32[15]=1},r._setScaleY=function(t){this._style.scaleY=this._dataf32[11]=t,this._dataf32[15]=1},r._setSkewX=function(t){this._style.skewX=this._dataf32[12]=t,this._dataf32[15]=1},r._setSkewY=function(t){this._style.skewY=this._dataf32[13]=t,this._dataf32[15]=1},r._setRotation=function(t){this._style.rotation=this._dataf32[14]=t,this._dataf32[15]=1},r._setBgStyleColor=function(t,i,e,n,s){var r=null,a=null;this._drawSimpleRectParamData||(this._drawSimpleRectParamData=new ParamData(104,!0)),r=this._drawSimpleRectParamData._float32Data,a=this._drawSimpleRectParamData._int32Data;var h=o.create(s),l=h.numColor;a[0]=1,a[1]=96;var c=2;r[c++]=t,r[c++]=i,r[c++]=0,r[c++]=0,a[c++]=l,r[c++]=4294967295,r[c++]=t+e,r[c++]=i,r[c++]=0,r[c++]=0,a[c++]=l,r[c++]=4294967295,r[c++]=t+e,r[c++]=i+n,r[c++]=0,r[c++]=0,a[c++]=l,r[c++]=4294967295,r[c++]=t,r[c++]=i+n,r[c++]=0,r[c++]=0,a[c++]=l,r[c++]=4294967295,this._datai32[74]=this._drawSimpleRectParamData.getPtrID(),ki.syncBufferToRenderThread(this._drawSimpleRectParamData),this._datai32[73]=ei._SIMPLE_RECT_CMDENCODER_.getPtrID()},r._setBorderStyleColor=function(t,i,e,n,s,r){var a=null,h=null;this._drawRectBorderParamData||(this._drawRectBorderParamData=new ParamData(236,!0)),a=this._drawRectBorderParamData._float32Data,h=this._drawRectBorderParamData._int32Data;var l=[],c=[],u=[];l.push(t),l.push(i),l.push(t+e),l.push(i),l.push(t+e),l.push(i+n),l.push(t),l.push(i+n),l.push(t),l.push(i-r/2),Di.createLine2(l,c,r,0,u,!1);var d=l.length;a=this._drawRectBorderParamData._float32Data,h=this._drawRectBorderParamData._int32Data;var _=this._drawRectBorderParamData._int16Data,p=o.create(s),f=p.numColor;h[0]=0,h[1]=120,h[2]=0,h[3]=2*c.length,h[4]=0;for(var m=5,g=0;d>g;g++)a[m++]=u[2*g],a[m++]=u[2*g+1],h[m++]=f;m=70;for(var v=0;v<c.length;v++)_[m++]=c[v];this._datai32[76]=this._drawRectBorderParamData.getPtrID(),ki.syncBufferToRenderThread(this._drawRectBorderParamData),this._datai32[75]=ei._RECT_BORDER_CMD_ENCODER_.getPtrID()},r._setTextureEx=function(t,i){var e=null,n=null;if(!this._drawSimpleImageData){this._drawSimpleImageData=new ParamData(116,!0),e=this._drawSimpleImageData._float32Data,n=this._drawSimpleImageData._int32Data,n[0]=3,n[1]=33984,n[2]=i?t.bitmap._glTexture.id:0,n[3]=1,n[4]=96;var s=t.uv;e[5]=0,e[6]=0,e[7]=s[0],e[8]=s[1],n[9]=4294967295,n[10]=4294967295,e[11]=0,e[12]=0,e[13]=s[2],e[14]=s[3],n[15]=4294967295,n[16]=4294967295,e[17]=0,e[18]=0,e[19]=s[4],e[20]=s[5],n[21]=4294967295,n[22]=4294967295,e[23]=0,e[24]=0,e[25]=s[6],e[26]=s[7],n[27]=4294967295,n[28]=4294967295}e=this._drawSimpleImageData._float32Data,n=this._drawSimpleImageData._int32Data,n[2]=i?t.bitmap._glTexture.id:0;var r=i?t.width:0,a=i?t.height:0;e[11]=e[17]=r,e[18]=e[24]=a;var o=this._drawSimpleImageData.getPtrID();this._datai32[25]=o,ki.syncBufferToRenderThread(this._drawSimpleImageData),this._datai32[24]=ei._SIMPLE_TEXTURE_CMDENCODER_.getPtrID()},r._setTexture=function(t){t&&(t.getIsReady()?this._setTextureEx(t,!0):(this._setTextureEx(t,!1),t.on("ready",this,this._setTextureEx,[t,!0])))},r._setCustomRender=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._customCmds=[],this._callbackFuncObj.addCallbackFunc(0,this.customRenderFromNative.bind(this)),this._customRenderCmd=ki.instance.createCommandEncoder(128,64,!0),this._datai32[54]=this._callbackFuncObj.id,this._datai32[55]=0,this._datai32[27]=this._customRenderCmd.getPtrID()},r._setScrollRect=function(t){this._dataf32[28]=0,this._dataf32[29]=0,this._dataf32[30]=t.width,this._dataf32[31]=t.height,this._dataf32[32]=-t.x,this._dataf32[33]=-t.y,t.onPropertyChanged=this._setScrollRect.bind(this)},r._setColorFilter=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._filterBeginCmd||(this._filterBeginCmd=ki.instance.createCommandEncoder(128,64,!1)),this._filterEndCmd||(this._filterEndCmd=ki.instance.createCommandEncoder(128,64,!0)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(3,this.filterBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(4,this.filterEndRenderFromNative.bind(this)),this._datai32[65]=3,this._datai32[64]=this._filterBeginCmd.getPtrID(),this._datai32[67]=4,this._datai32[66]=this._filterEndCmd.getPtrID()},r._setMask=function(t){t.cacheAs="bitmap",this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._maskCmd||(this._maskCmd=ki.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(6,this.maskRenderFromNative.bind(this)),this._datai32[69]=6,this._datai32[70]=this._maskCmd.getPtrID()},r._adjustTransform=function(){var t=this._transform||(this._transform=this._createTransform());t._bTransform=!0,ki.instance.calcMatrixFromScaleSkewRotation(this._conchData._data._ptrID,60,64,24,28,32,36,40,44,48,52,56);var i=this._conchData._float32Data;return t.a=i[16],t.b=i[17],t.c=i[18],t.d=i[19],t.tx=0,t.ty=0,t},r._setBlendMode=function(t){switch(t){case"normal":this._datai32[71]=1,this._datai32[72]=771;break;case"add":case"lighter":this._datai32[71]=1,this._datai32[72]=772;break;case"multiply":this._datai32[71]=774,this._datai32[72]=771;break;case"screen":this._datai32[71]=1,this._datai32[72]=1;break;case"overlay":this._datai32[71]=1,this._datai32[72]=769;break;case"light":this._datai32[71]=1,this._datai32[72]=1;break;case"mask":this._datai32[71]=0,this._datai32[72]=770;break;case"destination-out":this._datai32[71]=0,this._datai32[72]=0;break;default:alert("_setBlendMode Unknown type")}},r.customRenderFromNative=function(){var t=ki.instance.getCurrentContext();this._customRenderCmd.beginEncoding(),this._customRenderCmd.clearEncoding(),t._commandEncoder=this._customRenderCmd,t._customCmds=this._customCmds;for(var i=0,e=this._customCmds.length;e>i;i++)this._customCmds[i].recover();this._customCmds.length=0,this.customRender(t,0,0),this._customRenderCmd.endEncoding()},r.canvasBeginRenderFromNative=function(){var t=ki.instance,e=null,n=null,s=this._cacheStyle;if(s.canvas&&0==this._datai32[4])e=s.canvas,0!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!1),this._bRepaintCanvas=!1),this._datai32[63]=1;else{if(this._canvasBeginCmd.beginEncoding(),this._canvasBeginCmd.clearEncoding(),e=laya.layagl.ConchSpriteAdpt.buildCanvas(this,0,0)){this._datai32[63]=0,this._lastContext=t.getCurrentContext(),n=e.context;var r=n._targets;_e.setParamData(this._drawCanvasParamData,r,-16,-16,r.width,r.height),t.setCurrentContext(n),n.beginRT(),t.save(),i._tempFloatArrayMatrix[0]=1,i._tempFloatArrayMatrix[1]=0,i._tempFloatArrayMatrix[2]=0,i._tempFloatArrayMatrix[3]=1,i._tempFloatArrayMatrix[4]=16,i._tempFloatArrayMatrix[5]=16,t.setGlobalValue(ei.GLOBALVALUE_MATRIX32,8,i._tempFloatArrayMatrix),1!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!0),this._bRepaintCanvas=!0)}this._canvasBeginCmd.endEncoding()}},r.setChildrenNativeVisible=function(t){for(var i,e=this._children,n=e.length,s=0;n>s;++s)i=e[s],i._datai32[5]=t?1:0,i.setChildrenNativeVisible(t)},r.canvasEndRenderFromNative=function(){var t=ki.instance;if(this._canvasEndCmd.beginEncoding(),this._canvasEndCmd.clearEncoding(),this._bRepaintCanvas){var i=ki.instance.getCurrentContext();t.restore(),t.setCurrentContext(this._lastContext),t.commitContextToGPU(i),i.endRT(),t.blendFunc(1,771)}this._canvasEndCmd.endEncoding()},r.filterBeginRenderFromNative=function(){var t=this,e=ki.instance;this._filterBeginCmd.beginEncoding(),this._filterBeginCmd.clearEncoding();{var n=this._getCacheStyle().filters;n.length}if(n[0]instanceof laya.filters.ColorFilter){e.addShaderMacro(ei.SHADER_MACRO_COLOR_FILTER);var s=n[0];e.setGlobalValue(ei.GLOBALVALUE_COLORFILTER_COLOR,8,s._mat),e.setGlobalValue(ei.GLOBALVALUE_COLORFILTER_ALPHA,8,s._alpha)}else{var r=Oe.TEMP,a=$e.create(),o=0,h=0,l=t._isHaveGlowFilter();l&&(o=50,h=25);var c=new on;c.copyFrom(t.getSelfBounds()),c.x+=t.x,c.y+=t.y,c.x-=t.pivotX+4,c.y-=t.pivotY+4;var u=c.x,d=c.y;if(c.width+=o+8,c.height+=o+8,r.x=c.x*a.a+c.y*a.c,r.y=c.y*a.d+c.x*a.b,c.x=r.x,c.y=r.y,r.x=c.width*a.a+c.height*a.c,r.y=c.height*a.d+c.width*a.b,c.width=r.x,c.height=r.y,c.width<=0||c.height<=0)return;var _=t._getCacheStyle().filterCache;_&&cn.releaseRT(_),_=cn.getRT(c.width,c.height),t._getCacheStyle().filterCache=_,i.useRenderTarget(_),i._tempFloatArrayMatrix[0]=1,i._tempFloatArrayMatrix[1]=0,i._tempFloatArrayMatrix[2]=0,i._tempFloatArrayMatrix[3]=1,i._tempFloatArrayMatrix[4]=t.x-u+h,i._tempFloatArrayMatrix[5]=t.y-d+h,e.setGlobalValue(ei.GLOBALVALUE_MATRIX32,8,i._tempFloatArrayMatrix)}this._filterBeginCmd.endEncoding()},r.filterEndRenderFromNative=function(){this._filterEndCmd.beginEncoding(),this._filterEndCmd.clearEncoding();var t=ki.instance,n=this._getCacheStyle().filters;if(n[0]instanceof laya.filters.ColorFilter);else{t.restore();var s=ki.instance.getCurrentContext(),r=Ma.currentActive;if(Ma.popRT(),n[0]instanceof e.BlurFilter){t.addShaderMacro(ei.SHADER_MACRO_BLUR_FILTER);var a=n[0];i._tempFloatArrayBuffer2[0]=r.width,i._tempFloatArrayBuffer2[1]=r.height,t.setGlobalValue(ei.GLOBALVALUE_BLURFILTER_BLURINFO,8,i._tempFloatArrayBuffer2),t.setGlobalValue(ei.GLOBALVALUE_BLURFILTER_STRENGTH,8,a.getStrenth_sig2_2sig2_native()),s.drawTarget(this._filterEndCmd,r,-4,-4,0,0)}else if(n[0]instanceof e.GlowFilter){var o=r.width,h=r.height,l=cn.getRT(o,h);i.useRenderTarget(l),t.addShaderMacro(ei.SHADER_MACRO_GLOW_FILTER);var c=n[0],u=c.getBlurInfo2Native();u[0]=o,u[1]=h,t.setGlobalValue(ei.GLOBALVALUE_GLOWFILTER_COLOR,8,c.getColorNative()),t.setGlobalValue(ei.GLOBALVALUE_GLOWFILTER_BLURINFO1,8,c.getBlurInfo1Native()),t.setGlobalValue(ei.GLOBALVALUE_GLOWFILTER_BLURINFO2,8,u),s.drawTarget(this._filterEndCmd,r,-16,-16,0,0),t.restore(),Ma.popRT(),s.drawTarget(this._filterEndCmd,l,-29,-29,0,0),s.drawTarget(this._filterEndCmd,r,-29,-29,0,0)}}this._filterEndCmd.endEncoding(),ki.syncBufferToRenderThread(this._filterEndCmd)},r.maskRenderFromNative=function(){this._maskCmd.beginEncoding(),this._maskCmd.clearEncoding();var t=ki.instance,e=t.getCurrentContext(),n=this.mask;n&&(n._children.length>0?(t.blockStart(n._conchData),n._renderChilds(e),t.blockEnd(n._conchData)):t.block(n._conchData)),i._tempInt1[0]=772,t.setGlobalValue(ei.GLOBALVALUE_BLENDFUNC_SRC,8,i._tempInt1),i._tempInt1[0]=0,t.setGlobalValue(ei.GLOBALVALUE_BLENDFUNC_DEST,8,i._tempInt1),this._maskCmd.endEncoding()},r.updateParticleFromNative=function(){this.tempCmd.updateParticle()},i.createMatrix=function(t,i,e,n,s,r,a){return void 0===t&&(t=1),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),new Ci(t,i,e,n,s,r,a)},i.init=function(){wi.__init__(),ti.__init__();var t=ls.prototype,e=i.prototype,n=["_createTransform","_setTransform","_setGraphics","_setGraphicsCallBack","_setCacheAs","_setX","_setY","_setPivotX","_getPivotX","_setPivotY","_getPivotY","_setAlpha","_getAlpha","_setScaleX","_setScaleY","_setSkewX","_setSkewY","_setRotation","_adjustTransform","_setRenderType","_setTexture","_setTextureEx","_setCustomRender","_setScrollRect","_setColorFilter","customRenderFromNative","canvasBeginRenderFromNative","canvasEndRenderFromNative","setChildrenNativeVisible","filterBeginRenderFromNative","filterEndRenderFromNative","updateParticleFromNative","_setMask","maskRenderFromNative","_setBlendMode","_setBgStyleColor","_setBorderStyleColor"],s=0,r=0;r=n.length;var a;for(s=0;r>s;s++)a=n[s],t[a]=e[a];t.createGLBuffer=e.createData,$e._createFun=i.createMatrix;t.render=t.renderToNative=ia.prototype.renderToNative,t.repaint=t.repaintForNative=ia.prototype.repaintForNative,t.parentRepaint=t.parentRepaintForNative=ia.prototype.parentRepaintForNative,t._renderChilds=ia.prototype._renderChilds,t.writeBlockToNative=ia.prototype.writeBlockToNative,t._writeBlockChilds=ia.prototype._writeBlockChilds},i.useRenderTarget=function(t){var e=ki.instance;Ma.pushRT(),t.start(),e.clearColor(0,0,0,0),e.clear(17664),e.save(),i._tempFloatArrayBuffer2[0]=t.width,i._tempFloatArrayBuffer2[1]=t.height,e.setGlobalValue(ei.GLOBALVALUE_VIEWS,8,i._tempFloatArrayBuffer2)},i.buildCanvas=function(t,i,e){var n,s,r,a,o,h,l,c,u,d=t._cacheStyle,_=d.canvas,p=d.cacheAs;return u=d._calculateCacheRect(t,p,i,e),l=u.x,c=u.y,a=d.cacheRect,o=a.width*l,h=a.height*c,s=a.x,r=a.y,"bitmap"===p&&(o>2048||h>2048)?(alert("cache bitmap size larger than 2048,cache ignored"),d.releaseContext(),null):(_||(d.createContext(),_=d.canvas),n=_.context,_.context.sprite=t,(_.width!=o||_.height!=h)&&(_.size(o,h),n._targets&&(n._targets.destroy(),n._targets=null)),"bitmap"===p?_.context.asBitmap=!0:"normal"===p&&(_.context.asBitmap=!1),"normal"===p&&(n.touches=[]),_)},n(i,["_tempFloatArrayBuffer2",function(){return this._tempFloatArrayBuffer2=new Float32Array(2)},"_tempFloatArrayMatrix",function(){return this._tempFloatArrayMatrix=new Float32Array(6)},"_tempInt1",function(){return this._tempInt1=new Int32Array(1)}]),i}(Pn),zr=function(t){function i(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,i.__super.call(this),this._glBuffer=ki.instance.createBuffer()}s(i,"laya.webgl.utils.Buffer",t);var e=i.prototype;return e._bindForVAO=function(){},e.bind=function(){return!1},e._disposeResource=function(){this._glBuffer&&(ki.instance.deleteBuffer(this._glBuffer),this._glBuffer=null),this._setGPUMemory(0)},r(0,e,"bufferUsage",function(){return this._bufferUsage}),i._bindedVertexBuffer=null,i._bindedIndexBuffer=null,i}(wn),Yr=function(t){function i(){i.__super.call(this),this._width=-1,this._height=-1}s(i,"laya.resource.Bitmap",t);var e=i.prototype;return e._getSource=function(){throw"Bitmap: must override it."},r(0,e,"width",function(){return this._width}),r(0,e,"height",function(){return this._height}),i}(wn),Xr=function(t){function i(){i.__super.call(this)}return s(i,"laya.webgl.shader.BaseShader",t),i.activeShader=null,i.bindShader=null,i}(wn),qr=function(t){function i(t,e,n){this.texture=null,this._source=null,this._used=null,this._startFindPos=0,this._texW=0,this._texH=0,this._gridNum=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!1,this._discardTm=0,this.genID=0,this.ArrCharRenderInfo=[],i.__super.call(this),this._texW=t,this._texH=e,this._gridNum=n,this.texture=new Ee(this),this.setGridNum(n),this.lock=!0}s(i,"laya.webgl.resource.CharPageTexture",t);var n=i.prototype;return n.findAGrid=function(){for(var t=this._startFindPos;t<this._gridNum;t++)if(0==this._used[t]){this._startFindPos=t+1,this._used[t]=1;var i=this.ArrCharRenderInfo[t]=new de;return i.tex=this,i.pos=t,i}return null},n.removeGrid=function(t){this.ArrCharRenderInfo[t]&&(this.ArrCharRenderInfo[t].deleted=!0),this._used[t]=0,t<this._startFindPos&&(this._startFindPos=t)},n.removeOld=function(t){for(var i=0,e=null,n=0,s=this.charMaps.length;s>n;n++)if(e=this.charMaps[n]){var r=this;e.forEach(function(e,n,s){e&&e.touchTick<t&&(console.log("remove char "+n),r.removeGrid(e.pos),s.delete(n),i++)})}return i},n.reset=function(){this._discardTm=e.stage.getFrameTm(),this._startFindPos=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!0,this.ArrCharRenderInfo.forEach(function(t){t.deleted=!0})},n.setGridNum=function(t){if(this._gridNum=t,this._used&&this._used.length==this._gridNum)if(this._used.fill)this._used.fill(0);else for(var i=0;i<this._used.length;i++)this._used[i]=0;else this._used=new Uint8Array(t)},n.recreateResource=function(){if(!this._source){var t=gi.isConchApp?ki.instance.getDefaultCommandEncoder():ge.mainContext,i=this._source=t.createTexture();this.texture.bitmap._glTexture=this._source,Pe.bindTexture(t,3553,i),t.texImage2D(3553,0,6408,this._texW,this._texH,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)}},n.addChar=function(t,i,e){if(Cn.isWan1Wan)return this.addCharCanvas(t,i,e),void 0;!this._source&&this.recreateResource();var n=gi.isConchApp?ki.instance.getDefaultCommandEncoder():ge.mainContext;Pe.bindTexture(n,3553,this._source),!gi.isConchApp&&n.pixelStorei(37441,!0);var s=t.data;t.data instanceof Uint8ClampedArray&&(s=new Uint8Array(s.buffer)),n.texSubImage2D(3553,0,i,e,t.width,t.height,6408,5121,s),!gi.isConchApp&&n.pixelStorei(37441,!1)},n.addCharCanvas=function(t,i,e){!this._source&&this.recreateResource();var n=gi.isConchApp?ki.instance.getDefaultCommandEncoder():ge.mainContext;Pe.bindTexture(n,3553,this._source),!gi.isConchApp&&n.pixelStorei(37441,!0),n.texSubImage2D(3553,0,i,e,6408,5121,t),!gi.isConchApp&&n.pixelStorei(37441,!1)},n.destroy=function(){console.log("destroy CharPageTexture"),this.__destroyed=!0;var t=gi.isConchApp?ki.instance.getDefaultCommandEncoder():ge.mainContext;this._source&&t.deleteTexture(this._source),this._source=null,this.ArrCharRenderInfo.forEach(function(t){t.deleted=!0})},n.printDebugInfo=function(){console.log("current page info:"),console.log("  score:",this._score,",tick:",this._scoreTick,",gridnum:",this._gridNum);for(var t=0,i=this.charMaps.length;i>t;t++){var e=this.charMaps[t];if(e){var n="";e.forEach(function(t,i){t&&(n+=i)}),console.log("data[",t,"]:",n)}}},i}(wn),Jr=function(t){function i(t){this._audio=null,this._onEnd=null,this._resumePlay=null,i.__super.call(this),this._onEnd=en.bind(this.__onEnd,this),this._resumePlay=en.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}s(i,"laya.media.h5audio.AudioSoundChannel",t);var n=i.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(e.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,Ti.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},n.play=function(){this.isStopped=!1;try{this._audio.playbackRate=Pi.playbackRate,this._audio.currentTime=this.startTime}catch(t){return this._audio.addEventListener("canplay",this._resumePlay),void 0}Pi.addChannel(this),Ti.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()},n.stop=function(){this.isStopped=!0,Pi.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&gi.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Ti.onIE||this._audio!=Bn._musicAudio&&ee.recover("audio:"+this.url,this._audio),Ti.removeElement(this._audio),this._audio=null)},n.pause=function(){this.isStopped=!0,Pi.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,Pi.addChannel(this),"play"in this._audio&&this._audio.play())},r(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),r(0,n,"duration",function(){return this._audio?this._audio.duration:0}),r(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),i}(Nn),jr=function(t){function i(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=Un.ctx,i.__super.call(this),this._onPlayEnd=en.bind(this.__onPlayEnd,this),this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}s(i,"laya.media.webaudio.WebAudioSoundChannel",t);var n=i.prototype;return n.play=function(){if(Pi.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,i=this.gain,e=t.createBufferSource();this.bufferSource=e,e.buffer=this.audioBuffer,e.connect(i),i&&i.disconnect(),i.connect(t.destination),e.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Ti.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(e.loop=!0),e.playbackRate.setTargetAtTime?e.playbackRate.setTargetAtTime(Pi.playbackRate,this.context.currentTime,.001):e.playbackRate.value=Pi.playbackRate,e.start(0,this.startTime),this._currentTime=0}},n.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(e.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,i._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},n._tryClearBuffer=function(t){if(Ti.onMac)try{t.buffer=Un._miniBuffer}catch(e){i._tryCleanFailed=!0}else try{t.buffer=null}catch(e){i._tryCleanFailed=!0}},n.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,Pi.removeChannel(this),this.completeHandler=null,Pi.autoReleaseSound&&Pi.disposeSoundLater(this.url)},n.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,Pi.removeChannel(this),Pi.autoReleaseSound&&Pi.disposeSoundLater(this.url)},n.resume=function(){this.startTime=this._pauseTime,this.play()},r(0,n,"position",function(){return this.bufferSource?(Ti.now()-this._startTime)/1e3+this.startTime:0}),r(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),r(0,n,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.001):this.gain.gain.value=t)}),i._tryCleanFailed=!1,i.SetTargetDelay=.001,i}(Nn),Kr=function(t){function i(){this.autoDestroyAtClosed=!1,this.url=null,this._timer=null,this._viewCreated=!1,this._idMap=null,this._$componentType="Scene",this._$3__param=null,i.__super.call(this),this._setBit(8,!0),i.unDestroyedScenes.push(this),this._scene=this,this.createChildren()}s(i,"laya.display.Scene",t);var n=i.prototype;return n.createChildren=function(){},n.loadScene=function(t){var i=t.indexOf(".")>-1?t:t+".scene?"+(new Date).getTime().toString(),n=e.loader.getRes(i);if(n)this.createView(n);else{e.loader.resetProgress();var s=new Mn;s.on("complete",this,this._onSceneLoaded,[i]),s.on("progress",this,this._onPrgogress),s.load(i)}},n._onPrgogress=function(t){Ln.instance.event("UPDATE_LOADING_PROGRESS",t)},n._onSceneLoaded=function(t){console.log("加载scene:"+t),this.createView(Fn.getRes(t))},n.createView=function(t){if(t&&!this._viewCreated){this._viewCreated=!0,Hi.createByData(this,t);var i=this.getComponent(Dn);null!=i&&(i.param=this._$3__param)}},n.getNodeByID=function(t){return this._idMap?this._idMap[t]:null},n.open=function(t,e){void 0===t&&(t=!0),t&&i.closeAll(),i.root.addChild(this.scene),this.onOpened(e)},n.onOpened=function(){},n.close=function(t){this.autoDestroyAtClosed?this.destroy():this.removeSelf(),this.onClosed(t)},n.onClosed=function(){console.log("onClosed")},n.destroy=function(i){void 0===i&&(i=!0),this._idMap=null,t.prototype.destroy.call(this,i);for(var e=laya.display.Scene.unDestroyedScenes,n=0,s=e.length;s>n;n++)if(e[n]===this)return e.splice(n,1),void 0},n._sizeChanged=function(){this.event("resize")},r(0,n,"timer",function(){return this._timer||e.timer},function(t){this._timer=t}),r(0,n,"height",function(){if(this._height)return this._height;for(var t=0,i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);e._visible&&(t=Math.max(e._y+e.height*e.scaleY,t))}return t},function(t){e.superGet(ls,this,"height")!=t&&(e.superSet(ls,this,"height",t),this.callLater(this._sizeChanged))}),r(0,n,"param",null,function(t){if(this._$3__param=t,this._viewCreated){var i=this.getComponent(Dn);null!=i&&(i.param=this._$3__param)}}),r(0,n,"scaleX",t.prototype._$get_scaleX,function(t){e.superGet(ls,this,"scaleX")!=t&&(e.superSet(ls,this,"scaleX",t),this.event("resize"))}),r(0,n,"scaleY",t.prototype._$get_scaleY,function(t){e.superGet(ls,this,"scaleY")!=t&&(e.superSet(ls,this,"scaleY",t),this.event("resize"))}),r(0,n,"width",function(){if(this._width)return this._width;for(var t=0,i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);e._visible&&(t=Math.max(e._x+e.width*e.scaleX,t))}return t},function(t){e.superGet(ls,this,"width")!=t&&(e.superSet(ls,this,"width",t),this.callLater(this._sizeChanged))}),r(1,i,"root",function(){function t(){i._root.size(e.stage.width,e.stage.height),i._root.event("resize")}return i._root||(i._root=e.stage.addChild(new ls),i._root.name="root",e.stage.on("resize",null,t),t()),i._root},laya.display.Sprite._$SET_root),i.load=function(t,n,s){function r(t){i._loadPage&&i._loadPage.event("progress",t),s&&s.runWith(t)}function a(){o.off("progress",null,r);var e=Fn.getRes(t);if(!e)throw"Can not find scene:"+t;if(!e.props)throw"Scene data is error:"+t;var s=e.props.runtime?e.props.runtime:e.type,a=he.getClass(s);if("instance"==e.props.renderType)var h=a.instance||(a.instance=new a);else h=new a;if(!(h&&h instanceof laya.display.Node))throw"Can not find scene:"+s;h.url=t,h._getBit(8)?(h.on("onViewCreated",null,function(){n&&n.runWith(h)}),h.createView(e)):n&&n.runWith(h),i.hideLoadingPage()}e.loader.resetProgress();var o=new Mn;o.on("progress",null,r),o.once("complete",null,a),o.load(t)},i.open=function(t,e,n,s,r){if(void 0===e&&(e=!0),n instanceof laya.utils.Handler){var a=s;s=n,n=a}i.showLoadingPage(),i.load(t,c.create(null,this._onSceneLoaded,[e,s,n]),r)},i._onSceneLoaded=function(t,i,e,n){n.open(t,e),i&&i.runWith(n)},i.close=function(t,i){void 0===i&&(i="");for(var e=!1,n=laya.display.Scene.unDestroyedScenes,s=0,r=n.length;r>s;s++){var a=n[s];a.parent&&a.url===t&&a.name==i&&(a.close(),e=!0)}return e},i.closeAll=function(){for(var t=laya.display.Scene.root,i=0,e=t.numChildren;e>i;i++){var n=t.getChildAt(0);n instanceof laya.display.Scene&&n.close()}},i.destroy=function(t,i){void 0===i&&(i="");for(var e=!1,n=laya.display.Scene.unDestroyedScenes,s=0,r=n.length;r>s;s++){var a=n[s];a.url===t&&a.name==i&&(a.destroy(),e=!0)}return e},i.gc=function(t){wn.destroyUnusedResources(t)},i.setLoadingPage=function(t){i._loadPage!=t&&(i._loadPage=t)},i.showLoadingPage=function(t,n){void 0===n&&(n=500),i._loadPage&&(e.systemTimer.clear(null,i._showLoading),e.systemTimer.clear(null,i._hideLoading),e.systemTimer.once(n,null,i._showLoading,[t],!1))},i._showLoading=function(t){e.stage.addChild(i._loadPage),i._loadPage.onOpened(t)},i._hideLoading=function(){i._loadPage.close()},i.hideLoadingPage=function(t){void 0===t&&(t=500),i._loadPage&&(e.systemTimer.clear(null,i._showLoading),e.systemTimer.clear(null,i._hideLoading),e.systemTimer.once(t,null,i._hideLoading))},i.unDestroyedScenes=[],i._root=null,i._loadPage=null,i}(ls),Zr=function(t){function i(){this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,i.__super.call(this),this._anchorX=0/0,this._anchorY=0/0,this._widget=Vn.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}s(i,"laya.ui.UIComponent",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._dataSource=null,this._tag=null,this._toolTip=null},n.preinitialize=function(){},n.createChildren=function(){},n.initialize=function(){},n.measureWidth=function(){var t=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);e._visible&&(t=Math.max(e._x+e.width*e.scaleX,t))}return t},n.commitMeasure=function(){},n.measureHeight=function(){var t=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var e=this.getChildAt(i);e._visible&&(t=Math.max(e._y+e.height*e.scaleY,t))}return t},n._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event("resize"),this._widget!==Vn.EMPTY&&this._widget.resetLayout()},n.onMouseOver=function(){e.stage.event("showtip",this._toolTip)},n.onMouseOut=function(){e.stage.event("hidetip",this._toolTip)},n._getWidget=function(){return this._widget===Vn.EMPTY&&(this._widget=this.addComponent(Vn)),this._widget},n.onCompResize=function(){this._sizeChanged()},n._childChanged=function(i){this.callLater(this._sizeChanged),t.prototype._childChanged.call(this,i)},r(0,n,"centerY",function(){return this._widget.centerY},function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}),r(0,n,"width",function(){return this._width?this._width:this.measureWidth()
},function(t){e.superGet(ls,this,"width")!=t&&(e.superSet(ls,this,"width",t),this.callLater(this._sizeChanged))}),r(0,n,"bottom",function(){return this._widget.bottom},function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}),r(0,n,"height",function(){return this._height?this._height:this.measureHeight()},function(t){e.superGet(ls,this,"height")!=t&&(e.superSet(ls,this,"height",t),this.callLater(this._sizeChanged))}),r(0,n,"left",function(){return this._widget.left},function(t){t!=this._widget.left&&(this._getWidget().left=t)}),r(0,n,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var i in this._dataSource)this.hasOwnProperty(i)&&"function"!=typeof this[i]&&(this[i]=this._dataSource[i])}),r(0,n,"centerX",function(){return this._widget.centerX},function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}),r(0,n,"top",function(){return this._widget.top},function(t){t!=this._widget.top&&(this._getWidget().top=t)}),r(0,n,"right",function(){return this._widget.right},function(t){t!=this._widget.right&&(this._getWidget().right=t)}),r(0,n,"tag",function(){return this._tag},function(t){this._tag=t}),r(0,n,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),r(0,n,"gray",function(){return this._gray},function(t){t!==this._gray&&(this._gray=t,hn.gray(this,t))}),r(0,n,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}),r(0,n,"scaleX",t.prototype._$get_scaleX,function(t){e.superGet(ls,this,"scaleX")!=t&&(e.superSet(ls,this,"scaleX",t),this.event("resize"))}),r(0,n,"scaleY",t.prototype._$get_scaleY,function(t){e.superGet(ls,this,"scaleY")!=t&&(e.superSet(ls,this,"scaleY",t),this.event("resize"))}),r(0,n,"anchorX",function(){return this._anchorX},function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}),r(0,n,"anchorY",function(){return this._anchorY},function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}),i}(ls),$r=function(t){function i(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._actionName=null,this._controlNode=null,i.__super.call(this),this._interval=ke.animationInterval,this._setBitUp(16)}s(i,"laya.display.AnimationBase",t);var e=i.prototype;return e.play=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=!0),void 0===e&&(e=""),this._isPlaying=!0,this._actionName=e,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=i,this._isReverse=1===this.wrapMode,0==this.index&&this._isReverse&&(this.index=this.count-1),this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e._getFrameByLabel=function(t){for(var i=0;i<this._count;i++){var e=this._labels[i];if(e&&e.indexOf(t)>-1)return i}return 0},e._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},e._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._resumePlay),this._controlNode.off("undisplay",this,this._resumePlay)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._resumePlay),t.on("undisplay",this,this._resumePlay))},e._setDisplay=function(i){t.prototype._setDisplay.call(this,i),this._resumePlay()},e._resumePlay=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},e.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},e.addLabel=function(t,i){this._labels||(this._labels={}),this._labels[i]||(this._labels[i]=[]),this._labels[i].push(t)},e.removeLabel=function(t){if(t){if(this._labels)for(var i in this._labels)this._removeLabelFromList(this._labels[i],t)}else this._labels=null},e._removeLabelFromList=function(t,i){if(t)for(var e=t.length-1;e>=0;e--)t[e]==i&&t.splice(e,1)},e.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},e._displayToIndex=function(){},e.clear=function(){return this.stop(),this._labels=null,this},r(0,e,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}),r(0,e,"isPlaying",function(){return this._isPlaying}),r(0,e,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var i=this._labels[t],e=0,n=i.length;n>e;e++)this.event("label",i[e])}),r(0,e,"count",function(){return this._count}),i.WRAP_POSITIVE=0,i.WRAP_REVERSE=1,i.WRAP_PINGPONG=2,i}(ls),Qr=function(t){function i(){this.lockLayer=null,this.popupEffect=function(t){t.scale(1,1),Ni.from(t,{x:e.stage.width/2,y:e.stage.height/2,scaleX:0,scaleY:0},300,dn.backOut,c.create(this,this.doOpen,[t]))},this.closeEffect=function(t){Ni.to(t,{x:e.stage.width/2,y:e.stage.height/2,scaleX:0,scaleY:0},300,dn.strongOut,c.create(this,this.doClose,[t]))},i.__super.call(this),this.maskLayer=new ls,this.popupEffectHandler=new c(this,this.popupEffect),this.closeEffectHandler=new c(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,e.stage.addChild(this),e.stage.on("resize",this,this._onResize),We.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}s(i,"laya.ui.DialogManager",t);var n=i.prototype;return n._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close()},n.setLockView=function(t){this.lockLayer||(this.lockLayer=new va,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(e.stage.width,e.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))},n._onResize=function(){var t=this.maskLayer.width=e.stage.width,i=this.maskLayer.height=e.stage.height;this.lockLayer&&this.lockLayer.size(t,i),this.maskLayer.graphics.clear(!0),this.maskLayer.graphics.drawRect(0,0,t,i,We.popupBgColor),this.maskLayer.alpha=We.popupBgAlpha;for(var n=this.numChildren-1;n>-1;n--){var s=this.getChildAt(n);s.isPopupCenter&&this._centerDialog(s)}},n._centerDialog=function(t){t.x=Math.round((e.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((e.stage.height-t.height>>1)+t.pivotY)},n.open=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),i&&this._closeAll(),t.isPopupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._getBit(32))&&e.timer.callLater(this,this._checkMask),n&&null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event("open")},n.doOpen=function(t){t.onOpened(t._param)},n.lock=function(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},n.close=function(t){t.isShowEffect&&null!=t.closeEffect?t.closeEffect.runWith([t]):this.doClose(t),this.event("close")},n.doClose=function(t){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(t.closeType),t.onClosed(t.closeType),t.autoDestroyAtClosed&&t.destroy()},n.closeAll=function(){this._closeAll(),this.event("close")},n._closeAll=function(){for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);i&&null!=i.close&&this.doClose(i)}},n.getDialogsByGroup=function(t){for(var i=[],e=this.numChildren-1;e>-1;e--){var n=this.getChildAt(e);n&&n.group===t&&i.push(n)}return i},n.closeByGroup=function(t){for(var i=[],e=this.numChildren-1;e>-1;e--){var n=this.getChildAt(e);n&&n.group===t&&(n.close(),i.push(n))}return i},n._checkMask=function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var i=this.getChildAt(t);if(i&&i.isModal)return this.addChildAt(this.maskLayer,t),void 0}},i}(ls),ta=function(t){function i(){this._element=null,this._recList=[],this._innerHTML=null,this._repaintState=0,i.__super.call(this),this._element=new as,this._element.repaintHandler=new c(this,this._htmlDivRepaint),this.mouseEnabled=!0,this.on("click",this,this._onMouseClick)}s(i,"laya.html.dom.HTMLDivElement",t);var e=i.prototype;return e.destroy=function(i){void 0===i&&(i=!0),this._element&&this._element.reset(),this._element=null,this._doClears(),t.prototype.destroy.call(this,i)},e._htmlDivRepaint=function(t){void 0===t&&(t=!1),t?this._repaintState<2&&(this._repaintState=2):this._repaintState<1&&(this._repaintState=1),this._repaintState>0&&this._setGraphicDirty()},e._updateGraphicWork=function(){switch(this._repaintState){case 1:this._updateGraphic();break;case 2:this._refresh()}},e._setGraphicDirty=function(){this.callLater(this._updateGraphicWork)},e._doClears=function(){if(this._recList){var t,i=0,e=this._recList.length;for(i=0;e>i;i++)t=this._recList[i],t.recover();this._recList.length=0}},e._updateGraphic=function(){this._doClears(),this.graphics.clear(!0),this._repaintState=0,this._element.drawToGraphic(this.graphics,-this._element.x,-this._element.y,this._recList);var t=this._element.getBounds();t&&this.setSelfBounds(t),this.size(t.width,t.height)},e._refresh=function(){this._repaintState=1,this._innerHTML&&(this._element.innerHTML=this._innerHTML),this._setGraphicDirty()},e._onMouseClick=function(){var t,i=this.mouseX,e=this.mouseY,n=0,s=0;for(s=this._recList.length,n=0;s>n;n++)t=this._recList[n],t.rec.contains(i,e)&&this._eventLink(t.href)},e._eventLink=function(t){this.event("link",[t])},r(0,e,"style",function(){return this._element.style}),r(0,e,"innerHTML",null,function(t){this._innerHTML!=t&&(this._repaintState=1,this._innerHTML=t,this._element.innerHTML=t,this._setGraphicDirty())}),r(0,e,"contextWidth",function(){return this._element.contextWidth}),r(0,e,"contextHeight",function(){return this._element.contextHeight}),i}(ls),ia=function(t){function i(){i.__super.call(this)}s(i,"laya.layagl.ConchSprite",t);var e=i.prototype;return e.parentRepaintForNative=function(t){void 0===t&&(t=2);var i=this._parent;i&&(i._conchData._int32Data[4]&t)!=t&&(i._conchData._int32Data[4]|=t,i.parentRepaintForNative(t))},e.renderToNative=function(t){var i=t.gl,e=ki.getFrameCount()-1,n=this._conchData._int32Data,s=n[4];this._children.length>0?e!=n[3]||s>0&&1==(1&s)?(i.blockStart(this._conchData),this._renderChilds(t),i.blockEnd(this._conchData)):i.copyCmdBuffer(this._conchData._int32Data[1],this._conchData._int32Data[2]):i.block(this._conchData)},e.writeBlockToNative=function(){var t=ki.instance;this._children.length>0?(t.blockStart(this._conchData),this._writeBlockChilds(),t.blockEnd(this._conchData)):t.block(this._conchData)},e._renderChilds=function(t){var i,e=this._children,n=0,s=e.length,r=this._style;if(r.viewport)for(var a=r.viewport,o=a.x,h=a.y,l=a.right,c=a.bottom,u=0/0,d=0/0;s>n;++n)(i=e[n])._visible&&(u=i._x)<l&&u+i.width>o&&(d=i._y)<c&&d+i.height>h&&i.renderToNative(t);else for(;s>n;++n)(i=e[n])._visible&&i.renderToNative(t)},e._writeBlockChilds=function(){var t,i=this._children,e=0,n=i.length,s=this._style;if(s.viewport)for(var r=s.viewport,a=r.x,o=r.y,h=r.right,l=r.bottom,c=0/0,u=0/0;n>e;++e)(t=i[e])._visible&&(c=t._x)<h&&c+t.width>a&&(u=t._y)<l&&u+t.height>o&&t.writeBlockToNative();else for(;n>e;++e)(t=i[e])._visible&&t.writeBlockToNative()},e.repaintForNative=function(t){void 0===t&&(t=2),(this._conchData._int32Data[4]&t)!=t&&(this._conchData._int32Data[4]|=t,this.parentRepaintForNative(t))},i}(ls),ea=function(i){function a(){function t(){"hidden"==Ti.document[s]?(i._isVisibility=!1,n._isInputting()&&(ka.inputElement.target.focus=!1)):i._isVisibility=!0,i.renderingEnabled=i._isVisibility,n.event("visibilitychange")}this.focus=null,this._frameRate="fast",this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=0,this._isFocused=!1,this._isVisibility=!1,this._wgColor=[0,0,0,1],this._scene3Ds=[],this._globalRepaintSet=!1,this._globalRepaintGet=!1,a.__super.call(this),this.offset=new Oe,this._canvasTransform=new $e,this._previousOrientation=Ti.window.orientation;var i=this;this.transform=$e.create(),this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._setBit(128,!0),this._setBit(2,!0),this._isFocused=!0,this._isVisibility=!0;var e=Ti.window,n=this;e.addEventListener("focus",function(){i._isFocused=!0,n.event("focus"),n.event("focuschange")}),e.addEventListener("blur",function(){i._isFocused=!1,n.event("blur"),n.event("focuschange"),n._isInputting()&&(ka.inputElement.target.focus=!1)});var s="visibilityState",r="visibilitychange",o=e.document;"undefined"!=typeof o.hidden?(r="visibilitychange",s="visibilityState"):"undefined"!=typeof o.mozHidden?(r="mozvisibilitychange",s="mozVisibilityState"):"undefined"!=typeof o.msHidden?(r="msvisibilitychange",s="msVisibilityState"):"undefined"!=typeof o.webkitHidden&&(r="webkitvisibilitychange",s="webkitVisibilityState"),e.document.addEventListener(r,t),e.addEventListener("resize",function(){var t=Ti.window.orientation;null!=t&&t!=i._previousOrientation&&n._isInputting()&&(ka.inputElement.target.focus=!1),i._previousOrientation=t,n._isInputting()||(Ti.onSafari&&(n._safariOffsetY=(Ti.window.__innerHeight||Ti.document.body.clientHeight||Ti.document.documentElement.clientHeight)-Ti.window.innerHeight),n._resetCanvas())}),e.addEventListener("orientationchange",function(){n._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Ti.onMobile&&this.on("mousedown",this,this._onmouseMove)}s(a,"laya.display.Stage",i);var h=a.prototype;return h._isInputting=function(){return Ti.onMobile&&ka.isInputting},h._changeCanvasSize=function(){this.setScreenSize(Ti.clientWidth*Ti.pixelRatio,Ti.clientHeight*Ti.pixelRatio)},h._resetCanvas=function(){this.screenAdaptationEnabled&&this._changeCanvasSize()},h.setScreenSize=function(t,i){var e=!1;if("none"!==this._screenMode){var n=1>t/i?"vertical":"horizontal";if(e=n!==this._screenMode){var s=i;i=t,t=s}}this.canvasRotation=e;var r=gi._mainCanvas,a=r.source.style,o=this._canvasTransform.identity(),h=this._scaleMode,l=t/this.designWidth,c=i/this.designHeight,u=this.designWidth,d=this.designHeight,_=t,p=i,f=Ti.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":l=c=1,_=this.designWidth,p=this.designHeight;break;case"showall":l=c=Math.min(l,c),u=_=Math.round(this.designWidth*l),d=p=Math.round(this.designHeight*c);break;case"noborder":l=c=Math.max(l,c),_=Math.round(this.designWidth*l),p=Math.round(this.designHeight*c);break;case"full":l=c=1,this._width=u=t,this._height=d=i;break;case"fixedwidth":c=l,this._height=d=Math.round(i/l);break;case"fixedheight":l=c,this._width=u=Math.round(t/c);break;case"fixedauto":t/i<this.designWidth/this.designHeight?(c=l,this._height=d=Math.round(i/l)):(l=c,this._width=u=Math.round(t/c))}l*=this.scaleX,c*=this.scaleY,1===l&&1===c?this.transform.identity():(this.transform.a=this._formatData(l/(_/u)),this.transform.d=this._formatData(c/(p/d))),gi.isConchApp&&(this._conchData._float32Data[10]=this._formatData(l/(_/u)),this._conchData._float32Data[11]=this._formatData(c/(p/d)),this._conchData._float32Data[15]=1),r.size(u,d),Oi.changeWebGLSize(u,d),o.scale(_/u/f,p/d/f),this.offset.x="left"===this._alignH?0:"right"===this._alignH?t-_:.5*(t-_)/f,this.offset.y="top"===this._alignV?0:"bottom"===this._alignV?i-p:.5*(i-p)/f,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),o.translate(this.offset.x,this.offset.y),this._safariOffsetY&&o.translate(0,this._safariOffsetY),this.canvasDegree=0,e&&("horizontal"===this._screenMode?(o.rotate(Math.PI/2),o.translate(i/f,0),this.canvasDegree=90):(o.rotate(-Math.PI/2),o.translate(0,t/f),this.canvasDegree=-90)),o.a=this._formatData(o.a),o.d=this._formatData(o.d),o.tx=this._formatData(o.tx),o.ty=this._formatData(o.ty),a.transformOrigin=a.webkitTransformOrigin=a.msTransformOrigin=a.mozTransformOrigin=a.oTransformOrigin="0px 0px 0px",a.transform=a.webkitTransform=a.msTransform=a.mozTransform=a.oTransform="matrix("+o.toString()+")",this._safariOffsetY&&o.translate(0,-this._safariOffsetY),o.translate(parseInt(a.left)||0,parseInt(a.top)||0),this.visible=!0,this._repaint|=2,this.event("resize")},h._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},h.getMousePoint=function(){return Oe.TEMP.setTo(this.mouseX,this.mouseY)},h.repaint=function(t){void 0===t&&(t=2),this._repaint|=t},h.repaintForNative=function(t){void 0===t&&(t=2),this._conchData._int32Data[4]|=t},h.parentRepaint=function(t){void 0===t&&(t=2)},h._loop=function(){return this._globalRepaintGet=this._globalRepaintSet,this._globalRepaintSet=!1,this.render(gi._context,0,0),!0},h.getFrameTm=function(){return this._frameStartTime},h._onmouseMove=function(){this._mouseMoveTime=Ti.now()},h.getTimeFromFrameStart=function(){return Ti.now()-this._frameStartTime},h.render=function(t,e,n){if(a._dbgSprite.graphics.clear(),"sleep"===this._frameRate){var s=Ti.now();if(!(s-this._frameStartTime>=1e3))return;this._frameStartTime=s}else{if(!this._visible)return this._renderCount++,this._renderCount%5===0&&(ci.I._update(),Ri.loopCount++,this._updateTimers()),void 0;this._frameStartTime=Ti.now()}this._renderCount++;var r="mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate,o="slow"!==r,h=this._renderCount%2===0;if(Ri.renderSlow=!o,(o||h)&&(ci.I._update(),Ri.loopCount++,!gi.isConchApp&&gi.isWebGL&&this.renderingEnabled)){for(var l=0,c=this._scene3Ds.length;c>l;l++)this._scene3Ds[l]._update();t.clear(),i.prototype.render.call(this,t,e,n),Ri._show&&Ri._sp&&Ri._sp.render(t,e,n)}a._dbgSprite.render(t,0,0),(o||!h)&&(this.renderingEnabled&&(gi.isWebGL?(Oi.clear(this._bgColor),t.flush(),re.instance&&re.getInstance().endDispose()):(Oi.clear(this._bgColor),i.prototype.render.call(this,t,e,n),Ri._show&&Ri._sp&&Ri._sp.render(t,e,n),gi.isConchApp&&t.gl.commit())),this._updateTimers())},h._updateTimers=function(){e.systemTimer._update(),e.startTimer._update(),e.physicsTimer._update(),e.updateTimer._update(),e.lateTimer._update(),e.timer._update()},h.renderToNative=function(t,n,s){return this._renderCount++,Ri.loopCount++,this._visible?(ci.I._update(),e.systemTimer._update(),e.startTimer._update(),e.physicsTimer._update(),e.updateTimer._update(),e.lateTimer._update(),e.timer._update(),this.renderingEnabled&&(Oi.clear(this._bgColor),i.prototype.render.call(this,t,n,s),Ri._show&&Ri._sp&&Ri._sp.render(t,n,s),t.gl.commit()),void 0):(this._renderCount%5===0&&(ci.I._update(),Ri.loopCount++,e.systemTimer._update(),e.startTimer._update(),e.physicsTimer._update(),e.updateTimer._update(),e.lateTimer._update(),e.timer._update()),void 0)},h._requestFullscreen=function(){var t=Ti.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},h._fullScreenChanged=function(){e.stage.event("fullscreenchange")},h.exitFullscreen=function(){var t=Ti.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},h.isGlobalRepaint=function(){return this._globalRepaintGet},h.setGlobalRepaint=function(){this._globalRepaintSet=!0},r(0,h,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),r(0,h,"width",i.prototype._$get_width,function(t){this.designWidth=t,e.superSet(ls,this,"width",t),e.systemTimer.callLater(this,this._changeCanvasSize)}),r(0,h,"isFocused",function(){return this._isFocused}),r(0,h,"alignH",function(){return this._alignH},function(t){this._alignH=t,e.systemTimer.callLater(this,this._changeCanvasSize)}),r(0,h,"height",i.prototype._$get_height,function(t){this.designHeight=t,e.superSet(ls,this,"height",t),e.systemTimer.callLater(this,this._changeCanvasSize)}),r(0,h,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||this._createTransform()},i.prototype._$set_transform),r(0,h,"isVisibility",function(){return this._isVisibility}),r(0,h,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,e.systemTimer.callLater(this,this._changeCanvasSize)}),r(0,h,"alignV",function(){return this._alignV},function(t){this._alignV=t,e.systemTimer.callLater(this,this._changeCanvasSize)}),r(0,h,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,gi.isWebGL&&(this._wgColor=t?o.create(t).arrColor:null),Ti.onLimixiu?this._wgColor=o.create(t).arrColor:gi.canvas.style.background=t?t:"none",gi.isConchApp&&(this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType))}),r(0,h,"mouseX",function(){return Math.round(ri.instance.mouseX/this.clientScaleX)}),r(0,h,"mouseY",function(){return Math.round(ri.instance.mouseY/this.clientScaleY)}),r(0,h,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),r(0,h,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),r(0,h,"visible",i.prototype._$get_visible,function(t){if(this.visible!==t){e.superSet(ls,this,"visible",t);var i=gi._mainCanvas.source.style;i.visibility=t?"visible":"hidden"}}),r(0,h,"fullScreenEnabled",null,function(t){var i=Ti.document,e=gi.canvas;t?(e.addEventListener("mousedown",this._requestFullscreen),e.addEventListener("touchstart",this._requestFullscreen),i.addEventListener("fullscreenchange",this._fullScreenChanged),i.addEventListener("mozfullscreenchange",this._fullScreenChanged),i.addEventListener("webkitfullscreenchange",this._fullScreenChanged),i.addEventListener("msfullscreenchange",this._fullScreenChanged)):(e.removeEventListener("mousedown",this._requestFullscreen),e.removeEventListener("touchstart",this._requestFullscreen),i.removeEventListener("fullscreenchange",this._fullScreenChanged),i.removeEventListener("mozfullscreenchange",this._fullScreenChanged),i.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),i.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),r(0,h,"frameRate",function(){return gi.isConchApp?this._frameRateNative:this._frameRate},function(i){if(gi.isConchApp){switch(i){case"fast":t.conch.config.setLimitFPS(60);break;case"mouse":t.conch.config.setMouseFrame(2e3);break;case"slow":t.conch.config.setSlowFrame(!0);break;case"sleep":t.conch.config.setLimitFPS(1)}this._frameRateNative=i}else this._frameRate=i}),a.SCALE_NOSCALE="noscale",a.SCALE_EXACTFIT="exactfit",a.SCALE_SHOWALL="showall",a.SCALE_NOBORDER="noborder",a.SCALE_FULL="full",a.SCALE_FIXED_WIDTH="fixedwidth",a.SCALE_FIXED_HEIGHT="fixedheight",a.SCALE_FIXED_AUTO="fixedauto",a.ALIGN_LEFT="left",a.ALIGN_RIGHT="right",a.ALIGN_CENTER="center",a.ALIGN_TOP="top",a.ALIGN_MIDDLE="middle",a.ALIGN_BOTTOM="bottom",a.SCREEN_NONE="none",a.SCREEN_HORIZONTAL="horizontal",a.SCREEN_VERTICAL="vertical",a.FRAME_FAST="fast",a.FRAME_SLOW="slow",a.FRAME_MOUSE="mouse",a.FRAME_SLEEP="sleep",n(a,["_dbgSprite",function(){return this._dbgSprite=new ls}]),a}(ls),na=function(i){function a(){this._clipPoint=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=0,this._startY=0,this._words=null,this._charSize={},this._valign="top",this._color="#000000",a.__super.call(this),this._fontSize=a.defaultFontSize,this._font=a.defaultFont,this.overflow="visible",this._style=Yn.EMPTY}s(a,"laya.display.Text",i);var o=a.prototype;return o.getStyle=function(){return this._style===Yn.EMPTY&&(this._style=Yn.create()),this._style},o._getTextStyle=function(){return this._style===Yn.EMPTY&&(this._style=Yn.create()),this._style},o.destroy=function(t){void 0===t&&(t=!0),i.prototype.destroy.call(this,t),this._clipPoint=null,this._lines=null,this._lineWidths=null,this._words=null,this._charSize=null},o._getBoundPointsM=function(t){void 0===t&&(t=!1);var i=on.TEMP;return i.setTo(0,0,this.width,this.height),i._getBoundPoints()},o.getGraphicBounds=function(t){void 0===t&&(t=!1);var i=on.TEMP;return i.setTo(0,0,this.width,this.height),i},o._getCSSStyle=function(){return this._style},o.lang=function(t){if(t=a.langPacks&&a.langPacks[t]?a.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var i=0,e=arguments.length;e>i;i++)t=t.replace("{"+i+"}",arguments[i+1]);this._text=t}},o._getContextFont=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Ti.onIPhone?laya.display.Text.fontFamilyMap[this.font]||this.font:this.font)},o._isPassWordMode=function(){var t=this._style,i=t.asPassword;return"prompt"in this&&this.prompt==this._text&&(i=!1),i},o._getPassWordTxt=function(t){var i,e=t.length;i="";for(var n=e;n>0;n--)i+="●";return i},o._renderText=function(){var t=this.padding,i=this._lines.length;"visible"!=this.overflow&&(i=Math.min(i,Math.floor((this.height-t[0]-t[2])/(this.leading+this._charSize.height))+1));var e=this.scrollY/(this._charSize.height+this.leading)|0,n=this.graphics;n.clear(!0);var s=this._getContextFont();Ti.context.font=s;var r=t[3],a="left",o=this._lines,h=this.leading+this._charSize.height,l=this._style.currBitmapFont;l&&(h=this.leading+l.getMaxHeight());var c=t[0];if(!l&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(a="right",r=this._width-t[1]):"center"==this.align&&(a="center",r=.5*this._width+t[3]-t[1])),this._height>0){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?c=.5*(this._height-i*h)+t[0]-t[2]:"bottom"===u&&(c=this._height-i*h-t[2])}var d=this._style;if(l&&l.autoScaleSize)var _=l.fontSize/this.fontSize;if(this._clipPoint){if(n.save(),l&&l.autoScaleSize){var p=0,f=0;p=this._width?this._width-t[3]-t[1]:this._textWidth,f=this._height?this._height-t[0]-t[2]:this._textHeight,p*=_,f*=_,n.clipRect(t[3],t[0],p,f)}else n.clipRect(t[3],t[0],this._width?this._width-t[3]-t[1]:this._textWidth,this._height?this._height-t[0]-t[2]:this._textHeight);this.repaint()}var m=d.asPassword;"prompt"in this&&this.prompt==this._text&&(m=!1);for(var g=0,v=0,S=Math.min(this._lines.length,i+e)||1,y=e;S>y;y++){var C,E=o[y];if(m){var b=E.length;E="";for(var I=b;I>0;I--)E+="●"}if(null==E&&(E=""),g=r-(this._clipPoint?this._clipPoint.x:0),v=c+h*y-(this._clipPoint?this._clipPoint.y:0),this.underline&&this._drawUnderline(a,g,v,y),l){var x=this.width;l.autoScaleSize&&(x=this.width*_),l._drawText(E,this,g,v,this.align,x)}else gi.isWebGL?(this._words||(this._words=[]),C=this._words.length>y-e?this._words[y-e]:new Fe,C.setText(E)):C=E,d.stroke?n.fillBorderText(C,g,v,s,this.color,d.strokeColor,d.stroke,a):n.fillText(C,g,v,s,this.color,a)}if(l&&l.autoScaleSize){var P=1/_;this.scale(P,P)}this._clipPoint&&n.restore(),this._startX=r,this._startY=c},o._drawUnderline=function(t,i,e,n){var s=this._lineWidths[n];switch(t){case"center":i-=s/2;break;case"right":i-=s;break;case"left":}e+=this._charSize.height,this._graphics.drawLine(i,e,i+s,e,this.underlineColor||this.color,1)},o.typeset=function(){return this._isChanged=!1,this._text?(gi.isConchApp?t.conchTextCanvas.font=this._getContextFont():Ti.context.font=this._getContextFont(),this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this._parseLines(this._getPassWordTxt(this._text)):this._parseLines(this._text),this._evalTextSize(),this._checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Oe(0,0)):this._clipPoint=null,this._renderText(),void 0):(this._clipPoint=null,this._textWidth=this._textHeight=0,this.graphics.clear(!0),void 0)},o._evalTextSize=function(){var t=0/0,i=0/0;t=Math.max.apply(this,this._lineWidths),i=this._style.currBitmapFont?this._lines.length*(this._style.currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],(t!=this._textWidth||i!=this._textHeight)&&(this._textWidth=t,this._textHeight=i)},o._checkEnabledViewportOrNot=function(){return"scroll"==this.overflow&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},o.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},o._parseLines=function(i){var e=this.wordWrap||"hidden"==this.overflow;if(e)var n=this._getWordWrapWidth();var s=this._style.currBitmapFont;if(s)this._charSize.width=s.getMaxWidth(),this._charSize.height=s.getMaxHeight();else{var r=null;r=gi.isConchApp?t.conchTextCanvas.measureText(this._testWord):Ti.context.measureText(a._testWord),this._charSize.width=r.width,this._charSize.height=r.height||this.fontSize}for(var o=i.replace(/\r\n/g,"\n").split("\n"),h=0,l=o.length;l>h;h++){var c=o[h];e?this._parseLine(c,n):(this._lineWidths.push(this._getTextWidth(c)),this._lines.push(c))}},o._parseLine=function(t,i){var e,n=(Ti.context,this._lines),s=0,r=0/0,a=0/0,o=0;if(r=this._getTextWidth(t),i>=r)return n.push(t),this._lineWidths.push(r),void 0;r=this._charSize.width,s=Math.floor(i/r),0==s&&(s=1),r=this._getTextWidth(t.substring(0,s)),a=r;for(var h=s,l=t.length;l>h;h++)if(r=this._getTextWidth(t.charAt(h)),a+=r,a>i)if(this.wordWrap){var c=t.substring(o,h);if(c.charCodeAt(c.length-1)<255&&(e=/(?:\w|-)+$/.exec(c),e&&(h=e.index+o,0==e.index?h+=c.length:c=t.substring(o,h))),n.push(c),this._lineWidths.push(a-r),o=h,!(l>h+s)){n.push(t.substring(o,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),o=-1;break}h+=s,r=this._getTextWidth(t.substring(o,h)),a=r,h--}else if("hidden"==this.overflow)return n.push(t.substring(0,h)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),void 0;this.wordWrap&&-1!=o&&(n.push(t.substring(o,l)),this._lineWidths.push(this._getTextWidth(n[n.length-1])))},o._getTextWidth=function(i){var e=this._style.currBitmapFont;return e?e.getTextWidth(i):gi.isConchApp?t.conchTextCanvas.measureText(i).width:Ti.context.measureText(i).width},o._getWordWrapWidth=function(){var t=this.padding,i=0/0,e=this._style.currBitmapFont;return i=e&&e.autoScaleSize?this._width*(e.fontSize/this.fontSize):this._width,0>=i&&(i=this.wordWrap?100:Ti.width),0>=i&&(i=100),i-t[3]-t[1]},o.getCharPoint=function(t,i){this._isChanged&&e.systemTimer.runCallLater(this,this.typeset);for(var n=0,s=this._lines,r=0,a=0,o=s.length;o>a;a++){if(n+=s[a].length,n>t){var h=a;break}r=n}var l=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Ti.context.font=l;var c=this._getTextWidth(this._text.substring(r,t)),u=i||new Oe;return u.setTo(this._startX+c-(this._clipPoint?this._clipPoint.x:0),this._startY+h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},r(0,o,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(e.superSet(ls,this,"width",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,o,"textWidth",function(){return this._isChanged&&e.systemTimer.runCallLater(this,this.typeset),this._textWidth}),r(0,o,"height",function(){return this._height?this._height:this.textHeight},function(t){t!=this._height&&(e.superSet(ls,this,"height",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,o,"textHeight",function(){return this._isChanged&&e.systemTimer.runCallLater(this,this.typeset),this._textHeight
}),r(0,o,"padding",function(){return this._style.padding},function(t){if("string"==typeof t){var i;i=t.split(",");var e=0,n=0;for(n=i.length;i.length<4;)i.push(0);for(e=0;n>e;e++)i[e]=parseFloat(i[e])||0;t=i}this._getTextStyle().padding=t,this.isChanged=!0}),r(0,o,"bold",function(){return this._style.bold},function(t){this._getTextStyle().bold=t,this.isChanged=!0}),r(0,o,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"),this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),r(0,o,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),r(0,o,"font",function(){return this._font},function(t){this._style.currBitmapFont&&(this._getTextStyle().currBitmapFont=null,this.scale(1,1)),a._bitmapFonts&&a._bitmapFonts[t]&&(this._getTextStyle().currBitmapFont=a._bitmapFonts[t]),this._font=t,this.isChanged=!0}),r(0,o,"fontSize",function(){return this._fontSize},function(t){this._fontSize!=t&&(this._fontSize=t,this.isChanged=!0)}),r(0,o,"italic",function(){return this._style.italic},function(t){this._getTextStyle().italic=t,this.isChanged=!0}),r(0,o,"align",function(){return this._style.align},function(t){this._getTextStyle().align=t,this.isChanged=!0}),r(0,o,"valign",function(){return this._valign},function(t){this._valign=t,this.isChanged=!0}),r(0,o,"wordWrap",function(){return this._style.wordWrap},function(t){this._getTextStyle().wordWrap=t,this.isChanged=!0}),r(0,o,"leading",function(){return this._style.leading},function(t){this._getTextStyle().leading=t,this.isChanged=!0}),r(0,o,"bgColor",function(){return this._style.bgColor},function(t){this._getTextStyle().bgColor=t,this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType),this.isChanged=!0}),r(0,o,"borderColor",function(){return this._style.borderColor},function(t){this._getTextStyle().borderColor=t,this._renderType|=128,this._setBorderStyleColor(0,0,this.width,this.height,t,1),this._setRenderType(this._renderType),this.isChanged=!0}),r(0,o,"stroke",function(){return this._style.stroke},function(t){this._getTextStyle().stroke=t,this.isChanged=!0}),r(0,o,"strokeColor",function(){return this._style.strokeColor},function(t){this._getTextStyle().strokeColor=t,this.isChanged=!0}),r(0,o,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&e.systemTimer.callLater(this,this.typeset))}),r(0,o,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!("scroll"!=this.overflow||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var i=this._textWidth-this._width;t=t>i?i:t,this._clipPoint.x=t,this._renderText()}}),r(0,o,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!("scroll"!=this.overflow||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var i=this._textHeight-this._height;t=t>i?i:t,this._clipPoint.y=t,this._renderText()}}),r(0,o,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),r(0,o,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),r(0,o,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),r(0,o,"underlineColor",function(){return this._style.underlineColor},function(t){this._getTextStyle().underlineColor=t,this._isChanged||this._renderText()}),r(0,o,"underline",function(){return this._style.underline},function(t){this._getTextStyle().underline=t}),a.defaultFontStr=function(){return a.defaultFontSize+"px "+a.defaultFont},a.registerBitmapFont=function(t,i){a._bitmapFonts||(a._bitmapFonts={}),a._bitmapFonts[t]=i},a.unregisterBitmapFont=function(t,i){if(void 0===i&&(i=!0),a._bitmapFonts&&a._bitmapFonts[t]){var e=a._bitmapFonts[t];i&&e.destroy(),delete a._bitmapFonts[t]}},a.VISIBLE="visible",a.SCROLL="scroll",a.HIDDEN="hidden",a.defaultFontSize=12,a.defaultFont="Arial",a.langPacks=null,a.isComplexText=!1,a._testWord="游",a._bitmapFonts=null,a.CharacterCache=!0,a.RightToLeft=!1,n(a,["fontFamilyMap",function(){return this.fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),a}(ls),sa=function(t){function i(){this._maxsize=0,this._upload=!0,this._uploadSize=0,this._bufferSize=0,this._u8Array=null,i.__super.call(this),this.lock=!0}s(i,"laya.webgl.utils.Buffer2D",t);var e=i.prototype;return e.setByteLength=function(t){this._byteLength!==t&&(t<=this._bufferSize||this._resizeBuffer(2*t+256,!0),this._byteLength=t)},e.needSize=function(t){var i=this._byteLength;if(t){var e=this._byteLength+t;e<=this._bufferSize||this._resizeBuffer(e<<1,!0),this._byteLength=e}return i},e._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Ri.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,ki.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),ki.instance.bufferSubData(this._bufferType,0,this._buffer)},e._bufferSubData=function(t,i,e){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Ri.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,ki.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),i||e){var n=this._buffer.slice(i,e);ki.instance.bufferSubData(this._bufferType,t,n)}else ki.instance.bufferSubData(this._bufferType,t,this._buffer)},e._checkArrayUse=function(){},e._bind_uploadForVAO=function(){return this._upload?(this._upload=!1,this._bindForVAO(),this._bufferData(),!0):!1},e._bind_upload=function(){return this._upload?(this._upload=!1,this.bind(),this._bufferData(),!0):!1},e._bind_subUpload=function(t,i,e){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),this._upload?(this._upload=!1,this.bind(),this._bufferSubData(t,i,e),!0):!1},e._resizeBuffer=function(t,i){if(t<this._buffer.byteLength)return this;if(this._setGPUMemory(t),i&&this._buffer&&this._buffer.byteLength>0){var e=new ArrayBuffer(t),n=this._u8Array&&this._u8Array.buffer==this._buffer?this._u8Array:new Uint8Array(this._buffer);this._u8Array=new Uint8Array(e),this._u8Array.set(n,0),this._buffer=e}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this._bufferSize=this._buffer.byteLength,this},e.append=function(t){this._upload=!0;var i,e=0;e=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+e,!0),i=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+e,!0),i=new Float32Array(this._buffer,this._byteLength)),i.set(t,0),this._byteLength+=e,this._checkArrayUse()},e.appendU16Array=function(t,i){this._resizeBuffer(this._byteLength+2*i,!0);for(var e=new Uint16Array(this._buffer,this._byteLength,i),n=0;i>n;n++)e[n]=t[n];this._byteLength+=2*i,this._checkArrayUse()},e.appendEx=function(t,i){this._upload=!0;var e,n=0;n=t.byteLength,this._resizeBuffer(this._byteLength+n,!0),e=new i(this._buffer,this._byteLength),e.set(t,0),this._byteLength+=n,this._checkArrayUse()},e.appendEx2=function(t,i,e,n){void 0===n&&(n=1),this._upload=!0;var s,r=0;r=e*n,this._resizeBuffer(this._byteLength+r,!0),s=new i(this._buffer,this._byteLength);var a=0;for(a=0;e>a;a++)s[a]=t[a];this._byteLength+=r,this._checkArrayUse()},e.getBuffer=function(){return this._buffer},e.setNeedUpload=function(){this._upload=!0},e.getNeedUpload=function(){return this._upload},e.upload=function(){var t=this._bind_upload();return ki.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(zr._bindedVertexBuffer=null),34963==this._bufferType&&(zr._bindedIndexBuffer=null),Xr.activeShader=null,t},e.subUpload=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0);var n=this._bind_subUpload();return ki.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(zr._bindedVertexBuffer=null),34963==this._bufferType&&(zr._bindedIndexBuffer=null),Xr.activeShader=null,n},e._disposeResource=function(){t.prototype._disposeResource.call(this),this._upload=!0,this._uploadSize=0},e.clear=function(){this._byteLength=0,this._upload=!0},r(0,e,"bufferLength",function(){return this._buffer.byteLength}),r(0,e,"byteLength",null,function(t){this.setByteLength(t)}),i.__int__=function(){},i.FLOAT32=4,i.SHORT=2,i}(zr),ra=function(t){function i(t){i.__super.call(this),void 0===t&&(t=!1),this._source=t||!gi.isWebGL?Ti.createElement("canvas"):this,this.lock=!0}s(i,"laya.resource.HTMLCanvas",t);var e=i.prototype;return e._getSource=function(){return this._source},e.clear=function(){this._ctx&&this._ctx.clear(),this._texture&&(this._texture.destroy(),this._texture=null)},e.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},e.release=function(){},e._setContext=function(t){this._ctx=t},e.getContext=function(){return this.context},e.getMemSize=function(){return 0},e.size=function(t,i){(this._width!=t||this._height!=i||this._source&&(this._source.width!=t||this._source.height!=i))&&(this._width=t,this._height=i,this._setGPUMemory(t*i*4),this._ctx&&this._ctx.size&&this._ctx.size(t,i),this._source&&(this._source.height=i,this._source.width=t),this._texture&&(this._texture.destroy(),this._texture=null))},e.getTexture=function(){return this._texture||(this._texture=new On(this,On.DEF_UV)),this._texture},e.toBase64=function(t,i,e){if(this._source)if(gi.isConchApp&&this._source.toBase64)this._source.toBase64(t,i,e);else{var n=this._source.toDataURL(t,i);e(n)}},r(0,e,"source",function(){return this._source}),r(0,e,"context",function(){return this._ctx?this._ctx:(this._ctx=gi.isWebGL&&this._source==this?new laya.webgl.canvas.WebGLContext2D:this._source.getContext(gi.isConchApp?"layagl":"2d"),this._ctx._canvas=this,this._ctx)}),i}(Yr),aa=function(t){function i(t,e){i.__super.call(this),this._wrapModeU=0,this._wrapModeV=0,this._filterMode=1,this._readyed=!1,this._width=-1,this._height=-1,this._format=t,this._mipmap=e,this._anisoLevel=1,this._glTexture=ki.instance.createTexture()}s(i,"laya.webgl.resource.BaseTexture",t);var e=i.prototype;return e._isPot=function(t){return 0===(t&t-1)},e._getGLFormat=function(){var t=0;switch(this._format){case 0:t=6407;break;case 1:t=6408;break;case 2:t=6406;break;case 3:if(!Pe._compressedTextureS3tc)throw"BaseTexture: not support DXT1 format.";t=Pe._compressedTextureS3tc.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case 4:if(!Pe._compressedTextureS3tc)throw"BaseTexture: not support DXT5 format.";t=Pe._compressedTextureS3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 5:if(!Pe._compressedTextureEtc1)throw"BaseTexture: not support ETC1RGB format.";t=Pe._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL;break;case 9:if(!Pe._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_2BPPV format.";t=Pe._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 10:if(!Pe._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_2BPPV format.";t=Pe._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 11:if(!Pe._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_4BPPV format.";t=Pe._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 12:if(!Pe._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_4BPPV format.";t=Pe._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw"BaseTexture: unknown texture format."}return t},e._setFilterMode=function(t){var i=ki.instance;switch(Pe.bindTexture(i,this._glTextureType,this._glTexture),t){case 0:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?i.texParameteri(this._glTextureType,10241,9984):i.texParameteri(this._glTextureType,10241,9728),i.texParameteri(this._glTextureType,10240,9728);break;case 1:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?i.texParameteri(this._glTextureType,10241,9985):i.texParameteri(this._glTextureType,10241,9729),i.texParameteri(this._glTextureType,10240,9729);break;case 2:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?i.texParameteri(this._glTextureType,10241,9987):i.texParameteri(this._glTextureType,10241,9729),i.texParameteri(this._glTextureType,10240,9729);break;default:throw new Error("BaseTexture:unknown filterMode value.")}},e._setWarpMode=function(t,i){var e=ki.instance;if(Pe.bindTexture(e,this._glTextureType,this._glTexture),this._isPot(this._width)&&this._isPot(this._height))switch(i){case 0:e.texParameteri(this._glTextureType,t,10497);break;case 1:e.texParameteri(this._glTextureType,t,33071)}else e.texParameteri(this._glTextureType,t,33071)},e._setAnisotropy=function(t){var i=Pe._extTextureFilterAnisotropic;if(i){t=Math.max(t,1);var e=ki.instance;Pe.bindTexture(e,this._glTextureType,this._glTexture),t=Math.min(e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT),t),e.texParameterf(this._glTextureType,i.TEXTURE_MAX_ANISOTROPY_EXT,t)}},e._disposeResource=function(){this._glTexture&&(ki.instance.deleteTexture(this._glTexture),this._glTexture=null,this._setGPUMemory(0))},e._getSource=function(){return this._readyed?this._glTexture:null},r(0,e,"wrapModeU",function(){return this._wrapModeU},function(t){this._wrapModeU!==t&&(this._wrapModeU=t,-1!==this._width&&this._setWarpMode(10242,t))}),r(0,e,"mipmap",function(){return this._mipmap}),r(0,e,"format",function(){return this._format}),r(0,e,"wrapModeV",function(){return this._wrapModeV},function(t){this._wrapModeV!==t&&(this._wrapModeV=t,-1!==this._height&&this._setWarpMode(10243,t))}),r(0,e,"defaulteTexture",function(){throw"BaseTexture:must override it."}),r(0,e,"filterMode",function(){return this._filterMode},function(t){t!==this._filterMode&&(this._filterMode=t,-1!==this._width&&-1!==this._height&&this._setFilterMode(t))}),r(0,e,"anisoLevel",function(){return this._anisoLevel},function(t){t!==this._anisoLevel&&(this._anisoLevel=Math.max(1,Math.min(16,t)),-1!==this._width&&-1!==this._height&&this._setAnisotropy(t))}),i.WARPMODE_REPEAT=0,i.WARPMODE_CLAMP=1,i.FILTERMODE_POINT=0,i.FILTERMODE_BILINEAR=1,i.FILTERMODE_TRILINEAR=2,i.FORMAT_R8G8B8=0,i.FORMAT_R8G8B8A8=1,i.FORMAT_ALPHA8=2,i.FORMAT_DXT1=3,i.FORMAT_DXT5=4,i.FORMAT_ETC1RGB=5,i.FORMAT_PVRTCRGB_2BPPV=9,i.FORMAT_PVRTCRGBA_2BPPV=10,i.FORMAT_PVRTCRGB_4BPPV=11,i.FORMAT_PVRTCRGBA_4BPPV=12,i.FORMAT_DEPTH_16=0,i.FORMAT_STENCIL_8=1,i.FORMAT_DEPTHSTENCIL_16_8=2,i.FORMAT_DEPTHSTENCIL_NONE=3,i}(Yr),oa=function(t){function i(t,e,n,s,r){if(this._attribInfo=null,this.customCompile=!1,this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},i.__super.call(this),!t||!e)throw"Shader Error";this._attribInfo=r,gi.isConchApp&&(this.customCompile=!0),this._id=++i._count,this._vs=t,this._ps=e,this._nameMap=s?s:{},null!=n&&(i.sharders[n]=this),this.recreateResource(),this.lock=!0}s(i,"laya.webgl.shader.Shader",t);var e=i.prototype;return e.recreateResource=function(){this._compile(),this._setGPUMemory(0)},e._disposeResource=function(){ge.mainContext.deleteShader(this._vshader),ge.mainContext.deleteShader(this._pshader),ge.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this._setGPUMemory(0),this._curActTexIndex=0},e._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t;this.customCompile&&(t=se.preGetParams(this._vs,this._ps));var e=ge.mainContext;this._program=e.createProgram(),this._vshader=i._createShader(e,this._vs,35633),this._pshader=i._createShader(e,this._ps,35632),e.attachShader(this._program,this._vshader),e.attachShader(this._program,this._pshader);var n,s,r=0,a=0,o=this._attribInfo?this._attribInfo.length:0;for(r=0;o>r;r+=2)e.bindAttribLocation(this._program,this._attribInfo[r+1],this._attribInfo[r]);if(e.linkProgram(this._program),!this.customCompile&&!e.getProgramParameter(this._program,35714))throw e.getProgramInfoLog(this._program);var h=this.customCompile?t.uniforms.length:e.getProgramParameter(this._program,35718);for(r=0;h>r;r++){var l=this.customCompile?t.uniforms[r]:e.getActiveUniform(this._program,r);s=e.getUniformLocation(this._program,l.name),n={vartype:"uniform",glfun:null,ivartype:1,location:s,name:l.name,type:l.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},n.name.indexOf("[0]")>0&&(n.name=n.name.substr(0,n.name.length-3),n.isArray=!0,n.location=e.getUniformLocation(this._program,n.name)),this._params.push(n)}for(r=0,a=this._params.length;a>r;r++)switch(n=this._params[r],n.indexOfParams=r,n.index=1,n.value=[n.location,null],n.codename=n.name,n.name=this._nameMap[n.codename]?this._nameMap[n.codename]:n.codename,this._paramsMap[n.name]=n,n._this=this,n.uploadedValue=[],n.type){case 5124:n.fun=n.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n.fun=n.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n.fun=n.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n.fun=n.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n.fun=n.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n.fun=this._uniform_sampler2D;break;case 35680:n.fun=this._uniform_samplerCube;break;case 35676:n.glfun=e.uniformMatrix4fv,n.fun=this._uniformMatrix4fv;break;case 35670:n.fun=this._uniform1i;break;case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}}},e.getUniform=function(t){return this._paramsMap[t]},e._uniform1f=function(t,i){var e=t.uploadedValue;return e[0]!==i?(ge.mainContext.uniform1f(t.location,e[0]=i),1):0},e._uniform1fv=function(t,i){if(i.length<4){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]?(ge.mainContext.uniform1fv(t.location,i),e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],1):0}return ge.mainContext.uniform1fv(t.location,i),1},e._uniform_vec2=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]?(ge.mainContext.uniform2f(t.location,e[0]=i[0],e[1]=i[1]),1):0},e._uniform_vec2v=function(t,i){if(i.length<2){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]?(ge.mainContext.uniform2fv(t.location,i),e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],1):0}return ge.mainContext.uniform2fv(t.location,i),1},e._uniform_vec3=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]?(ge.mainContext.uniform3f(t.location,e[0]=i[0],e[1]=i[1],e[2]=i[2]),1):0},e._uniform_vec3v=function(t,i){return ge.mainContext.uniform3fv(t.location,i),1},e._uniform_vec4=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]?(ge.mainContext.uniform4f(t.location,e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3]),1):0},e._uniform_vec4v=function(t,i){return ge.mainContext.uniform4fv(t.location,i),1},e._uniformMatrix2fv=function(t,i){return ge.mainContext.uniformMatrix2fv(t.location,!1,i),1},e._uniformMatrix3fv=function(t,i){return ge.mainContext.uniformMatrix3fv(t.location,!1,i),1},e._uniformMatrix4fv=function(t,i){return ge.mainContext.uniformMatrix4fv(t.location,!1,i),1},e._uniform1i=function(t,i){var e=t.uploadedValue;return e[0]!==i?(ge.mainContext.uniform1i(t.location,e[0]=i),1):0},e._uniform1iv=function(t,i){return ge.mainContext.uniform1iv(t.location,i),1},e._uniform_ivec2=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]?(ge.mainContext.uniform2i(t.location,e[0]=i[0],e[1]=i[1]),1):0},e._uniform_ivec2v=function(t,i){return ge.mainContext.uniform2iv(t.location,i),1},e._uniform_vec3i=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]?(ge.mainContext.uniform3i(t.location,e[0]=i[0],e[1]=i[1],e[2]=i[2]),1):0},e._uniform_vec3vi=function(t,i){return ge.mainContext.uniform3iv(t.location,i),1},e._uniform_vec4i=function(t,i){var e=t.uploadedValue;return e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]?(ge.mainContext.uniform4i(t.location,e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3]),1):0},e._uniform_vec4vi=function(t,i){return ge.mainContext.uniform4iv(t.location,i),1},e._uniform_sampler2D=function(t,i){var e=ge.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,e.uniform1i(t.location,this._curActTexIndex),Pe.activeTexture(e,33984+this._curActTexIndex),Pe.bindTexture(e,3553,i),this._curActTexIndex++,1):(Pe.activeTexture(e,33984+n[0]),Pe.bindTexture(e,3553,i),0)},e._uniform_samplerCube=function(t,i){var e=ge.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,e.uniform1i(t.location,this._curActTexIndex),Pe.activeTexture(e,33984+this._curActTexIndex),Pe.bindTexture(e,34067,i),this._curActTexIndex++,1):(Pe.activeTexture(e,33984+n[0]),Pe.bindTexture(e,34067,i),0)},e._noSetValue=function(t){console.log("no....:"+t.name)},e.uploadOne=function(t,i){Pe.useProgram(ge.mainContext,this._program);var e=this._paramsMap[t];e.fun.call(this,e,i)},e.uploadTexture2D=function(t){var i=Pe;i._activeTextures[0]!==t&&(i.bindTexture(ge.mainContext,i.TEXTURE_2D,t),i._activeTextures[0]=t)},e.upload=function(t,i){Xr.activeShader=Xr.bindShader=this;var e=ge.mainContext;Pe.useProgram(e,this._program),this._reCompile?(i=this._params,this._reCompile=!1):i=i||this._params;for(var n,s,r=i.length,a=0,o=0;r>o;o++)n=i[o],null!==(s=t[n.name])&&(a+=n.fun.call(this,n,s));Ri.shaderCall+=a},e.uploadArray=function(t,i,e){Xr.activeShader=this,Xr.bindShader=this,Pe.useProgram(ge.mainContext,this._program);for(var n,s,r=(this._params,0),a=i-2;a>=0;a-=2)s=this._paramsMap[t[a]],s&&(n=t[a+1],null!=n&&(e&&e[s.name]&&e[s.name].bind(),r+=s.fun.call(this,s,n)));Ri.shaderCall+=r},e.getParams=function(){return this._params},e.setAttributesLocation=function(t){this._attribInfo=t},i.getShader=function(t){return i.sharders[t]},i.create=function(t,e,n,s,r){return new i(t,e,n,s,r)},i.withCompile=function(t,e,n,s){if(n&&i.sharders[n])return i.sharders[n];var r=i._preCompileShader[2e-4*t];if(!r)throw new Error("withCompile shader err!"+t);return r.createShader(e,n,s,null)},i.withCompile2D=function(t,e,n,s,r,a){if(s&&i.sharders[s])return i.sharders[s];var o=i._preCompileShader[2e-4*t+e];if(!o)throw new Error("withCompile shader err!"+t+" "+e);return o.createShader(n,s,r,a)},i.addInclude=function(t,i){se.addInclude(t,i)},i.preCompile=function(t,e,n,s){var r=2e-4*t;i._preCompileShader[r]=new se(e,n,s)},i.preCompile2D=function(t,e,n,s,r){var a=2e-4*t+e;i._preCompileShader[a]=new se(n,s,r)},i._createShader=function(t,i,e){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,35713)?n:(console.log(t.getShaderInfoLog(n)),null)},i._count=0,i._preCompileShader={},i.SHADERNAME2ID=2e-4,i.sharders=new Array(32),n(i,["nameKey",function(){return this.nameKey=new ii}]),i}(Xr),ha=function(t){function i(){i.__super.call(this)}s(i,"laya.resource.HTMLImage",t);var e=i.prototype;return e.loadImageSource=function(t){var i=t.width,e=t.height;if(0>=i||0>=e)throw new Error("HTMLImage:width or height must large than 0.");this._width=i,this._height=e,this._source=t,this._setGPUMemory(i*e*4),this._activeResource()},e._disposeResource=function(){this._source&&(this._source=null,this._setGPUMemory(0))},e._getSource=function(){return this._source},i.create=function(){return new i},i}(Yr),la=function(t){function i(){this._watchMap={},this._widget=null,this._dataSource=null,this._anchorX=0/0,this._anchorY=0/0,this._widget=Vn.EMPTY,i.__super.call(this)}s(i,"laya.ui.View",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),this._watchMap=null,t.prototype.destroy.call(this,i)},n.changeData=function(t){var i=this._watchMap[t];if(i)for(var e=0,n=i.length;n>e;e++){var s=i[e];s.exe(this)}},n._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event("resize")},n._getWidget=function(){return this._widget===Vn.EMPTY&&(this._widget=this.addComponent(Vn)),this._widget},n.loadUI=function(t){var e=i.uiMap[t];i.uiMap&&this.createView(e)},r(0,n,"anchorX",function(){return this._anchorX},function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}),r(0,n,"centerX",function(){return this._widget.centerX},function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}),r(0,n,"top",function(){return this._widget.top},function(t){t!=this._widget.top&&(this._getWidget().top=t)}),r(0,n,"bottom",function(){return this._widget.bottom},function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}),r(0,n,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var i in t){var e=this.getChildByName(i);e instanceof laya.ui.UIComponent?e.dataSource=t[i]:this.hasOwnProperty(i)&&"function"!=typeof this[i]&&(this[i]=t[i])}}),r(0,n,"left",function(){return this._widget.left},function(t){t!=this._widget.left&&(this._getWidget().left=t)}),r(0,n,"right",function(){return this._widget.right},function(t){t!=this._widget.right&&(this._getWidget().right=t)}),r(0,n,"anchorY",function(){return this._anchorY},function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}),r(0,n,"centerY",function(){return this._widget.centerY},function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}),i.regComponent=function(t,i){he.regClass(t,i)},i.regViewRuntime=function(t,i){he.regClass(t,i)},i.regUI=function(t,i){e.loader.cacheRes(t,i)},i.uiMap={},i.__init$=function(){he.regShortClassName([ol,Ca,Tc,La,va,sl,Ca,fl,Pa,Aa,Zr,ml,ll,Ia,Da,ul,cl,Ea,_l,Lc,Sa,ya,kc,Sl,i,nl,pl,al,hl,Dc,Ac,ls,xa,na,vl])},i}(Kr),ca=function(t){function i(){this.mainPanel=null,this.leftMenuPanel=null,this.gotoFirst=null,this.headimg=null,this.accountlbl=null,this.exitBtn=null,this.workBtn=null,this.picBtn=null,this.orderbtn=null,this.companyBtn=null,this.moneyBtn=null,this.settingBtn=null,this.coverbg=null,this.customBtn=null,this.transactionBtn=null,this.statisticalBtn=null,this.contentPanel=null,this.shrinkBtn=null,this.arrow=null,i.__super.call(this)}s(i,"ui.FirstPagePanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("FirstPagePanel")},i}(Kr),ua=function(t){function i(){this.fileimg=null,this.filenametxt=null,this.mattext=null,this.averageBtn=null,this.numtxt=null,this.seqNum=null,i.__super.call(this)}s(i,"ui.order.PackageOrderItemUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"Scene",props:{width:477,height:140},compId:2,child:[{type:"Image",props:{y:70,x:113,width:108,"var":"fileimg",skin:"comp/image.png",height:108,anchorY:.5,anchorX:.5},compId:3},{type:"Label",props:{y:44,x:171,width:146,"var":"filenametxt",valign:"middle",text:"户内PP纸无背胶",overflow:"scroll",height:20,fontSize:18,font:"SimHei",color:"#50575c",bold:!0,align:"center"},compId:4},{type:"Label",props:{y:69,x:171,width:146,"var":"mattext",text:"户内写真",overflow:"scroll",height:49,fontSize:18,font:"SimHei",bold:!0,align:"center"},compId:5},{type:"Box",props:{y:0,x:336,width:141,height:140},compId:7,child:[{type:"Image",props:{x:142,width:140,skin:"commers/cutline.png",rotation:90},compId:9},{type:"Button",props:{y:45,x:28,width:84,"var":"averageBtn",skin:"uiCommonUpdate/small3Btn.png",sizeGrid:"3,3,3,3",labelSize:18,labelFont:"SimHei",labelColors:"#262B2E,#FFEEEE,#FFEEEE",label:"平分",height:36},compId:10},{type:"Label",props:{y:95,width:39,"var":"numtxt",text:"100",right:30,left:72,height:14,fontSize:14,font:"Arial",align:"left"},compId:12},{type:"Label",props:{y:95,x:38.5,text:"总数:",fontSize:14,font:"Arial",align:"center"},compId:13}]},{type:"Image",props:{y:156,x:61,skin:"commers/cutline.png",right:0,left:0,height:1,bottom:1},compId:11},{type:"Label",props:{y:59,x:0,width:32,"var":"seqNum",text:"1",height:39,fontSize:28,font:"SimHei",align:"center"},compId:15}],loadList:["comp/image.png","commers/cutline.png","uiCommonUpdate/small3Btn.png"],loadList3D:[]},i}(Kr),da=function(t){function i(){this.dragImg=null,this.btnSelArea=null,this.areatxt=null,this.btnSelCity=null,this.citytxt=null,this.btnSelProv=null,this.province=null,this.addressList=null,this.searchInput=null,this.searchbtn=null,this.selectall=null,this.pageNum=null,this.prePage=null,this.nextPage=null,this.hidebtn=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,this.closebtn=null,this.okbtn=null,this.selectNum=null,i.__super.call(this)}s(i,"ui.usercenter.AddressListPanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("usercenter/AddressListPanel")},i}(Kr),_a=(function(t){function i(){this.panel_main=null,this.btnUpload=null,this.paintOrderBtn=null,this.btnproduct=null,this.btnUserCenter=null,this.btnact=null,this.txt_login=null,this.txt_reg=null,this.characBtn=null,this.maintaintxt=null,this.productCustomization=null,this.enterinfo=null,this.linktobus=null,this.linkicp=null,i.__super.call(this)}s(i,"ui.LoginViewUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("LoginView")},i}(Kr),function(t){function i(){this.dragImg=null,this.grpName=null,this.addressList=null,this.searchInput=null,this.searchbtn=null,this.selectall=null,this.delBatchBtn=null,this.pageNum=null,this.prePage=null,this.nextPage=null,this.addAddrbtn=null,this.closebtn=null,i.__super.call(this)}s(i,"ui.usercenter.AddrGroupDetailPanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("usercenter/AddrGroupDetailPanel")},i}(Kr)),pa=function(t){function i(){this.numInput=null,this.addBtn=null,this.subBtn=null,i.__super.call(this)}s(i,"ui.order.PackageNumItemUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"Scene",props:{width:135,height:140},compId:2,child:[{type:"Box",props:{y:0,x:36,width:62,height:140},compId:3,child:[{type:"TextInput",props:{y:56,x:2,width:57,"var":"numInput",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:22,fontSize:18,font:"SimHei",align:"center"},compId:4},{type:"Button",props:{y:25,x:17,width:27,"var":"addBtn",skin:"uiCommonUpdate/blackbtn.png",labelSize:25,labelFont:"SimHei",labelColors:"#FFFFFF,#0,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:6},{type:"Button",props:{y:84,x:17,width:27,"var":"subBtn",skin:"uiCommonUpdate/blackbtn.png",labelSize:25,labelFont:"SimHei",labelColors:"#FFFFFF,#0,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:7}]},{type:"Image",props:{y:0,x:0,skin:"commers/cutline.png",right:0,left:0,height:1,bottom:1},compId:8}],loadList:["commers/inputbg.png","uiCommonUpdate/blackbtn.png","commers/cutline.png"],loadList3D:[]},i}(Kr),fa=function(t){function i(){this.groupTab=null,this.addressTab=null,this.addressbox=null,this.btnSelArea=null,this.areatxt=null,this.btnSelCity=null,this.citytxt=null,this.btnSelProv=null,this.province=null,this.addressList=null,this.searchInput=null,this.searchbtn=null,this.selectall=null,this.pageNum=null,this.prePage=null,this.nextPage=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,this.groupBox=null,this.groupList=null,this.searchGroupInput=null,this.searchGrpBtn=null,this.grPageNum=null,this.gpPrevPage=null,this.gpNextPage=null,this.closebtn=null,this.okbtn=null,this.selectNum=null,i.__super.call(this)
}s(i,"ui.order.SelectPackAddresstPanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("order/SelectPackAddresstPanel")},i}(Kr),ma=function(t){function i(){this.zhuanq=null,i.__super.call(this)}s(i,"ui.WaitRespondPanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"Scene",props:{width:1920,mouseEnabled:!0,height:1080},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/blackbg.png",sizeGrid:"3,3,3,3",right:0,mouseEnabled:!0,left:0,bottom:0,alpha:.1},compId:3},{type:"Image",props:{y:540,x:960,"var":"zhuanq",skin:"commers/circlebg.png",anchorY:.5,anchorX:.5,alpha:.9},compId:4}],loadList:["commers/blackbg.png","commers/circlebg.png"],loadList3D:[]},i}(Kr),ga=function(t){function i(){this.closebtn=null,i.__super.call(this)}s(i,"ui.inuoView.VideoPlayPanelUI",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("inuoView/VideoPlayPanel")},i}(Kr),va=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.Box",t);var n=i.prototype;return e.imps(n,{"laya.ui.IBox":!0}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var i in t){var e=this.getChildByName(i);e?e.dataSource=t[i]:this.hasOwnProperty(i)&&"function"!=typeof this[i]&&(this[i]=t[i])}}),i}(Zr),Sa=function(t){function i(t){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=0/0,this._hide=!1,this._clickOnly=!0,this._offsets=null,this.isLockedFun=null,this.triggerDownDragLimit=null,this.triggerUpDragLimit=null,i.__super.call(this),this._showButtons=We.showButtons,this._touchScrollEnable=We.touchScrollEnable,this._mouseWheelEnable=We.mouseWheelEnable,this.skin=t,this.max=1}s(i,"laya.ui.ScrollBar",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),this.stopScroll(),this.target=null,t.prototype.destroy.call(this,i),this.upButton&&this.upButton.destroy(i),this.downButton&&this.downButton.destroy(i),this.slider&&this.slider.destroy(i),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},n.createChildren=function(){this.addChild(this.slider=new ya),this.addChild(this.upButton=new Ca),this.addChild(this.downButton=new Ca)},n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},n.onButtonMouseDown=function(t){var i=t.currentTarget===this.upButton;this.slide(i),e.timer.once(je.scrollBarDelayTime,this,this.startLoop,[i]),e.stage.once("mouseup",this,this.onStageMouseUp)},n.startLoop=function(t){e.timer.frameLoop(1,this,this.slide,[t])},n.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},n.onStageMouseUp=function(){e.timer.clear(this,this.startLoop),e.timer.clear(this,this.slide)},n._skinLoaded=function(){this.slider.skin=this._skin,this.callLater(this.changeScrollBar),this._sizeChanged(),this.event("loaded")},n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},n._sizeChanged=function(){t.prototype._sizeChanged.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width},n.measureWidth=function(){return this.slider.isVertical?this.slider.width:100},n.measureHeight=function(){return this.slider.isVertical?100:this.slider.height},n.setScroll=function(t,i,e){this.runCallLater(this._sizeChanged),this.slider.setSlider(t,i,e),this.slider.bar.visible=i>0,!this._hide&&this.autoHide&&(this.visible=!1)},n.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},n.onTargetMouseDown=function(t){(!this.isLockedFun||this.isLockedFun(t))&&(this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Oe),this._lastPoint.setTo(e.stage.mouseX,e.stage.mouseY),e.timer.clear(this,this.tweenMove),Ni.clearTween(this),e.stage.once("mouseup",this,this.onStageMouseUp2),e.stage.once("mouseout",this,this.onStageMouseUp2),e.timer.frameLoop(1,this,this.loop))},n.startDragForce=function(){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Oe),this._lastPoint.setTo(e.stage.mouseX,e.stage.mouseY),e.timer.clear(this,this.tweenMove),Ni.clearTween(this),e.stage.once("mouseup",this,this.onStageMouseUp2),e.stage.once("mouseout",this,this.onStageMouseUp2),e.timer.frameLoop(1,this,this.loop)},n.cancelDragOp=function(){e.stage.off("mouseup",this,this.onStageMouseUp2),e.stage.off("mouseout",this,this.onStageMouseUp2),e.timer.clear(this,this.loop),this._target.mouseEnabled=!0},n.loop=function(){var t=e.stage.mouseY,i=e.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:i-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?e.stage._canvasTransform.getScaleY():e.stage._canvasTransform.getScaleX()))>1))return;if(this._clickOnly=!1,0==this.value&&this._lastOffset>0&&this.triggerDownDragLimit&&this.triggerDownDragLimit())return this.cancelDragOp(),void 0;if(this.value==this.max&&this._lastOffset<0&&this.triggerUpDragLimit&&this.triggerUpDragLimit())return this.cancelDragOp(),void 0;this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=i,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},n.onStageMouseUp2=function(){if(e.stage.off("mouseup",this,this.onStageMouseUp2),e.stage.off("mouseout",this,this.onStageMouseUp2),e.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Ni.to(this,{value:this.min},this.elasticBackTime,dn.sineOut,c.create(this,this.elasticOver)):this._value>this.max&&Ni.to(this,{value:this.max},this.elasticBackTime,dn.sineOut,c.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?e.stage.mouseY-this._lastPoint.y:e.stage.mouseX-this._lastPoint.x);for(var t=0,i=Math.min(this._offsets.length,3),n=0;i>n;n++)t+=this._offsets[this._offsets.length-1-n];if(this._lastOffset=t/i,t=Math.abs(this._lastOffset),2>t)return this.event("end"),void 0;t>60&&(this._lastOffset=this._lastOffset>0?60:-60);var s=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));e.timer.frameLoop(1,this,this.tweenMove,[s])}},n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Ni.to(this,{alpha:0},500),this.event("end")},n.tweenMove=function(t){this._lastOffset*=this.rollRatio;var i=0/0;if(t>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,i=.5*-(this.min-t-this.value),this._lastOffset>i&&(this._lastOffset=i)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,i=.5*-(this.max+t-this.value),this._lastOffset<i&&(this._lastOffset=i))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(e.timer.clear(this,this.tweenMove),this._isElastic)return this._value<this.min?Ni.to(this,{value:this.min},this.elasticBackTime,dn.sineOut,c.create(this,this.elasticOver)):this._value>this.max?Ni.to(this,{value:this.max},this.elasticBackTime,dn.sineOut,c.create(this,this.elasticOver)):this.elasticOver(),void 0;this.event("end"),!this.hide&&this.autoHide&&Ni.to(this,{alpha:0},500)}},n.stopScroll=function(){this.onStageMouseUp2(null),e.timer.clear(this,this.tweenMove),Ni.clearTween(this)},r(0,n,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this._sizeChanged),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,je.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,je.scrollBarMinNum))}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):e.superSet(Zr,this,"dataSource",t)}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!Fn.getRes(this._skin)?e.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],c.create(this,this._skinLoaded)):this._skinLoaded())}),r(0,n,"max",function(){return this.slider.max},function(t){this.slider.max=t}),r(0,n,"min",function(){return this.slider.min},function(t){this.slider.min=t}),r(0,n,"value",function(){return this._value},function(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),r(0,n,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t}),r(0,n,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t}),r(0,n,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),r(0,n,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),r(0,n,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),r(0,n,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),r(0,n,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),r(0,n,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t,this.target=this._target}),r(0,n,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t}),i}(Zr),ya=function(t){function i(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=0/0,this._ty=0/0,this._maxMove=0/0,this._globalSacle=null,i.__super.call(this),this.skin=t}s(i,"laya.ui.Slider",t);var a=i.prototype;return a.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._bg&&this._bg.destroy(i),this._bar&&this._bar.destroy(i),this._progress&&this._progress.destroy(i),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},a.createChildren=function(){this.addChild(this._bg=new Ia),this.addChild(this._bar=new Ca)},a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},a.onBarMouseDown=function(){this._globalSacle||(this._globalSacle=new Oe),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=e.stage.mouseX,this._ty=e.stage.mouseY,e.stage.on("mousemove",this,this.mouseMove),e.stage.once("mouseup",this,this.mouseUp),e.stage.once("mouseout",this,this.mouseUp),this.showValueText()},a.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar._x+20,t.y=.5*(this._bar.height-t.height)+this._bar._y):(t.y=this._bar._y-20,t.x=.5*(this._bar.width-t.width)+this._bar._x)}},a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},a.mouseUp=function(){e.stage.off("mousemove",this,this.mouseMove),e.stage.off("mouseup",this,this.mouseUp),e.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},a.mouseMove=function(){var t=this._value;this.isVertical?(this._bar.y+=(e.stage.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:this._bar._y<0&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(e.stage.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:this._bar._x<0&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width)),this._tx=e.stage.mouseX,this._ty=e.stage.mouseY;var i=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*i)/i,this._value!=t&&this.sendChangeEvent(),this.showValueText()},a.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},a._skinLoaded=function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");Fn.getRes(t)&&(this._progress||(this.addChild(this._progress=new Ia),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t),this.setBarPoint(),this.callLater(this.changeValue),this._sizeChanged(),this.event("loaded")},a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},a.measureWidth=function(){return Math.max(this._bg.width,this._bar.width)},a.measureHeight=function(){return Math.max(this._bg.height,this._bar.height)},a._sizeChanged=function(){t.prototype._sizeChanged.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},a.setSlider=function(t,i,e){this._value=-1,this._min=t,this._max=i>t?i:t,this.value=t>e?t:e>i?i:e},a.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var i=this._max-this._min;0===i&&(i=1),this.isVertical?(this._bar.y=(this._value-this._min)/i*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/i*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))},a.onBgMouseDown=function(){var t=this._bg.getMousePoint();this.value=this.isVertical?t.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:t.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},r(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):e.superSet(Zr,this,"dataSource",t)}),r(0,a,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!Fn.getRes(this._skin)?e.loader.load([this._skin,this._skin.replace(".png","$bar.png")],c.create(this,this._skinLoaded)):this._skinLoaded())}),r(0,a,"tick",function(){return this._tick},function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}),r(0,a,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),r(0,a,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),r(0,a,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),r(0,a,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),r(0,a,"bar",function(){return this._bar}),r(0,a,"value",function(){return this._value},function(t){if(this._value!=t){var i=this._value;this._value=t,this.changeValue(),this._value!=i&&this.sendChangeEvent()}}),n(i,["label",function(){return this.label=new Da}]),i}(Zr),Ca=function(t){function i(t,e){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,i.__super.call(this),this._labelColors=je.buttonLabelColors,this._stateNum=je.buttonStateNum,void 0===e&&(e=""),this.skin=t,this.label=e}s(i,"laya.ui.Button",t);var a=i.prototype;return e.imps(a,{"laya.ui.ISelect":!0}),a.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(i),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},a.createChildren=function(){this.graphics=this._bitmap=new ss},a.createText=function(){this._text||(this._text=new na,this._text.overflow="hidden",this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},a.initialize=function(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(64,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},a.onMouse=function(t){if(this.toggle!==!1||!this._selected){if("click"===t.type)return this.toggle&&(this.selected=!this._selected),this._clickHandler&&this._clickHandler.run(),void 0;"mouseover"==t.type?tn.cursor="hand":"mouseout"==t.type&&(tn.cursor="auto"),!this._selected&&(this.state=i.stateMap[t.type])}},a._skinLoaded=function(){this.callLater(this.changeClips),this._setStateChanged(),this._sizeChanged(),this.event("loaded")},a.changeClips=function(){var t=Fn.getRes(this._skin);if(!t)return console.log("lose skin",this._skin),void 0;var i=t.sourceWidth,e=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=en.getGID());var n=t.$_GID+"-"+this._stateNum,s=ne.I.get(n);if(en.isOkTextureList(s)||(s=null),s)this._sources=s;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var r=0;r<this._stateNum;r++)this._sources.push(On.createFromTexture(t,0,e*r,i,e));ne.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||i,this._bitmap.height=this._height||e,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=i)},a.measureWidth=function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))},a.measureHeight=function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height},a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},r(0,a,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?Fn.getRes(t)?this._skinLoaded():e.loader.load(this._skin,c.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),r(0,a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t){this.createText(),this._text.padding=hn.fillArray(je.labelPadding,t,Number)}),r(0,a,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this._setStateChanged())}),r(0,a,"text",function(){return this.createText(),this._text}),r(0,a,"stateNum",function(){return this._stateNum},function(t){"string"==typeof t&&(t=parseInt(t)),this._stateNum!=t&&(this._stateNum=1>t?1:t>3?3:t,this.callLater(this.changeClips))}),r(0,a,"label",function(){return this._text?this._text.text:null},function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),r(0,a,"labelSize",function(){return this.createText(),this._text.fontSize},function(t){this.createText(),this._text.fontSize=t}),r(0,a,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),r(0,a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=hn.fillArray(je.buttonLabelColors,t,String),this._setStateChanged()}),r(0,a,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=hn.fillArray(je.buttonLabelColors,t,String),this._setStateChanged()}),r(0,a,"labelStroke",function(){return this.createText(),this._text.stroke},function(t){this.createText(),this._text.stroke=t}),r(0,a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t){this.createText(),this._text.strokeColor=t}),r(0,a,"labelBold",function(){return this.createText(),this._text.bold},function(t){this.createText(),this._text.bold=t}),r(0,a,"labelFont",function(){return this.createText(),this._text.font},function(t){this.createText(),this._text.font=t}),r(0,a,"labelAlign",function(){return this.createText(),this._text.align},function(t){this.createText(),this._text.align=t}),r(0,a,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),r(0,a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=hn.fillArray(je.defaultSizeGrid,t,Number)}),r(0,a,"width",t.prototype._$get_width,function(t){e.superSet(Zr,this,"width",t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))}),r(0,a,"height",t.prototype._$get_height,function(t){e.superSet(Zr,this,"height",t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))}),r(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.label=t+"":e.superSet(Zr,this,"dataSource",t)}),r(0,a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){this._bitmap._offset=t?hn.fillArray([1,1],t,Number):[]}),n(i,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),i}(Zr),Ea=function(t){function i(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,i.__super.call(this),this.skin=t}s(i,"laya.ui.ProgressBar",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._bg&&this._bg.destroy(i),this._bar&&this._bar.destroy(i),this._bg=this._bar=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._bg=new Ia),this.addChild(this._bar=new Ia),this._bar._bitmap.autoCacheCmd=!1},n._skinLoaded=function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue),this._sizeChanged(),this.event("loaded")},n.measureWidth=function(){return this._bg.width},n.measureHeight=function(){return this._bg.height},n.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),i=Number(t[3]),e=Number(t[1]),n=this.width-i-e,s=n*this._value;this._bar.width=i+e+s,this._bar.visible=this._bar.width>i+e}else this._bar.width=this.width*this._value},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):e.superSet(Zr,this,"dataSource",t)}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!Fn.getRes(this._skin)?e.loader.load(this._skin,c.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Zr,this,"height",t),this._bg.height=this._height,this._bar.height=this._height}),r(0,n,"bar",function(){return this._bar}),r(0,n,"value",function(){return this._value},function(t){this._value!=t&&(t=t>1?1:0>t?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),r(0,n,"bg",function(){return this._bg}),r(0,n,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Zr,this,"width",t),this._bg.width=this._width,this.callLater(this.changeValue)}),i}(Zr),ba=function(t){function i(){this._targetDic=null,this._animationData=null,this._usedFrames=null,i.__super.call(this),null===i._sortIndexFun&&(i._sortIndexFun=Xe.sortByKey("index",!1,!0))}s(i,"laya.display.FrameAnimation",t);var e=i.prototype;return e._setUp=function(t,i){this._targetDic=t,this._animationData=i,this.interval=1e3/i.frameRate,i.parsed?(this._count=i.count,this._labels=i.labels,this._usedFrames=i.animationNewFrames):(this._usedFrames=[],this._calculateDatas(),i.parsed=!0,i.labels=this._labels,i.count=this._count,i.animationNewFrames=this._usedFrames)},e.clear=function(){return t.prototype.clear.call(this),this._targetDic=null,this._animationData=null,this},e._displayToIndex=function(t){if(this._animationData){0>t&&(t=0),t>this._count&&(t=this._count);var i=this._animationData.nodes,e=0,n=i.length;for(e=0;n>e;e++)this._displayNodeToFrame(i[e],t)}},e._displayNodeToFrame=function(t,i,e){e||(e=this._targetDic);var n=e[t.target];if(n){var s,r,a,o=t.frames,h=t.keys,l=0,c=h.length;for(l=0;c>l;l++)s=h[l],r=o[s],a=r.length>i?r[i]:r[r.length-1],n[s]=a;var u=t.funkeys;c=u.length;var d;if(0!=c)for(l=0;c>l;l++)s=u[l],d=o[s],void 0!==d[i]&&n[s]&&n[s].apply(n,d[i])}},e._calculateDatas=function(){if(this._animationData){var t,i=this._animationData.nodes,e=0,n=i.length;for(this._count=0,e=0;n>e;e++)t=i[e],this._calculateKeyFrames(t);this._count+=1}},e._calculateKeyFrames=function(t){var e,n,s=t.keyframes,r=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.funkeys?t.funkeys.length=0:t.funkeys=[],t.initValues||(t.initValues={});for(e in s){var a=-1!=e.indexOf("()");if(n=s[e],a&&(e=e.substr(0,e.length-2)),t.frames[e]||(t.frames[e]=[]),a){t.funkeys.push(e);for(var o=t.frames[e],h=0;h<n.length;h++){var l=n[h];o[l.index]=l.value,l.index>this._count&&(this._count=l.index)}}else this._targetDic&&this._targetDic[r]&&(t.initValues[e]=this._targetDic[r][e]),n.sort(i._sortIndexFun),t.keys.push(e),this._calculateNodePropFrames(n,t.frames[e],e,r)}},e.resetNodes=function(){if(this._targetDic&&this._animationData){var t,i,e=this._animationData.nodes,n=0,s=e.length;for(n=0;s>n;n++)if(t=e[n],i=t.initValues){var r=this._targetDic[t.target];if(r){var a;for(a in i)r[a]=i[a]}}}},e._calculateNodePropFrames=function(t,i){var e=0,n=t.length-1;for(i.length=t[n].index+1,e=0;n>e;e++)this._dealKeyFrame(t[e]),this._calculateFrameValues(t[e],t[e+1],i);0==n&&(i[0]=t[0].value,this._usedFrames&&(this._usedFrames[t[0].index]=!0)),this._dealKeyFrame(t[e])},e._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},e._calculateFrameValues=function(t,i,e){var n,s=0,r=t.index,a=i.index,o=t.value,h=i.value-t.value,l=a-r,c=this._usedFrames;if(a>this._count&&(this._count=a),t.tween)for(n=dn[t.tweenMethod],null==n&&(n=dn.linearNone),s=r;a>s;s++)e[s]=n(s-r,o,h,l),c&&(c[s]=!0);else for(s=r;a>s;s++)e[s]=o;c&&(c[t.index]=!0,c[i.index]=!0),e[i.index]=i.value},i._sortIndexFun=null,i}($r),Ia=function(t){function i(t){this._bitmap=null,this._skin=null,this._group=null,i.__super.call(this),this.skin=t}s(i,"laya.ui.Image",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},n.dispose=function(){this.destroy(!0),e.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new ss,this._bitmap.autoCacheCmd=!1},n.setSource=function(t,i){t===this._skin&&i&&(this.source=i,this.onCompResize())},n.measureWidth=function(){return this._bitmap.width},n.measureHeight=function(){return this._bitmap.height},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"string"==typeof t?this.skin=t:e.superSet(Zr,this,"dataSource",t)}),r(0,n,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(this._bitmap.source=t,this.event("loaded"),this.repaint())}),r(0,n,"skin",function(){return this._skin},function(t){if(this._skin!=t)if(this._skin=t,t){var i=Fn.getRes(t);i?(this.source=i,this.onCompResize()):e.loader.load(this._skin,c.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),r(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=hn.fillArray(je.defaultSizeGrid,t,Number)}),r(0,n,"group",function(){return this._group},function(t){t&&this._skin&&Fn.setGroup(this._skin,t),this._group=t}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Zr,this,"width",t),this._bitmap.width=0==t?1e-7:t}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Zr,this,"height",t),this._bitmap.height=0==t?1e-7:t}),i}(Zr),xa=function(t){function i(){this._frames=null,this._url=null,i.__super.call(this),this._setControlNode(this)}s(i,"laya.display.Animation",t);var n=i.prototype;return n.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},n.play=function(i,e,n){void 0===i&&(i=0),void 0===e&&(e=!0),void 0===n&&(n=""),n&&this._setFramesFromCache(n,!0),t.prototype.play.call(this,i,e,n)},n._setFramesFromCache=function(t,e){if(void 0===e&&(e=!1),this._url&&(t=this._url+"#"+t),t&&i.framesMap[t]){var n=i.framesMap[t];return n instanceof Array?(this._frames=i.framesMap[t],this._count=this._frames.length):(n.nodeRoot&&(i.framesMap[t]=gl.parseAnimationByData(n),n=i.framesMap[t]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0
}return e&&console.log("ani not found:",t),!1},n._copyLabels=function(t){if(!t)return null;var i;i={};var e;for(e in t)i[e]=en.copyArray([],t[e]);return i},n._frameLoop=function(){this._visible&&this._style.alpha>.01&&this._frames&&t.prototype._frameLoop.call(this)},n._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},n.clear=function(){return t.prototype.clear.call(this),this.stop(),this.graphics=null,this._frames=null,this._labels=null,this},n.loadImages=function(t,e){return void 0===e&&(e=""),this._url="",this._setFramesFromCache(e)||(this.frames=i.framesMap[e]?i.framesMap[e]:i.createFrames(t,e)),this},n.loadAtlas=function(t,n,s){function r(e){t===e&&(a.frames=i.framesMap[s]?i.framesMap[s]:i.createFrames(t,s),n&&n.run())}void 0===s&&(s=""),this._url="";var a=this;return a._setFramesFromCache(s)||(Fn.getAtlas(t)?r(t):e.loader.load(t,c.create(null,r,[t]),null,"atlas")),this},n.loadAnimation=function(t,i,n){this._url=t;var s=this;return this._actionName||(this._actionName=""),s._setFramesFromCache(this._actionName)?(s._setFramesFromCache(this._actionName,!0),this.index=0,i&&i.run()):!n||Fn.getAtlas(n)?this._loadAnimationData(t,i,n):e.loader.load(n,c.create(this,this._loadAnimationData,[t,i,n]),null,"atlas"),this},n._loadAnimationData=function(t,n,s){function r(e){if(Fn.getRes(e)&&t===e){var s;if(i.framesMap[t+"#"])o._setFramesFromCache(a._actionName,!0),a.index=0,a._resumePlay();else{var r=gl.parseAnimationData(Fn.getRes(t));if(!r)return;var h,l=r.animationList,c=0,u=l.length;for(c=0;u>c;c++)s=l[c],i.framesMap[t+"#"+s.name]=s,h||(h=s);h&&(i.framesMap[t+"#"]=h,o._setFramesFromCache(a._actionName,!0),a.index=0),a._resumePlay()}n&&n.run()}}var a=this;if(s&&!Fn.getAtlas(s))return console.warn("atlas load fail:"+s),void 0;var o=this;Fn.getRes(t)?r(t):e.loader.load(t,c.create(null,r,[t]),null,"json"),Fn.clearRes(t)},r(0,n,"frames",function(){return this._frames},function(t){this._frames=t,t&&(this._count=t.length,this._actionName&&this._setFramesFromCache(this._actionName,!0),this.index=this._index)}),r(0,n,"autoPlay",null,function(t){t?this.play():this.stop()}),r(0,n,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}),r(0,n,"autoAnimation",null,function(t){this.play(0,!0,t)}),i.createFrames=function(t,e){var n;if("string"==typeof t){var s=Fn.getAtlas(t);if(s&&s.length){n=[];for(var r=0,a=s.length;a>r;r++){var o=new te;o.drawImage(Fn.getRes(s[r]),0,0),n.push(o)}}}else if(t instanceof Array)for(n=[],r=0,a=t.length;a>r;r++)o=new te,o.loadImage(t[r],0,0),n.push(o);return e&&(i.framesMap[e]=n),n},i.clearCache=function(t){var e,n=i.framesMap,s=t+"#";for(e in n)(e===t||0===e.indexOf(s))&&delete i.framesMap[e]},i.framesMap={},i}($r),Pa=function(t){function i(t,e,n){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,i.__super.call(this),void 0===e&&(e=1),void 0===n&&(n=1),this._clipX=e,this._clipY=n,this.skin=t}s(i,"laya.ui.Clip",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},n.dispose=function(){this.destroy(!0),e.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new ss},n._onDisplay=function(){this._isPlaying?this._getBit(128)?this.play():this.stop():this._autoPlay&&this.play()},n._skinLoaded=function(){this._setClipChanged(),this._sizeChanged(),this.event("loaded")},n.changeClip=function(){if(this._clipChanged=!1,this._skin){var t=Fn.getRes(this._skin);t?this.loadComplete(this._skin,t):e.loader.load(this._skin,c.create(this,this.loadComplete,[this._skin]))}},n.loadComplete=function(t,i){if(t===this._skin&&i){var e=this._clipWidth||Math.ceil(i.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(i.sourceHeight/this._clipY),s=this._skin+e+n,r=ne.I.get(s);if(en.isOkTextureList(r)||(r=null),r)this._sources=r;else{this._sources=[];for(var a=0;a<this._clipY;a++)for(var o=0;o<this._clipX;o++)this._sources.push(On.createFromTexture(i,e*o,n*a,e,n));ne.I.set(s,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},n.measureWidth=function(){return this.runCallLater(this.changeClip),this._bitmap.width},n.measureHeight=function(){return this.runCallLater(this.changeClip),this._bitmap.height},n.play=function(t,i){void 0===t&&(t=0),void 0===i&&(i=-1),this._isPlaying=!0,this.index=t,this._toIndex=i,this._index++,e.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},n._loop=function(){this._visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},n.stop=function(){this._isPlaying=!1,e.timer.clear(this,this._loop),this.event("complete")},n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},r(0,n,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?Fn.getRes(t)?this._skinLoaded():e.loader.load(this._skin,c.create(this,this._skinLoaded),null,"image",1):this._bitmap.source=null)}),r(0,n,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),r(0,n,"clipX",function(){return this._clipX},function(t){this._clipX=t||1,this._setClipChanged()}),r(0,n,"clipY",function(){return this._clipY},function(t){this._clipY=t||1,this._setClipChanged()}),r(0,n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),r(0,n,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this._setClipChanged()}),r(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=hn.fillArray(je.defaultSizeGrid,t,Number)}),r(0,n,"group",function(){return this._group},function(t){t&&this._skin&&Fn.setGroup(this._skin,t),this._group=t}),r(0,n,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this._setClipChanged()}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Zr,this,"width",t),this._bitmap.width=t}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Zr,this,"height",t),this._bitmap.height=t}),r(0,n,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),r(0,n,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}),r(0,n,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.index=parseInt(t):e.superSet(Zr,this,"dataSource",t)}),r(0,n,"bitmap",function(){return this._bitmap}),i}(Zr),Da=function(t){function i(t){this._tf=null,i.__super.call(this),void 0===t&&(t=""),this.text=t}s(i,"laya.ui.Label",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._tf=null},n.createChildren=function(){this.addChild(this._tf=new na)},n.changeText=function(t){this._tf.changeText(t)},n.measureWidth=function(){return this._tf.width},n.measureHeight=function(){return this._tf.height},r(0,n,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=hn.fillArray(je.labelPadding,t,Number)}),r(0,n,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),r(0,n,"align",function(){return this._tf.align},function(t){this._tf.align=t}),r(0,n,"text",function(){return this._tf.text},function(t){this._tf.text!=t&&(t&&(t=hn.adptString(t+"")),this._tf.text=t,this.event("change"),this._width&&this._height||this.onCompResize())}),r(0,n,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),r(0,n,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),r(0,n,"font",function(){return this._tf.font},function(t){this._tf.font=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.text=t+"":e.superSet(Zr,this,"dataSource",t)}),r(0,n,"color",function(){return this._tf.color},function(t){this._tf.color=t}),r(0,n,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),r(0,n,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),r(0,n,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),r(0,n,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),r(0,n,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),r(0,n,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),r(0,n,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),r(0,n,"textField",function(){return this._tf}),r(0,n,"width",function(){return this._width||this._tf.text?e.superGet(Zr,this,"width"):0},function(t){e.superSet(Zr,this,"width",t),this._tf.width=t}),r(0,n,"height",function(){return this._height||this._tf.text?e.superGet(Zr,this,"height"):0},function(t){e.superSet(Zr,this,"height",t),this._tf.height=t}),r(0,n,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t}),r(0,n,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t}),r(0,n,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t}),i}(Zr),Aa=function(t){function i(t,e){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=0/0,this._listHeight=0/0,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,i.__super.call(this),this._itemColors=je.comboBoxItemColors,this.skin=t,this.labels=e}s(i,"laya.ui.ComboBox",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._button&&this._button.destroy(i),this._list&&this._list.destroy(i),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},n.createChildren=function(){this.addChild(this._button=new Ca),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},n._createList=function(){this._list=new ul,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},n._setListEvent=function(){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=c.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},n.onListDown=function(t){t.stopPropagation()},n.onScrollBarDown=function(t){t.stopPropagation()},n.onButtonMouseDown=function(){this.callLater(this.switchTo,[!this._isOpen])},n.measureWidth=function(){return this._button.width},n.measureHeight=function(){return this._button.height},n.changeList=function(){this._listChanged=!1;var t=this.width-2,i=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:i}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},n.onlistItemMouse=function(t,i){var e=t.type;if("mouseover"===e||"mouseout"===e){if(this._isCustomList)return;var n=this._list.getCell(i);if(!n)return;var s=n.getChildByName("label");s&&("mouseover"===e?(s.bgColor=this._itemColors[0],s.color=this._itemColors[1]):(s.bgColor=null,s.color=this._itemColors[2]))}else"click"===e&&(this.selectedIndex=i,this.isOpen=!1)},n.switchTo=function(t){this.isOpen=t},n.changeOpen=function(){this.isOpen=!this._isOpen},n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(!0),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var i=this._list.array||[];i.length=0;for(var e=0,n=this._labels.length;n>e;e++)i.push({label:this._labels[e]});this._list.height=this._listHeight,this._list.array=i},n.changeSelected=function(){this._button.label=this.selectedLabel},n._onStageMouseWheel=function(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)},n.removeList=function(){e.stage.off("mousedown",this,this.removeList),e.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[ue.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),r(0,n,"skin",function(){return this._button.skin},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),r(0,n,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Zr,this,"width",t),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),r(0,n,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),r(0,n,"labels",function(){return this._labels.join(",")},function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Zr,this,"height",t),this._button.height=this._height}),r(0,n,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),r(0,n,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),r(0,n,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=hn.fillArray(this._itemColors,t,String),this._listChanged=!0}),r(0,n,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),r(0,n,"scrollBar",function(){return this.list.scrollBar}),r(0,n,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var i=this.localToGlobal(Oe.TEMP.setTo(0,0)),n=i.y+this._button.height;n=n+this._listHeight<=e.stage.height?n:i.y-this._listHeight,this._list.pos(i.x,n),this._list.zOrder=1001,e._currentStage.addChild(this._list),e.stage.once("mousedown",this,this.removeList),e.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),r(0,n,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),r(0,n,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),r(0,n,"button",function(){return this._button}),r(0,n,"list",function(){return this._list||this._createList(),this._list},function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):e.superSet(Zr,this,"dataSource",t)}),r(0,n,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}),r(0,n,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=hn.fillArray(je.labelPadding,t,Number)}),r(0,n,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),r(0,n,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),r(0,n,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),i}(Zr),La=function(t){function i(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,i.__super.call(this)}s(i,"laya.ui.ColorPicker",t);var n=i.prototype;return n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._colorPanel&&this._colorPanel.destroy(i),this._colorButton&&this._colorButton.destroy(i),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._colorButton=new Ca),this._colorPanel=new va,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new ls),this._colorPanel.addChild(this._colorBlock=new ls),this._colorPanel.addChild(this._colorInput=new ka)},n.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},n.onPanelMouseDown=function(t){t.stopPropagation()},n.changePanel=function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(!0),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,t=this._colorTiles.graphics,t.clear(!0);for(var i=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],e=0;12>e;e++)for(var n=0;20>n;n++){var s=0;s=0===n?i[e]:1===n?0:51*(((3*e+n/6)%3<<0)+3*(e/6<<0))<<16|n%6*51<<8|(e<<0)%6*51;var r=hn.toColor(s);this._colors.push(r);var a=n*this._gridSize,o=e*this._gridSize;t.drawRect(a,o,this._gridSize,this._gridSize,r,"#000000")}},n.onColorButtonClick=function(){this._colorPanel.parent?this.close():this.open()},n.open=function(){var t=this.localToGlobal(new Oe),i=t.x+this._colorPanel.width<=e.stage.width?t.x:e.stage.width-this._colorPanel.width,n=t.y+this._colorButton.height;n=n+this._colorPanel.height<=e.stage.height?n:t.y-this._colorPanel.height,this._colorPanel.pos(i,n),this._colorPanel.zOrder=1001,e._currentStage.addChild(this._colorPanel),e.stage.on("mousedown",this,this.removeColorBox)},n.close=function(){e.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},n.removeColorBox=function(){this.close()},n.onColorFieldKeyDown=function(t){13==t.keyCode&&(this.selectedColor=this._colorInput.text?this._colorInput.text:null,this.close(),t.stopPropagation())},n.onColorInputChange=function(){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},n.onColorTilesClick=function(){this.selectedColor=this.getColorByMouse(),this.close()},n.onColorTilesMouseMove=function(){this._colorInput.focus=!1;var t=this.getColorByMouse();this._colorInput.text=t,this.drawBlock(t)},n.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),i=Math.floor(t.x/this._gridSize),e=Math.floor(t.y/this._gridSize);return this._colors[20*e+i]},n.drawBlock=function(t){var i=this._colorBlock.graphics;i.clear(!0);var e=t?t:"#ffffff";i.drawRect(0,0,50,20,e,this._borderColor),t||i.drawLine(0,0,50,20,"#ff0000")},n.changeColor=function(){var t=this.graphics;t.clear(!0);var i=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,i)},n._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},r(0,n,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this._setPanelChanged()}),r(0,n,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",ue.EMPTY.setTo("change",this,this)))}),r(0,n,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.once("loaded",this,this.changeColor),this._colorButton.skin=t}),r(0,n,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this._setPanelChanged()}),r(0,n,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this._setPanelChanged()}),r(0,n,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this._setPanelChanged()}),i}(Zr),ka=function(t){function i(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",i.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow="scroll",this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}s(i,"laya.display.Input",t);var a=i.prototype;return a.setSelection=function(t,i){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=i},a._onUnDisplay=function(){this.focus=!1},a._onMouseDown=function(){this.focus=!0},a._syncInputTransform=function(){var t=this.nativeInput,n=en.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),s=this._width-this.padding[1]-this.padding[3],r=this._height-this.padding[0]-this.padding[2];gi.isConchApp?(t.setScale(n.scaleX,n.scaleY),t.setSize(s,r),t.setPos(n.x,n.y)):(i.inputContainer.style.transform=i.inputContainer.style.webkitTransform="scale("+n.scaleX+","+n.scaleY+") rotate("+e.stage.canvasDegree+"deg)",t.style.width=s+"px",t.style.height=r+"px",i.inputContainer.style.left=n.x+"px",i.inputContainer.style.top=n.y+"px")},a.select=function(){this.nativeInput.select()},a._setInputMethod=function(){i.input.parentElement&&i.inputContainer.removeChild(i.input),i.area.parentElement&&i.inputContainer.removeChild(i.area),i.inputElement=this._multiline?i.area:i.input,i.inputContainer.appendChild(i.inputElement),na.RightToLeft&&(i.inputElement.style.direction="rtl")},a._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var i=t.style;i.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,gi.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,e.stage.off("keydown",this,this._onKeyDown),e.stage.on("keydown",this,this._onKeyDown),e.stage.focus=this,this.event("focus"),Ti.onPC&&t.focus(),!Ti.onMiniGame){{this._text}this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(Ti.onIPhone?na.fontFamilyMap[this.font]||this.font:this.font),gi.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),i.lineHeight=this.leading+this.fontSize+"px",i.fontStyle=this.italic?"italic":"normal",i.fontWeight=this.bold?"bold":"normal",i.textAlign=this.align,i.padding="0 0",this._syncInputTransform(),!gi.isConchApp&&Ti.onPC&&e.systemTimer.frameLoop(1,this,this._syncInputTransform)},a._setPromptColor=function(){i.promptStyleDOM=Ti.getElementById("promptStyle"),i.promptStyleDOM||(i.promptStyleDOM=Ti.createElement("style"),i.promptStyleDOM.setAttribute("id","promptStyle"),Ti.document.head.appendChild(i.promptStyleDOM)),i.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(e.superSet(na,this,"text",this._content),e.superSet(na,this,"color",this._originColor)):(e.superSet(na,this,"text",this._prompt),e.superSet(na,this,"color",this._promptColor)),e.stage.off("keydown",this,this._onKeyDown),e.stage.focus=null,this.event("blur"),this.event("change"),gi.isConchApp&&this.nativeInput.blur(),Ti.onPC&&e.systemTimer.clear(this,this._syncInputTransform)},a._onKeyDown=function(t){13===t.keyCode&&(Ti.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},a.changeText=function(i){this._content=i,this._focus?(this.nativeInput.value=i||"",this.event("change")):t.prototype.changeText.call(this,i)},r(0,a,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),e.superSet(na,this,"color",this._content?t:this._promptColor),this._originColor=t}),r(0,a,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),r(0,a,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),r(0,a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){e.superSet(na,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?e.superSet(na,this,"text",t):(e.superSet(na,this,"text",this._prompt),e.superSet(na,this,"color",this.promptColor)))}),r(0,a,"nativeInput",function(){return this._multiline?i.area:i.input}),r(0,a,"prompt",function(){return this._prompt},function(t){!this._text&&t&&e.superSet(na,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?e.superSet(na,this,"text",this._text==this._prompt?t:this._text):e.superSet(na,this,"text",t),this._prompt=na.langPacks&&na.langPacks[t]?na.langPacks[t]:t}),r(0,a,"focus",function(){return this._focus},function(t){var e=this.nativeInput;this._focus!==t&&(t?(e.target?e.target._focusOut():this._setInputMethod(),e.target=this,this._focusIn()):(e.target=null,this._focusOut(),Ti.document.body.scrollTop=0,e.blur(),gi.isConchApp?e.setPos(-1e4,-1e4):i.inputContainer.contains(e)&&i.inputContainer.removeChild(e)))}),r(0,a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),r(0,a,"editable",function(){return this._editable},function(t){this._editable=t,gi.isConchApp&&i.input.setForbidEdit(!t)}),r(0,a,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||e.superSet(na,this,"color",t)}),r(0,a,"type",function(){return this._type},function(t){this._getTextStyle().asPassword="password"===t?!0:!1,this._type=t}),i.__init__=function(){i._createInputElement(),Ti.onMobile&&gi.canvas.addEventListener(i.IOS_IFRAME?Ti.onMiniGame?"touchend":"click":"touchend",i._popupInputMethod)},i._popupInputMethod=function(){if(laya.display.Input.isInputting){var t=laya.display.Input.inputElement;t.focus()}},i._createInputElement=function(){i._initInput(i.area=Ti.createElement("textarea")),i._initInput(i.input=Ti.createElement("input")),i.inputContainer=Ti.createElement("div"),i.inputContainer.style.position="absolute",i.inputContainer.style.zIndex=1e5,Ti.container.appendChild(i.inputContainer),i.inputContainer.setPos=function(t,e){i.inputContainer.style.left=t+"px",i.inputContainer.style.top=e+"px"}},i._initInput=function(t){var e=t.style;e.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",e.resize="none",e.backgroundColor="transparent",e.border="none",e.outline="none",e.zIndex=1,t.addEventListener("input",i._processInputting),t.addEventListener("mousemove",i._stopEvent),t.addEventListener("mousedown",i._stopEvent),t.addEventListener("touchmove",i._stopEvent),t.setFontFace=function(i){t.style.fontFamily=i},gi.isConchApp||(t.setColor=function(i){t.style.color=i},t.setFontSize=function(i){t.style.fontSize=i+"px"})},i._processInputting=function(){var t=laya.display.Input.inputElement.target;if(t){var i=laya.display.Input.inputElement.value;t._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),t._restrictPattern.test(i)&&(i=i.replace(t._restrictPattern,""),laya.display.Input.inputElement.value=i)),t._text=i,t.event("input")}},i._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},i.TYPE_TEXT="text",i.TYPE_PASSWORD="password",i.TYPE_EMAIL="email",i.TYPE_URL="url",i.TYPE_NUMBER="number",i.TYPE_RANGE="range",i.TYPE_DATE="date",i.TYPE_MONTH="month",i.TYPE_WEEK="week",i.TYPE_TIME="time",i.TYPE_DATE_TIME="datetime",i.TYPE_DATE_TIME_LOCAL="datetime-local",i.TYPE_SEARCH="search",i.input=null,i.area=null,i.inputElement=null,i.inputContainer=null,i.confirmButton=null,i.promptStyleDOM=null,i.inputHeight=45,i.isInputting=!1,i.stageMatrix=null,n(i,["IOS_IFRAME",function(){return this.IOS_IFRAME=Ti.onIOS&&Ti.window.top!=Ti.window.self}]),i}(na),Ta=function(t){function i(t,e){this._floatArray32=null,this._uint32Array=null,this._vertexStride=0,i.__super.call(this),this._vertexStride=t,this._bufferUsage=e,this._bufferType=34962,this._buffer=new ArrayBuffer(8),this._floatArray32=new Float32Array(this._buffer),this._uint32Array=new Uint32Array(this._buffer)}s(i,"laya.webgl.utils.VertexBuffer2D",t);var e=i.prototype;return e.getFloat32Array=function(){return this._floatArray32},e.appendArray=function(t){var i=this._byteLength>>2;this.setByteLength(this._byteLength+4*t.length);var e=this.getFloat32Array();e.set(t,i),this._upload=!0},e._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer)),this._uint32Array&&(this._uint32Array=new Uint32Array(this._buffer))},e.deleteBuffer=function(){this._disposeResource()},e._bindForVAO=function(){ki.instance.bindBuffer(34962,this._glBuffer)},e.bind=function(){return zr._bindedVertexBuffer!==this._glBuffer?(ki.instance.bindBuffer(34962,this._glBuffer),zr._bindedVertexBuffer=this._glBuffer,!0):!1},e.destroy=function(){laya.resource.Resource.prototype.destroy.call(this),this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},r(0,e,"vertexStride",function(){return this._vertexStride}),i.create=function(t,e){return void 0===e&&(e=35048),new i(t,e)},i}(sa),Ra=function(t){function i(t){this._uint16Array=null,void 0===t&&(t=35044),i.__super.call(this),this._bufferUsage=t,this._bufferType=34963,this._buffer=new ArrayBuffer(8)}s(i,"laya.webgl.utils.IndexBuffer2D",t);var e=i.prototype;return e._checkArrayUse=function(){this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))
},e.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},e._bindForVAO=function(){ki.instance.bindBuffer(34963,this._glBuffer)},e.bind=function(){return zr._bindedIndexBuffer!==this._glBuffer?(ki.instance.bindBuffer(34963,this._glBuffer),zr._bindedIndexBuffer=this._glBuffer,!0):!1},e.destory=function(){this._uint16Array=null,this._buffer=null},e.disposeResource=function(){this._disposeResource()},i.create=function(t){return void 0===t&&(t=35044),new i(t)},i}(sa),wa=function(t){function i(t,e,n,s,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===s&&(s=!0),void 0===r&&(r=!1),i.__super.call(this,n,s),this._glTextureType=3553,this._width=t,this._height=e,this._canRead=r,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),ke.is2DPixelArtGame&&(this._filterMode=0),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel)}s(i,"laya.webgl.resource.Texture2D",t);var n=i.prototype;return n._calcualatesCompressedDataSize=function(t,i,e){switch(t){case 3:case 5:return(i+3>>2)*(e+3>>2)*8;case 4:return(i+3>>2)*(e+3>>2)*16;case 11:case 12:return Math.floor((Math.max(i,8)*Math.max(e,8)*4+7)/8);case 9:case 10:return Math.floor((Math.max(i,16)*Math.max(e,8)*2+7)/8);default:return 0}},n._pharseDDS=function(t){var i=827611204,e=894720068,n=4,s=131072,r=542327876,a=31,o=0,h=1,l=2,c=3,u=4,d=7,_=20,p=21,f=new Int32Array(t,0,a);if(f[o]!=r)throw"Invalid magic number in DDS header";if(!(f[_]&n))throw"Unsupported format, must contain a FourCC code";var m=f[p];switch(this._format){case 3:if(m!==i)throw"the FourCC code is not same with texture format.";break;case 4:if(m!==e)throw"the FourCC code is not same with texture format.";break;default:throw"unknown texture format."}var g=1;if(f[l]&s){if(g=Math.max(1,f[d]),!this._mipmap)throw"the mipmap is not same with Texture2D."}else if(this._mipmap)throw"the mipmap is not same with Texture2D.";var v=f[u],S=f[c];if(this._width!==v||this._height!==S)throw"the width or height is not same with Texture2D.";var y=f[h]+4;this._upLoadCompressedTexImage2D(t,v,S,g,y,0)},n._pharseKTX=function(t){var i=13,e=4,n=7,s=6,r=11,a=12,o=new Uint8Array(t,0,12);if(171!=o[0]||75!=o[1]||84!=o[2]||88!=o[3]||32!=o[4]||49!=o[5]||49!=o[6]||187!=o[7]||13!=o[8]||10!=o[9]||26!=o[10]||10!=o[11])throw"Invalid fileIdentifier in KTX header";var h=new Int32Array(o.buffer,o.length,i),l=h[e],c=this._getGLFormat();switch(this._format){case 5:if(l!==c)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;default:throw"unknown texture format."}var u=h[r],d=h[s],_=h[n];if(this._width!==d||this._height!==_)throw"the width or height is not same with Texture2D.";var p=64+h[a];this._upLoadCompressedTexImage2D(t,d,_,u,p,4)},n._pharsePVR=function(t){var i=0,e=1,n=2,s=3,r=6,a=55727696,o=13,h=0,l=2,c=6,u=7,d=11,_=12,p=new Int32Array(t,0,o);if(p[h]!=a)throw"Invalid magic number in PVR header";var f=p[l];switch(this._format){case 5:if(f!==r)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;case 9:if(f!==i)throw"the format  is not same with texture format FORMAT_PVRTCRGB_2BPPV.";break;case 11:if(f!==n)throw"the format  is not same with texture format FORMAT_PVRTCRGB_4BPPV.";break;case 10:if(f!==e)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_2BPPV.";break;case 12:if(f!==s)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_4BPPV.";break;default:throw"unknown texture format."}var m=p[d],g=p[u],v=p[c];if(this._width!==g||this._height!==v)throw"the width or height is not same with Texture2D.";var S=p[_]+52;this._upLoadCompressedTexImage2D(t,g,v,m,S,0)},n._upLoadCompressedTexImage2D=function(t,i,e,n,s,r){var a=ki.instance,o=this._glTextureType;Pe.bindTexture(a,o,this._glTexture);for(var h=this._getGLFormat(),l=s,c=0;n>c;c++){l+=r;var u=this._calcualatesCompressedDataSize(this._format,i,e),d=new Uint8Array(t,l,u);a.compressedTexImage2D(o,c,h,i,e,0,d),i>>=1,e>>=1,l+=u}var _=l;this._setGPUMemory(_),this._readyed=!0,this._activeResource()},n.loadImageSource=function(t,i){void 0===i&&(i=!1);var e=t.width,n=t.height;this._width=e,this._height=n,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode);var s=ki.instance;Pe.bindTexture(s,this._glTextureType,this._glTexture);var r=this._getGLFormat();gi.isConchApp?(t.setPremultiplyAlpha(i),s.texImage2D(this._glTextureType,0,6408,6408,5121,t)):(i&&s.pixelStorei(37441,!0),s.texImage2D(this._glTextureType,0,r,r,5121,t),i&&s.pixelStorei(37441,!1)),this._mipmap&&this._isPot(e)&&this._isPot(n)?(s.generateMipmap(this._glTextureType),this._setGPUMemory(e*n*4*(1+1/3))):this._setGPUMemory(e*n*4),this._canRead&&(gi.isConchApp?this._pixels=new Uint8Array(t._nativeObj.getImageData(0,0,e,n)):(Ti.canvas.size(e,n),Ti.canvas.clear(),Ti.context.drawImage(t,0,0,e,n),this._pixels=new Uint8Array(Ti.context.getImageData(0,0,e,n).data.buffer))),this._readyed=!0,this._activeResource()},n.setPixels=function(t,i){if(void 0===i&&(i=0),!t)throw"Texture2D:pixels can't be null.";var e=this._width,n=this._height,s=ki.instance,r=this._glTextureType;Pe.bindTexture(s,r,this._glTexture);var a=this._getGLFormat();s.texImage2D(r,i,a,e,n,0,a,5121,t),this._mipmap&&this._isPot(e)&&this._isPot(n)?(s.generateMipmap(r),this._setGPUMemory(e*n*4*(1+1/3))):this._setGPUMemory(e*n*4),this._canRead&&(this._pixels=t),this._readyed=!0,this._activeResource()},n.setCompressData=function(t){switch(this._format){case 3:case 4:this._pharseDDS(t);break;case 5:this._pharseKTX(t);break;case 9:case 10:case 11:case 12:this._pharsePVR(t);break;default:throw"Texture2D:unkonwn format."}},n._recoverResource=function(){},n.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},r(0,n,"defaulteTexture",function(){return laya.webgl.resource.Texture2D.grayTexture}),i.__init__=function(){var t=new Uint8Array(3);t[0]=128,t[1]=128,t[2]=128,i.grayTexture=new i(1,1,0,!1,!1),i.grayTexture.setPixels(t),i.grayTexture.lock=!0},i._parse=function(t,e,n){var s=n?new i(n[0],n[1],n[2],n[3],n[4]):new i(0,0);switch(e&&(s.wrapModeU=e.wrapModeU,s.wrapModeV=e.wrapModeV,s.filterMode=e.filterMode,s.anisoLevel=e.anisoLevel),s._format){case 0:case 1:s.loadImageSource(t);break;case 3:case 4:case 5:case 9:case 10:case 11:case 12:s.setCompressData(t);break;default:throw"Texture2D:unkonwn format."}return s},i.load=function(t,i){e.loader.create(t,i,null,"TEXTURE2D")},i.grayTexture=null,i}(aa),Oa=function(t){function i(t,e,n,s,r){this._params2dQuick2=null,this._shaderValueWidth=0,this._shaderValueHeight=0,i.__super.call(this,t,e,n,s,r)}s(i,"laya.webgl.shader.d2.Shader2X",t);var e=i.prototype;return e._disposeResource=function(){t.prototype._disposeResource.call(this),this._params2dQuick2=null},e.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())},e._make2dQuick2=function(){if(!this._params2dQuick2){this._params2dQuick2=[];for(var t,i=this._params,e=0,n=i.length;n>e;e++)t=i[e],"size"!==t.name&&this._params2dQuick2.push(t)}return this._params2dQuick2},i.create=function(t,e,n,s,r){return new i(t,e,n,s,r)},i}(oa),Ma=function(t){function i(t,e,n,s){this._mgrKey=0,void 0===n&&(n=0),void 0===s&&(s=0),i.__super.call(this,n,!1),this._glTextureType=3553,this._width=t,this._height=e,this._depthStencilFormat=s,this._create(t,e)}s(i,"laya.webgl.resource.RenderTexture2D",t);var e=i.prototype;return e.getIsReady=function(){return!0},e._create=function(t,i){var e=ki.instance;this._frameBuffer=e.createFramebuffer(),Pe.bindTexture(e,this._glTextureType,this._glTexture);var n=this._getGLFormat();if(e.texImage2D(this._glTextureType,0,n,t,i,0,n,5121,null),this._setGPUMemory(t*i*4),e.bindFramebuffer(36160,this._frameBuffer),e.framebufferTexture2D(36160,36064,3553,this._glTexture,0),3!==this._depthStencilFormat)switch(this._depthStencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,this._depthStencilBuffer),this._depthStencilFormat){case 0:e.renderbufferStorage(36161,33189,t,i),e.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 1:e.renderbufferStorage(36161,36168,t,i),e.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 2:e.renderbufferStorage(36161,34041,t,i),e.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);break;default:console.log("RenderTexture: unkonw depth format.")}e.bindFramebuffer(36160,null),e.bindRenderbuffer(36161,null),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel),this._readyed=!0,this._activeResource()},e.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,ki.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4))},e.start=function(){var t=ki.instance;ki.instance.bindFramebuffer(36160,this._frameBuffer),i._currentActive=this,this._readyed=!0,t.viewport(0,0,this._width,this._height),this._lastWidth=fn.width,this._lastHeight=fn.height,fn.width=this._width,fn.height=this._height,Xr.activeShader=null},e.end=function(){ki.instance.bindFramebuffer(36160,null),i._currentActive=null,this._readyed=!0},e.restore=function(){var t=ki.instance;this._lastRT!=i._currentActive&&(ki.instance.bindFramebuffer(36160,this._lastRT?this._lastRT._frameBuffer:null),i._currentActive=this._lastRT),this._readyed=!0,t.viewport(0,0,this._lastWidth,this._lastHeight),fn.width=this._lastWidth,fn.height=this._lastHeight,Xr.activeShader=null},e.clear=function(t,i,e,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===n&&(n=1);var s=ki.instance;s.clearColor(t,i,e,n);var r=16384;switch(this._depthStencilFormat){case 33189:r|=256;break;case 36168:r|=1024;break;case 34041:r|=256,r|=1024}s.clear(r)},e.getData=function(t,i,e,n){var s=ki.instance;s.bindFramebuffer(36160,this._frameBuffer);var r=36053===s.checkFramebufferStatus(36160);if(!r)return s.bindFramebuffer(36160,null),null;var a=new Uint8Array(this._width*this._height*4),o=this._getGLFormat();return s.readPixels(t,i,e,n,o,5121,a),s.bindFramebuffer(36160,null),a},e._disposeResource=function(){if(this._frameBuffer){var t=ki.instance;t.deleteTexture(this._glTexture),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthStencilBuffer),this._glTexture=null,this._frameBuffer=null,this._depthStencilBuffer=null,this._setGPUMemory(0)}},r(0,e,"depthStencilFormat",function(){return this._depthStencilFormat}),r(0,e,"defaulteTexture",function(){return wa.grayTexture}),r(0,e,"sourceWidth",function(){return this._width}),r(0,e,"sourceHeight",function(){return this._height}),r(0,e,"offsetX",function(){return 0}),r(0,e,"offsetY",function(){return 0}),r(1,i,"currentActive",function(){return i._currentActive},laya.webgl.resource.BaseTexture._$SET_currentActive),i.pushRT=function(){i.rtStack.push({rt:i._currentActive,w:fn.width,h:fn.height})},i.popRT=function(){var t=ki.instance,e=i.rtStack.pop();e&&(i._currentActive!=e.rt&&(ki.instance.bindFramebuffer(36160,e.rt?e.rt._frameBuffer:null),i._currentActive=e.rt),t.viewport(0,0,e.w,e.h),fn.width=e.w,fn.height=e.h)},i._currentActive=null,i.rtStack=[],n(i,["defuv",function(){return this.defuv=[0,0,1,0,1,1,0,1]},"flipyuv",function(){return this.flipyuv=[0,1,1,1,1,0,0,0]}]),i}(aa),Ba=function(t){function i(){this.paintimg=null,this.horiInput=null,this.horiAdd=null,this.horiSub=null,this.vertInput=null,this.verAdd=null,this.verSub=null,this.heightNum=null,this.widthNum=null,i.__super.call(this)}s(i,"ui.order.AvgCutImageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:65,x:0,width:402,skin:"upload1/inoutbg.png",sizeGrid:"3,3,3,3",height:402},compId:3,child:[{type:"Image",props:{y:201,x:201,width:400,"var":"paintimg",skin:"comp/image.png",height:400,anchorY:.5,anchorX:.5},compId:4}]},{type:"Label",props:{y:38,x:5,text:"竖向份数：",fontSize:18,font:"SimHei"},compId:5},{type:"Label",props:{y:7,x:5,text:"横向份数：",fontSize:18,font:"SimHei"},compId:8},{type:"Sprite",props:{y:33,x:100},compId:12,child:[{type:"TextInput",props:{y:2,x:29,width:40,"var":"horiInput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",rotation:0,height:22,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:13},{type:"Button",props:{y:0,x:71,width:27,"var":"horiAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:14},{type:"Button",props:{width:27,"var":"horiSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:15}]},{type:"Sprite",props:{y:3,x:100},compId:16,child:[{type:"TextInput",props:{y:2,x:29,width:40,"var":"vertInput",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:22,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:17},{type:"Button",props:{x:71,width:27,"var":"verAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:18},{type:"Button",props:{width:27,"var":"verSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:19}]},{type:"Label",props:{y:38,x:241,"var":"heightNum",text:"120",fontSize:18,font:"SimHei",align:"left"},compId:20},{type:"Label",props:{y:7,x:241,"var":"widthNum",text:"120",fontSize:18,font:"SimHei",align:"left"},compId:21},{type:"Label",props:{y:38,x:212,text:"宽:",fontSize:18,font:"SimHei"},compId:22},{type:"Label",props:{y:7,x:212,text:"宽:",fontSize:18,font:"SimHei"},compId:23}],loadList:["upload1/inoutbg.png","comp/image.png","commers/inputbg.png","uiCommonUpdate/blackbtn.png"],loadList3D:[]},i}(la),Na=function(t){function i(){this.account=null,this.msgtxt=null,this.reqdate=null,this.refusebtn=null,this.agreebtn=null,i.__super.call(this)}s(i,"ui.usercenter.ApplyJoinItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:706,skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:28},compId:12},{type:"Label",props:{y:0,x:0,width:108,"var":"account",valign:"middle",text:"13589898989",height:29,fontSize:16,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:0,x:148,width:161,"var":"msgtxt",valign:"middle",text:"13568986989",height:29,fontSize:16,font:"SimHei",align:"center"},compId:4},{type:"Label",props:{y:0,x:328,width:176,"var":"reqdate",valign:"middle",text:"2020-05-12 12:00:00",height:29,fontSize:16,font:"SimHei",align:"center"},compId:5},{type:"Text",props:{y:3,x:658,"var":"refusebtn",text:"拒绝",presetID:1,fontSize:16,font:"SimHei",color:"#ef0e0b",isPresetRoot:!0,runtime:"laya.display.Text"},compId:10,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:11}]},{type:"Text",props:{y:3,x:618,"var":"agreebtn",text:"同意",presetID:1,fontSize:16,font:"SimHei",color:"003dc6",isPresetRoot:!0,runtime:"laya.display.Text"},compId:13,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:14}]}],loadList:["commers/inputbg.png","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),Fa=function(t){function i(){this.bg=null,this.productname=null,i.__super.call(this)}s(i,"ui.login.CityAreaItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{right:0,left:0,height:30},compId:2,child:[{type:"Image",props:{"var":"bg",top:0,skin:"commers/grayback.jpg",right:0,left:0,bottom:0},compId:5},{type:"Label",props:{y:1,"var":"productname",valign:"middle",top:0,text:"江西省",right:0,left:0,height:28,fontSize:28,font:"SimHei",color:"#262B2E",align:"center"},compId:3}],loadList:["commers/grayback.jpg"],loadList3D:[]},i}(la),Va=function(t){function i(){this.hotbtm=null,this.deltbn=null,i.__super.call(this)}s(i,"ui.usercenter.OrganizeItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Button",props:{y:0,x:0,width:112,"var":"hotbtm",staticCache:!1,skin:"uiCommonUpdate/green2.png",sizeGrid:"3,3,3,3",selected:!1,labelSize:16,labelFont:"SimHei",labelColors:"#003dc6,#003dc6,#FFFFFF",label:"浦东三点瑞普",height:40},compId:3},{type:"Button",props:{y:1,x:92,width:12,"var":"deltbn",stateNum:1,skin:"uiCommonUpdate/closeGray.png",labelSize:16,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",height:12},compId:4}],loadList:["uiCommonUpdate/green2.png","uiCommonUpdate/closeGray.png"],loadList3D:[]},i}(la),Ua=function(t){function i(){this.frame=null,this.img=null,this.categoryName=null,i.__super.call(this)}s(i,"ui.prodCustom.ProdCategoryItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:200,height:200},compId:2,child:[{type:"Image",props:{"var":"frame",top:0,skin:"commers/inputerror.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:5},{type:"Image",props:{width:200,"var":"img",skin:"comp/image.png",height:200},compId:3},{type:"Label",props:{"var":"categoryName",text:"T桖",strokeColor:"#2dc011",stroke:1,right:5,fontSize:16,font:"SimHei",bottom:2,bold:!1,align:"right"},compId:4}],loadList:["commers/inputerror.png","comp/image.png"],loadList3D:[]},i}(la),Wa=function(t){function i(){this.backimg=null,this.htmltxt=null,i.__super.call(this)}s(i,"ui.common.TipPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:210,"var":"backimg",skin:"commers/choosebg.png",sizeGrid:"8,8,8,8",height:36},compId:3,child:[{type:"HTMLDivElement",props:{y:10,x:10,width:200,"var":"htmltxt",innerHTML:"htmlText",height:100,runtime:"laya.html.dom.HTMLDivElement"},compId:5}]}],loadList:["commers/choosebg.png"],loadList3D:[]},i}(la),Ha=function(t){function i(){this.mainpanel=null,this.mainview=null,this.msgtxt=null,this.tips=null,this.btnSp=null,this.okbtn=null,this.cancelbtn=null,this.closebtn=null,i.__super.call(this)}s(i,"ui.PopUpPhoneDialogUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("PopUpPhoneDialog")},i}(la),Ga=function(t){function i(){this.imgbg=null,this.mainpanel=null,this.titlelbl=null,this.contentPanel=null,this.img=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.inuoView.MatAndProcEffectPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/MatAndProcEffectPanel")},i}(la),za=function(t){function i(){this.closeBtn=null,i.__super.call(this)}s(i,"ui.inuoView.EffectPreviewPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/EffectPreviewPanel")},i}(la),Ya=function(t){function i(){this.transtype=null,this.transtime=null,this.amounttxt=null,this.orderinfo=null,i.__super.call(this)}s(i,"ui.usercenter.TransactionItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Image",props:{width:800,skin:"commers/cutline.png"},compId:3},{type:"Label",props:{x:0,width:100,"var":"transtype",text:"充值",fontSize:20,font:"SimSun",align:"center"},compId:4},{type:"Label",props:{y:1,x:143,width:250,"var":"transtime",text:"2020-10-12 20:00:00",fontSize:20,font:"SimSun",align:"center"},compId:5},{type:"Label",props:{y:0,x:437,width:100,"var":"amounttxt",text:"12200.22",fontSize:20,font:"SimSun",align:"center"},compId:6},{type:"Label",props:{y:0,x:580,width:220,"var":"orderinfo",text:"订单号:1825656565656520",fontSize:20,font:"SimSun",align:"center"},compId:7}],loadList:["commers/cutline.png"],loadList3D:[]},i}(la),Xa=function(t){function i(){this.manufacture=null,this.timetxt=null,this.money=null,this.state=null,i.__super.call(this)}s(i,"ui.usercenter.InvoiceDailyItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{x:0,width:630,skin:"commers/graydisable.jpg",sizeGrid:"2,2,2,2",height:35,alpha:.5},compId:8},{type:"Label",props:{y:0,x:0,width:181,"var":"manufacture",valign:"middle",text:"浙江禾物喷印",height:38,fontSize:18,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:0,x:177,width:169,"var":"timetxt",valign:"middle",text:"2021-01-01",height:38,fontSize:18,font:"SimHei",align:"center"},compId:4},{type:"Label",props:{y:0,x:379,width:121,"var":"money",valign:"middle",text:"￥15689",height:38,fontSize:18,font:"SimHei",align:"center"},compId:5},{type:"Label",props:{y:0,x:518,width:121,"var":"state",valign:"middle",text:"待开票",height:38,fontSize:18,font:"SimHei",color:"#f31310",align:"center"},compId:7}],loadList:["commers/graydisable.jpg"],loadList3D:[]},i}(la),qa=function(t){function i(){this.manufacture=null,this.datetxt=null,this.money=null,this.statetxt=null,this.selcheck=null,i.__super.call(this)}s(i,"ui.usercenter.InvoiceItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:750,skin:"commers/graydisable.jpg",sizeGrid:"2,2,2,2",height:35,alpha:.5},compId:8},{type:"Label",props:{y:0,x:0,width:181,"var":"manufacture",valign:"middle",text:"浙江禾物喷印",height:38,fontSize:18,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:0,x:177,width:228,"var":"datetxt",valign:"middle",text:"2021-01-01至2022-10-10",height:38,fontSize:18,font:"SimHei",align:"center"},compId:4},{type:"Label",props:{y:0,x:416,width:121,"var":"money",valign:"middle",text:"￥15689",height:38,fontSize:18,font:"SimHei",align:"center"},compId:5},{type:"Label",props:{y:0,x:566,width:121,"var":"statetxt",valign:"middle",text:"待开票",height:38,fontSize:18,font:"SimHei",color:"#f31310",align:"center"},compId:6},{type:"CheckBox",props:{y:11,x:703,"var":"selcheck",skin:"commers/multicheck.png",labelSize:18,labelFont:"SimHei"},compId:7}],loadList:["commers/graydisable.jpg","commers/multicheck.png"],loadList3D:[]},i}(la),Ja=(function(t){function i(){this.closebtn=null,this.orderoanel=null,this.orderbox=null,i.__super.call(this)}s(i,"ui.usercenter.OderDetailPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/OderDetailPanel")},i}(la),function(t){function i(){this.mainpanel=null,this.logBox=null,this.pwdImg=null,this.input_pwd=null,this.pwdError=null,this.delBtn=null,this.accoutImg=null,this.input_account=null,this.accountError=null,this.delBtn=null,this.btn_login=null,this.checkAuto=null,this.titleBar=null,this.txt_forget=null,this.txt_reg=null,this.copyRight=null,this.comInfo=null,this.icp=null,this.loginedBox=null,this.gotoFirst=null,this.companyPic=null,i.__super.call(this)}s(i,"ui.login.LogPhonePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/LogPhonePanel")},i}(la)),ja=function(t){function i(){this.mainPanel=null,this.title=null,this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.unitpricelbl=null,this.pricelbl=null,this.selectAll=null,this.btnaddpic=null,this.batchChange=null,this.addpic=null,this.opeBox=null,this.batchDelete=null,this.orderlistpanel=null,this.ordervbox=null,this.productNum=null,this.textPayPrice=null,this.textDiscount=null,this.textTotalPrice=null,this.goToNext=null,i.__super.call(this)}s(i,"ui.lailiao.LailiaoOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("lailiao/LailiaoOrderPanel")},i}(la),Ka=function(t){function i(){this.conName=null,this.phonetxt=null,this.detailaddr=null,this.btnDel=null,this.btndefault=null,this.defaultlbl=null,i.__super.call(this)}s(i,"ui.usercenter.AddressItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:940,height:80},compId:2,child:[{type:"Image",props:{y:0,skin:"commers/cutline.png",right:0,left:55,bottom:0},compId:17},{type:"Label",props:{y:28,x:56,width:197,"var":"conName",valign:"middle",text:"上海万能科技公司",height:24,fontSize:24,font:"SimHei",color:"#0",align:"center"},compId:3},{type:"Label",props:{y:28,x:259,width:156,"var":"phonetxt",valign:"middle",text:"13564113173",height:24,fontSize:24,font:"SimHei",color:"#0",align:"left"},compId:5},{type:"Label",props:{x:422,wordWrap:!0,width:322,"var":"detailaddr",valign:"middle",top:0,text:"上海市浦东新区周浦镇瑞浦路612弄23号1001室",fontSize:20,font:"SimHei",color:"#0",bottom:0,align:"left"},compId:6},{type:"Text",props:{y:32,x:797,"var":"btnDel",text:"删除",presetID:1,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Text",props:{y:32,x:840,text:"|",presetID:1,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:16},{type:"Text",props:{y:34,x:858,width:47,"var":"btndefault",text:"设为默认",presetID:1,height:12,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:11,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:12}]},{type:"Label",props:{y:10,x:1,width:52,"var":"defaultlbl",valign:"middle",text:"默认",height:32,fontSize:18,font:"SimHei",color:"#003dc6",borderColor:"#003dc6",bold:!0,align:"center"},compId:19}],loadList:["commers/cutline.png","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),Za=function(t){function i(){this.inputmsg=null,this.btnok=null,this.btncancel=null,i.__super.call(this)}s(i,"ui.order.AddCommentPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/AddCommentPanel")},i}(la),$a=function(t){function i(){this.mainpanel=null,this.mainview=null,this.msgtxt=null,this.btnSp=null,this.okbtn=null,this.cancelbtn=null,this.closebtn=null,this.originPic=null,this.relatedPic=null,this.relatename=null,i.__super.call(this)}s(i,"ui.inuoView.SetRelatedConfirmPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/SetRelatedConfirmPanel")},i}(la),Qa=function(t){function i(){this.matbtn=null,this.grayimg=null,this.selfIcon=null,this.manuFacIcon=null,this.moreBtn=null,this.manufactureName=null,this.tipImg=null,i.__super.call(this)}s(i,"ui.order.MaterialNameItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:400},compId:2,child:[{type:"Button",props:{y:7,x:0,width:400,"var":"matbtn",stateNum:3,skin:"uiCommonUpdate/matBtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#262B2E,#003dc6,#003dc6",labelAlign:"center",label:"户内PP背胶（户内写真）",height:44,disabled:!1,sizeGrid:"7,23,12,28"},compId:8,child:[{type:"Image",props:{"var":"grayimg",top:0,skin:"uiCommonUpdate/grayDisbale.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0},compId:9}]},{type:"Image",props:{y:5,width:20,"var":"selfIcon",skin:"commers/client.png",right:10,mouseEnabled:!1,height:20},compId:11},{type:"Image",props:{y:7,width:20,"var":"manuFacIcon",skin:"commers/star.png",mouseEnabled:!1,height:20},compId:10},{type:"Button",props:{y:7,width:48,"var":"moreBtn",skin:"commers/btn2.png",sizeGrid:"3,3,3,3",right:10,labelFont:"SimHei",label:"更多",height:18},compId:12},{type:"Label",props:{y:0,x:22,"var":"manufactureName",text:"义乌物与",fontSize:16,font:"SimHei",color:"#003dc6",bgColor:"#e4e4e4"},compId:13},{type:"Image",props:{y:9,width:20,visible:!1,"var":"tipImg",skin:"iconsNew/techTip.png",right:0,height:20},compId:15}],loadList:["uiCommonUpdate/matBtn.png","uiCommonUpdate/grayDisbale.png","commers/client.png","commers/star.png","commers/btn2.png","iconsNew/techTip.png"],loadList3D:[]},i}(la),to=function(t){function i(){this.mainpanel=null,this.title=null,this.originList=null,this.originPic=null,this.originFileName=null,this.backPartPic=null,this.effectPic=null,this.yixingPic=null,this.piclist=null,this.btnok=null,this.batchOk=null,this.closeBtn=null,this.cancelBtn=null,i.__super.call(this)}s(i,"ui.inuoView.RelatedPicChoosePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/RelatedPicChoosePanel")},i}(la),io=function(t){function i(){this.aiImg=null,this.partWhiteBtn=null,this.yixingBtn=null,this.imgName=null,i.__super.call(this)}s(i,"ui.order.AIImageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:204},compId:2,child:[{type:"Image",props:{top:0,skin:"uiCommonUpdate/grayFrame.png",sizeGrid:"3,3,3,3",right:0,left:0,height:260},compId:6},{type:"Image",props:{y:102,x:102,width:200,"var":"aiImg",skin:"comp/image.png",height:200,anchorY:.5,anchorX:.5},compId:3},{type:"Button",props:{y:228,x:10,width:80,"var":"partWhiteBtn",skin:"uiCommonUpdate/green2.png",labelSize:16,labelFont:"SimHei",labelColors:"#003dC6,#FFFFFF,#FFFFFF",label:"白墨通道",height:30},compId:4},{type:"Button",props:{y:228,width:80,"var":"yixingBtn",skin:"uiCommonUpdate/green2.png",right:10,labelSize:16,labelFont:"SimHei",labelColors:"#003dC6,#FFFFFF,#FFFFFF",label:"异形切割",height:30},compId:5},{type:"Label",props:{"var":"imgName",top:207,text:"遮罩图15mm",right:0,left:0,fontSize:14,font:"SimHei",align:"center"},compId:7}],loadList:["uiCommonUpdate/grayFrame.png","comp/image.png","uiCommonUpdate/green2.png"],loadList3D:[]},i}(la),eo=function(t){function i(){this.conName=null,this.phonetxt=null,this.detailaddr=null,this.btnDel=null,this.defaultlbl=null,this.defaultDelivery=null,this.editTxt=null,i.__super.call(this)}s(i,"ui.usercenter.CustomerAddressItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:940,height:80},compId:2,child:[{type:"Image",props:{y:0,skin:"commers/cutline.png",right:0,left:55,bottom:0},compId:17},{type:"Label",props:{y:28,x:56,width:197,"var":"conName",valign:"middle",text:"上海万能科技公司",height:24,fontSize:24,font:"SimHei",color:"#0",align:"center"},compId:3},{type:"Label",props:{y:28,x:259,width:156,"var":"phonetxt",valign:"middle",text:"13564113173",height:24,fontSize:24,font:"SimHei",color:"#0",align:"left"},compId:5},{type:"Label",props:{x:422,wordWrap:!0,width:273,"var":"detailaddr",valign:"middle",top:0,text:"上海市浦东新区周浦镇瑞浦路612弄23号1001室",height:80,fontSize:20,font:"SimHei",color:"#0",bottom:0,align:"left"},compId:6},{type:"Text",props:{y:32,x:829,"var":"btnDel",text:"删除",presetID:1,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Label",props:{y:10,x:1,width:52,visible:!1,"var":"defaultlbl",valign:"middle",text:"默认",height:32,fontSize:18,font:"SimHei",color:"#003dc6",borderColor:"#003dc6",bold:!0,align:"center"},compId:19},{type:"Label",props:{y:28,x:696,width:126,"var":"defaultDelivery",valign:"middle",text:"工厂自提",height:24,fontSize:20,font:"SimHei",color:"#0",align:"center"},compId:22},{type:"Text",props:{y:32,x:883,width:47,visible:!0,"var":"editTxt",text:"修改",presetID:1,height:12,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:24,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:25}]}],loadList:["commers/cutline.png","prefabs/LinksText.prefab"],loadList3D:[]},i
}(la),no=function(t){function i(){this.mainpanel=null,this.firstPage=null,this.myorder=null,this.userName=null,this.logout=null,this.productlist=null,i.__super.call(this)}s(i,"ui.product.ProductOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("product/ProductOrderPanel")},i}(la),so=function(t){function i(){this.qqContact=null,this.checkselect=null,this.outicon=null,this.factorytxt=null,this.holaday=null,i.__super.call(this)}s(i,"ui.order.OutPutCenterUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{height:40},compId:2,child:[{type:"Box",props:{y:0,x:0},compId:3,child:[{type:"Button",props:{y:0,x:600,width:128,visible:!1,"var":"qqContact",skin:"commers/btn1.png",sizeGrid:"3,3,3,3",labelSize:18,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"qq交谈",height:40},compId:5},{type:"CheckBox",props:{y:11,x:19,"var":"checkselect",skin:"uiCommonUpdate/grennsel.png",scaleY:1,scaleX:1,mouseEnabled:!1,labelSize:20},compId:8},{type:"Image",props:{y:5,x:41,width:30,"var":"outicon",skin:"commers/circle.png",height:30},compId:11},{type:"HBox",props:{y:9,x:78},compId:12,child:[{type:"Text",props:{"var":"factorytxt",text:"更改输出中心",presetID:1,fontSize:24,font:"SimHei",color:"#000000",bold:!0,y:0,x:0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:6,child:[{type:"Script",props:{txttype:2,presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:7}]},{type:"Label",props:{y:2,x:206,"var":"holaday",text:"放假时间20200122-1220",fontSize:18,font:"SimHei",color:"#e8100c"},compId:9}]}]}],loadList:["commers/btn1.png","uiCommonUpdate/grennsel.png","commers/circle.png","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),ro=function(t){function i(){this.conName=null,this.phonetxt=null,this.detailaddr=null,this.checksel=null,this.operateBox=null,this.btnDel=null,this.btnedit=null,i.__super.call(this)}s(i,"ui.usercenter.VipAddressItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:940,height:60},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:17},{type:"Label",props:{y:18,x:33,width:93,"var":"conName",valign:"middle",text:"徐建华",height:24,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:3},{type:"Label",props:{y:18,x:151,width:156,"var":"phonetxt",valign:"middle",text:"13564113173",height:24,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:5},{type:"Label",props:{y:0,x:314,wordWrap:!0,width:431,"var":"detailaddr",valign:"middle",text:"上海市浦东新区周浦镇瑞浦路612弄23号1001室",height:60,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:6},{type:"CheckBox",props:{y:22,x:10,"var":"checksel",skin:"commers/multicheck.png",labelSize:20},compId:19},{type:"Box",props:{y:22,x:814,"var":"operateBox"},compId:20,child:[{type:"Text",props:{"var":"btnDel",text:"删除",presetID:1,fontSize:16,font:"SimHei",color:"#354052",y:0,x:0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Text",props:{x:42,text:"|",presetID:1,fontSize:16,font:"SimHei",color:"#354052",y:0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:16},{type:"Text",props:{x:61,width:47,"var":"btnedit",text:"编辑",presetID:1,fontSize:16,font:"SimHei",color:"#354052",y:0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:11,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:12}]}]}],loadList:["commers/inputbg.png","commers/multicheck.png","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),ao=function(t){function i(){this.companyname=null,this.addr=null,this.bank=null,this.statetxt=null,this.loadtxt=null,this.amounttxt=null,this.cancetxt=null,i.__super.call(this)}s(i,"ui.usercenter.InvoiceHistoryItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:798,skin:"commers/graydisable.jpg",sizeGrid:"2,2,2,2",height:35,alpha:.1},compId:8},{type:"Label",props:{y:0,x:0,width:181,"var":"companyname",valign:"middle",text:"浙江禾物喷印",height:38,fontSize:16,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:0,x:181,wordWrap:!0,width:247,"var":"addr",valign:"middle",text:"2021-01-01至2022-10-10",overflow:"scroll",height:35,fontSize:14,font:"SimHei",align:"center"},compId:4},{type:"Label",props:{y:0,x:428,width:139,"var":"bank",valign:"middle",text:"￥15689",height:38,fontSize:16,font:"SimHei",align:"center"},compId:5},{type:"Label",props:{y:0,x:659,width:75,"var":"statetxt",valign:"middle",text:"待开票",height:38,fontSize:16,font:"SimHei",color:"#f31310",align:"center"},compId:6},{type:"Text",props:{y:9.5,x:758,"var":"loadtxt",text:"下载",presetID:1,fontSize:16,color:"#52B232",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:9,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:10}]},{type:"Label",props:{y:0,x:573,width:90,"var":"amounttxt",valign:"middle",text:"￥15689",height:38,fontSize:16,font:"SimHei",align:"center"},compId:11},{type:"Text",props:{y:9,x:734,"var":"cancetxt",text:"撤销申请",presetID:1,fontSize:16,color:"#ef0e0b",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:12,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:13}]}],loadList:["commers/graydisable.jpg","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),oo=function(t){function i(){this.orderData=null,i.__super.call(this),this.averageBtn.on("click",this,this.onAverageNum)}s(i,"script.order.item.PackageOrderCell",t);var e=i.prototype;return e.setOrderData=function(t){this.orderData=t,this.fileimg.skin=t.conponent.previewImagePath;var i=t.conponent.LWH.split("/"),e=parseFloat(i[0]),n=parseFloat(i[1]);this.seqNum.text=t.itemSeq+"",e>n?(this.fileimg.width=108,this.fileimg.height=108/e*n):(this.fileimg.height=108,this.fileimg.width=108/n*e),this.filenametxt.text=t.conponent.filename,this.mattext.text=t.conponent.prodName,this.numtxt.text=t.itemNumber+""},e.onAverageNum=function(){var t=this.orderData.itemNumber;if(1!=k.instance.packageList.length){var i=Math.floor(t/k.instance.packageList.length);0==i&&(i=1);var e=t-i*k.instance.packageList.length;0>e&&(e=0);for(var n=i+e,s=0,r=0;r<k.instance.packageList.length;r++)if(t>s)for(var a=k.instance.packageList[r],o=0;o<a.itemlist.length;o++)if(a.itemlist[o].itemId==this.orderData.orderItemSn){a.itemlist[o].itemCount=0==r?n:i,s+=a.itemlist[o].itemCount;break}Ln.instance.event("UPDATE_PACKAGE_ORDER_ITEM_COUNT")}},i}(ua),ho=function(t){function i(){this.bgimg=null,this.manuicon=null,this.fileimg=null,this.backimg=null,this.yingxback=null,this.yixingimg=null,this.numindex=null,this.filename=null,this.total=null,this.operatebox=null,this.addmsg=null,this.deleteorder=null,this.hascomment=null,this.architype=null,this.checkSel=null,this.editbox=null,this.editwidth=null,this.editheight=null,this.lockratio=null,this.editmat=null,this.setMatBtn=null,this.numbox=null,this.inputnum=null,this.addbtn=null,this.subtn=null,this.deletBtn=null,this.dengxiangRaid=null,this.semiRadius=null,this.unitPrice=null,i.__super.call(this)}s(i,"ui.order.OrderItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1750,visible:!0,right:0,left:0,height:134},compId:2,child:[{type:"Image",props:{"var":"bgimg",skin:"commers/cutline.png",right:0,left:-5,bottom:0},compId:26},{type:"Image",props:{y:11,x:12.5,width:23,"var":"manuicon",skin:"commers/star.png",height:23,anchorY:.5,anchorX:.5},compId:52},{type:"Image",props:{y:67,x:181,width:108,visible:!0,"var":"fileimg",skin:"comp/image.png",height:108,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{y:67,x:417,width:108,"var":"backimg",skin:"comp/image.png",height:108,anchorY:.5,anchorX:.5},compId:38},{type:"Image",props:{y:67,x:417,width:108,"var":"yingxback",skin:"comp/image.png",scaleX:1,mouseEnabled:!1,height:108,anchorY:.5,anchorX:.5,alpha:.5},compId:40},{type:"Image",props:{y:67,x:181,width:108,"var":"yixingimg",skin:"comp/image.png",height:108,anchorY:.5,anchorX:.5,alpha:.5},compId:39},{type:"Label",props:{y:52,x:33,width:64,"var":"numindex",valign:"middle",text:"123",height:30,fontSize:30,font:"SimHei",color:"#262B2E",align:"left"},compId:3},{type:"Label",props:{y:28,x:243,wordWrap:!0,width:104,visible:!0,"var":"filename",valign:"middle",text:"PP纸无背胶（海报、展架）.tif",overflow:"hidden",height:82,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:5},{type:"Label",props:{y:58,x:1424,width:80,"var":"total",text:"12680",fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:17},{type:"Box",props:{y:5,visible:!1,"var":"operatebox",right:10},compId:21,child:[{type:"Text",props:{y:8,x:0,"var":"addmsg",text:"添加备注",fontSize:16,font:"SimHei",color:"#262B2E",runtime:"laya.display.Text"},compId:18},{type:"Text",props:{y:24,x:0,"var":"deleteorder",text:"删除订单",fontSize:16,font:"SimHei",color:"#262B2E",runtime:"laya.display.Text"},compId:19},{type:"Label",props:{y:-13,x:65,width:14,"var":"hascomment",valign:"middle",text:"'''",height:17,fontSize:24,font:"Helvetica",color:"#39B25A",align:"center"},compId:36}]},{type:"Label",props:{x:833,wordWrap:!0,width:309,"var":"architype",valign:"middle",top:5,text:"户外材料--白胶车贴",overflow:"hidden",height:124,fontSize:18,font:"SimHei",color:"#262B2E",bottom:5,bold:!0,align:"center"},compId:12},{type:"CheckBox",props:{y:53,x:0,"var":"checkSel",skin:"uiCommonUpdate/grennsel.png",scaleY:1.4,scaleX:1.4},compId:31},{type:"Box",props:{y:22,x:499,"var":"editbox"},compId:56,child:[{type:"Label",props:{y:10,text:"宽(cm)",height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:8},{type:"Label",props:{y:64,x:1,text:"高(cm)",height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:9},{type:"TextInput",props:{x:68,width:85,"var":"editwidth",text:"729.89",skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",mouseEnabled:!0,height:36,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0},compId:10},{type:"TextInput",props:{y:54,x:68,width:85,"var":"editheight",text:"16",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",mouseEnabled:!0,height:36,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0},compId:11},{type:"Image",props:{y:34,x:161,width:20,"var":"lockratio",skin:"commers/lock.png",rotation:0,height:20},compId:37},{type:"Image",props:{y:6,x:162,skin:"iconsNew/zhexian.png"},compId:54},{type:"Image",props:{y:83,x:162,skin:"iconsNew/zhexian.png",scaleY:-1},compId:55}]},{type:"Button",props:{y:54,x:1157,width:60,"var":"editmat",stateNum:1,skin:"uiCommonUpdate/radiusCorner.png",labelSize:18,labelColors:"#003dc6,#003dc6,#003dc6",labelBold:!0,label:"修改",height:26,sizeGrid:"1,12,2,8"},compId:57},{type:"Button",props:{y:44,x:886,width:217,"var":"setMatBtn",stateNum:3,skin:"uiCommonUpdate/greenBtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF,",label:"设置材料和工艺",height:46,sizeGrid:"2,22,3,22"},compId:58},{type:"Box",props:{y:49,x:712,"var":"numbox"},compId:59,child:[{type:"TextInput",props:{x:34,width:52,"var":"inputnum",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:16},{type:"Button",props:{y:4,x:91,width:27,"var":"addbtn",skin:"uiCommonUpdate/blackbtn.png",sizeGrid:"4,4,4,4",rotation:0,labelSize:25,labelFont:"SimHei",labelColors:"#FFFFFF,#0,#FFFFFF",label:"+",height:27},compId:33},{type:"Button",props:{y:4,width:27,"var":"subtn",skin:"uiCommonUpdate/blackbtn.png",labelSize:25,labelFont:"SimHei",labelColors:"#FFFFFF,#0,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:34}]},{type:"Button",props:{y:51,x:1566,width:84,"var":"deletBtn",stateNum:1,skin:"uiCommonUpdate/radiusCorner.png",labelSize:18,labelColors:"#003dc6,#003dc6,#003dc6",labelBold:!0,label:"删除",height:36,sizeGrid:"1,12,2,8"},compId:60},{type:"Box",props:{y:49,x:499,visible:!1,"var":"dengxiangRaid"},compId:61,child:[{type:"Label",props:{y:7,x:0,text:"直径(cm)",height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:62},{type:"TextInput",props:{y:0,x:74,width:85,"var":"semiRadius",text:"729.89",skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",mouseEnabled:!0,height:36,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0},compId:64}]},{type:"Label",props:{y:58,x:1323,width:80,"var":"unitPrice",text:"12680",fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:70}],loadList:["commers/cutline.png","commers/star.png","comp/image.png","uiCommonUpdate/grennsel.png","commers/inputbg.png","commers/lock.png","iconsNew/zhexian.png","uiCommonUpdate/radiusCorner.png","uiCommonUpdate/greenBtn.png","uiCommonUpdate/blackbtn.png"],loadList3D:[]},i}(la),lo=function(t){function i(){this.mainpanel=null,this.companyPic=null,this.logBox=null,this.pwdImg=null,this.input_pwd=null,this.pwdError=null,this.delBtn=null,this.accoutImg=null,this.input_account=null,this.accountError=null,this.delBtn=null,this.btn_login=null,this.checkAuto=null,this.titleBar=null,this.txt_forget=null,this.txt_reg=null,this.copyRight=null,this.comInfo=null,this.icp=null,this.loginedBox=null,this.gotoFirst=null,i.__super.call(this)}s(i,"ui.login.LogPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/LogPanel")},i}(la),co=function(t){function i(){this.backimg=null,this.htmltxt=null,this.img=null,i.__super.call(this)}s(i,"ui.common.TipPicturePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:2,width:236,"var":"backimg",skin:"commers/choosebg.png",sizeGrid:"8,8,8,8",height:342},compId:3,child:[{type:"HTMLDivElement",props:{y:10,x:10,width:200,"var":"htmltxt",innerHTML:"htmlText",height:100,runtime:"laya.html.dom.HTMLDivElement"},compId:5},{type:"Image",props:{"var":"img",top:50,skin:"comp/image.png",right:5,left:2,height:283,bottom:9},compId:6}]}],loadList:["commers/choosebg.png","comp/image.png"],loadList3D:[]},i}(la),uo=function(t){function i(){this.selbtn=null,this.selfIcon=null,i.__super.call(this)}s(i,"ui.order.TabChooseBtnUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Button",props:{y:0,x:0,width:287,"var":"selbtn",stateNum:3,skin:"uiCommonUpdate/matBtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#262B2E,#003dc6,#003dc6",label:"户内PP背胶（户内写真）",height:42,sizeGrid:"7,23,12,28"},compId:3},{type:"Image",props:{y:0,x:255,width:20,"var":"selfIcon",skin:"commers/client.png",mouseEnabled:!1,height:20},compId:4}],loadList:["uiCommonUpdate/matBtn.png","commers/client.png"],loadList3D:[]},i}(la),_o=function(t){function i(){this.outimg=null,this.foldname=null,i.__super.call(this)}s(i,"ui.picManager.DirectItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:160,"var":"outimg",skin:"commers/blackbg.png",sizeGrid:"5,5,5,5",height:30,alpha:.7},compId:3},{type:"Label",props:{y:4,x:0,width:159,"var":"foldname",valign:"middle",text:"我的图片",height:24,fontSize:20,color:"#eff8f1",alpha:1,align:"center"},compId:5}],loadList:["commers/blackbg.png"],loadList3D:[]},i}(la),po=function(t){function i(){this.grayimg=null,this.techBtn=null,this.shineimg=null,this.tipImg=null,i.__super.call(this)}s(i,"ui.order.TechorItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:300,height:44},compId:2,child:[{type:"Image",props:{y:0,x:0,"var":"grayimg",top:0,skin:"uiCommonUpdate/grayDisbale.png",right:0,left:0,gray:!0,bottom:0,sizeGrid:"12,20,13,22"},compId:10},{type:"Button",props:{width:300,"var":"techBtn",skin:"uiCommonUpdate/processBtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#262B2E,#003dc6,#003dc6",labelBold:!0,label:"户内PP背胶",height:44,sizeGrid:"9,22,9,22"},compId:9},{type:"Image",props:{"var":"shineimg",top:0,skin:"uiCommonUpdate/shineGreen.png",right:0,mouseEnabled:!1,left:0,bottom:0,sizeGrid:"12,28,12,28"},compId:11},{type:"Image",props:{width:20,"var":"tipImg",top:2,skin:"iconsNew/techTip.png",right:5,height:20},compId:12}],loadList:["uiCommonUpdate/grayDisbale.png","uiCommonUpdate/processBtn.png","uiCommonUpdate/shineGreen.png","iconsNew/techTip.png"],loadList3D:[]},i}(la),fo=function(t){function i(){this.frame=null,this.img=null,this.picClassTxt=null,this.colorspacetxt=null,this.yixingimg=null,this.backimg=null,this.filename=null,this.btndelete=null,this.fileinfo=null,this.sel=null,this.warningimg=null,this.partWhiteImg=null,i.__super.call(this)}s(i,"ui.picManager.PicPaintItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:252,height:228},compId:2,child:[{type:"Image",props:{y:0,x:0,width:252,"var":"frame",skin:"upload1/picimg.png",sizeGrid:"2,2,2,2",height:228},compId:18},{type:"Image",props:{y:85,x:87,width:156,"var":"img",skin:"upload1/fold.png",height:156,anchorY:.5,anchorX:.5},compId:19},{type:"Label",props:{y:141,wordWrap:!1,width:36,"var":"picClassTxt",valign:"middle",text:"JPEG",overflow:"hidden",left:0,height:21,fontSize:16,font:"SimHei",color:"#262B2E",bgColor:"#FFFFFF",align:"left"},compId:25},{type:"Label",props:{y:113.5,wordWrap:!1,width:36,"var":"colorspacetxt",valign:"middle",text:"CMYK",overflow:"hidden",left:0,height:21,fontSize:16,font:"SimHei",color:"#262B2E",bgColor:"#FFFFFF",align:"left"},compId:26},{type:"Image",props:{y:38,x:209,width:70,"var":"yixingimg",skin:"upload1/fold.png",height:70,anchorY:.5,anchorX:.5},compId:20},{type:"Image",props:{y:190,x:209,width:70,"var":"backimg",skin:"upload1/fold.png",height:70,anchorY:.5,anchorX:.5},compId:21},{type:"Label",props:{y:164,x:0,wordWrap:!1,width:165,"var":"filename",valign:"middle",text:"名称.jpg 宽 3256 名称",overflow:"scroll",height:23,fontSize:16,font:"Helvetica",color:"#262B2E",align:"center"},compId:22},{type:"Button",props:{y:5,x:7,"var":"btndelete",stateNum:2,skin:"upload1/closebutton.png"},compId:23},{type:"Label",props:{y:184,x:0,wordWrap:!0,width:165,"var":"fileinfo",valign:"top",text:"名称.jpg 宽 3256/n可以啊",overflow:"scroll",height:44,fontSize:16,font:"Helvetica",color:"#262B2E",align:"center"},compId:24},{type:"Button",props:{y:6,x:142,"var":"sel",skin:"upload1/imgselect.png"},compId:27},{type:"Image",props:{y:66,x:67,width:40,"var":"warningimg",skin:"commers/warning.png",height:40},compId:32},{type:"Image",props:{y:114,x:209,width:70,"var":"partWhiteImg",skin:"upload1/fold.png",height:70,anchorY:.5,anchorX:.5},compId:33}],loadList:["upload1/picimg.png","upload1/fold.png","upload1/closebutton.png","upload1/imgselect.png","commers/warning.png"],loadList3D:[]},i}(la),mo=function(t){function i(){this.leaveGroupBtn=null,this.searchBox=null,this.companyList=null,this.companyName=null,this.shortName=null,this.companyAddr=null,this.reditCode=null,this.changeCompanyInfo=null,this.addBusinessman=null,this.businessList=null,this.rightpanel=null,this.leaveGrpPanel=null,this.verifyCode=null,this.confirmLeave=null,this.closeLeaveBtn=null,this.addBusinessManPanel=null,this.businessName=null,this.delBtn=null,this.contactPhone=null,this.delBtn=null,this.confrimAddMan=null,this.closeAdd=null,i.__super.call(this)}s(i,"ui.usercenter.EnterPrizeInfoPaneUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/EnterPrizeInfoPane")},i}(la),go=function(t){function i(){this.pimg=null,i.__super.call(this)}s(i,"ui.product.ProductItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Image",props:{y:0,x:0,width:314,"var":"pimg",height:417},compId:3}],loadList:[],loadList3D:[]},i}(la),vo=function(t){function i(){this.mainpanel=null,this.packagepanel=null,this.curPackgaeNum=null,this.addpackbtn=null,this.productbox=null,this.packagelist=null,this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.productNum=null,this.textPayPrice=null,this.textDiscount=null,this.textTotalPrice=null,this.cancelbtn=null,this.timepreferRdo=null,this.okbtn=null,i.__super.call(this)}s(i,"ui.order.PackageOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/PackageOrderPanel")},i}(la),So=function(t){function i(){this.mainpanel=null,this.bgimg=null,this.gotoFirst=null,this.firstStep=null,this.firstLine=null,this.sencondStep=null,this.step1Panel=null,this.input_phone=null,this.delBtn=null,this.nameInput=null,this.delBtn=null,this.input_pwd=null,this.delBtn=null,this.input_conpwd=null,this.conpwdError=null,this.delBtn=null,this.code0=null,this.code1=null,this.code2=null,this.code3=null,this.imgCodeInput=null,this.inputCode=null,this.delBtn=null,this.btnGetCode=null,this.codeValid=null,this.input_phonecode=null,this.delBtn=null,this.txtRefresh=null,this.gotoNext=null,this.step2Panel=null,this.input_companyname=null,this.delBtn=null,this.contactName=null,this.delBtn=null,this.detail_addr=null,this.delBtn=null,this.contactPhone=null,this.delBtn=null,this.applyEnter=null,this.applyBtn=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.btnSelTown=null,this.towntxt=null,this.townbox=null,this.townList=null,this.areabox=null,this.areaList=null,this.citybox=null,this.cityList=null,this.provbox=null,this.provList=null,this.applyJoinPanel=null,this.createAccountInput=null,this.delBtn=null,this.commentInput=null,this.delBtn=null,this.confirmJoin=null,this.closeJoin=null,this.contractpanel=null,this.txtpanel=null,this.sevicepro=null,this.agreebox=null,this.okbtn=null,i.__super.call(this)}s(i,"ui.login.RegisterPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/RegisterPanel")},i}(la),yo=function(t){function i(){this.proName=null,this.proPrice=null,this.proNum=null,this.btnadd=null,this.btnsub=null,this.btnok=null,i.__super.call(this)}s(i,"ui.product.AdvertiseItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:480,height:0},compId:2,child:[{type:"Image",props:{skin:"commers/inputfocus.png",sizeGrid:"5,5,5,5",right:0,left:0,height:30},compId:11},{type:"Label",props:{y:6,x:5,width:186,"var":"proName",text:"户内无纸背胶",height:16,fontSize:16,font:"SimHei"},compId:3},{type:"Label",props:{y:8,x:209,width:76,"var":"proPrice",text:"￥23.6元",height:16,fontSize:16,font:"SimHei",color:"#dd3432"},compId:4},{type:"Sprite",props:{y:3,x:295},compId:5,child:[{type:"TextInput",props:{y:1,x:19,width:40,"var":"proNum",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:22,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:6},{type:"Button",props:{x:60,"var":"btnadd",skin:"order1/addbtn.png"},compId:7},{type:"Button",props:{"var":"btnsub",skin:"order1/subtbn.png"},compId:8}]},{type:"Button",props:{y:2,x:381,width:91,"var":"btnok",skin:"commers/btn1.png",sizeGrid:"2,2,2,2",labelSize:16,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"移出购物车",height:25},compId:10}],loadList:["commers/inputfocus.png","commers/inputbg.png","order1/addbtn.png","order1/subtbn.png","commers/btn1.png"],loadList3D:[]},i}(la),Co=function(t){function i(){this.btn=null,this.arrow=null,i.__super.call(this)}s(i,"ui.inuoView.items.MatProcessItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Button",props:{width:343,"var":"btn",stateNum:2,skin:"uiCommonUpdate/matprocess.png",selected:!1,labelSize:27,labelColors:"#FFFFFF,#003dc6,#003dc6",label:"户外PP背胶(户外写真)     ",height:96,sizeGrid:"6,5,7,5"},compId:3,child:[{type:"Image",props:{y:32,x:158,"var":"arrow",skin:"iconsNew/bigArrow.png",right:10},compId:4}]}],loadList:["uiCommonUpdate/matprocess.png","iconsNew/bigArrow.png"],loadList3D:[]},i}(la),Eo=function(t){function i(){this.fileimg=null,this.rightposbox=null,this.xposinput=null,this.xposadd=null,this.xpossub=null,this.yposinput=null,this.yposadd=null,this.ypossub=null,this.marginInput=null,this.marginadd=null,this.marginsub=null,this.picwidth=null,this.upHoleInput=null,this.upHoleAdd=null,this.upHoleSub=null,this.leftHoleInput=null,this.leftHoleAdd=null,this.leftHoleSub=null,this.rightHoleInput=null,this.rightHoleAdd=null,this.rightHoleSub=null,this.bottomHoleInput=null,this.bottomHoleAdd=null,this.bottomHoleSub=null,i.__super.call(this)}s(i,"ui.order.DakouItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:500,height:540},compId:2,child:[{type:"Image",props:{y:116,x:61,width:378,skin:"uiCommonUpdate/grayFrame.png",sizeGrid:"3,3,3,3",height:378},compId:3,child:[{type:"Image",props:{y:188.5,x:188.5,width:375,"var":"fileimg",skin:"comp/image.png",height:375,anchorY:.5,anchorX:.5},compId:12}]},{type:"Label",props:{y:9,x:5,text:"孔边距：",fontSize:18,font:"SimHei"},compId:5},{type:"Box",props:{y:37,x:5,"var":"rightposbox"},compId:24,child:[{type:"Label",props:{y:9,x:0,text:"微  调：",fontSize:18,font:"SimHei"},compId:4},{type:"Label",props:{y:9,x:82,text:"X:",fontSize:18,font:"SimHei"},compId:26},{type:"Sprite",props:{y:0,x:108},compId:6,child:[{type:"TextInput",props:{y:0,x:33,width:49,"var":"xposinput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:13},{type:"Button",props:{y:5,x:88,width:27,"var":"xposadd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:14},{type:"Button",props:{y:5,width:27,"var":"xpossub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:15}]},{type:"Label",props:{y:9,x:253,text:"Y:",fontSize:18,font:"SimHei"},compId:27},{type:"Sprite",props:{y:0,x:280},compId:28,child:[{type:"TextInput",props:{y:0,x:33,width:49,"var":"yposinput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:29},{type:"Button",props:{y:5,x:88,width:27,"var":"yposadd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:30},{type:"Button",props:{y:5,width:27,"var":"ypossub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:31}]}]},{type:"Sprite",props:{y:0,x:84},compId:7,child:[{type:"TextInput",props:{y:0,x:33,width:49,"var":"marginInput",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"left"},compId:16},{type:"Button",props:{y:5,x:88,width:27,"var":"marginadd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:17},{type:"Button",props:{y:5,x:0,width:27,"var":"marginsub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF,",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:18}]},{type:"Label",props:{y:9,x:259,"var":"picwidth",text:"120",fontSize:18,font:"SimHei",align:"left"},compId:9},{type:"Label",props:{y:9,x:230,width:27,text:"宽:",height:18,fontSize:18,font:"SimHei"},compId:11},{type:"Sprite",props:{y:79,x:170},compId:32,child:[{type:"TextInput",props:{y:0,x:78,width:49,"var":"upHoleInput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:33},{type:"Button",props:{y:5,x:133,width:27,"var":"upHoleAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:34},{type:"Button",props:{y:5,x:45,width:27,"var":"upHoleSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:35},{type:"Label",props:{y:9,x:0,text:"孔数",fontSize:18,font:"SimHei"},compId:36}]},{type:"Sprite",props:{y:221,x:8},compId:47,child:[{type:"TextInput",props:{y:67,x:0,width:49,"var":"leftHoleInput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",rotation:0,height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:48},{type:"Button",props:{y:109,x:11,width:27,"var":"leftHoleAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:49},{type:"Button",props:{y:34,x:11,width:27,"var":"leftHoleSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:50},{type:"Label",props:{y:3,x:6,text:"孔数",fontSize:18,font:"SimHei"},compId:51}]},{type:"Sprite",props:{y:221,x:446},compId:53,child:[{type:"TextInput",props:{y:67,x:0,width:49,"var":"rightHoleInput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",rotation:0,height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:54},{type:"Button",props:{y:109,x:11,width:27,"var":"rightHoleAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:55},{type:"Button",props:{y:34,x:11,width:27,"var":"rightHoleSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:56},{type:"Label",props:{y:3,x:6,text:"孔数",fontSize:18,font:"SimHei"},compId:57}]},{type:"Sprite",props:{y:498,x:170},compId:58,child:[{type:"TextInput",props:{y:0,x:78,width:49,"var":"bottomHoleInput",valign:"middle",text:"10",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:16,font:"SimHei",color:"#262B2E",align:"center"},compId:59},{type:"Button",props:{y:5,x:133,width:27,"var":"bottomHoleAdd",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:60},{type:"Button",props:{y:5,x:45,width:27,"var":"bottomHoleSub",skin:"uiCommonUpdate/blackbtn.png",labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:61},{type:"Label",props:{y:9,x:0,text:"孔数",fontSize:18,font:"SimHei"},compId:62}]}],loadList:["uiCommonUpdate/grayFrame.png","comp/image.png","commers/inputbg.png","uiCommonUpdate/blackbtn.png"],loadList3D:[]},i
}(la),bo=function(t){function i(){this.btnsel=null,this.selCheck=null,this.addresstxt=null,this.btnSetDefault=null,this.defaultMark=null,i.__super.call(this)}s(i,"ui.order.OrderAddressItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1646,height:46},compId:2,child:[{type:"Button",props:{y:0,x:0,width:1362,"var":"btnsel",skin:"order1/chooseadd.png",sizeGrid:"3,3,3,3",height:46},compId:6},{type:"Radio",props:{y:14,x:22,"var":"selCheck",skin:"uiCommonUpdate/checksel.png",mouseEnabled:!1},compId:7},{type:"Label",props:{y:11,x:60,width:1288,"var":"addresstxt",text:"浙江省 金华市 义乌市 抽成街道",overflow:"scroll",mouseEnabled:!1,height:24,fontSize:24,font:"SimHei",color:"#262B2E"},compId:8},{type:"Text",props:{y:10,x:1445.5,width:92,"var":"btnSetDefault",text:"设为默认",presetID:1,height:26,fontSize:24,font:"SimHei",color:"#003dc6",isPresetRoot:!0,runtime:"laya.display.Text"},compId:11,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:12}]},{type:"Button",props:{y:0,width:249,"var":"defaultMark",skin:"uiCommonUpdate/greenBtn.png",selected:!0,right:30,labelSize:24,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF,",label:"已设为默认地址",height:46,sizeGrid:"2,22,3,22"},compId:13}],loadList:["order1/chooseadd.png","uiCommonUpdate/checksel.png","prefabs/LinksText.prefab","uiCommonUpdate/greenBtn.png"],loadList3D:[]},i}(la),Io=function(t){function i(){this.editBox=null,this.prodImg=null,this.customImg=null,this.maskimg=null,this.imgframe=null,this.rotateBox=null,this.dragBox=null,this.chooseImg=null,this.resetBtn=null,i.__super.call(this)}s(i,"ui.prodCustom.ProdEditItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("prodCustom/ProdEditItem")},i}(la),xo=function(t){function i(){this.selectImg=null,this.businessName=null,this.phoneNumber=null,this.updateInfoTxt=null,this.deleteTxt=null,i.__super.call(this)}s(i,"ui.usercenter.items.BusinessManItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:500,height:30},compId:2,child:[{type:"Image",props:{"var":"selectImg",top:0,skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:13},{type:"Label",props:{y:7,x:5,width:161,"var":"businessName",text:"客户名称最多六个字",height:14,fontSize:14,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:8,x:217,width:80,"var":"phoneNumber",text:"13899998888",height:14,fontSize:14,font:"SimHei"},compId:4},{type:"Text",props:{y:7,x:410,visible:!1,"var":"updateInfoTxt",text:"修改",presetID:1,fontSize:14,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:6,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:8}]},{type:"Text",props:{y:7,x:458,"var":"deleteTxt",text:"删除",presetID:1,fontSize:14,font:"SimHei",color:"#d92e16",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:7,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Image",props:{y:0,skin:"commers/cutline.png",right:0,left:0,bottom:0},compId:12}],loadList:["commers/inputbg.png","prefabs/LinksText.prefab","commers/cutline.png"],loadList3D:[]},i}(la),Po=function(t){function i(){this.btn=null,i.__super.call(this)}s(i,"ui.prodCustom.ConditionButtonUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:60,height:22},compId:2,child:[{type:"Button",props:{"var":"btn",top:0,skin:"commers/btn3.png",sizeGrid:"5,5,5,5",right:0,left:0,labelSize:18,labelColors:"#223344,#FFFFFF,#FFFFFF",label:"蓝色",bottom:0},compId:3}],loadList:["commers/btn3.png"],loadList3D:[]},i}(la),Do=function(t){function i(){this.mainpanel=null,this.mainview=null,this.countdownbox=null,this.paytime=null,this.cancelbtn=null,this.paybtn=null,this.actmoney=null,this.accountmoney=null,this.needpay=null,this.payall=null,this.paytype=null,this.realpay=null,this.factoryMoney=null,i.__super.call(this)}s(i,"ui.order.ConfirmOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/ConfirmOrderPanel")},i}(la),Ao=function(t){function i(){this.fileimg=null,this.filenametxt=null,this.mattext=null,this.box0=null,this.numinput0=null,this.averagebtn=null,this.box1=null,this.numinput1=null,this.addbtn1=null,this.subbtn1=null,this.box2=null,this.numinput2=null,this.addbtn2=null,this.subbtn2=null,this.box3=null,this.numinput3=null,this.addbtn3=null,this.subbtn3=null,this.box4=null,this.numinput4=null,this.addbtn4=null,this.subbtn4=null,this.box5=null,this.numinput5=null,this.addbtn5=null,this.subbtn5=null,this.box6=null,this.numinput6=null,this.addbtn6=null,this.subbtn6=null,this.box7=null,this.numinput7=null,this.addbtn7=null,this.subbtn7=null,this.box8=null,this.numinput8=null,this.addbtn8=null,this.subbtn8=null,this.box9=null,this.numinput9=null,this.addbtn9=null,this.subbtn9=null,this.box10=null,this.numinput10=null,this.addbtn10=null,this.subbtn10=null,this.box11=null,this.numinput11=null,this.addbtn11=null,this.subbtn11=null,this.box12=null,this.numinput12=null,this.addbtn12=null,this.subbtn12=null,this.box13=null,this.numinput13=null,this.addbtn13=null,this.subbtn13=null,this.box14=null,this.numinput14=null,this.addbtn14=null,this.subbtn14=null,this.box15=null,this.numinput15=null,this.addbtn15=null,this.subbtn15=null,this.box16=null,this.numinput16=null,this.addbtn16=null,this.subbtn16=null,this.box17=null,this.numinput17=null,this.addbtn17=null,this.subbtn17=null,this.box18=null,this.numinput18=null,this.addbtn18=null,this.subbtn18=null,this.box19=null,this.numinput19=null,this.addbtn19=null,this.subbtn19=null,this.box20=null,this.numinput20=null,this.addbtn20=null,this.subbtn20=null,i.__super.call(this)}s(i,"ui.order.OrderPackageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1280,height:140},compId:2,child:[{type:"Image",props:{y:0,x:0,width:1280,skin:"upload1/inoutbg.png",sizeGrid:"3,3,3,3",height:140},compId:133},{type:"Image",props:{y:52,x:52,width:100,"var":"fileimg",skin:"comp/image.png",height:100,anchorY:.5,anchorX:.5},compId:3},{type:"Label",props:{y:103,x:0,width:105,"var":"filenametxt",text:"文件名各",overflow:"scroll",height:14,fontSize:14,font:"SimHei",align:"center"},compId:4},{type:"Label",props:{y:122,x:0,width:106,"var":"mattext",text:"户内写真",overflow:"scroll",height:14,fontSize:14,font:"SimHei",align:"center"},compId:5},{type:"Image",props:{x:110,width:140,skin:"commers/cutline.png",rotation:90},compId:7},{type:"Box",props:{y:0,x:110,width:55,"var":"box0",height:140},compId:9,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput0",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:6},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:8},{type:"Button",props:{y:29,x:7,width:40,"var":"averagebtn",skin:"commers/btn3.png",sizeGrid:"3,3,3,3",labelColors:"#262B2E,#FFEEEE,#FFEEEE",label:"平分",height:20},compId:25}]},{type:"Box",props:{y:0,x:165,width:55,"var":"box1",height:140},compId:28,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput1",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:29},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:30},{type:"Button",props:{y:25,x:18,"var":"addbtn1",skin:"order1/addbtn.png"},compId:31},{type:"Button",props:{y:84,x:18,"var":"subbtn1",skin:"order1/subtbn.png"},compId:32}]},{type:"Box",props:{y:0,x:220,width:55,"var":"box2",height:140},compId:38,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput2",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:39},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:40},{type:"Button",props:{y:25,x:18,"var":"addbtn2",skin:"order1/addbtn.png"},compId:41},{type:"Button",props:{y:84,x:18,"var":"subbtn2",skin:"order1/subtbn.png"},compId:42}]},{type:"Box",props:{y:0,x:275,width:55,"var":"box3",height:140},compId:43,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput3",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:44},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:45},{type:"Button",props:{y:25,x:18,"var":"addbtn3",skin:"order1/addbtn.png"},compId:46},{type:"Button",props:{y:84,x:18,"var":"subbtn3",skin:"order1/subtbn.png"},compId:47}]},{type:"Box",props:{y:0,x:330,width:55,"var":"box4",height:140},compId:48,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput4",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:49},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:50},{type:"Button",props:{y:25,x:18,"var":"addbtn4",skin:"order1/addbtn.png"},compId:51},{type:"Button",props:{y:84,x:18,"var":"subbtn4",skin:"order1/subtbn.png"},compId:52}]},{type:"Box",props:{y:0,x:385,width:55,"var":"box5",height:140},compId:53,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput5",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:54},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:55},{type:"Button",props:{y:25,x:18,"var":"addbtn5",skin:"order1/addbtn.png"},compId:56},{type:"Button",props:{y:84,x:18,"var":"subbtn5",skin:"order1/subtbn.png"},compId:57}]},{type:"Box",props:{y:0,x:440,width:55,"var":"box6",height:140},compId:58,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput6",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:59},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:60},{type:"Button",props:{y:25,x:18,"var":"addbtn6",skin:"order1/addbtn.png"},compId:61},{type:"Button",props:{y:84,x:18,"var":"subbtn6",skin:"order1/subtbn.png"},compId:62}]},{type:"Box",props:{y:0,x:495,width:55,"var":"box7",height:140},compId:63,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput7",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:64},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:65},{type:"Button",props:{y:25,x:18,"var":"addbtn7",skin:"order1/addbtn.png"},compId:66},{type:"Button",props:{y:84,x:18,"var":"subbtn7",skin:"order1/subtbn.png"},compId:67}]},{type:"Box",props:{y:0,x:550,width:55,"var":"box8",height:140},compId:68,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput8",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:69},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:70},{type:"Button",props:{y:25,x:18,"var":"addbtn8",skin:"order1/addbtn.png"},compId:71},{type:"Button",props:{y:84,x:18,"var":"subbtn8",skin:"order1/subtbn.png"},compId:72}]},{type:"Box",props:{y:0,x:605,width:55,"var":"box9",height:140},compId:73,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput9",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:74},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:75},{type:"Button",props:{y:25,x:18,"var":"addbtn9",skin:"order1/addbtn.png"},compId:76},{type:"Button",props:{y:84,x:18,"var":"subbtn9",skin:"order1/subtbn.png"},compId:77}]},{type:"Box",props:{y:0,x:660,width:55,"var":"box10",height:140},compId:78,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput10",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:79},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:80},{type:"Button",props:{y:25,x:18,"var":"addbtn10",skin:"order1/addbtn.png"},compId:81},{type:"Button",props:{y:84,x:18,"var":"subbtn10",skin:"order1/subtbn.png"},compId:82}]},{type:"Box",props:{y:0,x:715,width:55,"var":"box11",height:140},compId:83,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput11",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:84},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:85},{type:"Button",props:{y:25,x:18,"var":"addbtn11",skin:"order1/addbtn.png"},compId:86},{type:"Button",props:{y:84,x:18,"var":"subbtn11",skin:"order1/subtbn.png"},compId:87}]},{type:"Box",props:{y:0,x:770,width:55,"var":"box12",height:140},compId:88,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput12",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:89},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:90},{type:"Button",props:{y:25,x:18,"var":"addbtn12",skin:"order1/addbtn.png"},compId:91},{type:"Button",props:{y:84,x:18,"var":"subbtn12",skin:"order1/subtbn.png"},compId:92}]},{type:"Box",props:{y:0,x:825,width:55,"var":"box13",height:140},compId:93,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput13",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:94},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:95},{type:"Button",props:{y:25,x:18,"var":"addbtn13",skin:"order1/addbtn.png"},compId:96},{type:"Button",props:{y:84,x:18,"var":"subbtn13",skin:"order1/subtbn.png"},compId:97}]},{type:"Box",props:{y:0,x:880,width:55,"var":"box14",height:140},compId:98,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput14",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:99},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:100},{type:"Button",props:{y:25,x:18,"var":"addbtn14",skin:"order1/addbtn.png"},compId:101},{type:"Button",props:{y:84,x:18,"var":"subbtn14",skin:"order1/subtbn.png"},compId:102}]},{type:"Box",props:{y:0,x:935,width:55,"var":"box15",height:140},compId:103,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput15",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:104},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:105},{type:"Button",props:{y:25,x:18,"var":"addbtn15",skin:"order1/addbtn.png"},compId:106},{type:"Button",props:{y:84,x:18,"var":"subbtn15",skin:"order1/subtbn.png"},compId:107}]},{type:"Box",props:{y:0,x:990,width:55,"var":"box16",height:140},compId:108,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput16",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:109},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:110},{type:"Button",props:{y:25,x:18,"var":"addbtn16",skin:"order1/addbtn.png"},compId:111},{type:"Button",props:{y:84,x:18,"var":"subbtn16",skin:"order1/subtbn.png"},compId:112}]},{type:"Box",props:{y:0,x:1045,width:55,"var":"box17",height:140},compId:113,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput17",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:114},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:115},{type:"Button",props:{y:25,x:18,"var":"addbtn17",skin:"order1/addbtn.png"},compId:116},{type:"Button",props:{y:84,x:18,"var":"subbtn17",skin:"order1/subtbn.png"},compId:117}]},{type:"Box",props:{y:0,x:1100,width:55,"var":"box18",height:140},compId:118,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput18",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:119},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:120},{type:"Button",props:{y:25,x:18,"var":"addbtn18",skin:"order1/addbtn.png"},compId:121},{type:"Button",props:{y:84,x:18,"var":"subbtn18",skin:"order1/subtbn.png"},compId:122}]},{type:"Box",props:{y:0,x:1155,width:55,"var":"box19",height:140},compId:123,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput19",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:124},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:125},{type:"Button",props:{y:25,x:18,"var":"addbtn19",skin:"order1/addbtn.png"},compId:126},{type:"Button",props:{y:84,x:18,"var":"subbtn19",skin:"order1/subtbn.png"},compId:127}]},{type:"Box",props:{y:0,x:1210,width:55,"var":"box20",height:140},compId:128,child:[{type:"TextInput",props:{y:56,x:0,width:50,"var":"numinput20",type:"number",text:"100",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",font:"SimHei",align:"center"},compId:129},{type:"Image",props:{x:53,width:140,skin:"commers/cutline.png",rotation:90},compId:130},{type:"Button",props:{y:25,x:18,"var":"addbtn20",skin:"order1/addbtn.png"},compId:131},{type:"Button",props:{y:84,x:18,"var":"subbtn20",skin:"order1/subtbn.png"},compId:132}]}],loadList:["upload1/inoutbg.png","comp/image.png","commers/cutline.png","commers/inputbg.png","commers/btn3.png","order1/addbtn.png","order1/subtbn.png"],loadList3D:[]},i}(la),Lo=function(t){function i(){this.accout=null,this.moneytxt=null,this.factoryFreezMoney=null,this.factoryMoney=null,this.finishcharge=null,this.chargerecord=null,this.copyname=null,this.companyname=null,this.bank=null,this.copybank=null,this.account=null,this.copyaccount=null,this.otherInfo=null,this.chargeinput=null,this.confirmcharge=null,this.inputmoneypanel=null,this.sendcharge=null,this.closeinput=null,this.confirmmoney=null,i.__super.call(this)}s(i,"ui.usercenter.ChargePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/ChargePanel")},i}(la),ko=function(t){function i(){this.pronum=null,this.widthtxt=null,this.heighttxt=null,this.money=null,this.filename=null,this.tech=null,this.matname=null,this.itemseq=null,this.picimg=null,this.deliverydate=null,this.isurgent=null,this.bgimg=null,this.unitPriceInput=null,this.totalPriceInput=null,this.unitPriceTxt=null,this.measureUnit=null,i.__super.call(this)}s(i,"ui.usercenter.OrderPriceSettingItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1745,height:175},compId:2,child:[{type:"Box",props:{y:68,x:257},compId:66,child:[{type:"Label",props:{y:-2,x:7,width:58,text:"宽(cm)",height:21,fontSize:18,font:"SimHei",color:"#0",align:"center"},compId:68},{type:"Label",props:{y:75,x:98,width:38,"var":"pronum",text:"10",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!1,align:"left"},compId:69},{type:"Label",props:{y:34,x:7,width:58,text:"高(cm)",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:70},{type:"Label",props:{y:1,x:78,width:50,"var":"widthtxt",text:"10000",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:71},{type:"Label",props:{y:34,x:78,width:58,"var":"heighttxt",text:"100",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:72},{type:"Label",props:{y:75,x:3,width:81,text:"制作数量",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:73}]},{type:"Label",props:{y:79,x:819,width:100,"var":"money",text:"12680",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:65},{type:"Label",props:{y:22,x:257,wordWrap:!0,width:190,"var":"filename",valign:"middle",text:"PP纸无背胶.jpg",overflow:"hidden",height:18,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:64},{type:"Label",props:{y:62,x:458,wordWrap:!0,width:169,"var":"tech",valign:"top",text:"户外材料--白胶车贴",rotation:0,overflow:"hidden",height:95,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:63},{type:"Label",props:{y:20,x:458,wordWrap:!0,width:202,"var":"matname",valign:"middle",text:"户内PP纸无背胶",height:36,fontSize:18,font:"SimHei",color:"#262B2E",align:"left"},compId:67},{type:"Label",props:{y:22,x:25,width:29,"var":"itemseq",text:"1",height:21,fontSize:28,font:"SimHei",color:"#0",align:"left"},compId:62},{type:"Image",props:{y:87,x:154,width:155,"var":"picimg",skin:"comp/image.png",height:155,anchorY:.5,anchorX:.5},compId:61},{type:"Label",props:{y:79,x:1242,"var":"deliverydate",text:"2012-12-25 21:15:52",height:16,fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:59},{type:"Label",props:{y:7,x:8,"var":"isurgent",valign:"middle",text:"加急",fontSize:18,font:"SimHei",color:"#f3300b",align:"center"},compId:58},{type:"Image",props:{"var":"bgimg",skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:3},{type:"TextInput",props:{y:77,x:972,width:94,"var":"unitPriceInput",type:"number",text:"2670",skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",height:22,fontSize:18,font:"SimHei",bold:!0},compId:75},{type:"TextInput",props:{y:77,x:1134,width:94,"var":"totalPriceInput",type:"number",text:"2670",skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",height:22,fontSize:18,font:"SimHei",bold:!0},compId:76},{type:"Label",props:{y:79,x:693,width:100,"var":"unitPriceTxt",text:"12680",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:77},{type:"Label",props:{y:108,x:971,width:66,"var":"measureUnit",text:"平方米",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"left"},compId:78}],loadList:["PP纸无背胶.jpg","comp/image.png","commers/cutline.png","commers/inputbg.png"],loadList3D:[]},i}(la),To=function(t){function i(){this.mainpanel=null,this.categoryName=null,this.productList=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.order.MoreProductPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/MoreProductPanel")},i}(la),Ro=function(t){function i(){this.title=null,this.folderbox=null,this.btnroot=null,this.flder0=null,this.flder1=null,this.flder2=null,this.searchInput=null,this.btnUploadPic=null,this.btnNewFolder=null,this.batchDelete=null,this.freshbtn=null,this.refreshTxt=null,this.radiosel=null,this.tifAi=null,this.picList=null,this.upgradestore=null,this.prgcap=null,this.leftcapacity=null,this.saveTempBtn=null,this.nextBtn=null,this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,i.__super.call(this)}s(i,"ui.inuoView.OrderPicManagerPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/OrderPicManagerPanel")},i}(la),wo=function(t){function i(){this.filename=null,this.prog=null,this.isuploading=null,this.btncancel=null,this.finishimg=null,this.reUploadBtn=null,this.unnormal=null,this.prgbar=null,i.__super.call(this)}s(i,"ui.uploadpic.UpLoadItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1724,height:100},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/graydisable.jpg",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:18},{type:"Label",props:{y:39,x:167,width:418,"var":"filename",text:"文件名",overflow:"hidden",height:21,fontSize:24,font:"SimHei",color:"#262B2E",align:"left"},compId:3},{type:"Label",props:{y:38,x:776,"var":"prog",text:"10%",height:24,fontSize:24,font:"SimHei",color:"#0",align:"left"},compId:6},{type:"Label",props:{y:39,x:1028,width:78,visible:!0,"var":"isuploading",text:"等待中...",fontSize:24,font:"SimHei",color:"#B1B1B1",align:"right"},compId:7},{type:"Button",props:{y:38,x:1579,"var":"btncancel",stateNum:1,skin:"iconsNew/rubish.png"},compId:9,child:[{type:"Label",props:{y:0,x:29,text:"取消上传",fontSize:24,font:"SimHei",color:"#B1B1B1"},compId:21}]},{type:"Sprite",props:{y:41,x:1329,"var":"finishimg",texture:"upload1/finishicon.png"},compId:15},{type:"Button",props:{y:50,x:1455,"var":"reUploadBtn",stateNum:1,skin:"uiCommonUpdate/xiala.png",rotation:-90,anchorY:.5,anchorX:.5},compId:16},{type:"Label",props:{y:39,x:506,width:196,"var":"unnormal",text:"文件大小异常，取消上传",overflow:"hidden",height:21,fontSize:24,font:"SimHei",color:"#f93d0e",align:"left"},compId:17},{type:"Image",props:{y:10,x:10,width:80,skin:"bigImg/face.png",height:80},compId:19},{type:"Image",props:{width:965,"var":"prgbar",skin:"uiCommonUpdate/orderTypeBtn.png",sizeGrid:"3,3,3,3",left:110,height:13,bottom:0},compId:20}],loadList:["commers/graydisable.jpg","iconsNew/rubish.png","upload1/finishicon.png","uiCommonUpdate/xiala.png","bigImg/face.png","uiCommonUpdate/orderTypeBtn.png"],loadList3D:[]},i}(la),Oo=function(t){function i(){this.mainPanel=null,this.title=null,this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.unitpricelbl=null,this.pricelbl=null,this.selectAll=null,this.btnaddpic=null,this.batchChange=null,this.addpic=null,this.opeBox=null,this.batchDelete=null,this.orderlistpanel=null,this.ordervbox=null,this.productNum=null,this.textPayPrice=null,this.textDiscount=null,this.textTotalPrice=null,this.goToNext=null,i.__super.call(this)}s(i,"ui.dengxiang.DengxiangOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("dengxiang/DengxiangOrderPanel")},i}(la),Mo=function(t){function i(){this.frame=null,this.sel=null,this.selLbl=null,this.img=null,this.filename=null,this.fileinfo=null,this.yixingimg=null,this.yinglbl=null,this.delYixing=null,this.backimg=null,this.backlbl=null,this.delBack=null,this.partImg=null,this.partlbl=null,this.delPart=null,this.btndelete=null,this.selYixingBtn=null,this.selBackBtn=null,this.countdown=null,this.autodellabel=null,this.warningimg=null,this.selpart=null,this.aiBtn=null,this.disableImg=null,i.__super.call(this)}s(i,"ui.inuoPicStore.PicShortItemNuoUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:200,height:320},compId:2,child:[{type:"Image",props:{top:0,skin:"uiCommonUpdate/radBg.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0},compId:39},{type:"Image",props:{"var":"frame",top:0,skin:"commers/inputfocus.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:15},{type:"Image",props:{y:0,skin:"uiCommonUpdate/grayFrame.png",right:0,left:0,height:320,sizeGrid:"9,6,7,5"},compId:29},{type:"Button",props:{y:10,x:9,"var":"sel",skin:"uiCommonUpdate/grennsel.png"},compId:12},{type:"Label",props:{y:14,x:39,width:52,"var":"selLbl",text:"选择",fontSize:14,font:"SimHei",color:"#003dc6"},compId:30},{type:"Image",props:{y:133,x:100,width:180,"var":"img",skin:"bigImg/face.png",height:180,anchorY:.5,anchorX:.5},compId:3},{type:"Label",props:{y:232,x:10,wordWrap:!1,width:180,"var":"filename",valign:"middle",text:"名称.jpg 宽 3256 名称",overflow:"scroll",height:20,fontSize:14,font:"SimHei",color:"#485157",bold:!0,align:"center"},compId:4},{type:"Label",props:{y:257,x:10,wordWrap:!0,width:180,"var":"fileinfo",valign:"top",text:"JPG|CMYK|300DPI|1230*1230",height:13,fontSize:12,font:"SimHei",color:"#B1B1B1",bold:!1,align:"center"},compId:8},{type:"Image",props:{y:260,x:100,width:56,"var":"yixingimg",skin:"upload1/fold.png",height:20,anchorY:.5,anchorX:.5},compId:16,child:[{type:"Label",props:{y:59,x:0,"var":"yinglbl",text:"异形",height:12,fontSize:12,font:"SimHei"},compId:31},{type:"Button",props:{y:0,x:9,width:38,"var":"delYixing",stateNum:1,skin:"uiCommonUpdate/greenFrmBtn.png",labelSize:10,labelFont:"SimHei",labelColors:"#003dc6,#003dc6,#003dc6",labelBold:!1,label:"删除",height:20,sizeGrid:"4,13,7,14"},compId:35}]},{type:"Image",props:{y:260,x:40,width:56,"var":"backimg",skin:"upload1/fold.png",height:56,anchorY:.5,anchorX:.5},compId:17,child:[{type:"Label",props:{y:59,x:0,"var":"backlbl",text:"反面",height:12,fontSize:12,font:"SimHei"},compId:32},{type:"Button",props:{y:18,x:9,width:38,"var":"delBack",stateNum:1,skin:"uiCommonUpdate/greenFrmBtn.png",labelSize:10,labelFont:"SimHei",labelColors:"#003dc6,#003dc6,#003dc6,",label:"删除",height:20,sizeGrid:"4,13,7,14"},compId:36}]},{type:"Image",props:{y:260,x:160,width:56,"var":"partImg",skin:"upload1/fold.png",right:12,height:56,anchorY:.5,anchorX:.5},compId:26,child:[{type:"Label",props:{y:59,x:0,"var":"partlbl",text:"局部铺白",height:12,fontSize:12,font:"SimHei"},compId:33},{type:"Button",props:{y:18,x:9,width:38,"var":"delPart",stateNum:1,skin:"uiCommonUpdate/greenFrmBtn.png",labelSize:10,labelFont:"SimHei",labelColors:"#003dc6,#003dc6,#003dc6,",labelBold:!1,label:"删除",height:20,sizeGrid:"4,13,7,14"},compId:37}]},{type:"Button",props:{y:6,x:166,"var":"btndelete",stateNum:2,skin:"upload1/closebutton.png"},compId:7},{type:"Button",props:{y:281,x:76,width:49,"var":"selYixingBtn",stateNum:3,skin:"uiCommonUpdate/small3Btn.png",labelSize:12,labelColors:"#B1B1B1,#FFFFFF,#FFFFFF",label:"+异形",height:24},compId:13},{type:"Button",props:{y:281,x:16,width:49,"var":"selBackBtn",stateNum:3,skin:"uiCommonUpdate/small3Btn.png",labelSize:12,labelFont:"SimHei",labelColors:"#B1B1B1,#FFFFFF,#FFFFFF",label:"+反面",height:24},compId:14},{type:"Box",props:{y:305,x:10,visible:!1,"var":"countdown"},compId:22,child:[{type:"Label",props:{y:0,wordWrap:!1,width:90,valign:"middle",text:"自动删除倒计时：",overflow:"scroll",left:0,fontSize:12,font:"SimHei",color:"#262B2E",align:"left"},compId:20},{type:"Label",props:{y:0,wordWrap:!1,width:36,"var":"autodellabel",valign:"middle",text:"30天",overflow:"scroll",left:91,fontSize:12,font:"SimHei",color:"#262B2E",align:"left"},compId:21}]},{type:"Image",props:{y:46,x:14,width:40,"var":"warningimg",skin:"commers/warning.png",height:40},compId:23},{type:"Button",props:{y:281,x:136,width:49,"var":"selpart",stateNum:3,skin:"uiCommonUpdate/small3Btn.png",labelSize:12,labelFont:"SimHei",labelColors:"#B1B1B1,#FFFFFF,#FFFFFF",label:"+局部\\n通道",height:24},compId:24},{type:"Button",props:{y:10,x:95,width:50,"var":"aiBtn",skin:"uiCommonUpdate/small3Btn.png",labelSize:16,labelFont:"SimHei",labelColors:"#003dc6,#FFFFFF,#FFFFFF",label:"效果"},compId:41},{type:"Image",props:{"var":"disableImg",top:0,skin:"uiCommonUpdate/grayBg.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0,alpha:.7},compId:40}],loadList:["uiCommonUpdate/radBg.png","commers/inputfocus.png","uiCommonUpdate/grayFrame.png","uiCommonUpdate/grennsel.png","bigImg/face.png","upload1/fold.png","uiCommonUpdate/greenFrmBtn.png","upload1/closebutton.png","uiCommonUpdate/small3Btn.png","commers/warning.png","uiCommonUpdate/grayBg.png"],loadList3D:[]},i}(la),Bo=function(t){function i(){this.packname=null,this.delbtn=null,i.__super.call(this)}s(i,"ui.order.PackageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{width:55,skin:"commers/inputbg.png",sizeGrid:"2,2,2,2",height:50},compId:3,child:[{type:"TextInput",props:{y:0,x:0,wordWrap:!0,width:55,"var":"packname",text:"浦东南汇包裹",skin:"comp/textinput.png",height:50,sizeGrid:"6,15,7,14"},compId:6},{type:"Button",props:{"var":"delbtn",top:1,skin:"commers/btnclose.png",right:0},compId:5}]}],loadList:["commers/inputbg.png","comp/textinput.png","commers/btnclose.png"],loadList3D:[]},i
}(la),No=function(t){function i(){this.btn=null,i.__super.call(this)}s(i,"ui.usercenter.DeliveryPackageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Button",props:{y:0,x:0,width:359,"var":"btn",skin:"uiCommonUpdate/greenBtn.png",labelSize:24,labelColors:"#FFFFFF,#FFFFFF,#FFFFFF,",labelBold:!0,label:"包裹1（点击查询物流详情）",height:88,sizeGrid:"2,22,3,22"},compId:4}],loadList:["uiCommonUpdate/greenBtn.png"],loadList3D:[]},i}(la),Fo=function(t){function i(){this.mainpanel=null,this.mainview=null,this.storagetype=null,this.paymoney=null,this.cancelbtn=null,this.paybtn=null,this.curStorageTxt=null,this.outtimebox=null,this.outtime=null,i.__super.call(this)}s(i,"ui.picManager.BuyStoragePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("picManager/BuyStoragePanel")},i}(la),Vo=function(t){function i(){this.backsp=null,this.commondelType=null,this.urgentdeltype=null,i.__super.call(this)}s(i,"ui.order.DeliverySelItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1280,height:48},compId:2,child:[{type:"Box",props:{y:0,x:0},compId:3,child:[{type:"Sprite",props:{width:1280,visible:!1,"var":"backsp",height:48},compId:4,child:[{type:"Rect",props:{width:1280,name:"rect",lineWidth:1,height:48,fillColor:"#FF8247"},compId:5}]},{type:"Box",props:{y:10,x:4},compId:7,child:[{type:"Label",props:{y:5,x:0,text:"普通配送:",fontSize:20,font:"SimHei"},compId:8},{type:"RadioGroup",props:{y:1,x:93,"var":"commondelType",skin:"uiCommonUpdate/bigRdio.png",scaleY:1,scaleX:1,labels:"送货上门,工厂自提,转成配送(60元),普通快递(30元)",labelSize:18,labelPadding:"5",labelFont:"SimHei",labelColors:"#000000,#000000,#036dc6",labelAlign:"center"},compId:9}]},{type:"Box",props:{y:11,x:762,visible:!1},compId:10,child:[{type:"Label",props:{y:3,x:-9,text:"加急配送:",fontSize:20,font:"SimHei"},compId:11},{type:"RadioGroup",props:{y:0,x:80,"var":"urgentdeltype",skin:"uiCommonUpdate/bigRdio.png",scaleY:1,scaleX:1,labels:"送货上门,工厂自提,转成配送(60元)",labelSize:18,labelPadding:"5",labelFont:"SimHei",labelAlign:"center"},compId:12}]}]}],loadList:["uiCommonUpdate/bigRdio.png"],loadList3D:[]},i}(la),Uo=function(t){function i(){this.imgbg=null,this.mainpanel=null,this.img=null,this.yixingimg=null,this.closeBtn=null,this.fileName=null,this.fileType=null,this.colorSpace=null,this.dpi=null,this.sizetxt=null,i.__super.call(this)}s(i,"ui.picManager.PicCheckPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("picManager/PicCheckPanel")},i}(la),Wo=function(t){function i(){this.pronum=null,this.widthtxt=null,this.heighttxt=null,this.money=null,this.filename=null,this.tech=null,this.matname=null,this.itemseq=null,this.picimg=null,this.deliverydate=null,this.detailbtn=null,this.comment=null,this.commentmark=null,this.isurgent=null,this.bgimg=null,this.detailbox=null,this.txtDetailInfo=null,i.__super.call(this)}s(i,"ui.usercenter.OrderQuestItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1745,height:175},compId:2,child:[{type:"Box",props:{y:68,x:257},compId:66,child:[{type:"Label",props:{y:-2,x:7,width:58,text:"宽(cm)",height:21,fontSize:18,font:"SimHei",color:"#0",align:"center"},compId:68},{type:"Label",props:{y:75,x:98,width:38,"var":"pronum",text:"10",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!1,align:"left"},compId:69},{type:"Label",props:{y:34,x:7,width:58,text:"高(cm)",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:70},{type:"Label",props:{y:1,x:78,width:50,"var":"widthtxt",text:"10000",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:71},{type:"Label",props:{y:34,x:78,width:58,"var":"heighttxt",text:"100",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:72},{type:"Label",props:{y:75,x:3,width:81,text:"制作数量",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:73}]},{type:"Label",props:{y:79,x:972,width:100,"var":"money",text:"12680",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:65},{type:"Label",props:{y:22,x:257,wordWrap:!0,width:190,"var":"filename",valign:"middle",text:"PP纸无背胶.jpg",overflow:"hidden",height:18,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:64},{type:"Label",props:{y:62,x:458,wordWrap:!0,width:458,"var":"tech",valign:"top",text:"户外材料--白胶车贴",rotation:0,overflow:"hidden",height:95,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:63},{type:"Label",props:{y:20,x:458,wordWrap:!0,width:202,"var":"matname",valign:"middle",text:"户内PP纸无背胶",height:36,fontSize:18,font:"SimHei",color:"#262B2E",align:"left"},compId:67},{type:"Label",props:{y:22,x:25,width:29,"var":"itemseq",text:"1",height:21,fontSize:28,font:"SimHei",color:"#0",align:"left"},compId:62},{type:"Image",props:{y:87,x:154,width:155,"var":"picimg",skin:"comp/image.png",height:155,anchorY:.5,anchorX:.5},compId:61},{type:"Label",props:{y:79,x:1173,"var":"deliverydate",text:"2012-12-25 21:15:52",height:16,fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:59},{type:"Text",props:{y:20,x:1647,"var":"detailbtn",text:"详情",presetID:1,fontSize:16,font:"SimHei",color:"#52B232",isPresetRoot:!0,runtime:"laya.display.Text"},compId:51,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:52}]},{type:"Box",props:{y:20,x:1576,"var":"comment"},compId:31,child:[{type:"Text",props:{text:"备注",fontSize:16,font:"SimHei",color:"#262B2E",runtime:"laya.display.Text"},compId:35},{type:"Label",props:{y:-13,x:36,width:14,"var":"commentmark",valign:"middle",text:"'''",height:17,fontSize:24,font:"Helvetica",color:"#39B25A",align:"center"},compId:37}]},{type:"Label",props:{y:7,x:8,"var":"isurgent",valign:"middle",text:"加急",fontSize:18,font:"SimHei",color:"#f3300b",align:"center"},compId:58},{type:"Image",props:{"var":"bgimg",skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:3},{type:"VBox",props:{y:52,"var":"detailbox",space:0,right:5,left:1369,height:120},compId:13,child:[{type:"Label",props:{wordWrap:!0,"var":"txtDetailInfo",valign:"top",top:0,text:"产品状态，正在生产中，已送达",right:0,left:0,fontSize:18,font:"SimHei",bottom:0,align:"left"},compId:21}]}],loadList:["PP纸无背胶.jpg","comp/image.png","prefabs/LinksText.prefab","commers/cutline.png"],loadList3D:[]},i}(la),Ho=function(t){function i(){this.picimg=null,this.framesel=null,this.filename=null,this.hideobj=null,this.deletebtn=null,this.inputnum=null,this.addbtn=null,this.subtn=null,this.productTypeName=null,this.uploadBtn=null,this.editBtn=null,i.__super.call(this)}s(i,"ui.characterpaint.CavingOderItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:272,height:180},compId:2,child:[{type:"Image",props:{top:0,skin:"uiCommonUpdate/e4e4e4.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:20},{type:"Image",props:{y:103,x:74,width:124,"var":"picimg",height:124,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{"var":"framesel",top:0,skin:"commers/inputerror.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:5},{type:"Label",props:{y:42,x:136,width:131,"var":"filename",text:"这个是文件名",overflow:"hidden",height:16,fontSize:14,font:"SimHei",color:"#485157",align:"left"},compId:6},{type:"CheckBox",props:{y:139,x:139,"var":"hideobj",stateNum:3,skin:"iconsNew/eyes.png",scaleY:1,scaleX:1,labelSize:12,labelPadding:"8",labelFont:"SimHei",label:" 隐藏字牌"},compId:9},{type:"Button",props:{width:14,"var":"deletebtn",top:5,stateNum:1,skin:"uiCommonUpdate/closeBtn.png",right:7,labelSize:12,labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",height:14},compId:10},{type:"Sprite",props:{y:97,x:141},compId:11,child:[{type:"TextInput",props:{y:-2,x:36,width:49,"var":"inputnum",text:"0",skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",height:36,fontSize:18,font:"SimHei",color:"#262B2E",align:"left"},compId:13},{type:"Button",props:{y:3,x:92,width:27,"var":"addbtn",skin:"uiCommonUpdate/blackbtn.png",labelSize:27,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"+",height:27,sizeGrid:"7,5,8,4"},compId:14},{type:"Button",props:{y:3,x:0,width:27,"var":"subtn",skin:"uiCommonUpdate/blackbtn.png",labelSize:27,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"-",height:27,sizeGrid:"7,5,8,4"},compId:15}]},{type:"Label",props:{y:68,x:140,width:122,text:"单价：35.6",overflow:"hidden",height:17,fontSize:14,font:"SimHei",color:"#FF0000",bold:!0,align:"left"},compId:12},{type:"Label",props:{y:12,x:18.296875,"var":"productTypeName",text:"选择字牌类型",fontSize:14,font:"SimHei",color:"#86B639",bold:!0},compId:17},{type:"Button",props:{y:90,x:30.5,width:83,"var":"uploadBtn",skin:"uiCommonUpdate/greenBtn.png",labelSize:18,labelFont:"SimHei",labelColors:"#FFFFFF,#FFFFFF,#FFFFFF",label:"上传图",height:32,sizeGrid:"2,22,3,22"},compId:18},{type:"Button",props:{y:143,x:243,"var":"editBtn",stateNum:1,skin:"iconsNew/edithead.png"},compId:19}],loadList:["uiCommonUpdate/e4e4e4.png","commers/inputerror.png","iconsNew/eyes.png","uiCommonUpdate/closeBtn.png","commers/inputbg.png","uiCommonUpdate/blackbtn.png","uiCommonUpdate/greenBtn.png","iconsNew/edithead.png"],loadList3D:[]},i}(la),Go=function(t){function i(){this.mainpanel=null,this.bgimg=null,this.gotoFirst=null,this.firstStep=null,this.firstLine=null,this.sencondStep=null,this.step1Panel=null,this.input_phone=null,this.delBtn=null,this.nameInput=null,this.delBtn=null,this.input_pwd=null,this.delBtn=null,this.input_conpwd=null,this.conpwdError=null,this.delBtn=null,this.code0=null,this.code1=null,this.code2=null,this.code3=null,this.imgCodeInput=null,this.inputCode=null,this.delBtn=null,this.btnGetCode=null,this.codeValid=null,this.input_phonecode=null,this.delBtn=null,this.txtRefresh=null,this.gotoNext=null,this.step2Panel=null,this.input_companyname=null,this.delBtn=null,this.contactName=null,this.delBtn=null,this.contactPhone=null,this.delBtn=null,this.detail_addr=null,this.delBtn=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.btnSelTown=null,this.towntxt=null,this.townbox=null,this.townList=null,this.areabox=null,this.areaList=null,this.citybox=null,this.cityList=null,this.provbox=null,this.provList=null,this.applyBtn=null,this.applyEnter=null,this.applyJoinPanel=null,this.createAccountInput=null,this.delBtn=null,this.commentInput=null,this.delBtn=null,this.confirmJoin=null,this.closeJoin=null,this.contractpanel=null,this.txtpanel=null,this.sevicepro=null,this.agreebox=null,this.okbtn=null,i.__super.call(this)}s(i,"ui.login.RegisterPhonePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/RegisterPhonePanel")},i}(la),zo=function(t){function i(){this.mainpanel=null,this.closebtn=null,this.packageList=null,i.__super.call(this)}s(i,"ui.usercenter.DeliveryQueryPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/DeliveryQueryPanel")},i}(la),Yo=function(t){function i(){this.closeBtn=null,this.btnSureCreate=null,this.input_folename=null,this.delBtn=null,i.__super.call(this)}s(i,"ui.inuoView.CreateFolderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/CreateFolderPanel")},i}(la),Xo=function(t){function i(){this.customerTab=null,this.productTab=null,this.areaTab=null,this.orderBtn=null,this.transactionBtn=null,this.exportExcel=null,this.btnsearch=null,this.orderList=null,this.ordertotalNum=null,this.ordertotalMoney=null,this.pagenum=null,this.lastpage=null,this.nextpage=null,this.customerQueryBox=null,this.orderPlaceCombo=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,this.businessCombo=null,this.payTypeComBox=null,this.productQueryBox=null,this.categoryComBox=null,this.rpoductComBoc=null,this.areaQueryBox=null,this.btnSelArea=null,this.areatxt=null,this.btnSelCity=null,this.citytxt=null,this.btnSelProv=null,this.province=null,this.btnSelTown=null,this.towntxt=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.townbox=null,this.townList=null,this.areabox=null,this.areaList=null,this.timeBox=null,this.monthComBox=null,this.yearComBox=null,this.ordertime=null,i.__super.call(this)}s(i,"ui.orderList.StatisticalAnalyPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("orderList/StatisticalAnalyPanel")},i}(la),qo=function(t){function i(){this.mainPanel=null,this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.pricelbl=null,this.unitpricelbl=null,this.selectAll=null,this.btnaddpic=null,this.batchChange=null,this.opeBox=null,this.batchDelete=null,this.orderlistpanel=null,this.ordervbox=null,this.productNum=null,this.textPayPrice=null,this.textDiscount=null,this.textTotalPrice=null,this.goToNext=null,this.curCustomer=null,i.__super.call(this)}s(i,"ui.inuoView.SetMaterialPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/SetMaterialPanel")},i}(la),Jo=function(t){function i(){this.nickname=null,this.account=null,this.jointime=null,this.deletebtn=null,this.movebtn=null,this.authoritytxt=null,i.__super.call(this)}s(i,"ui.usercenter.OrganizeMemberItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1540,height:78},compId:2,child:[{type:"Image",props:{skin:"commers/cutline.png",sizeGrid:"3,3,3,3",right:0,left:0,height:1,bottom:0},compId:12},{type:"Label",props:{y:24,x:283,width:108,"var":"nickname",valign:"middle",text:"张三",height:29,fontSize:24,font:"SimHei",color:"#50575C",bold:!0,align:"left"},compId:3},{type:"Label",props:{y:24,x:3,width:161,"var":"account",valign:"middle",text:"13568986989",height:29,fontSize:24,font:"SimHei",color:"#50575C",bold:!0,align:"left"},compId:4},{type:"Label",props:{y:24,x:521,"var":"jointime",valign:"middle",text:"2020-05-12 12:00:00",height:29,fontSize:24,font:"SimHei",color:"#50575C",bold:!0,align:"center"},compId:5},{type:"Text",props:{y:27,x:1061,"var":"deletebtn",text:"踢除",presetID:1,fontSize:24,font:"SimHei",color:"#ef0e0b",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:10,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:11}]},{type:"Text",props:{y:27,x:985,"var":"movebtn",text:"移动",presetID:1,fontSize:24,font:"SimHei",color:"52B232",isPresetRoot:!0,runtime:"laya.display.Text"},compId:13,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:14}]},{type:"Text",props:{y:27,x:1142,"var":"authoritytxt",text:"权限设置",presetID:1,fontSize:24,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:15,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:16}]}],loadList:["commers/cutline.png","prefabs/LinksText.prefab"],loadList3D:[]},i}(la),jo=function(t){function i(){this.fileimg=null,this.numindex=null,this.proctext=null,this.filenametxt=null,this.pricetext=null,this.numtxt=null,this.rectangle=null,this.picwidth=null,this.picheight=null,this.circle=null,this.radius=null,this.mattext=null,this.paycountdown=null,this.urgentback=null,this.urgentdiscount=null,this.urgentcheck=null,this.manufacName=null,this.dateBox=null,this.discount0=null,this.deltime0=null,this.gray0=null,this.discount1=null,this.deltime1=null,this.gray1=null,this.discount2=null,this.deltime2=null,this.gray2=null,this.discount3=null,this.deltime3=null,this.gray3=null,this.discount4=null,this.deltime4=null,this.gray4=null,this.linebox=null,i.__super.call(this)}s(i,"ui.order.SimpleOrderItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1579,right:0,left:0,height:195},compId:2,child:[{type:"Image",props:{y:97,x:154,width:155,"var":"fileimg",skin:"comp/image.png",height:155,anchorY:.5,anchorX:.5},compId:4},{type:"Label",props:{y:7.5,x:25,width:30,"var":"numindex",text:"1",height:21,fontSize:28,font:"SimHei",color:"#0",align:"left"},compId:8},{type:"Label",props:{y:62,x:458,wordWrap:!0,width:202,"var":"proctext",valign:"top",text:"户外材料--白胶车贴",rotation:0,overflow:"hidden",height:127,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:27},{type:"Label",props:{y:22,x:257,wordWrap:!0,width:190,"var":"filenametxt",valign:"middle",text:"PP纸无背胶.jpg",overflow:"hidden",height:18,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:9},{type:"Label",props:{y:99,x:660,width:100,"var":"pricetext",text:"12680",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!0,align:"center"},compId:11},{type:"Box",props:{y:68,x:257},compId:13,child:[{type:"Label",props:{y:75,x:98,width:38,"var":"numtxt",text:"10",height:16,fontSize:18,font:"SimHei",color:"#262B2E",bold:!1,align:"left"},compId:48},{type:"Label",props:{y:75,x:3,width:81,text:"制作数量",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:103},{type:"Box",props:{y:-2,x:7,"var":"rectangle"},compId:131,child:[{type:"Label",props:{width:58,text:"宽(cm)",height:21,fontSize:18,font:"SimHei",color:"#0",align:"center"},compId:22},{type:"Label",props:{y:36,width:58,text:"高(cm)",rotation:0,height:21,fontSize:18,font:"SimHei",color:"#262B2E",align:"center"},compId:23},{type:"Label",props:{y:3,x:71,width:50,"var":"picwidth",text:"10000",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:41},{type:"Label",props:{y:36,x:71,width:58,"var":"picheight",text:"100",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:42}]},{type:"Box",props:{y:-2,x:7,"var":"circle"},compId:132,child:[{type:"Label",props:{y:16,x:0,width:58,text:"直径(cm)",height:21,fontSize:18,font:"SimHei",color:"#0",align:"center"},compId:133},{type:"Label",props:{y:16,x:75,width:50,"var":"radius",text:"10000",height:21,fontSize:18,font:"SimHei",color:"#0",align:"left"},compId:135}]}]},{type:"Label",props:{y:20,x:458,wordWrap:!0,width:202,"var":"mattext",valign:"middle",text:"户内PP纸无背胶",height:36,fontSize:18,font:"SimHei",color:"#262B2E",align:"left"},compId:28},{type:"CheckBox",props:{y:13,x:9,width:16,skin:"commers/multicheck.png",scaleY:1,scaleX:1,height:16},compId:16},{type:"Label",props:{y:99,width:143,"var":"paycountdown",text:"00:00",right:21,height:18,fontSize:18,font:"SimHei",color:"#EE2200",align:"center"},compId:47},{type:"Box",props:{y:4,right:807},compId:65,child:[{type:"Sprite",props:{y:0,x:0,"var":"urgentback"},compId:71,child:[{type:"Rect",props:{y:0,x:0,width:60,lineWidth:1,height:56,fillColor:"#6a9a2d"},compId:72}]},{type:"Label",props:{y:33,x:5,width:50,"var":"urgentdiscount",text:"1折",strokeColor:"#7d5757",fontSize:14,font:"SimHei",color:"#c02841",bgColor:"#decdcc",align:"center"},compId:62},{type:"CheckBox",props:{x:6,"var":"urgentcheck",top:15,skin:"commers/checksingle.png",labelSize:16,labelColors:"#223344,#223344,#FFFFFF",label:"加急"},compId:45}]},{type:"Label",props:{y:66,width:143,"var":"manufacName",text:"义乌物与喷印",right:21,height:15,fontSize:18,font:"SimHei",color:"#0",align:"center"},compId:94},{type:"HBox",props:{y:73,x:761,"var":"dateBox"},compId:125,child:[{type:"Box",props:{y:0,x:0,width:108},compId:70,child:[{type:"Label",props:{y:0,x:14,width:80,"var":"discount0",text:"0.95折",fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:51},{type:"Button",props:{y:20,x:0,width:108,"var":"deltime0",stateNum:3,skin:"uiCommonUpdate/green2.png",labelSize:16,labelFont:"SimHei",labelColors:"#223344,#223344,#FFFFFF",label:"10-21",height:32},compId:50,child:[{type:"Image",props:{x:0,"var":"gray0",top:0,skin:"commers/graydisable.jpg",right:0,left:0,bottom:0},compId:97}]}]},{type:"Box",props:{x:150,width:108},compId:104,child:[{type:"Label",props:{y:0,x:14,width:80,"var":"discount1",text:"0.95折",fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:105},{type:"Button",props:{y:20,x:0,width:108,"var":"deltime1",skin:"uiCommonUpdate/green2.png",rotation:0,labelSize:16,labelFont:"SimHei",labelColors:"#223344,#223344,#FFFFFF",label:"10-21",height:31},compId:106,child:[{type:"Image",props:{y:0,x:0,"var":"gray1",top:0,skin:"commers/graydisable.jpg",right:0,left:0,bottom:0},compId:107}]}]},{type:"Box",props:{x:300,width:108},compId:108,child:[{type:"Label",props:{y:0,x:14,width:80,"var":"discount2",text:"0.95折",fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:109},{type:"Button",props:{y:20,x:0,width:108,"var":"deltime2",skin:"uiCommonUpdate/green2.png",rotation:0,labelSize:16,labelFont:"SimHei",labelColors:"#223344,#223344,#FFFFFF",label:"10-21",height:31},compId:110,child:[{type:"Image",props:{y:0,x:0,"var":"gray2",top:0,skin:"commers/graydisable.jpg",right:0,left:0,bottom:0},compId:111}]}]},{type:"Box",props:{x:450,width:108},compId:112,child:[{type:"Label",props:{y:0,x:14,width:80,"var":"discount3",text:"0.95折",fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:113},{type:"Button",props:{y:20,x:0,width:108,"var":"deltime3",skin:"uiCommonUpdate/green2.png",rotation:0,labelSize:16,labelFont:"SimHei",labelColors:"#223344,#223344,#FFFFFF",label:"10-21",height:31},compId:114,child:[{type:"Image",props:{y:0,x:0,"var":"gray3",top:0,skin:"commers/graydisable.jpg",right:0,left:0,bottom:0},compId:115}]}]},{type:"Box",props:{x:600,width:108},compId:116,child:[{type:"Label",props:{y:0,x:14,width:80,"var":"discount4",text:"0.95折",fontSize:18,font:"SimHei",color:"#0",bold:!0,align:"center"},compId:117},{type:"Button",props:{y:20,x:0,width:108,"var":"deltime4",skin:"uiCommonUpdate/green2.png",rotation:0,labelSize:16,labelFont:"SimHei",labelColors:"#223344,#223344,#FFFFFF",label:"10-21",height:31},compId:118,child:[{type:"Image",props:{y:0,x:0,"var":"gray4",top:0,skin:"commers/graydisable.jpg",right:0,left:0,bottom:0},compId:119}]}]}]},{type:"Image",props:{skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:126},{type:"HBox",props:{y:0,x:883,"var":"linebox",height:195},compId:127,child:[{type:"Image",props:{x:0,top:0,skin:"commers/cutline.png",bottom:0},compId:120},{type:"Image",props:{x:140,top:0,skin:"commers/cutline.png",bottom:0},compId:121},{type:"Image",props:{y:20,x:280,top:0,skin:"commers/cutline.png",bottom:0},compId:122},{type:"Image",props:{y:30,x:420,top:0,skin:"commers/cutline.png",bottom:0},compId:123},{type:"Image",props:{y:40,x:560,top:0,skin:"commers/cutline.png",bottom:0},compId:124}]}],loadList:["comp/image.png","PP纸无背胶.jpg","commers/multicheck.png","commers/checksingle.png","uiCommonUpdate/green2.png","commers/graydisable.jpg","commers/cutline.png"],loadList3D:[]},i}(la),Ko=function(t){function i(){this.customeName=null,this.orderid=null,this.ordertime=null,this.productnum=null,this.paymoney=null,this.orderstatus=null,this.payagain=null,this.detailbtn=null,this.deletebtn=null,this.retrybtn=null,this.deleteorder=null,this.sellPriceSet=null,this.sellPrice=null,i.__super.call(this)}s(i,"ui.usercenter.OrderListItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1600,height:90},compId:2,child:[{type:"Label",props:{y:29,x:1,width:200,"var":"customeName",valign:"middle",text:"客户名称可以八个大字",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:22},{type:"Label",props:{y:30,x:253,width:158,"var":"orderid",valign:"middle",text:"18014398509481987",height:29,fontSize:18,font:"SimHei",bold:!0,align:"left"},compId:3},{type:"Label",props:{y:30,x:443,width:237,"var":"ordertime",valign:"middle",text:"2019-05-22 15:30:00",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:4},{type:"Label",props:{y:30,x:685,width:60,"var":"productnum",valign:"middle",text:"1",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:5},{type:"Label",props:{y:30,x:761,width:90,"var":"paymoney",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:6},{type:"Label",props:{y:32,x:947,width:211,"var":"orderstatus",valign:"middle",text:"已支付（03分10秒后可继续支付）",height:26,fontSize:16,font:"SimHei",bold:!0,align:"center"},compId:7},{type:"Button",props:{y:23,x:1198,"var":"payagain",skin:"uiCommonUpdate/greenBtn.png",labelSize:24,labelColors:"#FFFFFF,#FFFFFF,#FFFFFF,",labelBold:!0,label:"去支付",sizeGrid:"2,22,3,22"},compId:20},{type:"Text",props:{y:33,x:1457,"var":"detailbtn",text:"详情",presetID:1,fontSize:24,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Text",props:{y:33,x:1527,"var":"deletebtn",text:"撤回",presetID:1,fontSize:24,font:"SimHei",color:"#ef0e0b",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:10,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:11}]},{type:"Text",props:{y:33,x:1597,width:63,"var":"retrybtn",text:"重试",presetID:1,height:24,fontSize:24,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:15,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:16}]},{type:"Text",props:{y:33,x:1527,"var":"deleteorder",text:"删除",presetID:1,fontSize:24,font:"SimHei",color:"#d96b17",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:17,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:18}]},{type:"Image",props:{skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:12},{type:"Text",props:{y:33,x:1349,width:96,"var":"sellPriceSet",text:"售价配置",presetID:1,height:24,fontSize:24,font:"SimHei",color:"#d96b17",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:23,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:24}]},{type:"Label",props:{y:30,x:861,width:85,"var":"sellPrice",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:25}],loadList:["uiCommonUpdate/greenBtn.png","prefabs/LinksText.prefab","commers/cutline.png"],loadList3D:[]},i}(la),Zo=function(t){function i(){this.mainpanel=null,this.dragImg=null,this.btnadd=null,this.list_address=null,this.btnok=null,this.btncancel=null,this.inputsearch=null,this.btnsearch=null,this.closebtn=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,this.pageBox=null,i.__super.call(this)}s(i,"ui.order.SelectAddressPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectAddressPanel")},i}(la),$o=(function(t){function i(){this.mainpanel=null,this.categoryList=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.prodCustom.CustomerProdCategoryPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("prodCustom/CustomerProdCategoryPanel")},i}(la),function(t){function i(){this.customerNamelbl=null,this.transacNum=null,this.transactDate=null,this.transactName=null,this.money=null,this.transacType=null,this.userNamelbl=null,this.deleteBtn=null,this.commentlbl=null,i.__super.call(this)}s(i,"ui.usercenter.items.CustomerTransacItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1600,height:36},compId:2,child:[{type:"Label",props:{y:0,x:2,width:260,"var":"customerNamelbl",valign:"middle",text:"客户名称可以八个大字",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:3},{type:"Label",props:{y:1,x:284,width:221,"var":"transacNum",valign:"middle",text:"18014398509481987",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:4},{type:"Label",props:{y:1,x:610,width:237,"var":"transactDate",valign:"middle",text:"2019-05-22 15:30:00",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:5},{type:"Label",props:{y:1,x:976,width:88,"var":"transactName",valign:"middle",text:"支付宝",height:26,fontSize:20,font:"SimHei",bold:!0,align:"center"},compId:8},{type:"Label",props:{y:1,x:876,width:85,"var":"money",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:15},{type:"Label",props:{y:3,x:523,width:64,"var":"transacType",valign:"middle",text:"订单",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:21},{type:"Label",props:{y:1,x:1080,width:109,"var":"userNamelbl",valign:"middle",text:"老李",height:26,fontSize:20,font:"SimHei",bold:!0,align:"center"},compId:22},{type:"Text",props:{y:6.5,x:1544,"var":"deleteBtn",text:"删除",presetID:1,fontSize:18,font:"SimHei",color:"#d92e16",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:23,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:24}]},{type:"Image",props:{y:0,x:0,skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:13},{type:"Label",props:{y:1,x:1207,width:282,"var":"commentlbl",valign:"middle",text:"老李这里是备注需要二十个字以内",height:26,fontSize:16,font:"SimHei",bold:!0,align:"left"},compId:25}],loadList:["prefabs/LinksText.prefab","commers/cutline.png"],loadList3D:[]},i}(la)),Qo=function(t){function i(){this.actpanel=null,this.actbox=null,this.acttitle=null,this.actrule=null,this.chargeamount=null,this.totalreturn=null,this.moneybtn0=null,this.moneybtn1=null,this.moneybtn2=null,this.moneybtn3=null,this.moneybtn4=null,this.moneybtn5=null,this.moneybtn6=null,this.moneybtn7=null,this.zhiufbaobtn=null,this.joinact=null,this.grpchargeBtn=null,this.noactbox=null,this.accout=null,this.moneytxt=null,this.actMoney=null,this.frezeMoney=null,this.recordbtn=null,this.groupCharge=null,this.finishcharge=null,this.copyname=null,this.companyname=null,this.bank=null,this.copybank=null,this.account=null,this.copyaccount=null,this.closeGroup=null,i.__super.call(this)}s(i,"ui.usercenter.ChargeActivityPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/ChargeActivityPanel")},i}(la),th=function(t){function i(){this.borderimg=null,this.paintimg=null,this.cutNumInput=null,this.hbox=null,this.hinput0=null,this.hinput1=null,this.hinput2=null,this.hinput3=null,this.hinput4=null,this.hinput5=null,this.hinput6=null,this.vbox=null,this.vinput0=null,this.vinput1=null,this.vinput2=null,this.vinput3=null,this.vinput4=null,this.vinput5=null,this.vinput6=null,this.hori0=null,this.hori1=null,this.hori2=null,this.hori3=null,this.hori4=null,this.vert0=null,this.vert1=null,this.vert2=null,this.vert3=null,this.vert4=null,this.vertCutNumInput=null,i.__super.call(this)}s(i,"ui.order.CutImageItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:67,x:60,width:377,skin:"upload1/inoutbg.png",sizeGrid:"3,3,3,3",height:377},compId:3,child:[{type:"Image",props:{y:188,x:188,width:375,"var":"borderimg",skin:"commers/blackbg.png",sizeGrid:"2,2,2,2",height:100,anchorY:.5,anchorX:.5,alpha:.5},compId:35},{type:"Image",props:{y:188,x:188,width:375,"var":"paintimg",skin:"comp/image.png",height:375,anchorY:.5,anchorX:.5},compId:4}]},{type:"TextInput",props:{y:20,x:390,width:38,"var":"cutNumInput",type:"number",text:"25",skin:"commers/inputbg.png",sizeGrid:"8",height:22,fontSize:18},compId:36},{type:"Label",props:{y:24,x:347,width:41,text:"更多：",height:16,fontSize:16,font:"SimHei",color:"#010101"},compId:37},{type:"HBox",props:{y:459,x:48,width:400,"var":"hbox",height:30},compId:20,child:[{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput0",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:13},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput1",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:15},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput2",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:17},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput3",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:22},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput4",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:24},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput5",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:25},{type:"TextInput",props:{y:0,x:0,width:50,"var":"hinput6",text:"100",skin:"comp/textinput.png",fontSize:16,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:33}]},{type:"VBox",props:{y:65,x:461,width:50,"var":"vbox",height:400},compId:26,child:[{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput0",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:27},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput1",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:28},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput2",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:29},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput3",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:30},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput4",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:31},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput5",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:32},{type:"TextInput",props:{y:0,x:0,width:50,"var":"vinput6",text:"100",skin:"comp/textinput.png",fontSize:18,font:"SimSun",color:"#B1B1B1",sizeGrid:"6,15,7,14"},compId:34}]},{type:"HBox",props:{y:15,x:48,space:16},compId:45,child:[{type:"Button",props:{width:42,"var":"hori0",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:39},{type:"Button",props:{x:58,width:42,"var":"hori1",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:40},{type:"Button",props:{x:116,width:42,"var":"hori2",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:42},{type:"Button",props:{x:174,width:42,"var":"hori3",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:43},{type:"Button",props:{x:232,width:42,"var":"hori4",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:44}]},{type:"Label",props:{y:14,x:444,text:"纵向\\n等份",fontSize:18,font:"SimHei"},compId:46},{type:"VBox",props:{y:108,x:0,space:16},compId:53,child:[{type:"Button",props:{width:42,"var":"vert0",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:48},{type:"Button",props:{y:57,width:42,"var":"vert1",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:49},{type:"Button",props:{y:114,width:42,"var":"vert2",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:50},{type:"Button",props:{y:170,width:42,"var":"vert3",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:51},{type:"Button",props:{y:227,width:42,"var":"vert4",skin:"uiCommonUpdate/nusel.png",labelSize:18,labelColors:"#0,#FFFFFF,#FFFFFF",label:"2",height:34},compId:52}]},{type:"Label",props:{y:55,x:3,text:"横向\\n等份",fontSize:18,font:"SimHei"},compId:54},{type:"TextInput",props:{y:422,x:10,width:38,"var":"vertCutNumInput",type:"number",text:"25",skin:"commers/inputbg.png",sizeGrid:"8",height:22,fontSize:18},compId:55},{type:"Label",props:{y:387,x:6,width:41,text:"更多：",height:16,fontSize:16,font:"SimHei",color:"#010101"},compId:56}],loadList:["upload1/inoutbg.png","commers/blackbg.png","comp/image.png","commers/inputbg.png","comp/textinput.png","uiCommonUpdate/nusel.png"],loadList3D:[]},i
}(la),ih=function(t){function i(){this.orderid=null,this.ordertime=null,this.productnum=null,this.sellPrice=null,this.WriteoffMoney=null,this.unWriteOffMoney=null,this.selectBox=null,i.__super.call(this)}s(i,"ui.usercenter.WriteOffOrderItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1600,height:50},compId:2,child:[{type:"Label",props:{y:10,x:157,width:237,"var":"orderid",valign:"middle",text:"18014398509481987",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:3},{type:"Label",props:{y:10,x:443,width:237,"var":"ordertime",valign:"middle",text:"2019-05-22 15:30:00",height:29,fontSize:24,font:"SimHei",bold:!0,align:"left"},compId:4},{type:"Label",props:{y:10,x:722,width:60,"var":"productnum",valign:"middle",text:"1",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:5},{type:"Label",props:{y:10,x:849,width:90,"var":"sellPrice",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:6},{type:"Image",props:{skin:"commers/cutline.png",right:0,left:0,height:1,bottom:0},compId:12},{type:"Label",props:{y:10,x:1002,width:85,"var":"WriteoffMoney",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:25},{type:"Label",props:{y:10,x:1150,width:85,"var":"unWriteOffMoney",valign:"middle",text:"3495",height:29,fontSize:24,font:"SimHei",bold:!0,align:"center"},compId:26},{type:"CheckBox",props:{y:10,x:34,"var":"selectBox",skin:"uiCommonUpdate/grennsel.png",scaleY:1.5,scaleX:1.5},compId:27}],loadList:["commers/cutline.png","uiCommonUpdate/grennsel.png"],loadList3D:[]},i}(la),eh=function(t){function i(){this.addCustome=null,this.customeList=null,this.searchInput=null,this.searchBtn=null,this.pageText=null,this.prevPage=null,this.nextPage=null,this.addressPanel=null,this.customInfoBox=null,this.customName=null,this.delBtn=null,this.customPhone=null,this.delBtn=null,this.confirmAddCustom=null,this.closeAddBtn=null,this.payType=null,this.businessMan=null,i.__super.call(this)}s(i,"ui.usercenter.CustomManagerPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/CustomManagerPanel")},i}(la),nh=(function(t){function i(){this.mainpanel=null,this.editPanel=null,this.prodVBox=null,this.prodPreImg=null,this.totalPrice=null,this.bottomBox=null,this.okbtn=null,this.cancelbtn=null,this.addToCart=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.prodCustom.CustomEditPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("prodCustom/CustomEditPanel")},i}(la),function(t){function i(){this.mainpanel=null,this.productlist=null,this.btnok=null,this.batchEdit=null,this.cancelBtn=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.order.DakouPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/DakouPanel")},i}(la)),sh=function(t){function i(){this.bgimg=null,this.mainpanel=null,this.btnClose=null,this.goonbtn=null,this.errortxt=null,this.btnOpenFile=null,this.fileList=null,this.uploadinfo=null,i.__super.call(this)}s(i,"ui.uploadpic.UpLoadPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("uploadpic/UpLoadPanel")},i}(la),rh=function(t){function i(){this.conLbl=null,this.btnList=null,i.__super.call(this)}s(i,"ui.prodCustom.ProdParamItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1200,height:0},compId:2,child:[{type:"Label",props:{y:2,x:0,"var":"conLbl",text:"颜色：",fontSize:20,font:"SimHei"},compId:3},{type:"List",props:{width:1100,"var":"btnList",left:60,height:22},compId:7}],loadList:[],loadList3D:[]},i}(la),ah=function(t){function i(){this.customerBox=null,this.customeName=null,this.addressTab=null,this.groupTab=null,this.addressbox=null,this.addlist=null,this.numAddress=null,this.btnaddAddress=null,this.defaultDelivery=null,this.addressPageTxt=null,this.prevBtn=null,this.nextBtn=null,this.groupBox=null,this.addGroup=null,this.groupList=null,this.searchGroupInput=null,this.searchGrpBtn=null,this.grPageNum=null,this.gpPrevPage=null,this.gpNextPage=null,this.createGroupBox=null,this.newGroupName=null,this.confirmCreateGroup=null,this.closeNewGroup=null,i.__super.call(this)}s(i,"ui.usercenter.AddressMgrPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/AddressMgrPanel")},i}(la),oh=function(t){function i(){this.transfermoney=null,this.chargemoney=null,this.confirmtime=null,this.chargetime=null,this.state=null,i.__super.call(this)}s(i,"ui.usercenter.PublicChargeRecordItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:1e3,skin:"commers/inputbg.png",sizeGrid:"5,5,5,5",height:60},compId:3,child:[{type:"Sprite",props:{y:0,x:0},compId:21,child:[{type:"Rect",props:{width:1e3,lineWidth:1,height:60,fillColor:"#eff4ef"},compId:22}]}]},{type:"Label",props:{y:5,x:16,wordWrap:!0,width:118,"var":"transfermoney",valign:"middle",text:"15000",overflow:"hidden",height:50,fontSize:20,font:"Arial",color:"#262B2E",align:"center"},compId:7},{type:"Label",props:{y:5,x:177,wordWrap:!0,width:153,"var":"chargemoney",valign:"middle",text:"2",height:50,fontSize:20,font:"Arial",color:"#262B2E",align:"center"},compId:27},{type:"Label",props:{y:5,x:350,wordWrap:!0,width:202,"var":"confirmtime",valign:"middle",text:"2021-09-12 12:21:21",overflow:"hidden",height:50,fontSize:20,font:"Arial",color:"#262B2E",align:"center"},compId:59},{type:"Label",props:{y:5,x:600,wordWrap:!0,width:200,"var":"chargetime",valign:"middle",text:"2021-12-12 15:00:00",overflow:"hidden",height:50,fontSize:20,font:"Arial",color:"#262B2E",align:"center"},compId:60},{type:"Label",props:{y:5,x:850,wordWrap:!0,width:81,"var":"state",valign:"middle",text:"已确认",height:50,fontSize:20,font:"SimHei",color:"#508d38",align:"center"},compId:63}],loadList:["commers/inputbg.png"],loadList3D:[]},i}(la),hh=function(t){function i(){this.mainpanel=null,this.productlist=null,this.maxtips=null,this.okbtn=null,this.btnok=null,this.closeBtn=null,this.cancelBtn=null,i.__super.call(this)}s(i,"ui.order.InputCutNumPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/InputCutNumPanel")},i}(la),lh=function(t){function i(){this.list_address=null,this.okbtn=null,this.cancelbtn=null,i.__super.call(this)}s(i,"ui.order.SelectFactoryPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectFactoryPanel")},i}(la),ch=function(t){function i(){this.selbtn=null,this.selfIcon=null,i.__super.call(this)}s(i,"ui.inuoView.items.MatCategoryItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Button",props:{y:1,x:1,width:200,"var":"selbtn",stateNum:3,skin:"uiCommonUpdate/metCatBtn.png",labelSize:18,labelColors:"#000000,#003dc6,#003dc6",labelBold:!0,label:"户外写真",height:64,sizeGrid:"0,24,0,16"},compId:3},{type:"Image",props:{y:0,x:132,width:20,"var":"selfIcon",skin:"commers/client.png",mouseEnabled:!1,height:20},compId:4}],loadList:["uiCommonUpdate/metCatBtn.png","commers/client.png"],loadList3D:[]},i}(la),uh=function(t){function i(){this.btn=null,this.sel=null,i.__super.call(this)}s(i,"ui.usercenter.AddressGroupSelItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Button",props:{width:150,"var":"btn",skin:"commers/btn2.png",sizeGrid:"3,3,3,3",labelSize:14,labelFont:"Arial",labelColors:"#232b26,#006600,#232b26",labelBold:!0,height:60},compId:4,child:[{type:"Button",props:{y:3,x:123,"var":"sel",skin:"upload1/imgselect.png"},compId:7}]}],loadList:["commers/btn2.png","upload1/imgselect.png"],loadList3D:[]},i}(la),dh=(function(t){function i(){i.__super.call(this)}s(i,"ui.product.TreeClipUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Clip",props:{y:0,x:13,skin:"comp/clip_selectBox.png",name:"selectBox",clipY:2,clipX:1},compId:3},{type:"Clip",props:{y:4,x:14,skin:"comp/clip_tree_folder.png",name:"folder",clipY:3,clipX:1},compId:4},{type:"Clip",props:{y:5,x:0,skin:"comp/clip_tree_arrow.png",name:"arrow",clipY:2,clipX:1},compId:5},{type:"Label",props:{y:1,x:33,width:76,valign:"middle",text:"商品名称",name:"label",height:16},compId:6}],loadList:["comp/clip_selectBox.png","comp/clip_tree_folder.png","comp/clip_tree_arrow.png"],loadList3D:[]},i}(la),function(t){function i(){this.customName=null,this.phoneNum=null,this.btmLine=null,i.__super.call(this)}s(i,"ui.inuoView.items.CustomPicCellUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:300,height:30},compId:2,child:[{type:"Label",props:{y:7,x:5,"var":"customName",text:"贫富阳光主体公司",left:5,fontSize:16,font:"SimHei",color:"#0a0909"},compId:3},{type:"Label",props:{y:7,"var":"phoneNum",text:"13567896989",right:5,fontSize:16,font:"SimHei",color:"#0a0909"},compId:5},{type:"Image",props:{"var":"btmLine",skin:"uiCommonUpdate/greenLine.png",right:0,left:0,bottom:0},compId:6}],loadList:["uiCommonUpdate/greenLine.png"],loadList3D:[]},i}(la)),_h=(function(t){function i(){this.ordertime=null,this.companyInfoBtn=null,this.adressBtn=null,this.detailBtn=null,this.invoiceHistory=null,this.invoicelist=null,this.invoiceNum=null,this.totalMoney=null,this.queryBtn=null,this.confirmInvoiceBtn=null,this.detailbox=null,this.closedetail=null,this.detaillist=null,this.enterprizeInfoPanel=null,this.companyName=null,this.taxNumber=null,this.bankName=null,this.updateOK=null,i.__super.call(this)}s(i,"ui.usercenter.InvoiceManagerPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/InvoiceManagerPanel")},i}(la),function(t){function i(){this.addresstxt=null,this.deletebtn=null,this.itembox=null,this.cutline=null,this.comment=null,i.__super.call(this)}s(i,"ui.order.PackageEditItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:135},compId:2,child:[{type:"Label",props:{y:0,x:5,wordWrap:!0,width:109,"var":"addresstxt",valign:"middle",text:"上海市 浦东新区 周浦镇",overflow:"hidden",leading:4,height:36,fontSize:12,font:"SimHei",color:"#50575C",bold:!0},compId:14},{type:"Button",props:{"var":"deletebtn",top:0,stateNum:1,skin:"uiCommonUpdate/subicon.png",right:1,labelSize:12,labelFont:"SimHei"},compId:4},{type:"VBox",props:{"var":"itembox",top:110,right:0,left:0},compId:10},{type:"Image",props:{y:0,width:1,"var":"cutline",skin:"commers/cutline.png",right:0,height:200},compId:15},{type:"Label",props:{y:34,x:5,text:"备注",fontSize:12,font:"SimHei",color:"#50575C"},compId:16},{type:"TextInput",props:{wordWrap:!0,"var":"comment",top:50,text:"包裹名ut",skin:"uiCommonUpdate/grayFrame.png",right:5,left:5,height:34,fontSize:18,font:"SimHei",bold:!0,sizeGrid:"9,6,7,5"},compId:17}],loadList:["uiCommonUpdate/subicon.png","commers/cutline.png","uiCommonUpdate/grayFrame.png"],loadList3D:[]},i}(la)),ph=function(t){function i(){this.mainpanel=null,this.productlist=null,this.okbtn=null,this.btnok=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.order.AverageCutPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/AverageCutPanel")},i}(la),fh=(function(t){function i(){this.mainpanel=null,this.myaddresstxt=null,this.conditionList=null,this.prodList=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.prodCustom.ProdChoosePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("prodCustom/ProdChoosePanel")},i}(la),function(t){function i(){this.mainpanel=null,this.leftpanel=null,this.originimg=null,this.backimg=null,this.yixingimg=null,this.partImg=null,this.rightpanel=null,this.rightbox=null,this.matProcContainer=null,this.operateArea=null,this.confirmBtn=null,this.saveBtn=null,this.closeBtn=null,this.effectBtn=null,i.__super.call(this)}s(i,"ui.inuoView.MaterialAdProcFlowPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/MaterialAdProcFlowPanel")},i}(la)),mh=function(t){function i(){this.mainpanel=null,this.inputphone=null,this.delBtn=null,this.inputpwd=null,this.delBtn=null,this.inputcfmpwd=null,this.delBtn=null,this.inputcode=null,this.delBtn=null,this.btngetcode=null,this.btnClose=null,this.btnok=null,this.codeValid=null,i.__super.call(this)}s(i,"ui.login.ResetPwdPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/ResetPwdPanel")},i}(la),gh=function(t){function i(){this.step1=null,this.step2=null,this.step3=null,this.step4=null,this.curCustomer=null,this.deliverdateBoc=null,this.deliveryDate0=null,this.deliveryDate1=null,this.deliveryDate2=null,this.deliveryDate3=null,this.deliveryDate4=null,this.orderlist=null,this.timepreferRdo=null,this.title=null,this.setdefaultbtn=null,this.countdown=null,this.manufatureList=null,this.deliveryTypelist=null,this.productNum=null,this.totalprice=null,this.disocuntprice=null,this.rawprice=null,this.savebtn=null,this.paybtn=null,this.delmoney=null,this.firstDiscount=null,i.__super.call(this)}s(i,"ui.order.ChooseDeliveryTimePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/ChooseDeliveryTimePanel")},i}(la),vh=function(t){function i(){this.productimg=null,this.proname=null,this.size0=null,this.size1=null,this.pricetxt=null,this.numinput=null,this.btnbuy=null,this.btnclose=null,i.__super.call(this)}s(i,"ui.product.BuyProductPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("product/BuyProductPanel")},i}(la),Sh=function(t){function i(){this.catebtn=null,i.__super.call(this)}s(i,"ui.product.ProductCateItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Button",props:{y:0,x:0,width:194,"var":"catebtn",stateNum:3,skin:"order1/selection.png",sizeGrid:"3,3,3,3",labelSize:16,labelFont:"SimHei",labelColors:"#262B2E,#463B4E,#262B2E",label:"户内PP背胶（户内写真）",height:42},compId:3}],loadList:["order1/selection.png"],loadList3D:[]},i}(la),yh=function(t){function i(){this.proclist=null,i.__super.call(this)}s(i,"ui.inuoView.ProcListPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/ProcListPanel")},i}(la),Ch=function(t){function i(){this.conName=null,this.phonetxt=null,this.detailaddr=null,this.btnDel=null,this.checksel=null,i.__super.call(this)}s(i,"ui.usercenter.GroupAddressItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:940,height:60},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/inputbg.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:17},{type:"Label",props:{y:18,x:33,width:93,"var":"conName",valign:"middle",text:"徐建华",height:24,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:3},{type:"Label",props:{y:18,x:151,width:156,"var":"phonetxt",valign:"middle",text:"13564113173",height:24,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:5},{type:"Label",props:{y:0,x:314,wordWrap:!0,width:431,"var":"detailaddr",valign:"middle",text:"上海市浦东新区周浦镇瑞浦路612弄23号1001室",height:60,fontSize:18,font:"SimHei",color:"#354052",align:"center"},compId:6},{type:"Text",props:{y:22,x:853,"var":"btnDel",text:"移出",presetID:1,fontSize:16,font:"SimHei",color:"#354052",isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"CheckBox",props:{y:22,x:10,"var":"checksel",skin:"commers/multicheck.png",labelSize:20},compId:19}],loadList:["commers/inputbg.png","prefabs/LinksText.prefab","commers/multicheck.png"],loadList3D:[]},i}(la),Eh=function(t){function i(){this.recordlist=null,this.closebtn=null,this.pagetxt=null,this.prevbtn=null,this.nextbtn=null,i.__super.call(this)}s(i,"ui.usercenter.PublicChargeRecordPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/PublicChargeRecordPanel")},i}(la),bh=function(t){function i(){this.mainpanel=null,this.dragImg=null,this.btnok=null,this.btncancel=null,this.input_username=null,this.delBtn=null,this.input_phone=null,this.delBtn=null,this.input_address=null,this.delBtn=null,this.deliveryBox=null,this.defaulDeliveryType=null,this.getDeliveryList=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,this.townbox=null,this.townList=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.btnSelTown=null,this.towntxt=null,i.__super.call(this)}s(i,"ui.usercenter.NewAddressPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/NewAddressPanel")},i}(la),Ih=function(t){function i(){this.prgcap=null,this.leftcapacity=null,this.folderbox=null,this.btnroot=null,this.flder0=null,this.flder1=null,this.flder2=null,this.btnorder=null,this.upgradestore=null,this.picList=null,this.btnUploadPic=null,this.btnNewFolder=null,this.batchDelete=null,this.freshbtn=null,this.refreshTxt=null,this.radiosel=null,this.tifAi=null,this.searchInput=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,this.customeList=null,this.pageBox=null,this.pageTxt=null,this.prevPage=null,this.nextPage=null,this.searchCustomName=null,this.searchBtn=null,i.__super.call(this)}s(i,"ui.inuoView.PicManagerPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/PicManagerPanel")},i}(la),xh=function(t){function i(){this.mainpanel=null,this.dragImg=null,this.matName=null,this.attachPanel=null,this.btnok=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.order.SelectAttchPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectAttchPanel")},i}(la),Ph=function(t){function i(){this.dragImg=null,this.okbtn=null,this.cancelbtn=null,this.packagebox=null,this.addpackbtn=null,this.productlist=null,this.timepreferRdo=null,i.__super.call(this)}s(i,"ui.order.PackagePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/PackagePanel")},i}(la),Dh=function(t){function i(){this.lblcolor=null,i.__super.call(this)}s(i,"ui.characterpaint.ColorLblItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Label",props:{width:90,"var":"lblcolor",height:30,borderColor:"#101010",bgColor:"#f41815"},compId:3}],loadList:[],loadList3D:[]},i}(la),Ah=function(t){function i(){this.selectImg=null,this.customName=null,this.phoneNumber=null,this.businessManlbl=null,this.updateInfoTxt=null,this.deleteTxt=null,this.addressTxt=null,this.defaultPayType=null,this.balancelbl=null,i.__super.call(this)}s(i,"ui.usercenter.items.CustomeItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:580,height:30},compId:2,child:[{type:"Image",props:{"var":"selectImg",top:0,skin:"commers/graydisable.jpg",right:0,left:0,height:30,bottom:0},compId:13},{type:"Label",props:{y:7,x:5,width:161,"var":"customName",text:"客户名称最多六个字",height:14,fontSize:14,font:"SimHei",align:"center"},compId:3},{type:"Label",props:{y:8,x:175,width:80,"var":"phoneNumber",text:"13899998888",height:14,fontSize:14,font:"SimHei"},compId:4},{type:"Label",props:{y:8,x:267,width:60,visible:!0,"var":"businessManlbl",text:"小李路",height:14,fontSize:14,font:"SimHei",align:"center"},compId:5},{type:"Text",props:{y:8,x:470,"var":"updateInfoTxt",text:"修改",presetID:1,fontSize:14,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:6,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:8}]},{type:"Text",props:{y:8,x:547,"var":"deleteTxt",text:"删除",presetID:1,fontSize:14,font:"SimHei",color:"#d92e16",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:7,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Text",props:{y:8,x:508,"var":"addressTxt",text:"地址",presetID:1,fontSize:14,font:"SimHei",color:"#003dc6",bold:!0,isPresetRoot:!0,runtime:"laya.display.Text"},compId:10,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:11}]},{type:"Image",props:{y:0,skin:"commers/cutline.png",right:0,left:0,bottom:0},compId:12},{type:"Label",props:{y:8,x:401,width:58,visible:!0,"var":"defaultPayType",text:"预充",height:14,fontSize:14,font:"SimHei",align:"center"},compId:14},{type:"Label",props:{y:8,x:335,width:63,visible:!0,"var":"balancelbl",text:"0.00",height:14,fontSize:14,font:"SimHei",align:"center"},compId:15}],loadList:["commers/graydisable.jpg","prefabs/LinksText.prefab","commers/cutline.png"],loadList3D:[]},i}(la),Lh=function(t){function i(){this.userName=null,this.delBtn=null,this.changeName=null,this.headImg=null,this.editBtn=null,this.createTime=null,this.organizeBox=null,this.memberlist=null,this.createOrganize=null,this.applyListBtn=null,this.organizelist=null,this.distributePanel=null,this.organizeCom=null,this.moveOkbtn=null,this.closeDist=null,this.createOrganizePanel=null,this.organizeNameInput=null,this.delBtn=null,this.createBtnOk=null,this.btncloseCreate=null,this.setAuthorityPanel=null,this.confirmauthoritybtn=null,this.closeauthoritybtn=null,this.order_submit=null,this.order_submit_with_balances=null,this.order_price_display=null,this.order_list_self=null,this.order_list_org=null,this.accoutname=null,this.asset_log_list=null,i.__super.call(this)}s(i,"ui.usercenter.AccountSettingPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/AccountSettingPanel")},i}(la),kh=function(t){function i(){this.dragimg=null,this.invoicelist=null,this.closebtn=null,this.ordertime=null,i.__super.call(this)}s(i,"ui.usercenter.InvoiceHistoryPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/InvoiceHistoryPanel")},i}(la),Th=function(t){function i(){this.mainPanel=null,this.addbox=null,this.myaddresstxt=null,this.changeAddr=null,this.outputbox=null,this.paintOrderBtn=null,this.dingzhiBtn=null,this.productBtn=null,this.zipaiBtn=null,this.kailiaoBtn=null,this.modelOrderBtn=null,this.biaoPinBtn=null,this.dengxiangBtn=null,i.__super.call(this)}s(i,"ui.inuoView.OrderTypePanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/OrderTypePanel")},i}(la),Rh=function(t){function i(){this.btn=null,this.deletbtn=null,i.__super.call(this)}s(i,"ui.usercenter.AddressGroupItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Button",props:{width:150,"var":"btn",skin:"commers/btn2.png",sizeGrid:"3,3,3,3",labelSize:14,labelFont:"Arial",labelColors:"#232b26,#006600,#232b26",labelBold:!0,height:60},compId:4,child:[{type:"Button",props:{y:2,x:129,"var":"deletbtn",skin:"commers/btnclose.png"},compId:5}]}],loadList:["commers/btn2.png","commers/btnclose.png"],loadList3D:[]},i}(la),wh=function(t){function i(){this.applylist=null,this.distributePanel=null,this.deptbox=null,this.confirmJoin=null,this.closedistribute=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.usercenter.ApplyJoinMgrPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/ApplyJoinMgrPanel")},i}(la),Oh=function(t){function i(){this.mainpanel=null,this.mainview=null,this.msgtxt=null,this.okbtn=null,this.cancelbtn=null,this.closebtn=null,this.tipimg=null,i.__super.call(this)}s(i,"ui.common.PicturePopDialogUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("common/PicturePopDialog")},i}(la),Mh=function(t){function i(){this.mainpanel=null,this.dragImg=null,this.btnok=null,this.btncancel=null,this.input_companyName=null,this.delBtn=null,this.input_shortName=null,this.delBtn=null,this.input_address=null,this.delBtn=null,this.reditCode=null,this.delBtn=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,this.townbox=null,this.townList=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.btnSelTown=null,this.towntxt=null,i.__super.call(this)}s(i,"ui.usercenter.CompanyInfoEditPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/CompanyInfoEditPanel")},i}(la),Bh=function(t){function i(){this.waittingPanel=null,this.leftTime=null,this.loadingTips=null,this.rollTip=null,this.demonImg=null,this.mainpanel=null,this.imgList=null,this.okbtn=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.order.CbcPreViewPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/CbcPreViewPanel")},i}(la),Nh=function(t){function i(){this.pic=null,this.selFrame=null,i.__super.call(this)}s(i,"ui.inuoView.items.SmallPictureItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:120,height:120},compId:2,child:[{type:"Image",props:{y:60,x:60,width:120,"var":"pic",skin:"comp/image.png",height:120,anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:0,x:0,"var":"selFrame",top:0,skin:"commers/inputfocus.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:5}],loadList:["comp/image.png","commers/inputfocus.png"],loadList3D:[]},i}(la),Fh=function(t){function i(){this.ordertime=null,this.orderBtn=null,this.transactionBtn=null,this.exportExcel=null,this.paytype=null,this.orderList=null,this.btnsearch=null,this.ordertotalNum=null,this.ordertotalMoney=null,this.pagenum=null,this.lastpage=null,this.nextpage=null,this.orderPlaceCombo=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,this.businessCombo=null,this.writeOffRadio=null,i.__super.call(this)}s(i,"ui.orderList.OrderListPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("orderList/OrderListPanel")},i}(la),Vh=function(t){function i(){this.ordertime=null,this.transactionBtn=null,this.selectall=null,this.orderList=null,this.btnsearch=null,this.selectMoney=null,this.totalWriteMoney=null,this.pagenum=null,this.lastpage=null,this.nextpage=null,this.confirmBtn=null,this.closeBtn=null,i.__super.call(this)}s(i,"ui.orderList.WriteOffOrderPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("orderList/WriteOffOrderPanel")},i}(la),Uh=function(t){function i(){this.mainpanel=null,this.mainview=null,this.msgtxt=null,this.tips=null,this.btnSp=null,this.okbtn=null,this.cancelbtn=null,this.closebtn=null,i.__super.call(this)}s(i,"ui.PopUpDialogUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("PopUpDialog")},i}(la),Wh=function(t){function i(){this.mainpanel=null,this.searchBtn=null,this.title=null,this.addWechat=null,this.discountMs=null,this.orderBtn=null,this.capacityProgress=null,this.leftCapacityLbl=null,this.picList=null,this.uploadBtn=null,this.upgradeStorage=null,this.teaching=null,i.__super.call(this)}s(i,"ui.inuoView.MyWorkPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/MyWorkPanel")},i}(la),Hh=function(t){function i(){this.mainpanel=null,this.orderSn=null,this.orderoanel=null,this.orderbox=null,this.closebtn=null,this.layoutCost=null,this.designCost=null,this.deliveryCost=null,this.otherCost=null,this.sellPrice=null,this.okbtn=null,this.moneyPaidlbl=null,this.shareBtn=null,i.__super.call(this)}s(i,"ui.usercenter.SellPriceSettingPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/SellPriceSettingPanel")},i}(la),Gh=function(t){function i(){this.sp=null,this.redhole=null,this.greenhole=null,i.__super.call(this)}s(i,"ui.order.HoleSpriteUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:20,"var":"sp",pivotY:.5,pivotX:.5,height:20},compId:3,child:[{type:"Sprite",props:{y:10,x:10,"var":"redhole"},compId:5,child:[{type:"Circle",props:{y:0,x:0,radius:10,name:"hole",lineWidth:2,lineColor:"#f4ecec",fillColor:"#ff0000"},compId:4}]},{type:"Sprite",props:{y:10,x:10,visible:!1,"var":"greenhole"},compId:6,child:[{type:"Circle",props:{y:0,x:0,radius:10,name:"hole",lineWidth:2,lineColor:"#f4ecec",fillColor:"#0aea1c"},compId:7}]}]}],loadList:[],loadList3D:[]},i}(la),zh=function(t){function i(){this.mainpanel=null,this.dragImg=null,this.flder0=null,this.htmltext=null,this.radiosel=null,this.btnroot=null,this.btnprevfolder=null,this.searchInput=null,this.filetypeRadio=null,this.btnok=null,this.picList=null,this.flder1=null,this.flder2=null,this.btncancel=null,i.__super.call(this)}s(i,"ui.order.SelectPicPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectPicPanel")},i}(la),Yh=function(t){function i(){this.tabpanel=null,this.matpanel=null,i.__super.call(this)}s(i,"ui.inuoView.MaterialListPanelUI",t);
var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("inuoView/MaterialListPanel")},i}(la),Xh=function(t){function i(){this.list_delivery=null,this.okbtn=null,this.cancelbtn=null,i.__super.call(this)}s(i,"ui.order.SelectDeliveryPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectDeliveryPanel")},i}(la),qh=function(t){function i(){this.prg=null,this.prgtxt=null,i.__super.call(this)}s(i,"ui.login.LoadingPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"ProgressBar",props:{y:445,x:587,width:818,"var":"prg",skin:"comp/progress.png",sizeGrid:"2,1,1,2",height:14},compId:3},{type:"Label",props:{y:400,x:781.5,width:357,"var":"prgtxt",text:"10%",height:31,fontSize:24,color:"#f3e4e4",align:"center"},compId:4},{type:"Script",props:{runtime:"utils.LoadingPrgControl"},compId:5}],loadList:["comp/progress.png"],loadList3D:[]},i}(la),Jh=function(t){function i(){this.panel_main=null,this.firstPage=null,this.myorder=null,this.userName=null,this.logout=null,this.bannertitile=null,this.sp_container=null,this.btntxt0=null,this.btntxt12=null,this.btntxt1=null,this.btntxt9=null,this.btntxt10=null,this.btntxt5=null,this.btntxt6=null,this.btntxt11=null,this.btntxt3=null,this.btntxt4=null,this.btntxt7=null,this.btntxt8=null,this.toptitle=null,i.__super.call(this)}s(i,"ui.usercenter.UserMainPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/UserMainPanel")},i}(la),jh=function(t){function i(){this.mainpanel=null,this.orderSn=null,this.orderoanel=null,this.orderbox=null,this.closebtn=null,this.orderState=null,this.moneyPaidlbl=null,this.prodNum=null,this.orderTime=null,this.address=null,this.comondeltype=null,this.urgentdelType=null,this.outputtxt=null,this.deliveryState=null,i.__super.call(this)}s(i,"ui.usercenter.OrderDetailPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/OrderDetailPanel")},i}(la),Kh=function(t){function i(){this.selframe=null,this.pic=null,this.fileName=null,i.__super.call(this)}s(i,"ui.inuoView.items.PicSimpleItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{width:250,height:275},compId:2,child:[{type:"Image",props:{top:0,skin:"uiCommonUpdate/grayFrame.png",sizeGrid:"3,3,3,3",right:0,left:0,bottom:0},compId:7},{type:"Image",props:{y:0,x:0,"var":"selframe",top:0,skin:"commers/inputfocus.png",sizeGrid:"5,5,5,5",right:0,left:0,bottom:0},compId:6},{type:"Image",props:{y:125,x:125,width:240,"var":"pic",skin:"bigImg/face.png",height:240,anchorY:.5,anchorX:.5},compId:3},{type:"Label",props:{x:35,wordWrap:!1,width:180,"var":"fileName",valign:"middle",text:"名称.jpg 宽 3256 名称",overflow:"scroll",height:20,fontSize:14,font:"SimHei",color:"#485157",bottom:5,bold:!0,align:"center"},compId:4}],loadList:["uiCommonUpdate/grayFrame.png","commers/inputfocus.png","bigImg/face.png"],loadList3D:[]},i}(la),Zh=function(t){function i(){this.img=null,this.frame=null,i.__super.call(this)}s(i,"ui.characterpaint.BackImgItemUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(i.uiView)},i.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{width:80,"var":"img",skin:"textureU3d/stone/stone1.jpg",height:80},compId:3},{type:"Image",props:{width:82,"var":"frame",skin:"commers/inputfocus.png",sizeGrid:"3,3,3,3",height:82},compId:4}],loadList:["textureU3d/stone/stone1.jpg","commers/inputfocus.png"],loadList3D:[]},i}(la),$h=function(t){function i(){this.ordertime=null,this.orderBtn=null,this.transactionBtn=null,this.addChargeBtn=null,this.balanceTxt=null,this.paytype=null,this.orderList=null,this.btnsearch=null,this.totalSellMoney=null,this.payMoney=null,this.pagenum=null,this.lastpage=null,this.nextpage=null,this.showCustomList=null,this.curCustomName=null,this.customListPanel=null,this.addChargePanel=null,this.customerName=null,this.delBtn=null,this.transactionNum=null,this.delBtn=null,this.getMoney=null,this.delBtn=null,this.commentInput=null,this.delBtn=null,this.confirmAdd=null,this.closeCharge=null,this.channel=null,this.getmoneyDate=null,this.writeoffBtn=null,i.__super.call(this)}s(i,"ui.orderList.CustomerTransactionPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("orderList/CustomerTransactionPanel")},i}(la),Qh=function(t){function i(){this.panel_main=null,this.step1=null,this.step2=null,this.step2=null,this.step3=null,this.closebtn=null,this.productlist=null,this.leftOptPanel=null,this.lighton=null,this.depth1=null,this.mattype1=null,this.createlayer1=null,this.choosecolor1=null,this.depth2=null,this.mattype2=null,this.createlayer2=null,this.fontsizeinput=null,this.backimglist=null,this.alphasilder1=null,this.alphasilder2=null,this.depth3=null,this.mattype3=null,this.createlayer3=null,this.alphasilder3=null,this.changSizeBtn=null,this.choosecolor2=null,this.choosecolor3=null,this.lightcolor=null,this.closeOperate=null,this.colorpanel=null,this.colorlist=null,this.closecolor=null,this.panelbottom=null,i.__super.call(this)}s(i,"ui.characterpaint.CharacterPaintUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("characterpaint/CharacterPaint")},i}(la),tl=function(t){function i(){this.main_panel=null,this.dragImg=null,this.backBtn=null,this.box_mat=null,this.matlist=null,this.tablist=null,this.hasSelMat=null,this.box_tech=null,this.techcontent=null,this.mattext=null,this.selecttech=null,this.originimg=null,this.yixingimg=null,this.backimg=null,this.yingxBack=null,this.btnok=null,this.btncancel=null,this.numinput=null,this.addbtn=null,this.subtn=null,i.__super.call(this)}s(i,"ui.order.SelectMaterialPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectMaterialPanel")},i}(la),il=(function(t){function i(){this.panel_main=null,this.firstPage=null,this.myorder=null,this.userName=null,this.logout=null,this.myaddresstxt=null,this.outputbox=null,this.downbox=null,this.productCateList=null,this.productlist=null,this.haschooselist=null,this.deliversp=null,this.deliverbox=null,this.panelbottom=null,this.textTotalPrice=null,this.textDeliveryType=null,this.textPayPrice=null,this.saveorder=null,this.paybtn=null,i.__super.call(this)}s(i,"ui.product.ProductMarketPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("product/ProductMarketPanel")},i}(la),function(t){function i(){this.addAddress=null,this.addGroup=null,this.addressTab=null,this.groupTab=null,this.addressbox=null,this.addressList=null,this.searchInput=null,this.searchAddressBtn=null,this.selectall=null,this.delBatchBtn=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,this.pageNum=null,this.prePage=null,this.nextPage=null,this.groupBox=null,this.groupList=null,this.searchGroupInput=null,this.searchGrpBtn=null,this.createGroupBox=null,this.newGroupName=null,this.confirmCreateGroup=null,this.closeNewGroup=null,this.grPageNum=null,this.gpPrevPage=null,this.gpNextPage=null,i.__super.call(this)}s(i,"ui.usercenter.AddressGroupPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/AddressGroupPanel")},i}(la)),el=function(t){function i(){this.ordertime=null,this.btnsearch=null,this.transactionlist=null,this.itemNum=null,this.pagetxt=null,this.prebtn=null,this.nextbtn=null,this.moneytxt=null,this.payamount=null,this.reatryamount=null,i.__super.call(this)}s(i,"ui.usercenter.TransactionPanelUI",t);var e=i.prototype;return e.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/TransactionPanel")},i}(la),nl=function(t){function i(){this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this.isShowEffect=!0,this.isPopupCenter=!0,this.closeType=null,this._dragArea=null,this._param=null,i.__super.call(this),this.popupEffect=i.manager.popupEffectHandler,this.closeEffect=i.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)}s(i,"laya.ui.Dialog",t);var n=i.prototype;return n._dealDragArea=function(){var t=this.getChildByName("drag");t&&(this.dragArea=t._x+","+t._y+","+t.width+","+t.height,t.removeSelf())},n._onMouseDown=function(){var t=this.getMousePoint();this._dragArea.contains(t.x,t.y)?this.startDrag():this.stopDrag()},n._onClick=function(t){var i=t.target;if(i)switch(i.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":return this.close(i.name),void 0}},n.open=function(t,e){void 0===t&&(t=!0),this._dealDragArea(),this._param=e,i.manager.open(this,t,this.isShowEffect),i.manager.lock(!1)},n.close=function(t){this.closeType=t,i.manager.close(this)},n.destroy=function(i){void 0===i&&(i=!0),this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this._dragArea=null,t.prototype.destroy.call(this,i)},n.show=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),this._open(!1,t,i)},n.popup=function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!0),this._open(!0,t,i)},n._open=function(t,e,n){this.isModal=t,this.isShowEffect=n,i.manager.lock(!0),this.open(e)},r(0,n,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t){if(t){var i=hn.fillArray([0,0,0,0],t,Number);this._dragArea=new on(i[0],i[1],i[2],i[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),r(0,n,"isPopup",function(){return null!=this.parent}),r(0,n,"zOrder",t.prototype._$get_zOrder,function(t){e.superSet(la,this,"zOrder",t),i.manager._checkMask()}),r(1,i,"manager",function(){return i._manager=i._manager||new Qr},function(t){i._manager=t}),i.setLockView=function(t){i.manager.setLockView(t)},i.lock=function(t){i.manager.lock(t)},i.closeAll=function(){i.manager.closeAll()},i.getDialogsByGroup=function(t){return i.manager.getDialogsByGroup(t)},i.closeByGroup=function(t){return i.manager.closeByGroup(t)},i.CLOSE="close",i.CANCEL="cancel",i.SURE="sure",i.NO="no",i.YES="yes",i.OK="ok",i._manager=null,i}(la),sl=function(t){function i(){this._oldW=0,this._oldH=0,i.__super.call(this)}s(i,"laya.ui.ScaleBox",t);var n=i.prototype;return n.onEnable=function(){e.stage.on("resize",this,this.onResize),this.onResize()},n.onDisable=function(){e.stage.off("resize",this,this.onResize)},n.onResize=function(){if(this.width>0&&this.height>0){var t=Math.min(e.stage.width/this._oldW,e.stage.height/this._oldH);e.superSet(va,this,"width",e.stage.width),e.superSet(va,this,"height",e.stage.height),this.scale(t,t)}},r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(va,this,"width",t),this._oldW=t}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(va,this,"height",t),this._oldH=t}),i}(va),rl=function(t){function i(){this._space=0,this._align="none",this._itemChanged=!1,i.__super.call(this)}s(i,"laya.ui.LayoutBox",t);var e=i.prototype;return e.addChild=function(t){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t)},e.onResize=function(){this._setItemChanged()},e.addChildAt=function(t,i){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t,i)},e.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t)},e.refresh=function(){this._setItemChanged()},e.changeItems=function(){this._itemChanged=!1},e.sortItem=function(t){t&&t.sort(function(t,i){return t.y-i.y})},e._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},r(0,e,"space",function(){return this._space},function(t){this._space=t,this._setItemChanged()}),r(0,e,"align",function(){return this._align},function(t){this._align=t,this._setItemChanged()}),i}(va),al=function(t){function i(){i.__super.call(this)}return s(i,"laya.ui.VSlider",t),i}(ya),ol=function(t){function i(){this._items=null,this._selectedIndex=0,i.__super.call(this),this._setIndexHandler=c.create(this,this.setIndex,null,!1)}s(i,"laya.ui.ViewStack",t);var n=i.prototype;return e.imps(n,{"laya.ui.IItem":!0}),n.setItems=function(t){this.removeChildren();for(var i=0,e=0,n=t.length;n>e;e++){var s=t[e];s&&(s.name="item"+i,this.addChild(s),i++)}this.initItems()},n.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},n._afterInited=function(){this.initItems()},n.initItems=function(){this._items=[];for(var t=0;1e4>t;t++){var i=this.getChildByName("item"+t);if(null==i)break;this._items.push(i),i.visible=t==this._selectedIndex}},n.setSelect=function(t,i){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=i)},n.setIndex=function(t){this.selectedIndex=t},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){if(this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var i in this._dataSource)this.hasOwnProperty(i)&&(this[i]=this._dataSource[i])}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),r(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),r(0,n,"items",function(){return this._items}),r(0,n,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),i}(va),hl=function(t){function i(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,i.__super.call(this),this.width=this.height=200}s(i,"laya.ui.Tree",t);var n=i.prototype;return e.imps(n,{"laya.ui.IRender":!0}),n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},n.createChildren=function(){this.addChild(this._list=new ul),this._list.renderHandler=c.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},n.onListChange=function(){this.event("change")},n.getArray=function(){var t,i=[];for(var e in this._source)t=this._source[e],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),i.push(t));return i},n.getDepth=function(t,i){return void 0===i&&(i=0),null==t.nodeParent?i:this.getDepth(t.nodeParent,i+1)},n.getParentOpenStatus=function(t){var i=t.nodeParent;return null==i?!0:i.isOpen?null!=i.nodeParent?this.getParentOpenStatus(i):!0:!1},n.renderItem=function(t,i){var e=t.dataSource;if(e){t.left=e.x;var n=t.getChildByName("arrow");n&&(e.hasChild?(n.visible=!0,n.index=e.isOpen?1:0,n.tag=i,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var s=t.getChildByName("folder");s&&(s.index=2==s.clipY?e.isDirectory?0:1:e.isDirectory?e.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,i])}},n.onArrowClick=function(t){var i=t.currentTarget,e=i.tag;this._list.array[e].isOpen=!this._list.array[e].isOpen,this.event("open"),this._list.array=this.getArray()},n.setItemState=function(t,i){this._list.array[t]&&(this._list.array[t].isOpen=i,this._list.array=this.getArray())},n.fresh=function(){this._list.array=this.getArray(),this.repaint()},n.parseXml=function(t,i,e,n){var s,r=t.childNodes,a=r.length;if(!n){s={};var o,h=t.attributes;for(var l in h){o=h[l];var c=o.nodeName,u=o.nodeValue;s[c]="true"==u?!0:"false"==u?!1:u}s.nodeParent=e,a>0&&(s.isDirectory=!0),s.hasChild=a>0,i.push(s)}for(var d=0;a>d;d++){var _=r[d];this.parseXml(_,i,s,!1)}},n.parseOpenStatus=function(t,i){for(var e=0,n=i.length;n>e;e++){var s=i[e];if(s.isDirectory)for(var r=0,a=t.length;a>r;r++){var o=t[r];if(o.isDirectory&&this.isSameParent(o,s)&&s.label==o.label){s.isOpen=o.isOpen;break}}}},n.isSameParent=function(t,i){return null==t.nodeParent&&null==i.nodeParent?!0:null==t.nodeParent||null==i.nodeParent?!1:t.nodeParent.label==i.nodeParent.label?this.isSameParent(t.nodeParent,i.nodeParent):!1},n.filter=function(t){if(Boolean(t)){var i=[];this.getFilterSource(this._source,i,t),this._list.array=i}else this._list.array=this.getArray()},n.getFilterSource=function(t,i,e){e=e.toLocaleLowerCase();var n;for(var s in t)n=t[s],!n.isDirectory&&String(n.label).toLowerCase().indexOf(e)>-1&&(n.x=0,i.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,i,e)},r(0,n,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),r(0,n,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),r(0,n,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),r(0,n,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),r(0,n,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,e.superSet(va,this,"dataSource",t)}),r(0,n,"source",function(){return this._source}),r(0,n,"scrollBar",function(){return this._list.scrollBar}),r(0,n,"list",function(){return this._list}),r(0,n,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),r(0,n,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),r(0,n,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t}),r(0,n,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),r(0,n,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(va,this,"width",t),this._list.width=t}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(va,this,"height",t),this._list.height=t}),r(0,n,"xml",null,function(t){var i=[];this.parseXml(t.childNodes[0],i,null,!0),this.array=i}),r(0,n,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),i}(va),ll=function(t){function i(t){i.__super.call(this,t),this.isVertical=!1}return s(i,"laya.ui.HSlider",t),i}(ya),cl=function(t){function i(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,this._usedCache=null,i.__super.call(this),this.width=this.height=100}s(i,"laya.ui.Panel",t);var n=i.prototype;return n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},n.destroyChildren=function(){this._content.destroyChildren()},n.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new va)},n.addChild=function(t){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t)},n.onResize=function(){this._setScrollChanged()},n.addChildAt=function(t,i){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,i)},n.removeChild=function(t){return t.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)},n.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)},n.removeChildren=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=2147483647),this._content.removeChildren(t,i),this._setScrollChanged(),this},n.getChildAt=function(t){return this._content.getChildAt(t)},n.getChildByName=function(t){return this._content.getChildByName(t)},n.getChildIndex=function(t){return this._content.getChildIndex(t)},n.changeScroll=function(){this._scrollChanged=!1;var t=this.contentWidth||1,i=this.contentHeight||1,e=this._vScrollBar,n=this._hScrollBar,s=e&&i>this._height,r=n&&t>this._width,a=s?this._width-e.width:this._width,o=r?this._height-n.height:this._height;e&&(e.x=this._width-e.width,e.y=0,e.height=this._height-(r?n.height:0),e.scrollSize=Math.max(.033*this._height,1),e.thumbPercent=o/i,e.setScroll(0,i-o,e.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(s?e.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=a/t,n.setScroll(0,t-a,n.value))},n._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this),this.setContentSize(this._width,this._height)},n.setContentSize=function(t,i){var e=this._content;e.width=t,e.height=i,e._style.scrollRect||(e.scrollRect=on.create()),e._style.scrollRect.setTo(0,0,t,i),e.scrollRect=e.scrollRect},n.onScrollBarChange=function(t){var i=this._content._style.scrollRect;if(i){var e=Math.round(t.value);t.isVertical?i.y=e:i.x=e,this._content.scrollRect=i}},n.scrollTo=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.vScrollBar&&(this.vScrollBar.value=i),this.hScrollBar&&(this.hScrollBar.value=t)},n.refresh=function(){this.changeScroll()},n.onScrollStart=function(){this._usedCache||(this._usedCache=e.superGet(va,this,"cacheAs")),e.superSet(va,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){e.superSet(va,this,"cacheAs",this._usedCache)},n._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},r(0,n,"numChildren",function(){return this._content.numChildren}),r(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new ml),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t}),r(0,n,"contentWidth",function(){for(var t=0,i=this._content.numChildren-1;i>-1;i--){var e=this._content.getChildAt(i);t=Math.max(e._x+e.width*e.scaleX,t)}return t}),r(0,n,"contentHeight",function(){for(var t=0,i=this._content.numChildren-1;i>-1;i--){var e=this._content.getChildAt(i);t=Math.max(e._y+e.height*e.scaleY,t)}return t}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(va,this,"width",t),this._setScrollChanged()}),r(0,n,"hScrollBar",function(){return this._hScrollBar}),r(0,n,"content",function(){return this._content}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(va,this,"height",t),this._setScrollChanged()}),r(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new pl),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),t&&" "!=t&&(this._vScrollBar.skin=t)}),r(0,n,"vScrollBar",function(){return this._vScrollBar}),r(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){e.superSet(va,this,"cacheAs",t),this._usedCache=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),i}(va),ul=function(t){function i(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._$componentType="List",this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._usedCache=null,i.__super.call(this),this._cells=[],this._offset=new Oe}s(i,"laya.ui.List",t);var n=i.prototype;return e.imps(n,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),n.destroy=function(t){void 0===t&&(t=!0),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),laya.ui.UIComponent.prototype.destroy.call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},n.createChildren=function(){this.addChild(this._content=new va)},n.onScrollStart=function(){this._usedCache||(this._usedCache=e.superGet(va,this,"cacheAs")),e.superSet(va,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){e.superSet(va,this,"cacheAs",this._usedCache)},n._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)},n.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),i=t.width+this._spaceX||1,e=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/i):Math.ceil(this._width/i)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/e):Math.round(this._height/e));var n=this._width?this._width:i*this.repeatX-this._spaceX,s=this._height?this._height:e*this.repeatY-this._spaceY;this._cellSize=this._isVertical?e:i,this._cellOffset=this._isVertical?e*Math.max(this._repeatY2,this._repeatY)-s-this._spaceY:i*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=s:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=n),this.setContentSize(n,s);var r=this._isVertical?this.repeatX:this.repeatY,a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,r,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},n._getOneCell=function(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t._x,t._y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]},n._createItems=function(t,i,e){var n=this._content,s=this._getOneCell(),r=s.width+this._spaceX,a=s.height+this._spaceY;if(this.cacheContent){var o=new va;o.cacheAs="normal",o.pos((this._isVertical?0:t)*r,(this._isVertical?t:0)*a),this._content.addChild(o),n=o}else{for(var h=[],l=this._cells.length-1;l>-1;l--){var c=this._cells[l];c.removeSelf(),h.push(c)}this._cells.length=0}for(var u=t;e>u;u++)for(var d=0;i>d;d++)s=h&&h.length?h.pop():this.createItem(),s.x=(this._isVertical?d:u)*r-n._x,s.y=(this._isVertical?u:d)*a-n._y,s.name="item"+(u*i+d),n.addChild(s),this.addCell(s)},n.createItem=function(){var t=[];if("function"==typeof this._itemRender)var i=new this._itemRender;else i=Hi.createComp(this._itemRender,null,null,t);if(0==t.length&&i._watchMap){var e=i._watchMap;for(var n in e)for(var s=e[n],r=0;r<s.length;r++){var a=s[r];t.push(a.comp,a.prop,a.value)}}return t.length&&(i._$bindData=t),i},n.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},n._afterInited=function(){this.initItems()},n.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var t=0;t=0;for(var i=0;1e4>i;i++){var e=this.getChildByName("item"+i);{if(!e)break;this.addCell(e),t++}}this.repeatY=t}},n.setContentSize=function(t,i){this._content.width=t,this._content.height=i,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content._style.scrollRect||(this._content.scrollRect=on.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,t,i),this._content.scrollRect=this._content.scrollRect),this.event("resize")},n.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var i=t.currentTarget,e=this._startIndex+this._cells.indexOf(i);0>e||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=e:this.changeCellState(i,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===e||this.changeCellState(i,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,e]))},n.changeCellState=function(t,i,e){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=i,n.index=e)},n._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},n.onScrollBarChange=function(){this.runCallLater(this.changeCells);var t=this._scrollBar.value,i=this._isVertical?this.repeatX:this.repeatY,e=this._isVertical?this.repeatY:this.repeatX,n=Math.floor(t/this._cellSize);if(this.cacheContent)r=e+1,this._createdLine-n<r&&(this._createItems(this._createdLine,i,this._createdLine+r),this.renderItems(this._createdLine*i,0),this._createdLine+=r);else{var s=n*i,r=0;if(s>this._startIndex){r=s-this._startIndex;var a=!0,o=this._startIndex+i*(e+1);this._isMoved=!0}else s<this._startIndex&&(r=this._startIndex-s,a=!1,o=this._startIndex-1,this._isMoved=!0);for(var h=0;r>h;h++){if(a){var l=this._cells.shift();this._cells[this._cells.length]=l;var c=o+h}else l=this._cells.pop(),this._cells.unshift(l),c=o-h;var u=Math.floor(c/i)*this._cellSize;this._isVertical?l.y=u:l.x=u,this.renderItem(l,c)}this._startIndex=s,this.changeSelectStatus()}var d=this._content._style.scrollRect;this._isVertical?(d.y=t-this._offset.y,d.x=-this._offset.x):(d.y=-this._offset.y,d.x=t-this._offset.x),this._content.scrollRect=d},n.posCell=function(t,i){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(i/e)*this._cellSize);this._isVertical?t._y=n:t.x=n}},n.changeSelectStatus=function(){for(var t=0,i=this._cells.length;i>t;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},n.renderItems=function(t,i){void 0===t&&(t=0),void 0===i&&(i=0);for(var e=t,n=i||this._cells.length;n>e;e++)this.renderItem(this._cells[e],this._startIndex+e);this.changeSelectStatus()},n.renderItem=function(t,i){this._array&&i>=0&&i<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[i],this._bindData(t,this._array[i])):t.dataSource=this._array[i],this.cacheContent||this.posCell(t,i),this.hasListener("render")&&this.event("render",[t,i]),this.renderHandler&&this.renderHandler.runWith([t,i])):(t.visible=!1,t.dataSource=null)},n._bindData=function(t,i){for(var e=t._$bindData,n=0,s=e.length;s>n;n++){var r=e[n++],a=e[n++],o=e[n],h=hn.getBindFun(o);r[a]=h.call(this,i)}},n.updateArray=function(t){if(this._array=t,this._scrollBar){var i=t.length,e=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,s=Math.ceil(i/e);
this._scrollBar.thumbPercent=n/s,this._scrollBar.slider._max=(s-n)*this._cellSize+this._cellOffset}},n.refresh=function(){this.array=this._array},n.getItem=function(t){return t>-1&&t<this._array.length?this._array[t]:null},n.changeItem=function(t,i){t>-1&&t<this._array.length&&(this._array[t]=i,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},n.setItem=function(t,i){this.changeItem(t,i)},n.addItem=function(t){this._array.push(t),this.array=this._array},n.addItemAt=function(t,i){this._array.splice(i,0,t),this.array=this._array},n.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},n.getCell=function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},n.scrollTo=function(t){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/i)*this._cellSize}else this.startIndex=t},n.tweenTo=function(t,i,e){if(void 0===i&&(i=200),this._scrollBar){this._scrollBar.stopScroll();var n=this._isVertical?this.repeatX:this.repeatY;Ni.to(this._scrollBar,{value:Math.floor(t/n)*this._cellSize},i,null,e,0,!0)}else this.startIndex=t,e&&e.run()},n._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},n.commitMeasure=function(){this.runCallLater(this.changeCells)},r(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){e.superSet(va,this,"cacheAs",t),this._scrollBar&&(this._usedCache=null,"none"!==t?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),r(0,n,"content",function(){return this._content}),r(0,n,"height",t.prototype._$get_height,function(t){t!=this._height&&(e.superSet(va,this,"height",t),this._setCellChanged())}),r(0,n,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var i=this._cells.length-1;i>-1;i--)this._cells[i].destroy();this._cells.length=0,this._setCellChanged()}}),r(0,n,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var i=new pl;i.name="scrollBar",i.right=0,t&&" "!=t&&(i.skin=t),this.scrollBar=i,this.addChild(i),this._setCellChanged()}),r(0,n,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),r(0,n,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var i=new ml;i.name="scrollBar",i.bottom=0,t&&" "!=t&&(i.skin=t),this.scrollBar=i,this.addChild(i),this._setCellChanged()}),r(0,n,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t,this._setCellChanged()}),r(0,n,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange)))}),r(0,n,"width",t.prototype._$get_width,function(t){t!=this._width&&(e.superSet(va,this,"width",t),this._setCellChanged())}),r(0,n,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t,this._setCellChanged()}),r(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this._setCellChanged()}),r(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this._setCellChanged()}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}),r(0,n,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),r(0,n,"length",function(){return this._array?this._array.length:0}),r(0,n,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),r(0,n,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}),r(0,n,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells),this._array=t||[];var i=this._array.length;if(this.totalPage=Math.ceil(i/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<i?this._selectedIndex:i-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var e=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,s=Math.ceil(i/e),r=this._cellOffset>0?this.totalPage+1:this.totalPage;r>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/s,this._scrollBar.setScroll(0,(s-n)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.array=t:e.superSet(va,this,"dataSource",t)}),r(0,n,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),i}(va),dl=function(t){function i(t,e){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=0/0,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,i.__super.call(this),this.skin=e,this.labels=t}s(i,"laya.ui.UIGroup",t);var n=i.prototype;return e.imps(n,{"laya.ui.IItem":!0}),n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},n.addItem=function(t,i){void 0===i&&(i=!0);var e=t,n=this._items.length;if(e.name="item"+n,this.addChild(e),this.initItems(),i&&n>0){var s=this._items[n-1];"horizontal"==this._direction?e.x=s._x+s.width+this._space:e.y=s._y+s.height+this._space}else i&&(e.x=0,e.y=0);return n},n.delItem=function(t,i){void 0===i&&(i=!0);var e=this._items.indexOf(t);if(-1!=e){var n=t;this.removeChild(n);for(var s=e+1,r=this._items.length;r>s;s++){var a=this._items[s];a.name="item"+(s-1),i&&("horizontal"==this._direction?a.x-=n.width+this._space:a.y-=n.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var o=0;o=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=o}}},n._afterInited=function(){this.initItems()},n.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;1e4>t;t++){var i=this.getChildByName("item"+t);if(null==i)break;this._items.push(i),i.selected=t===this._selectedIndex,i.clickHandler=c.create(this,this.itemClick,[t],!1)}},n.itemClick=function(t){this.selectedIndex=t},n.setSelect=function(t,i){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=i)},n._skinLoaded=function(){this._setLabelChanged(),this.event("loaded")},n.createItem=function(){return null},n.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t=0,i=0,e=this._items.length;e>i;i++){var n=this._items[i];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this._sizeChanged()},n.commitMeasure=function(){this.runCallLater(this.changeLabels)},n._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},r(0,n,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!Fn.getRes(this._skin)?e.loader.load(this._skin,c.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),r(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),r(0,n,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var i=this._labels.split(","),e=0,n=i.length;n>e;e++){var s=this.createItem(this._skin,i[e]);s.name="item"+e,this.addChild(s)}this.initItems()}}),r(0,n,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}),r(0,n,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}),r(0,n,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}),r(0,n,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}),r(0,n,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}),r(0,n,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}),r(0,n,"labelFont",function(){return this._labelFont},function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}),r(0,n,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}),r(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this._setLabelChanged()}),r(0,n,"space",function(){return this._space},function(t){this._space=t,this._setLabelChanged()}),r(0,n,"items",function(){return this._items}),r(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):e.superSet(va,this,"dataSource",t)}),i}(va),_l=function(t){function i(t,e){this._value=null,void 0===e&&(e=""),i.__super.call(this,t,e)}s(i,"laya.ui.Radio",t);var e=i.prototype;return e.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._value=null},e.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},e.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},e.onClick=function(){this.selected=!0},r(0,e,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),i}(Ca),pl=function(t){function i(){i.__super.call(this)}return s(i,"laya.ui.VScrollBar",t),i}(Sa),fl=function(t){function i(t,e){void 0===e&&(e=""),i.__super.call(this,t,e)}s(i,"laya.ui.CheckBox",t);var n=i.prototype;return n.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},n.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},r(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"boolean"==typeof t?this.selected=t:"string"==typeof t?this.selected="true"===t:e.superSet(Ca,this,"dataSource",t)}),i}(Ca),ml=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.HScrollBar",t);var e=i.prototype;return e.initialize=function(){t.prototype.initialize.call(this),this.slider.isVertical=!1},i}(Sa),gl=function(t){function i(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,i.__super.call(this)}var e;s(i,"laya.utils.GraphicAnimation",t);var r=i.prototype;return r._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var i=t.child;if(i){var e=0,n=i.length;for(e=0;n>e;e++)this._parseNodeList(i[e])}},r._calGraphicData=function(t){this._setUp(null,t),this._createGraphicData()},r._createGraphicData=function(){var t=[],i=0,e=this.count,n=this._usedFrames;n||(n=[]);var s;for(i=0;e>i;i++)(n[i]||!s)&&(s=this._createFrameGraphic(i)),t.push(s);this._gList=t},r._createFrameGraphic=function(t){var e=new te;return i._rootMatrix||(i._rootMatrix=new $e),this._updateNodeGraphic(this._rootNode,t,i._rootMatrix,e),e},r._updateNodeGraphic=function(t,i,e,n,s){void 0===s&&(s=1);var r;r=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,i,this._nodeGDic[t.compId]),r.resultTransform||(r.resultTransform=new $e);var a;a=r.resultTransform,$e.mul(r.transform,e,a);var o,h=r.alpha*s;if(!(.01>h)){r.skin&&(o=this._getTextureByUrl(r.skin),o&&(a._checkTransform()?(n.drawTexture(o,0,0,r.width,r.height,a,h),r.resultTransform=null):n.drawTexture(o,a.tx,a.ty,r.width,r.height,null,h)));var l=t.child;if(l){var c=0,u=0;for(u=l.length,c=0;u>c;c++)this._updateNodeGraphic(l[c],i,a,n,h)}}},r._updateNoChilds=function(t,i){if(t.skin){var e=this._getTextureByUrl(t.skin);if(e){var n=t.transform;n._checkTransform();var s=!1;s=!n._bTransform,s?i.drawTexture(e,n.tx,n.ty,t.width,t.height,null,t.alpha):i.drawTexture(e,0,0,t.width,t.height,n.clone(),t.alpha)}}},r._updateNodeGraphic2=function(t,i,e){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,i,this._nodeGDic[t.compId]),!t.child)return this._updateNoChilds(n,e),void 0;var s=n.transform;s._checkTransform();var r=!1;r=!s._bTransform;var a=!1;a=r&&(0!=s.tx||0!=s.ty);var o=!1;o=s._bTransform||1!=n.alpha,o&&e.save(),1!=n.alpha&&e.alpha(n.alpha),r?a&&e.translate(s.tx,s.ty):e.transform(s.clone());var h,l=t.child;if(n.skin&&(h=this._getTextureByUrl(n.skin),h&&e.drawImage(h,0,0,n.width,n.height)),l){var c=0,u=0;for(u=l.length,c=0;u>c;c++)this._updateNodeGraphic2(l[c],i,e)}o?e.restore():r?a&&e.translate(-s.tx,-s.ty):e.transform(s.clone().invert())},r._calculateKeyFrames=function(i){t.prototype._calculateKeyFrames.call(this,i),this._nodeIDAniDic[i.target]=i},r.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},r._getParams=function(t,e,n,s){var r=i._temParam;r.length=e.length;var a=0,o=e.length;for(a=0;o>a;a++)r[a]=this._getObjVar(t,e[a][0],n,e[a][1],s);return r},r._getObjVar=function(t,i,e,n,s){if(t.hasOwnProperty(i)){var r=t[i];return e>=r.length&&(e=r.length-1),t[i][e]}return s.hasOwnProperty(i)?s[i]:n},r._getNodeGraphicData=function(t,n,s){s||(s=new e),s.transform?s.transform.identity():s.transform=new $e;var r=this.getNodeDataByID(t);if(!r)return s;var a=r.frames,o=this._getParams(a,i._drawTextureCmd,n,this._nodeDefaultProps[t]),h=o[0],l=0/0,c=0/0,u=o[5],d=o[6],_=o[13],p=o[14],f=o[7],m=o[8],g=o[9],v=o[11],S=o[12];l=o[3],c=o[4],(0==l||0==c)&&(h=null),-1==l&&(l=0),-1==c&&(c=0);var y;s.skin=h,s.width=l,s.height=c,h&&(y=this._getTextureByUrl(h),y?(l||(l=y.sourceWidth),c||(c=y.sourceHeight)):console.warn("lost skin:",h,",you may load pics first")),s.alpha=o[10];var C=s.transform;0!=_&&(u=_*l),0!=p&&(d=p*c),(0!=u||0!=d)&&C.translate(-u,-d);var E=null;if(g||1!==f||1!==m||v||S){E=i._tempMt,E.identity(),E._bTransform=!0;var b=.0174532922222222*(g-v),I=.0174532922222222*(g+S),x=Math.cos(I),P=Math.sin(I),D=Math.sin(b),A=Math.cos(b);E.a=f*x,E.b=f*P,E.c=-m*D,E.d=m*A,E.tx=E.ty=0}return E&&(C=$e.mul(C,E,C)),C.translate(o[1],o[2]),s},r._getTextureByUrl=function(t){return Fn.getRes(t)},r.setAniData=function(t,e){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var n,s={},r=[],a=t.animations,o=0,h=a.length;for(o=0;h>o;o++)if(n=a[o],this._labels=null,(!e||e==n.name)&&n){try{this._calGraphicData(n)}catch(l){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[]}var c={};c.interval=1e3/n.frameRate,c.frames=this._gList,c.labels=this._labels,c.name=n.name,r.push(c),s[n.name]=c}this.animationList=r,this.animationDic=s}i._temParam.length=0},r.parseByData=function(t){var i,e;i=t.nodeRoot,e=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=i,this._parseNodeList(i),this._labels=null;try{this._calGraphicData(e)}catch(n){console.warn("parse animation fail:"+e.name+",empty animation created"),this._gList=[]}var s=t;return s.interval=1e3/e.frameRate,s.frames=this._gList,s.labels=this._labels,s.name=e.name,s},r.setUpAniData=function(t){if(t.animations){var i,e={},n=[],s=t.animations,r=0,a=s.length;for(r=0;a>r;r++)if(i=s[r]){var o={};o.name=i.name,o.aniO=i,o.nodeRoot=t,n.push(o),e[i.name]=o}this.animationList=n,this.animationDic=e}},r._clear=function(){this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic=null},i.parseAnimationByData=function(t){i._I||(i._I=new i);var e;return e=i._I.parseByData(t),i._I._clear(),e},i.parseAnimationData=function(t){i._I||(i._I=new i),i._I.setUpAniData(t);var e;return e={},e.animationList=i._I.animationList,e.animationDic=i._I.animationDic,i._I._clear(),e},i._temParam=[],i._I=null,i._rootMatrix=null,n(i,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new $e}]),i.__init$=function(){e=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=0/0,this.height=0/0,this.alpha=1}return s(t,""),t}()},i}(ba),vl=function(t){function i(t,e){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,i.__super.call(this),t&&(this.skin=t),e&&(this.sheet=e)}s(i,"laya.ui.FontClip",t);var n=i.prototype;return n.createChildren=function(){this._bitmap=new ss,this.on("loaded",this,this._onClipLoaded)},n._onClipLoaded=function(){this.callLater(this.changeValue)},n.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var t;if(t=this._sources[0]){var i="horizontal"===this._direction;i?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var e=0;if(this._width)switch(this._align){case"center":e=.5*(this._width-this._wordsW);break;case"right":e=this._width-this._wordsW;break;default:e=0}for(var n=0,s=this._valueArr.length;s>n;n++){var r=this._indexMap[this._valueArr.charAt(n)];this.sources[r]&&(t=this.sources[r],i?this.graphics.drawImage(t,e+n*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawImage(t,0+e,n*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged)),this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}},n.measureWidth=function(){return this._wordsW},n.measureHeight=function(){return this._wordsH},n.destroy=function(i){void 0===i&&(i=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),t.prototype.destroy.call(this,i)},r(0,n,"sheet",function(){return this._sheet},function(t){t+="",this._sheet=t;var i=t.split(" ");this._clipX=String(i[0]).length,this.clipY=i.length,this._indexMap={};for(var e=0;e<this._clipY;e++)for(var n=i[e].split(""),s=0,r=n.length;r>s;s++)this._indexMap[n[s]]=e*this._clipX+s}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Pa,this,"height",t),this.callLater(this.changeValue)}),r(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeValue)}),r(0,n,"value",function(){return this._valueArr?this._valueArr:""},function(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Pa,this,"width",t),this.callLater(this.changeValue)}),r(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}),r(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),r(0,n,"align",function(){return this._align},function(t){this._align=t,this.callLater(this.changeValue)}),i}(Pa),Sl=function(t){function i(t){this._bg=null,this._skin=null,i.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}s(i,"laya.ui.TextInput",t);var n=i.prototype;return n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._bg&&this._bg.destroy(),this._bg=null},n.createChildren=function(){this.addChild(this._tf=new ka),this._tf.padding=je.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},n._onFocus=function(){this.event("focus",this)},n._onBlur=function(){this.event("blur",this)},n._onInput=function(){this.event("input",this)},n._onEnter=function(){this.event("enter",this)},n.initialize=function(){this.width=128,this.height=22},n._skinLoaded=function(){this._bg||(this.graphics=this._bg=new ss),this._bg.source=Fn.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height),this._sizeChanged(),this.event("loaded")},n.select=function(){this._tf.select()},n.setSelection=function(t,i){this._tf.setSelection(t,i)},r(0,n,"text",t.prototype._$get_text,function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event("change"))}),r(0,n,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),r(0,n,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),r(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!Fn.getRes(this._skin)?e.loader.load(this._skin,c.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),r(0,n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new ss),this._bg.sizeGrid=hn.fillArray(je.defaultSizeGrid,t,Number)}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Da,this,"width",t),this._bg&&(this._bg.width=t)}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Da,this,"height",t),this._bg&&(this._bg.height=t)}),r(0,n,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),r(0,n,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),r(0,n,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t}),r(0,n,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t}),r(0,n,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),r(0,n,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t}),r(0,n,"type",function(){return this._tf.type},function(t){this._tf.type=t}),i}(Da),yl=function(t){function i(){this.cutdata=null,this.horilinelist=null,this.verlinelist=null,this.linenum=19,this.color1="#000000",this.color2="#ffffff",this.linethick=2,this.curColorIndex=0,i.__super.call(this),this.horilinelist=[],this.verlinelist=[],this.horiInput.on("input",this,this.onHoriInput),this.vertInput.on("input",this,this.onVerInput),this.horiAdd.on("click",this,this.onAddHoriNum),this.horiSub.on("click",this,this.onSubHoriNum),this.verAdd.on("click",this,this.onAddVertNum),this.verSub.on("click",this,this.onSubVertNum),this.horiInput.on("focus",this,this.onSelectHori),this.vertInput.on("focus",this,this.onSelectVert)}s(i,"script.order.AvgCutImage",t);var n=i.prototype;return n.onSelectHori=function(){this.horiInput.select()},n.onSelectVert=function(){this.vertInput.select()},n.onAddHoriNum=function(){var t=parseInt(this.horiInput.text)+1;this.horiInput.text=t+"",this.cutdata.orderitemvo.horiCutNum=t,this.onHoriNumChange()},n.onSubHoriNum=function(){var t=parseInt(this.horiInput.text)-1;1>t||(this.horiInput.text=t+"",this.cutdata.orderitemvo.horiCutNum=t,this.onHoriNumChange())},n.onAddVertNum=function(){var t=parseInt(this.vertInput.text)+1;this.vertInput.text=t+"",this.cutdata.orderitemvo.verCutNum=t,this.onVerNumChange()},n.onSubVertNum=function(){var t=parseInt(this.vertInput.text)-1;1>t||(this.vertInput.text=t+"",this.cutdata.orderitemvo.verCutNum=t,this.onVerNumChange())},n.setData=function(t){this.cutdata=t,this.horiInput.text=this.cutdata.orderitemvo.horiCutNum,this.vertInput.text=this.cutdata.orderitemvo.verCutNum,this.initView(),e.timer.clearAll(this),e.timer.loop(500,this,this.onReDrawLine)},n.onReDrawLine=function(){this.onHoriNumChange(),this.onVerNumChange(),this.curColorIndex=(this.curColorIndex+1)%2},n.onHoriInput=function(){""!=this.horiInput.text&&(parseInt(this.horiInput.text)<1&&(this.horiInput.text="1"),this.cutdata.orderitemvo.horiCutNum=parseInt(this.horiInput.text),this.onHoriNumChange())},n.onVerInput=function(){""!=this.vertInput.text&&(parseInt(this.vertInput.text)<1&&(this.vertInput.text="1"),this.cutdata.orderitemvo.verCutNum=parseInt(this.vertInput.text),this.onVerNumChange())},n.initView=function(){var t=this.cutdata.finalWidth,i=this.cutdata.finalHeight;t>i?(this.paintimg.width=400,this.paintimg.height=400*i/t):(this.paintimg.height=400,this.paintimg.width=400*t/i),this.paintimg.skin=W.biggerPicUrl+this.cutdata.fid+("PNG"==this.cutdata.orderitemvo.picinfo.picClass.toUpperCase()?".png":".jpg"),this.onHoriNumChange(),this.onVerNumChange()},n.onVerNumChange=function(){for(var t=0;t<this.verlinelist.length;t++)this.verlinelist[t].graphics.clear(!0),this.verlinelist[t].removeSelf(),this.verlinelist.splice(t,1),t--;var i=0;i=this.paintimg.width/this.cutdata.orderitemvo.verCutNum,this.widthNum.text=(this.cutdata.finalWidth/this.cutdata.orderitemvo.verCutNum).toFixed(2);for(var t=0;t<this.cutdata.orderitemvo.verCutNum+1;t++){var e=new ls;this.paintimg.addChild(e);for(var n=this.paintimg.height/this.linenum,s=0;s<this.linenum;s++)s%2==0?e.graphics.drawLine(t*i,s*n,t*i,(s+1)*n,0==this.curColorIndex?this.color1:this.color2,this.linethick):e.graphics.drawLine(t*i,s*n,t*i,(s+1)*n,0==this.curColorIndex?this.color2:this.color1,this.linethick);this.verlinelist.push(e)}},n.onHoriNumChange=function(){for(var t=0;t<this.horilinelist.length;t++)this.horilinelist[t].graphics.clear(!0),this.horilinelist[t].removeSelf(),this.horilinelist.splice(t,1),t--;var i=0;i=this.paintimg.height/this.cutdata.orderitemvo.horiCutNum,this.heightNum.text=(this.cutdata.finalHeight/this.cutdata.orderitemvo.horiCutNum).toFixed(2);for(var t=0;t<this.cutdata.orderitemvo.horiCutNum+1;t++){var e=new ls;this.paintimg.addChild(e);for(var n=this.paintimg.width/this.linenum,s=0;s<this.linenum;s++)s%2==0?e.graphics.drawLine(s*n,t*i,(s+1)*n,t*i,0==this.curColorIndex?this.color1:this.color2,this.linethick):e.graphics.drawLine(s*n,t*i,(s+1)*n,t*i,0==this.curColorIndex?this.color2:this.color1,this.linethick);this.horilinelist.push(e)}},i}(Ba),Cl=function(t){function i(){this.categoryData=null,i.__super.call(this),this.frame.visible=!1,this.on("mouseover",this,function(){this.frame.visible=!0}),this.on("mouseout",this,function(){this.frame.visible=!1}),this.on("doubleclick",this,this.onChooseCategory)}s(i,"script.prodCustomer.item.ProdCategoryCell",t);var e=i.prototype;return e.setData=function(t){this.categoryName.text=t.cateName},e.onChooseCategory=function(){E.instance.openView("VIEW_PRODUCT_CHOOSE_PANEL",!0,this.categoryData)},i}(Ua),El=function(t){function i(){i.__super.call(this)}s(i,"script.usercenter.item.TransactionListItem",t);var e=i.prototype;return e.setData=function(t){this.transtype.text=m.TYPE_NAME[t.type],this.transtime.text=t.date,this.amounttxt.text=t.amount+"",g.instance.isHidePrice()&&(this.amounttxt.text="****"),this.orderinfo.text="","0"!=t.orid&&(this.orderinfo.text="订单号:"+t.orid)},i}(Ya),bl=function(t){function i(){i.__super.call(this)}s(i,"script.usercenter.item.InvoiceDetailItem",t);var e=i.prototype;return e.setData=function(t){this.manufacture.text=t.fc_name,this.timetxt.text=t.fct_date.split(" ")[0],this.money.text="￥"+t.fct_amount+"元",this.state.text=["未开票","开票中","已开票"][parseInt(t.fct_state)],this.state.color=["#DD0000","#223344","#00FF00"][parseInt(t.fct_state)]},i}(Xa),Il=function(t){function i(){this.billData=null,i.__super.call(this)}s(i,"script.usercenter.item.InvoiceItemCell",t);var e=i.prototype;return e.setData=function(t){this.manufacture.text=t.fcName,this.datetxt.text=t.startTime+"至"+t.endTime,this.money.text="￥"+t.amount.toFixed(1)+"元",this.statetxt.text="待开票",this.selcheck.selected=!0,this.selcheck.on("change",this,this.changeSel),this.billData=t,this.billData.selected=!0},e.changeSel=function(){this.billData.selected=this.selcheck.selected,Ln.instance.event("INVOICE_SELECTED_CHANGE")},i}(qa),xl=function(t){function i(){this.addvo=null,i.__super.call(this)}s(i,"script.usercenter.CompanyAddressItem",t);var e=i.prototype;return e.setData=function(t){this.addvo=t,this.conName.text=t.receiverName,this.phonetxt.text=t.phone,this.detailaddr.text=t.proCityArea,this.btnDel.on("click",this,this.onDeleteAddr),this.btndefault.on("click",this,this.onSetDefaultAddr),this.btndefault.visible=g.instance.defaultAddId!=this.addvo.id,this.defaultlbl.visible=g.instance.defaultAddId==this.addvo.id},e.onDeleteAddr=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该地址吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+"org/express/delete?",this,this.delMyAddressBack,JSON.stringify({id:this.addvo.id}),"post")},e.delMyAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_MYADDRESS_LIST")},e.onEditAddr=function(){E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,this.addvo)},e.onSetDefaultAddr=function(){W.instance.Request(W.httpUrl+"org/express/setDefault?",this,this.defaultAddressBack,JSON.stringify({id:this.addvo.id}),"post")},e.defaultAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&(g.instance.defaultAddId=this.addvo.id,Ln.instance.event("UPDATE_MYADDRESS_LIST"))},i}(Ka),Pl=(function(t){function i(){this.matvo=null,this.matCategoryVo=null,i.__super.call(this)}s(i,"script.workpanel.items.MaterialCell",t);var e=i.prototype;return e.setData=function(t){this.offAllCaller(this),t.prodName?(this.matvo=t,this.matbtn.label=this.matvo.prodName+(this.matvo.isClientProd?"(自有)":""),this.on("click",this,this.onClickMat,[this.matvo]),this.moreBtn.visible=!1,this.grayimg.visible=k.instance.checkExceedMaterialSize(this.matvo),this.selfIcon.visible=this.matvo.isClientProd,this.mouseEnabled=!k.instance.checkExceedMaterialSize(this.matvo),this.manuFacIcon.skin="commers/"+K.OUTPUT_ICON[k.instance.getManuFactureIndex(t.manufacturer_code)]):(this.matCategoryVo=t,this.matbtn.label=this.matCategoryVo.matclassname,this.moreBtn.visible=!1,this.grayimg.visible=!1,this.selfIcon.visible=!1,this.mouseEnabled=!0,this.manuFacIcon.skin="",this.on("click",this,this.onClickMatCategory),this.moreBtn.on("click",this,this.moreMaterial),this.on("mouseover",this,function(){this.moreBtn.visible=!0
}),this.on("mouseout",this,function(){this.moreBtn.visible=!1}))},e.onClickMat=function(t){if(k.instance.checkExceedMaterialSize(t))return E.showAlert("有图片超出材料的最大尺寸"),void 0;if(!k.instance.checkUnFitFileType(t)){var i=t;if(null!=t.procTreeList&&t.procTreeList.length>0)t.resetData(),k.instance.curSelectMat=t,Ln.instance.event("SHOW_SELECT_TECH"),E.instance.closeView("VIEW_MORE_PRODUCT_PANEL");else{{var i=t;k.instance.getSelectedOutPutCenter()}W.instance.Request(W.httpUrl+"business/getProcFlow?prodCode="+i.prodCode+"&manufacturerCode="+i.manufacturerCode,this,function(t){var e=JSON.parse(t);if(!e.hasOwnProperty("status")){k.instance.curSelectMat=i,k.instance.curSelectMat.procTreeList=[];for(var n=0;n<e.length;n++){var s=new y(e[n].procFlowNode);k.instance.curSelectMat.procTreeList.push(s)}E.instance.closeView("VIEW_MORE_PRODUCT_PANEL"),Ln.instance.event("SHOW_SELECT_TECH")}},null,null)}}},e.moreMaterial=function(t){null!=this.matCategoryVo.childMatList?E.instance.openView("VIEW_MORE_PRODUCT_PANEL",!1,this.matCategoryVo):this.getCatergoryProduct(this.openMoreProduct),t.stopPropagation()},e.openMoreProduct=function(){E.instance.openView("VIEW_MORE_PRODUCT_PANEL",!1,this.matCategoryVo)},e.onClickMatCategory=function(){null!=this.matCategoryVo.childMatList?this.getDefaultMaterialId():this.getCatergoryProduct(this.getDefaultMaterialId)},e.getDefaultMaterialId=function(){var t=this;null==this.matCategoryVo.defaultProductId?W.instance.Request(W.httpUrl+"account/get-product-default-category?name="+this.matCategoryVo.matclassname,this,function(i){var e=JSON.parse(i);0==e.status&&0!=e.data.id&&(t.matCategoryVo.defaultProductId=e.data.productid),this.destroyed||t.chooseDefaultMat()},null,null):this.chooseDefaultMat()},e.chooseDefaultMat=function(){for(var t=0;t<this.matCategoryVo.childMatList.length;t++)if(this.matCategoryVo.childMatList[t].prod_code==this.matCategoryVo.defaultProductId)return this.onClickMat(this.matCategoryVo.childMatList[t]),void 0;if(this.matCategoryVo.childMatList.length>0){this.onClickMat(this.matCategoryVo.childMatList[0]);var i="name="+this.matCategoryVo.matclassname+"&categoryid="+this.matCategoryVo.nodeId+"&productid="+this.matCategoryVo.childMatList[0].prod_code;W.instance.Request(W.httpUrl+"account/update-product-default-category?",null,null,i,"post")}},e.getCatergoryProduct=function(t){var i=this,e=k.instance.getSelectedOutPutCenter();W.instance.Request(W.httpUrl+"business/listProduct?webCode=001&addressId="+k.instance.selectAddress.zoneid+"&prodCatName="+this.matCategoryVo.matclassname+"&manufacturerCodeList="+e.toString()+"&customerCode="+g.instance.founderPhone+"&clientCode="+g.instance.clientCode,this,function(e){if(!this.destroyed){var n=JSON.parse(e);if(!n.hasOwnProperty("status")){i.matCategoryVo.childMatList=[];for(var s={},r=0;r<n.length;r++)if(s.hasOwnProperty(n[r].prodCode))s[n[r].prodCode].priority>k.instance.getManuFacturePriority(n[r].manufacturerCode)?(a=new v(n[r]),a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a):n[r].isClientProd&&(a=new v(n[r]),s[n[r].uniqueCode]=a);else{var a=new v(n[r]);a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a}for(var o in s)i.matCategoryVo.childMatList.push(s[o]);i.matCategoryVo.childMatList.sort(i.sortMaterial),t&&t.call(this)}}},null,null)},e.sortMaterial=function(t,i){for(var e=t.materialCode,n=i.materialCode,s="",r=0;r<e.length;r++)e.charCodeAt(r)<=57&&e.charCodeAt(r)>=48&&(s+=e[r]);for(var a="",r=0;r<n.length;r++)n.charCodeAt(r)<=57&&n.charCodeAt(r)>=48&&(a+=n[r]);return parseInt(s)<=parseInt(a)?-1:1},e.onGetProcessListBack=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){k.instance.curSelectMat=this.matvo,k.instance.curSelectMat.procTreeList=[];for(var e=0;e<i.length;e++)k.instance.curSelectMat.prodName.indexOf("户内")>=0&&i[e].procCat_Name.indexOf("户外")>=0&&E.showAlert("材料与工艺不匹配"),k.instance.curSelectMat.prodName.indexOf("户外")>=0&&i[e].procCat_Name.indexOf("户内")>=0&&E.showAlert("材料与工艺不匹配"),k.instance.curSelectMat.procTreeList.push(new q(i[e]));Ln.instance.event("SHOW_SELECT_TECH")}},r(0,e,"ShowSelected",null,function(){}),i}(Qa),function(t){function i(){this.picdata=null,i.__super.call(this),this.partWhiteBtn.on("click",this,this.onRelatePartWhite),this.yixingBtn.on("click",this,this.onRelateYixing)}s(i,"script.order.item.AICutImageCell",t);var e=i.prototype;return e.setData=function(t){this.picdata=t;var i=JSON.parse(t.properties);parseInt(i.width)>parseInt(i.height)?(this.aiImg.width=200,this.aiImg.height=200/parseInt(i.width)*parseInt(i.height)):(this.aiImg.height=200,this.aiImg.width=200/parseInt(i.height)*parseInt(i.width)),this.imgName.text=this.picdata.route,this.partWhiteBtn.selected=this.picdata.picInfo.partWhiteFid==this.picdata.name,this.yixingBtn.selected=this.picdata.picInfo.yixingFid==this.picdata.name},e.onRelatePartWhite=function(){if(this.picdata.picInfo.partWhiteFid==this.picdata.name)var t={fileId:this.picdata.fid,targetId:"0"};else t={fileId:this.picdata.fid,targetId:this.picdata.name};W.instance.Request(W.httpUrl+"fs/img/setPartWhite",this,this.onSetPartWhiteBack,JSON.stringify(t),"post")},e.onSetPartWhiteBack=function(t){var i=JSON.parse(t);"0"==i.code&&(console.log("设置成功"),Ln.instance.event("UPDATE_FILE_LIST"),this.picdata.picInfo.partWhiteFid!=this.picdata.name?Ln.instance.event("UPDATE_RELATED_PIC",["partWhiteFid",this.picdata.name]):Ln.instance.event("UPDATE_RELATED_PIC",["partWhiteFid","0"]))},e.onRelateYixing=function(){if(this.picdata.picInfo.yixingFid==this.picdata.name)var t={fileId:this.picdata.fid,targetId:"0"};else t={fileId:this.picdata.fid,targetId:this.picdata.name};W.instance.Request(W.httpUrl+"fs/img/setMask",this,this.onSetRelatedBack,JSON.stringify(t),"post")},e.onSetRelatedBack=function(t){var i=JSON.parse(t);"0"==i.code&&(console.log("设置成功"),Ln.instance.event("UPDATE_FILE_LIST"),this.picdata.picInfo.yixingFid!=this.picdata.name?Ln.instance.event("UPDATE_RELATED_PIC",["yixingFid",this.picdata.name]):Ln.instance.event("UPDATE_RELATED_PIC",["yixingFid","0"]))},i}(io)),Dl=function(t){function i(){this.addressVo=null,i.__super.call(this),this.checksel.on("change",this,this.selectData)}s(i,"script.usercenter.item.VipAddressCell",t);var e=i.prototype;return e.setData=function(t){this.addressVo=t,this.checksel.selected=this.addressVo.selected,this.conName.text=this.addressVo.receiverName,this.phonetxt.text=this.addressVo.phone,this.detailaddr.text=this.addressVo.proCityArea,this.btnDel.on("click",this,this.onDeleteAddr),this.btnedit.on("click",this,this.onEditAddr)},e.onDeleteAddr=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该地址吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+"org/express/group/pagingExpress?",this,this.delMyAddressBack,"opt=delete&id="+this.addressVo.id,"post")},e.delMyAddressBack=function(t){var i=JSON.parse(t);0==i.status&&Ln.instance.event("UPDATE_MYADDRESS_LIST")},e.onEditAddr=function(){E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{url:"org/express/group/pagingExpress?",address:this.addressVo})},e.selectData=function(){null!=this.addressVo&&(this.addressVo.selected=this.checksel.selected,Ln.instance.event("CHANGE_ADDRESS_SELECTED_STATE",this.addressVo))},e.changeSelectState=function(t){null!=this.addressVo&&(this.checksel.selected=t,this.addressVo.selected=t)},i}(ro),Al=function(t){function i(){this.invoicedata=null,i.__super.call(this)}s(i,"script.usercenter.item.InvoiceHistoryCell",t);var e=i.prototype;return e.setData=function(t){this.invoicedata=t,this.companyname.text=t.invoiceName,this.addr.text=t.customerAddr,this.bank.text=t.customerBankInfo,this.statetxt.text=["开票中","开票成功","开票失败"][t.isFinished],this.amounttxt.text="￥"+t.invoiceAmount+"元",1==t.isFinished&&t.isDigitalInvoice?(this.loadtxt.visible=!0,this.loadtxt.on("click",this,this.onDownLoad)):this.loadtxt.visible=!1,this.cancetxt.visible=2==t.isFinished,this.cancetxt.on("click",this,this.onCancelInvoice)},e.onDownLoad=function(){Ti.window.open("about:self","_blank").location.href=this.invoicedata.downloadInfo},e.onCancelInvoice=function(){W.instance.Request(W.httpUrl+"group/cancel-invoice",this,this.cancelInvoiceBack,"id="+this.invoicedata.requestNo,"post")},e.cancelInvoiceBack=function(t){if(!this.destroyed){var i=JSON.parse(t);0==i.status&&Ln.instance.event("UPDATE_INVOICE_LIST")}},i}(ao),Ll=function(t){function i(){this.joindata=null,i.__super.call(this)}s(i,"script.usercenter.item.ApplyJoinItem",t);var e=i.prototype;return e.setData=function(t){this.joindata=t,this.account.text=t.mobileNumber,this.msgtxt.text=t.msg,this.reqdate.text=t.createdAt,this.agreebtn.on("click",this,this.onAgreeJoin),this.refusebtn.on("click",this,this.onRefuseJoin)},e.onAgreeJoin=function(){Ln.instance.event("AGREE_JOIN_REQUEST",this.joindata)},e.onRefuseJoin=function(){var t={id:this.joindata.id,action:"2"};W.instance.Request(W.httpUrl+"org/handleJoinReq?",this,this.onhandleBack,JSON.stringify(t),"post")},e.onhandleBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("REFRESH_JOIN_REQUEST")},i}(Na),kl=function(t){function i(t){if(this.ordervo=null,this.locked=!0,this.finalWidth=0/0,this.finalHeight=0/0,this.curproductvo=null,this.fanmianFid=null,this.discount=1,i.__super.call(this),this.ordervo=t,Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.updateLblPos(g.instance.shrinkState),this.initItem(),null!=this.ordervo.orderData){this.curproductvo=this.ordervo.productVo,this.inputnum.text=this.ordervo.orderData.itemNumber;var e=this.ordervo.orderData.conponent.LWH.split("/");e.length>1&&(this.editwidth.text=e[0],this.editheight.text=e[1],this.finalWidth=parseFloat(e[0]),this.finalHeight=parseFloat(e[1])),this.initEditData()}}s(i,"script.lailiao.LailiaoOrderItemCell",t);var e=i.prototype;return e.updateLblPos=function(t){0==t?(this.deletBtn.x=1466,this.total.x=1314,this.unitPrice.x=1223):(this.deletBtn.x=1566,this.total.x=1415,this.unitPrice.x=1324)},e.initItem=function(){this.numindex.text=this.ordervo.indexNum.toString(),this.subtn.on("click",this,this.onSubItemNum),this.addbtn.on("click",this,this.onAddItemNum),this.hascomment.visible=!1,this.addmsg.visible=!1,0==this.ordervo.type?(this.fileimg.skin=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,this.ordervo.picinfo.picWidth>this.ordervo.picinfo.picHeight?(this.fileimg.width=108,this.fileimg.height=108/this.ordervo.picinfo.picWidth*this.ordervo.picinfo.picHeight):(this.fileimg.height=108,this.fileimg.width=108/this.ordervo.picinfo.picHeight*this.ordervo.picinfo.picWidth)):this.fileimg.skin="commers/blackbg.png",this.yixingimg.width=this.fileimg.width,this.yixingimg.height=this.fileimg.height,this.backimg.width=this.fileimg.width,this.backimg.height=this.fileimg.height,this.yingxback.width=this.fileimg.width,this.yingxback.height=this.fileimg.height,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.fileimg.on("click",this,this.onShowBigImg),this.backimg.on("click",this,this.onShowBackImg),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),this.editwidth.restrict="0-9.",this.editheight.restrict="0-9.",this.filename.text=this.ordervo.picinfo.directName,this.architype.text=this.ordervo.techStr,this.total.text="0",this.deleteorder.underline=!0,this.deleteorder.underlineColor="#222222",this.inputnum.text="1",this.inputnum.restrict="0-9",this.deletBtn.on("click",this,this.onDeleteOrder),this.addmsg.underline=!0,this.addmsg.underlineColor="#222222",this.addmsg.on("click",this,this.onAddComment),this.total.visible=!g.instance.isHidePrice(),this.unitPrice.text="0",this.inputnum.on("input",this,this.onNumChange),this.editwidth.on("input",this,this.onWidthSizeChange),this.editheight.on("input",this,this.onHeightSizeChange),this.lockratio.on("click",this,this.onLockChange),this.architype.height=this.architype.textField.textHeight>124?this.architype.textField.textHeight:124,this.manuicon.visible=!1,this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.setMatBtn.on("click",this,this.onShowMaterialView),this.editmat.on("click",this,this.onShowMaterialView),this.height=this.architype.height>124?this.architype.height+10:134,this.alighComponet()},e.initEditData=function(){this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.manuicon.visible=!0,this.manuicon.skin="commers/"+K.OUTPUT_ICON[k.instance.getManuFactureIndex(this.curproductvo.manufacturerCode)];for(var t=(this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100,this.ordervo.productVo),i=t.getAllSelectedTech(),e="",n="",s=!1,r=0;r<i.length;r++)"SPTE10320"==i[r].procCode||"SPTE230414160834510"==i[r].procCode?(s=!0,this.fanmianFid=this.ordervo.picinfo.fid):K.backSideUnSame(i[r].procCode)?(e=this.ordervo.picinfo.backFid,this.fanmianFid=e):K.yiXingCutProcess(i[r].procCode)&&(n=this.ordervo.picinfo.yixingFid);this.backimg.visible=""!=e||s,this.yingxback.visible=(""!=e||s)&&""!=n,""!=e&&(this.backimg.skin=W.biggerPicUrl+e+".jpg"),s&&(this.backimg.skin=W.biggerPicUrl+this.ordervo.picinfo.fid+".jpg"),this.yixingimg.visible=""!=n,""!=n&&(this.yixingimg.skin=W.biggerPicUrl+n+".jpg",this.yingxback.visible&&(this.yingxback.skin=W.biggerPicUrl+n+".jpg")),this.total.text=(parseInt(this.inputnum.text)*t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+"",this.unitPrice.text=this.ordervo.orderData.unitPrice;var a=t.getTechDes(!1,this.finalWidth,this.finalHeight);a.indexOf("超宽拼接")>=0&&(a=a.replace("超宽拼接","超宽拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("超幅拼接")>=0&&(a=a.replace("超幅拼接","超幅拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("小块裁切")>=0&&(a=a.replace("小块裁切","小块裁切(H-"+this.ordervo.horiCutNum+",V-"+this.ordervo.verCutNum+")")),a.indexOf("正上方打扣")>=0,this.architype.text=t.prodName+"\n"+a,this.architype.height=this.architype.textField.textHeight>134?this.architype.textField.textHeight:134,this.height=this.architype.height>134?this.architype.height+10:134,this.alighComponet()},e.reset=function(){this.architype.text="",this.unitPrice.text="0",this.total.text="0",this.ordervo.orderData=null,this.ordervo.productVo=null,this.curproductvo=null,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.manuicon.visible=!1,this.setMatBtn.visible=!0,this.editmat.visible=!1},e.onLockChange=function(){this.locked?(this.lockratio.skin="commers/unlock.png",this.locked=!1):(this.lockratio.skin="commers/lock.png",this.locked=!0)},e.onWidthSizeChange=function(){var t=Number(this.editwidth.text);if(this.finalWidth=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicWidth*this.ordervo.picinfo.picPhysicHeight;this.finalHeight=i,this.editheight.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onHeightSizeChange=function(){var t=Number(this.editheight.text);if(this.finalHeight=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicHeight*this.ordervo.picinfo.picPhysicWidth;this.finalWidth=i,this.editwidth.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onSubItemNum=function(){var t=parseInt(this.inputnum.text);t>1&&t--,this.inputnum.text=t.toString(),this.onNumChange()},e.onAddItemNum=function(){var t=parseInt(this.inputnum.text);t++,this.inputnum.text=t.toString(),this.onNumChange()},e.onShowBigImg=function(){if(1!=this.ordervo.type)if(this.yixingimg.visible){var t=[];t.push(this.ordervo.picinfo),t.push(this.yixingimg.skin),t.push(1),E.instance.openView("VIEW_PICTURE_CHECK",!1,t)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,this.ordervo.picinfo)},e.onShowBackImg=function(){var t=new p({},1);if(t.fid=this.fanmianFid,t.picWidth=this.ordervo.picinfo.picWidth,t.picHeight=this.ordervo.picinfo.picHeight,this.yingxback.visible){var i=[];i.push(t),i.push(this.yingxback.skin),i.push(-1),E.instance.openView("VIEW_PICTURE_CHECK",!1,i)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,t)},e.onAddComment=function(){E.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordervo.comment,caller:this,callback:this.onAddMsgBack})},e.onAddMsgBack=function(t){this.ordervo.comment=t,this.hascomment.visible=""!=this.ordervo.comment,this.ordervo.orderData&&(this.ordervo.orderData.comments=this.ordervo.comment)},e.alighComponet=function(){this.checkSel.y=(this.height-28)/2,this.numindex.y=(this.height-this.numindex.height)/2,this.fileimg.y=this.height/2,this.backimg.y=this.height/2,this.yingxback.y=this.height/2,this.yixingimg.y=this.height/2,this.filename.y=(this.height-this.filename.height)/2,this.editbox.y=(this.height-this.editbox.height)/2,this.numbox.y=this.height/2-12,this.total.y=(this.height-this.total.height)/2,this.editmat.y=(this.height-this.editmat.height)/2,this.deletBtn.y=(this.height-this.deletBtn.height)/2,this.operatebox.y=(this.height-this.operatebox.height)/2-10},e.updateIndex=function(){this.numindex.text=this.ordervo.indexNum.toString()},e.onDeleteOrder=function(){Ln.instance.event("DELETE_PIC_ORDER",this)},e.updatePrice=function(){if(null!=this.curproductvo){this.updateOrderData(this.curproductvo);{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onNumChange=function(){""==this.inputnum.text&&(this.inputnum.text="1"),this.total.text=(parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice*this.discount).toFixed(1).toString(),this.ordervo.orderData&&(this.ordervo.orderData.itemNumber=parseInt(this.inputnum.text),this.ordervo.orderData.item_payPrice=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))),Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onShowMaterialView=function(){if(null==k.instance.selectAddress)return E.showAlert("请选择收货地址"),void 0;if(null==k.instance.outPutAddr||0==k.instance.outPutAddr.length)return E.showAlert("当前的收货地址没有输出中心，请重新选择收货地址"),void 0;for(var t=0;t<k.instance.outPutAddr.length;t++)if(null==k.instance.allManuFacutreMatProcPrice[k.instance.outPutAddr[t].org_code])return E.showAlert("暂未获取到生产商材料工艺价格，请重新选择收货地址或稍后再试"),void 0;return null==k.instance.productList||0==k.instance.productList.length?(E.showAlert("未获取到材料列表，请重新选择收货地址或者刷新页面"),void 0):null==k.instance.selectAddress?(E.showAlert("请先选择收货地址"),void 0):0!=this.finalHeight&&0==this.ordervo.type&&Math.abs((this.finalWidth/this.finalHeight-this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight)/(this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight))>.2?(E.showAlert("修改图片比例不能超过原图比例的20%"),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),void 0):(k.instance.curSelectOrderItem=this,k.instance.batchChangeMatItems=[],k.instance.curSelectMat=null,"Zipai"==k.instance.orderType?E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!1,this.ordervo.picinfo):E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL",!1,this.ordervo.picinfo),void 0)},e.updateProductPrice=function(){if(null!=this.ordervo.orderData&&null!=this.curproductvo){this.updateOrderDataPrice();{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}},e.changeProduct=function(t){this.curproductvo=t.cloneData(this),this.ordervo.productVo=this.curproductvo,this.fanmianFid="",this.updateOrderData(this.curproductvo);var i=this.height;this.initEditData(),Ln.instance.event("ADJUST_PIC_ORDER_TECH",this.height-i)},e.getPrice=function(){return parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))},e.getNoDiscountPrice=function(){return null!=this.ordervo.orderData?parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice:0},e.updateOrderDataPrice=function(){if(null!=this.curproductvo&&null!=this.ordervo.orderData){{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.ordervo.orderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.orderData.itemPrice=this.ordervo.orderPrice.toString(),this.ordervo.orderData.discountProcessPrice=this.curproductvo.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderData.materialPrice=this.ordervo.orderPrice-this.ordervo.orderData.discountProcessPrice,this.ordervo.orderData.one_mat_cost=this.curproductvo.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var t=this.curproductvo.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);this.ordervo.orderData.one_proc_cost=t[0],this.ordervo.orderData.oneDiscountGrossMargin=t[1],this.ordervo.orderData.oneNoDiscountGrossMargin=t[2]}},e.updateOrderData=function(t){this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100;this.ordervo.orderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.noDiscountOrderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.manufacturer_code=t.manufacturerCode,this.ordervo.manufacturer_name=t.manufacturerName;var i={};i.material_code=t.materialCode,i.conponent={},i.conponent.prodName=t.prodName,i.conponent.prodCode=t.prodCode,i.conponent.num=1,i.conponent.LWH=this.finalWidth.toFixed(2)+"/"+this.finalHeight.toFixed(2)+"/1",i.conponent.prodDescription="",i.conponent.weight=t.getOrderSingleWeight(this.finalWidth/100,this.finalHeight/100,this.ordervo).toFixed(2),0==this.ordervo.type?(i.conponent.imageFilePath=W.originPicPicUrl+this.ordervo.picinfo.fid+"."+this.ordervo.picinfo.picClass,i.conponent.previewImagePath=W.biggerPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,i.conponent.thumbnailsPath=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix):i.conponent.previewImagePath="commers/blackbg.png",i.conponent.filename=this.ordervo.picinfo.directName,i.itemNumber=parseInt(this.inputnum.text),i.itemPrice=this.ordervo.orderPrice.toString(),i.actualAmount=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1)).toExponential(),i.isMerchandise=1,i.itemStatus="0",i.fixedDiscount=t.isFixedCustomerRatio,i.discountProcessPrice=t.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.materialPrice=this.ordervo.orderPrice-i.discountProcessPrice,i.unitPrice=this.ordervo.orderPrice-t.getAllAttachPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.unitPrice=i.unitPrice/(this.finalWidth/100*this.finalHeight/100),i.unitPrice=i.unitPrice.toFixed(2),i.one_mat_cost=t.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var e=t.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);i.one_proc_cost=e[0],i.gross_margin=e[1]+e[2],i.oneDiscountGrossMargin=e[1],i.oneNoDiscountGrossMargin=e[2];for(var n="",s=!1,r=this.ordervo.picinfo.directName.length-1;r>=0;r--)"."==this.ordervo.picinfo.directName.charAt(r)&&0==s?s=!0:s&&(n=this.ordervo.picinfo.directName.charAt(r)+n);i.comments=n.substr(0,20),i.conponent.procInfoList=t.getProInfoList(this.ordervo.picinfo,this.finalWidth/100,this.finalHeight/100,this.ordervo);for(var a=99999999,r=0;r<i.conponent.procInfoList.length;r++)(i.conponent.procInfoList[r].procDescription.indexOf("超幅拼接")>=0||i.conponent.procInfoList[r].procDescription.indexOf("超宽拼接")>=0)&&(a=this.ordervo.eachCutLength[0]);i.minSideLength=Math.min(this.finalWidth,this.finalHeight,a).toFixed(2),i.colorFormat=this.ordervo.picinfo.colorspace,this.ordervo.orderData=i},e.getProcessPrice=function(){return null!=this.curproductvo?this.curproductvo.getProcessPrice(this.finalWidth/100,this.finalHeight/100,this.ordervo)*parseInt(this.inputnum.text):0},e.checkCanOrder=function(){if(null==this.ordervo.orderData)return E.showAlert("未选择材料工艺"),!1;if(this.ordervo.orderData.conponent.prodName.indexOf("户内")>=0&&this.architype.text.indexOf("户外")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}if(this.ordervo.orderData.conponent.prodName.indexOf("户外")>=0&&this.architype.text.indexOf("户内")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}return null==this.ordervo.orderData.conponent.procInfoList||0==this.ordervo.orderData.conponent.procInfoList.length?(E.showAlert("未选择工艺"),!1):!0},i}(ho),Tl=function(t){function i(){this.matvo=null,this.matCategoryVo=null,i.__super.call(this),C.getInstance().addTips(this.tipImg,"点击查看材料效果图"),this.tipImg.on("click",this,this.showEffectImg)}s(i,"script.order.MaterialItem",t);var e=i.prototype;return e.setData=function(t){this.offAllCaller(this),this.tipImg.visible=!1,t.prodName?(this.matvo=t,this.matbtn.label=this.matvo.prodName+(this.matvo.isClientProd?"(自有)":""),this.on("click",this,this.onClickMat,[this.matvo]),this.moreBtn.visible=!1,this.grayimg.visible=k.instance.checkExceedMaterialSize(this.matvo),this.selfIcon.visible=this.matvo.isClientProd,this.mouseEnabled=!k.instance.checkExceedMaterialSize(this.matvo),this.manuFacIcon.skin="commers/"+K.OUTPUT_ICON[k.instance.getManuFactureIndex(t.manufacturerCode)],this.manufactureName.text=t.manufacturerName,this.manufactureName.visible=!1,this.on("mouseover",this,function(){this.manufactureName.visible=!0}),this.on("mouseout",this,function(){this.manufactureName.visible=!1}),this.tipImg.visible=null!=t.prodImage&&""!=t.prodImage):(this.matCategoryVo=t,this.matbtn.label=this.matCategoryVo.matclassname,this.moreBtn.visible=!1,this.grayimg.visible=!1,this.selfIcon.visible=!1,this.manufactureName.visible=!1,this.mouseEnabled=!0,this.manuFacIcon.skin="",this.on("click",this,this.onClickMatCategory),this.moreBtn.on("click",this,this.moreMaterial),this.on("mouseover",this,function(){this.moreBtn.visible=!0}),this.on("mouseout",this,function(){this.moreBtn.visible=!1}));var i=this.matbtn.text.textWidth+40;this.width=i,this.matbtn.width=i},e.showEffectImg=function(t){t.stopPropagation();var i={};i.title=this.matvo.prodName,i.url=this.matvo.prodImage,E.instance.openView("PRODUCT_PROC_EFFECT_PANEL",!1,i)},e.onClickMat=function(t){if(k.instance.checkExceedMaterialSize(t))return E.showAlert("有图片超出材料的最大尺寸"),void 0;if(!k.instance.checkUnFitFileType(t)){var i=t;if(null!=t.procTreeList&&t.procTreeList.length>0)t.resetData(),k.instance.curSelectMat=t,Ln.instance.event("SHOW_SELECT_TECH"),E.instance.closeView("VIEW_MORE_PRODUCT_PANEL");else{{var i=t;k.instance.getSelectedOutPutCenter()}W.instance.Request(W.httpUrl+"business/getProcFlow?prodCode="+i.prodCode+"&manufacturerCode="+i.manufacturerCode,this,function(t){var e=JSON.parse(t);if(!e.hasOwnProperty("status")){k.instance.curSelectMat=i,k.instance.curSelectMat.procTreeList=[];for(var n=0;n<e.length;n++){var s=new y(e[n].procFlowNode);k.instance.curSelectMat.procTreeList.push(s)}E.instance.closeView("VIEW_MORE_PRODUCT_PANEL"),Ln.instance.event("SHOW_SELECT_TECH")}},null,null)}}},e.moreMaterial=function(t){null!=this.matCategoryVo.childMatList?E.instance.openView("VIEW_MORE_PRODUCT_PANEL",!1,this.matCategoryVo):this.getCatergoryProduct(this.openMoreProduct),t.stopPropagation()},e.openMoreProduct=function(){E.instance.openView("VIEW_MORE_PRODUCT_PANEL",!1,this.matCategoryVo)},e.onClickMatCategory=function(){null!=this.matCategoryVo.childMatList?this.getDefaultMaterialId():this.getCatergoryProduct(this.getDefaultMaterialId)},e.getDefaultMaterialId=function(){var t=this;null==this.matCategoryVo.defaultProductId?W.instance.Request(W.httpUrl+"account/get-product-default-category?name="+this.matCategoryVo.matclassname,this,function(i){var e=JSON.parse(i);0==e.status&&0!=e.data.id&&(t.matCategoryVo.defaultProductId=e.data.productid),this.destroyed||t.chooseDefaultMat()},null,null):this.chooseDefaultMat()},e.chooseDefaultMat=function(){for(var t=0;t<this.matCategoryVo.childMatList.length;t++)if(this.matCategoryVo.childMatList[t].prod_code==this.matCategoryVo.defaultProductId)return this.onClickMat(this.matCategoryVo.childMatList[t]),void 0;if(this.matCategoryVo.childMatList.length>0){this.onClickMat(this.matCategoryVo.childMatList[0]);var i="name="+this.matCategoryVo.matclassname+"&categoryid="+this.matCategoryVo.nodeId+"&productid="+this.matCategoryVo.childMatList[0].prod_code;W.instance.Request(W.httpUrl+"account/update-product-default-category?",null,null,i,"post")}},e.getCatergoryProduct=function(t){var i=this,e=k.instance.getSelectedOutPutCenter();W.instance.Request(W.httpUrl+"business/listProduct?webCode=001&addressId="+k.instance.selectAddress.zoneid+"&prodCatName="+this.matCategoryVo.matclassname+"&manufacturerCodeList="+e.toString()+"&customerCode="+g.instance.founderPhone+"&clientCode="+g.instance.clientCode+"&orderSource="+k.instance.orderType,this,function(e){if(!this.destroyed){var n=JSON.parse(e);if(!n.hasOwnProperty("status")){i.matCategoryVo.childMatList=[];for(var s={},r=0;r<n.length;r++)if(s.hasOwnProperty(n[r].prodCode))s[n[r].prodCode].priority>k.instance.getManuFacturePriority(n[r].manufacturerCode)?(a=new v(n[r]),a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a):n[r].isClientProd&&(a=new v(n[r]),s[n[r].uniqueCode]=a);else{var a=new v(n[r]);a.priority=k.instance.getManuFacturePriority(a.manufacturerCode),s[n[r].prodCode]=a}for(var o in s)i.matCategoryVo.childMatList.push(s[o]);i.matCategoryVo.childMatList.sort(i.sortMaterial),t&&t.call(this)}}},null,null)},e.sortMaterial=function(t,i){for(var e=t.materialCode,n=i.materialCode,s="",r=0;r<e.length;r++)e.charCodeAt(r)<=57&&e.charCodeAt(r)>=48&&(s+=e[r]);for(var a="",r=0;r<n.length;r++)n.charCodeAt(r)<=57&&n.charCodeAt(r)>=48&&(a+=n[r]);return parseInt(s)<=parseInt(a)?-1:1},e.onGetProcessListBack=function(t){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){k.instance.curSelectMat=this.matvo,k.instance.curSelectMat.procTreeList=[];for(var e=0;e<i.length;e++)k.instance.curSelectMat.prodName.indexOf("户内")>=0&&i[e].procCat_Name.indexOf("户外")>=0&&E.showAlert("材料与工艺不匹配"),k.instance.curSelectMat.prodName.indexOf("户外")>=0&&i[e].procCat_Name.indexOf("户内")>=0&&E.showAlert("材料与工艺不匹配"),k.instance.curSelectMat.procTreeList.push(new q(i[e]));Ln.instance.event("SHOW_SELECT_TECH")}},r(0,e,"ShowSelected",null,function(){}),i}(Qa),Rl=function(t){function i(){this.techmainvo=null,this.isSelected=!1,this.processCatVo=null,this.attachVo=null,i.__super.call(this),C.getInstance().addTips(this.tipImg,"点击查看工艺效果图"),this.tipImg.on("click",this,this.showEffectImg)}s(i,"script.order.TechBoxItem",t);var e=i.prototype;
return e.setData=function(t){this.processCatVo=null,this.techmainvo=t,this.initView(),t.selected?this.setSelected(!0):this.setSelected(!1),(null!=this.techmainvo.parentMaterialVo&&this.techmainvo.parentMaterialVo.nextProcRequired||this.techmainvo.attachmentList.indexOf("SPpj")>=0)&&this.startshine(),this.grayimg.visible=!1,this.filters="2"==this.techmainvo.showType?[T.grayscaleFilter]:null,this.techBtn.disabled="2"==this.techmainvo.showType,"3"==this.techmainvo.showType&&this.startshine(),this.mouseEnabled="2"!=this.techmainvo.showType,this.grayimg.visible="2"==this.techmainvo.showType,this.grayimg.visible&&(this.techBtn.labelColors="#b1b1b1"),this.shineimg.visible=!1,this.tipImg.visible=null!=this.techmainvo.procImage&&""!=this.techmainvo.procImage},e.showEffectImg=function(t){t.stopPropagation();var i={};i.title=this.techmainvo.procName,i.url=this.techmainvo.procImage,E.instance.openView("PRODUCT_PROC_EFFECT_PANEL",!1,i)},e.onShowTips=function(){z.getInstance().setTipsContent("<span color='#FF0000' size='18'>请直接选择</span>","bigImg/firstAct.jpg")},e.onMoveTips=function(t){z.getInstance().showTips(t)},e.onHideTips=function(t){z.getInstance().removeTips(t)},e.updateState=function(){this.techBtn.disabled="2"==this.techmainvo.showType,this.mouseEnabled="2"!=this.techmainvo.showType,this.grayimg.visible="2"==this.techmainvo.showType,"3"==this.techmainvo.showType&&this.startshine()},e.startshine=function(){this.shineimg.visible=!0,this.startTween()},e.startTween=function(){Ni.to(this.shineimg,{alpha:0},300,dn.elasticIn,new c(this,this.onCompleteShine))},e.onCompleteShine=function(){Ni.to(this.shineimg,{alpha:1},300,dn.elasticIn,new c(this,this.startshine))},e.stopshine=function(){this.shineimg.visible=!1,Ni.clearAll(this.shineimg)},e.setAttachVo=function(t){this.processCatVo=null,this.techmainvo=null,this.attachVo=t,this.techBtn.label=this.attachVo.accessory_name,this.setSelected(!1)},e.setProcessData=function(t){this.techmainvo=null,this.processCatVo=t,this.techBtn.label=t.procCat_Name.split("-")[0]},e.initView=function(){this.techBtn.label=this.techmainvo.procName,this.techBtn.width=this.techBtn.text.textWidth+30,this.width=this.techBtn.width},e.setSelected=function(t){this.techBtn.selected=t,this.isSelected=t},e.setTechSelected=function(t){null!=this.techmainvo?(this.techmainvo.selected=t,this.techmainvo.attchMentFileId="",this.techmainvo.attchFileId="",this.techmainvo.selectAttachVoList=null):this.processCatVo.selected=t},e.onClickTech=function(){},i}(po),wl=function(t){function i(){this.purl=null,i.__super.call(this)}s(i,"script.product.ProductItemView",t);var e=i.prototype;return e.setData=function(t){this.pimg.skin="product/p"+(1+t.pid)+".jpg",this.purl=t.url,this.pdata=t,this.pimg.on("click",this,this.onJumptoTaobao)},e.onJumptoTaobao=function(){E.instance.openView("VIEW_BUY_PRODUCT_VIEW",!1,this.pdata)},i}(go),Ol=function(t){function i(){this.productvo=null,this.goodsOrCard=!1,i.__super.call(this)}s(i,"script.product.AdvertiseProItem",t);var e=i.prototype;return e.setData=function(t){this.productvo=t,null==t.goodsNum?(this.btnok.label="加入购物车",this.proNum.text="1",this.proPrice.text=this.productvo.mer_price+"",this.goodsOrCard=!0):(this.btnok.label="移出购物车",this.proNum.text=t.goodsNum+"",this.proPrice.text=this.productvo.mer_price*t.goodsNum+"",this.goodsOrCard=!1),this.proName.text=this.productvo.prod_name+"",this.btnadd.on("click",this,this.onAddNum),this.btnsub.on("click",this,this.onSubNum),this.btnok.on("click",this,this.onClickOk)},e.onAddNum=function(){var t=parseInt(this.proNum.text);t++,this.proNum.text=t.toString(),0==this.goodsOrCard&&(this.productvo.goodsNum=t,this.proPrice.text=(this.productvo.mer_price*t).toFixed(2)+"")},e.onSubNum=function(){var t=parseInt(this.proNum.text);t>1&&t--,this.proNum.text=t.toString(),0==this.goodsOrCard&&(this.productvo.goodsNum=t,this.proPrice.text=(this.productvo.mer_price*t).toFixed(2)+"")},e.onClickOk=function(){if(this.goodsOrCard){var t=new Rn(this.productvo);t.goodsNum=parseInt(this.proNum.text),Ln.instance.event("PRODUCT_ADD_GOODS",t)}else Ln.instance.event("PRODUCT_DELETE_GOODS",this)},i}(yo),Ml=function(t){function i(){this.cutdata=null,this.upholeList=null,this.bottomholelist=null,this.leftholelist=null,this.rightholelist=null,this.MIN_MARGIN=1,this.MAX_MARGIN=10,this.MIN_DISTANCE=5,this.MAX_DISTANCE=150,this.spRadius=20,this.curselectHole=null,this.curHolePoslist=null,this.curIndex=-1,i.__super.call(this),this.upholeList=[],this.bottomholelist=[],this.leftholelist=[],this.rightholelist=[],this.marginInput.on("input",this,this.onMarginInput),this.marginadd.on("click",this,this.onAddmargin),this.marginsub.on("click",this,this.onSubmargin),this.marginInput.restrict="0-9",this.upHoleInput.restrict="0-9",this.upHoleInput.on("input",this,this.onUpHomeNumChange),this.upHoleAdd.on("click",this,this.onAddUpHole),this.upHoleSub.on("click",this,this.onSubUpHole),this.bottomHoleInput.restrict="0-9",this.bottomHoleInput.on("input",this,this.onbottomHomeNumChange),this.bottomHoleAdd.on("click",this,this.onAddbottomHole),this.bottomHoleSub.on("click",this,this.onSubbottomHole),this.leftHoleInput.restrict="0-9",this.leftHoleInput.on("input",this,this.onleftHomeNumChange),this.leftHoleAdd.on("click",this,this.onAddleftHole),this.leftHoleSub.on("click",this,this.onSubleftHole),this.rightHoleInput.restrict="0-9",this.rightHoleInput.on("input",this,this.onrightHomeNumChange),this.rightHoleAdd.on("click",this,this.onAddrightHole),this.rightHoleSub.on("click",this,this.onSubrightHole),this.xposadd.on("click",this,this.onAddXpos),this.xpossub.on("click",this,this.onSubXpos),this.yposadd.on("click",this,this.onAddYpos),this.ypossub.on("click",this,this.onSubYpos),this.xposinput.on("input",this,this.onXPosChange),this.yposinput.on("input",this,this.onYPosChange)}s(i,"script.order.DakouCell",t);var e=i.prototype;return e.onMarginInput=function(){(""==this.marginInput.text||"0"==this.marginInput.text)&&(this.marginInput.text="1"),this.updateMargin()},e.onAddmargin=function(){var t=parseInt(this.marginInput.text);return t++,this.marginInput.text=t.toString(),t>10||1>t?(E.showAlert("孔边距取值范围为1-10"),void 0):(this.updateMargin(),void 0)},e.onSubmargin=function(){var t=parseInt(this.marginInput.text);if(!(1>=t))return t--,this.marginInput.text=t.toString(),t>10||1>t?(E.showAlert("孔边距取值范围为1-10"),void 0):(this.updateMargin(),void 0)},e.updateMargin=function(){var t=parseInt(this.marginInput.text);if(t>10||1>t)return E.showAlert("孔边距取值范围为1-10"),void 0;var i=this.cutdata.finalWidth,e=this.cutdata.finalHeight;this.cutdata.holeMargin=t;for(var n=0;n<this.cutdata.upHoles.length;n++)this.cutdata.upHoles[n].y=this.cutdata.holeMargin,this.upholeList[n].y=this.cutdata.upHoles[n].y/e*this.fileimg.height;for(var n=0;n<this.cutdata.bottomHoles.length;n++)this.cutdata.bottomHoles[n].y=e-this.cutdata.holeMargin,this.bottomholelist[n].y=this.cutdata.bottomHoles[n].y/e*this.fileimg.height-this.spRadius;for(var n=0;n<this.cutdata.leftHoles.length;n++)this.cutdata.leftHoles[n].x=this.cutdata.holeMargin,this.leftholelist[n].x=this.cutdata.leftHoles[n].x/i*this.fileimg.width;for(var n=0;n<this.cutdata.rightHoles.length;n++)this.cutdata.rightHoles[n].x=i-this.cutdata.holeMargin,this.rightholelist[n].x=this.cutdata.rightHoles[n].x/i*this.fileimg.width-this.spRadius;Ln.instance.event("BATCH_EDIT_DAKOU_CELL")},e.setData=function(t){this.cutdata=t,this.initView()},e.onAddUpHole=function(){var t=parseInt(this.upHoleInput.text);t++,this.upHoleInput.text=t+"",(""==this.upHoleInput.text||"0"==this.upHoleInput.text)&&(this.upHoleInput.text="1");var t=parseInt(this.upHoleInput.text);this.onVerticalHoleNumChange(t,0)},e.onSubUpHole=function(){var t=parseInt(this.upHoleInput.text);t--,t>=0&&(this.upHoleInput.text=t+""),""==this.upHoleInput.text&&(this.upHoleInput.text="1");var t=parseInt(this.upHoleInput.text);this.onVerticalHoleNumChange(t,0)},e.onAddbottomHole=function(){var t=parseInt(this.bottomHoleInput.text);t++,this.bottomHoleInput.text=t+"",""==this.bottomHoleInput.text&&(this.bottomHoleInput.text="0");var t=parseInt(this.bottomHoleInput.text);this.onVerticalHoleNumChange(t,1)},e.onSubbottomHole=function(){var t=parseInt(this.bottomHoleInput.text);t--,t>=0&&(this.bottomHoleInput.text=t+""),""==this.bottomHoleInput.text&&(this.bottomHoleInput.text="0");var t=parseInt(this.bottomHoleInput.text);this.onVerticalHoleNumChange(t,1)},e.onUpHomeNumChange=function(){""==this.upHoleInput.text&&(this.upHoleInput.text="0");var t=parseInt(this.upHoleInput.text);this.onVerticalHoleNumChange(t,0)},e.onbottomHomeNumChange=function(){""==this.bottomHoleInput.text&&(this.bottomHoleInput.text="0");var t=parseInt(this.bottomHoleInput.text);this.onVerticalHoleNumChange(t,1)},e.onVerticalHoleNumChange=function(t,i){var e=this.cutdata.finalWidth,n=e/(t+1);if(n<this.MIN_DISTANCE)return E.showAlert("孔数过多，请修改"),this.upHoleInput.text=this.upholeList.length+"",this.bottomHoleInput.text=this.bottomholelist.length+"",void 0;var s,r=0==i?this.cutdata.upHoles:this.cutdata.bottomHoles;s=0==i?this.upholeList:this.bottomholelist;var a=t-s.length;if(0>a)for(;s.length>t;)this.fileimg.removeChild(s[0]),s.splice(0,1);r.splice(0);for(var o=this.cutdata.finalWidth,h=this.cutdata.finalHeight,l=0==i?this.cutdata.holeMargin:h-this.cutdata.holeMargin,c=0;t>c;c++)r.push(new Oe(n*(c+1),l)),s.length<=c&&(s.push(this.createHole()),this.fileimg.addChild(s[c])),s[c].x=r[c].x/o*this.fileimg.width-this.spRadius/2,s[c].y=1==i?r[c].y/h*this.fileimg.height-this.spRadius:r[c].y/h*this.fileimg.height,s[c].on("click",this,this.onSelectHole,[r,s,c]);this.curselectHole=null,Ln.instance.event("BATCH_EDIT_DAKOU_CELL")},e.onAddleftHole=function(){var t=parseInt(this.leftHoleInput.text);t++,this.leftHoleInput.text=t+"",""==this.leftHoleInput.text&&(this.leftHoleInput.text="0");var t=parseInt(this.leftHoleInput.text);this.onHorizantalHoleNumChange(t,0)},e.onSubleftHole=function(){var t=parseInt(this.leftHoleInput.text);t--,t>=0&&(this.leftHoleInput.text=t+""),""==this.leftHoleInput.text&&(this.leftHoleInput.text="0");var t=parseInt(this.leftHoleInput.text);this.onHorizantalHoleNumChange(t,0)},e.onAddrightHole=function(){var t=parseInt(this.rightHoleInput.text);t++,this.rightHoleInput.text=t+"",""==this.rightHoleInput.text&&(this.rightHoleInput.text="0");var t=parseInt(this.rightHoleInput.text);this.onHorizantalHoleNumChange(t,1)},e.onSubrightHole=function(){var t=parseInt(this.rightHoleInput.text);t--,t>=0&&(this.rightHoleInput.text=t+""),""==this.rightHoleInput.text&&(this.rightHoleInput.text="0");var t=parseInt(this.rightHoleInput.text);this.onHorizantalHoleNumChange(t,1)},e.onleftHomeNumChange=function(){""==this.leftHoleInput.text&&(this.leftHoleInput.text="0");var t=parseInt(this.leftHoleInput.text);this.onHorizantalHoleNumChange(t,0)},e.onrightHomeNumChange=function(){""==this.rightHoleInput.text&&(this.rightHoleInput.text="0");var t=parseInt(this.rightHoleInput.text);this.onHorizantalHoleNumChange(t,1)},e.onHorizantalHoleNumChange=function(t,i){var e=this.cutdata.finalHeight,n=e/(t+1);if(n<this.MIN_DISTANCE)return E.showAlert("孔数过多，请修改"),this.leftHoleInput.text=this.leftholelist.length+"",this.rightHoleInput.text=this.rightholelist.length+"",void 0;var s,r=0==i?this.cutdata.leftHoles:this.cutdata.rightHoles;s=0==i?this.leftholelist:this.rightholelist;var a=t-s.length;if(0>a)for(;s.length>t;)this.fileimg.removeChild(s[0]),s.splice(0,1);r.splice(0);for(var o=this.cutdata.finalWidth,h=this.cutdata.finalHeight,l=0==i?this.cutdata.holeMargin:o-this.cutdata.holeMargin,c=0;t>c;c++)r.push(new Oe(l,n*(c+1))),s.length<=c&&(s.push(this.createHole()),this.fileimg.addChild(s[c])),s[c].x=1==i?r[c].x/o*this.fileimg.width-this.spRadius:r[c].x/o*this.fileimg.width,s[c].y=r[c].y/h*this.fileimg.height-this.spRadius/2,s[c].on("click",this,this.onSelectHole,[r,s,c]);this.curselectHole=null,Ln.instance.event("BATCH_EDIT_DAKOU_CELL")},e.onSelectHole=function(t,i,e){for(var n=this.upholeList.concat(this.bottomholelist).concat(this.leftholelist).concat(this.rightholelist),s=0;s<n.length;s++)n[s].greenhole.visible=!1;i[e].greenhole.visible=!0,this.curHolePoslist=t,this.curselectHole=i[e],this.curIndex=e,this.xposinput.text=this.curHolePoslist[e].x.toFixed(1)+"",this.yposinput.text=this.curHolePoslist[e].y.toFixed(1)+"",Ln.instance.event("SELECT_DAKOU_CELL",this)},e.moveHole=function(t){if(null!=this.curselectHole){var i=this.cutdata.finalWidth,e=this.cutdata.finalHeight;if(37==t.keyCode){if(this.curHolePoslist[this.curIndex].x-1<this.MIN_MARGIN)return;this.curHolePoslist[this.curIndex].x--}else if(39==t.keyCode){if(i-this.curHolePoslist[this.curIndex].x-1<this.MIN_MARGIN)return;this.curHolePoslist[this.curIndex].x++}else if(38==t.keyCode){if(this.curHolePoslist[this.curIndex].y-1<this.MIN_MARGIN)return;this.curHolePoslist[this.curIndex].y--}else{if(40!=t.keyCode)return;if(e-this.curHolePoslist[this.curIndex].y-1<this.MIN_MARGIN)return;this.curHolePoslist[this.curIndex].y++}this.upholeList.indexOf(this.curselectHole)>=0||this.bottomholelist.indexOf(this.curselectHole)>=0?(this.curselectHole.x=this.curHolePoslist[this.curIndex].x/i*this.fileimg.width-this.spRadius/2,this.curselectHole.y=this.upholeList.indexOf(this.curselectHole)>=0?this.curHolePoslist[this.curIndex].y/e*this.fileimg.height:this.curHolePoslist[this.curIndex].y/e*this.fileimg.height-this.spRadius):(this.curselectHole.x=this.leftholelist.indexOf(this.curselectHole)>=0?this.curHolePoslist[this.curIndex].x/i*this.fileimg.width:this.curHolePoslist[this.curIndex].x/i*this.fileimg.width-this.spRadius,this.curselectHole.y=this.curHolePoslist[this.curIndex].y/e*this.fileimg.height-this.spRadius/2),this.xposinput.text=this.curHolePoslist[this.curIndex].x.toFixed(1)+"",this.yposinput.text=this.curHolePoslist[this.curIndex].y.toFixed(1)+"",Ln.instance.event("BATCH_EDIT_DAKOU_CELL")}},e.onAddXpos=function(){var t=parseFloat(this.xposinput.text);t++,this.xposinput.text=t.toFixed(1)+"",(""==this.xposinput.text||"0"==this.xposinput.text)&&(this.xposinput.text="1"),this.onXPosChange()},e.onSubXpos=function(){var t=parseFloat(this.xposinput.text);1>=t||(t--,this.xposinput.text=t.toFixed(1)+"",(""==this.xposinput.text||"0"==this.xposinput.text)&&(this.xposinput.text="1"),this.onXPosChange())},e.onAddYpos=function(){var t=parseFloat(this.yposinput.text);t++,this.yposinput.text=t.toFixed(1)+"",(""==this.yposinput.text||"0"==this.yposinput.text)&&(this.yposinput.text="1"),t=parseFloat(this.yposinput.text),this.onYPosChange()},e.onSubYpos=function(){var t=parseFloat(this.yposinput.text);1>=t||(t--,this.yposinput.text=t.toFixed(1)+"",(""==this.yposinput.text||"0"==this.yposinput.text)&&(this.yposinput.text="1"),this.onYPosChange())},e.onXPosChange=function(){if(null!=this.curselectHole){var t=this.cutdata.finalWidth,i=(this.cutdata.finalHeight,parseFloat(this.xposinput.text));if(i<this.MIN_MARGIN||t-i<this.MIN_MARGIN)return E.showAlert("孔离图片边距不能小于孔边距"),this.xposinput.text=this.curHolePoslist[this.curIndex].x.toFixed(1)+"",void 0;this.curHolePoslist[this.curIndex].x=i,this.updateCurHolePos()}},e.onYPosChange=function(){if(null!=this.curselectHole){var t=(this.cutdata.finalWidth,this.cutdata.finalHeight),i=parseFloat(this.yposinput.text);if(i<this.MIN_MARGIN||t-i<this.MIN_MARGIN)return E.showAlert("孔离图片边距不能小于孔边距"),this.yposinput.text=this.curHolePoslist[this.curIndex].y.toFixed(1)+"",void 0;this.curHolePoslist[this.curIndex].y=i,this.updateCurHolePos()}},e.updateCurHolePos=function(){if(null!=this.curselectHole){var t=this.cutdata.finalWidth,i=this.cutdata.finalHeight;this.upholeList.indexOf(this.curselectHole)>=0||this.bottomholelist.indexOf(this.curselectHole)>=0?(this.curselectHole.x=this.curHolePoslist[this.curIndex].x/t*this.fileimg.width-this.spRadius/2,this.curselectHole.y=this.upholeList.indexOf(this.curselectHole)>=0?this.curHolePoslist[this.curIndex].y/i*this.fileimg.height:this.curHolePoslist[this.curIndex].y/i*this.fileimg.height-this.spRadius):(this.curselectHole.x=this.leftholelist.indexOf(this.curselectHole)>=0?this.curHolePoslist[this.curIndex].x/t*this.fileimg.width:this.curHolePoslist[this.curIndex].x/t*this.fileimg.width-this.spRadius,this.curselectHole.y=this.curHolePoslist[this.curIndex].y/i*this.fileimg.height-this.spRadius/2),Ln.instance.event("BATCH_EDIT_DAKOU_CELL")}},e.initView=function(){var t=this.cutdata.finalWidth,i=this.cutdata.finalHeight;t>i?(this.fileimg.width=375,this.fileimg.height=375*i/t):(this.fileimg.height=375,this.fileimg.width=375*t/i),this.fileimg.skin=W.biggerPicUrl+this.cutdata.fid+".jpg",this.picwidth.text=this.cutdata.finalWidth+"(cm)",this.marginInput.text=this.cutdata.holeMargin+"",this.xposinput.text="--",this.yposinput.text="--",this.upHoleInput.text=this.cutdata.upHoles.length+"",this.bottomHoleInput.text=this.cutdata.bottomHoles.length+"",this.leftHoleInput.text=this.cutdata.leftHoles.length+"",this.rightHoleInput.text=this.cutdata.rightHoles.length+"";for(var e=this.upholeList.concat(this.bottomholelist).concat(this.leftholelist).concat(this.rightholelist),n=0;n<e.length;n++)e[n].removeSelf();this.curselectHole=null,this.upholeList=[],this.bottomholelist=[],this.leftholelist=[],this.rightholelist=[];for(var n=0;n<this.cutdata.upHoles.length;n++){var s=this.createHole();s.x=this.cutdata.upHoles[n].x/t*this.fileimg.width-this.spRadius/2,s.y=this.cutdata.upHoles[n].y/i*this.fileimg.height,this.fileimg.addChild(s),s.on("click",this,this.onSelectHole,[this.cutdata.upHoles,this.upholeList,n]),this.upholeList.push(s)}for(var n=0;n<this.cutdata.bottomHoles.length;n++){var s=this.createHole();s.x=this.cutdata.bottomHoles[n].x/t*this.fileimg.width-this.spRadius/2,s.y=this.cutdata.bottomHoles[n].y/i*this.fileimg.height-this.spRadius,this.fileimg.addChild(s),s.on("click",this,this.onSelectHole,[this.cutdata.bottomHoles,this.bottomholelist,n]),this.bottomholelist.push(s)}for(var n=0;n<this.cutdata.leftHoles.length;n++){var s=this.createHole();s.x=this.cutdata.leftHoles[n].x/t*this.fileimg.width,s.y=this.cutdata.leftHoles[n].y/i*this.fileimg.height-this.spRadius/2,this.fileimg.addChild(s),s.on("click",this,this.onSelectHole,[this.cutdata.leftHoles,this.leftholelist,n]),this.leftholelist.push(s)}for(var n=0;n<this.cutdata.rightHoles.length;n++){var s=this.createHole();s.x=this.cutdata.rightHoles[n].x/t*this.fileimg.width-this.spRadius,s.y=this.cutdata.rightHoles[n].y/i*this.fileimg.height-this.spRadius/2,this.fileimg.addChild(s),s.on("click",this,this.onSelectHole,[this.cutdata.rightHoles,this.rightholelist,n]),this.rightholelist.push(s)}},e.createHole=function(){return new Gh},i}(Eo),Bl=function(t){function i(){this.deliveryVo=null,i.__super.call(this)}s(i,"script.order.DeliveryTypeItem",t);var e=i.prototype;return e.setData=function(t){this.deliveryVo=t,this.addresstxt.text=this.deliveryVo.deliveryDesc},r(0,e,"ShowSelected",null,function(t){this.btnsel.selected=t,this.selCheck.selected=t}),i}(bo),Nl=function(t){function i(){this.manvo=null,i.__super.call(this),this.deleteTxt.on("click",this,this.ondelte)}s(i,"script.usercenter.item.BusinessManCell",t);var e=i.prototype;return e.ondelte=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除"+this.manvo.name+"吗？",caller:this,callback:this.confirmDelete})},e.setData=function(t){this.manvo=t,this.businessName.text=t.name,this.phoneNumber.text=t.mobileNumber},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+W.deleteBusinessMan,this,this.deleteBusinessback,JSON.stringify({id:this.manvo.id}),"post")},e.deleteBusinessback=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_BUSINESSMAN_LIST")}},i}(xo),Fl=(function(t){function i(){this.isSeleted=!1,this.directData=null,i.__super.call(this)}s(i,"script.picUpload.DirectFolderItem",t);var e=i.prototype;return e.setData=function(t){this.directData=t,this.foldname.text=t.directName,this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)},e.onMouseOut=function(){this.isSeleted||(this.foldname.color="#FFFFFF")},e.onMouseOver=function(){this.isSeleted||(this.foldname.color="#FF0000")},r(0,e,"ShowSelected",null,function(t){this.isSeleted=t,this.foldname.color=t?"#FF0000":"#FFFFFF"}),i}(_o),function(t){function i(){this.orderdata=null,i.__super.call(this),this.numinput0.type="",this.numinput0.restrict="0-9",this.numinput0.mouseEnabled=!1;for(var t=1;21>t;t++)this["box"+t].visible=!1,this["numinput"+t].type="",this["numinput"+t].restrict="0-9",this["numinput"+t].on("input",this,this.onChangeNums,[t]),this["numinput"+t].on("focus",this,this.onSelectInput,[t]),this["addbtn"+t].on("click",this,this.onaddnum,[t]),this["subbtn"+t].on("click",this,this.onsubnum,[t]);this.averagebtn.on("click",this,this.onAverageNum)}s(i,"script.order.OrderPackItem",t);var e=i.prototype;return e.setData=function(t){this.orderdata=t,this.fileimg.skin=t.previewImage_path;var i=t.LWH.split("/"),e=parseFloat(i[0]),n=parseFloat(i[1]);e>n?(this.fileimg.width=100,this.fileimg.height=100/e*n):(this.fileimg.height=100,this.fileimg.width=100/n*e),this.filenametxt.text=t.filename,this.mattext.text=t.prod_name;for(var s=0;21>s;s++)this["numinput"+s].text=t.numlist[s]+""},e.onAverageNum=function(){for(var t=0,i=0;i<this.orderdata.numlist.length;i++)t+=this.orderdata.numlist[i];var e=Math.floor(t/k.instance.packageList.length),n=t-e*k.instance.packageList.length;this.orderdata.numlist[0]=e+n;for(var i=1;i<k.instance.packageList.length;i++)this.orderdata.numlist[i]=e;for(var i=0;21>i;i++)this["numinput"+i].text=this.orderdata.numlist[i]+""},e.onChangeNums=function(t){var i=this["numinput"+t];""==i.text&&(i.text="0");var e=parseInt(i.text),n=this.orderdata.numlist[0]+this.orderdata.numlist[t];e>n?(e=n,this.orderdata.numlist[0]=0,this.orderdata.numlist[t]=e,this.numinput0.text="0",i.text=e+""):(this.orderdata.numlist[0]=n-e,this.orderdata.numlist[t]=e,this.numinput0.text=this.orderdata.numlist[0]+"")},e.onSelectInput=function(t){this["numinput"+t].select()},e.addpacakge=function(){var t=k.instance.packageList.length-1;this["box"+t].visible=!0,this["numinput"+t].text="0"},e.deletepack=function(){if(null!=this.orderdata)for(var t=0;21>t;t++)this["box"+t].visible=t<k.instance.packageList.length,this["numinput"+t].text=this.orderdata.numlist[t]+""},e.onaddnum=function(t){if(this.orderdata.numlist[0]>0){var i=parseInt(this["numinput"+t].text);i++,this.orderdata.numlist[t]=i,this["numinput"+t].text=i+"";var e=parseInt(this.numinput0.text);e--,this.orderdata.numlist[0]=e,this.numinput0.text=e+""}},e.onsubnum=function(t){var i=parseInt(this["numinput"+t].text);if(!(1>i)){i--,this.orderdata.numlist[t]=i,this["numinput"+t].text=i+"";var e=parseInt(this.numinput0.text);e++,this.orderdata.numlist[0]=e,this.numinput0.text=e+""}},i}(Ao)),Vl=function(t){function i(t,e,n){this.uiskin=null,this.type=0,this.vo=null,i.__super.call(this),this.type=t,this.vo=e,this.arrow.visible=!0,this.updateView(n),this.on("mouseover",this,function(){this.btn.selected||(this.arrow.skin="iconsNew/bigArrowGreen.png")}),this.on("mouseout",this,function(){this.btn.selected||(this.arrow.skin="iconsNew/bigArrow.png")}),this.btn.on("click",this,this.onClickHandler)}s(i,"script.workpanel.items.MatProcessItem",t);var e=i.prototype;return e.updateView=function(t){if(2==this.type)this.btn.label=t+"     ",this.btn.selected=!0,this.arrow.skin="iconsNew/bigArrowGreen.png";else if(0==this.type)this.btn.label=this.vo.prodName+"   ",this.btn.selected=!1,this.arrow.skin="iconsNew/bigArrow.png";else if(1==this.type){var i=this.vo,e=i.procName;null!=i.selectAttachVoList&&i.selectAttachVoList.length>0&&(e+="("+i.selectAttachVoList[0].accessory_name+")"),this.vo.nextMatList.length>0?this.btn.label=e+"   ":(this.btn.label=e,this.arrow.visible=!1),this.btn.selected=!1,this.arrow.skin="iconsNew/bigArrow.png"}this.btn.width=500,this.btn.width=this.btn.text.textWidth+40,this.width=this.btn.width},e.updateData=function(t,i,e){this.type=t,this.vo=i,this.arrow.visible=!0,this.updateView(e)},e.onClickHandler=function(){2!=this.type&&(this.btn.selected||(0==this.type?Ln.instance.event("SHOW_MATERIAL_LIST_PANEL"):1==this.type&&Ln.instance.event("CHOOSE_PROCESS_ITEM",[this.vo])))},e.getVo=function(){return this.vo},e.getType=function(){return this.type},i}(Co),Ul=function(t){function i(){this.picInfo=null,this.trytime=0,i.__super.call(this)}s(i,"script.picUpload.PicPaintItem",t);var n=i.prototype;return n.setData=function(t){if(this.picInfo=t,this.offAll(),this.on("doubleclick",this,this.onDoubleClick),this.on("click",this,this.onClickHandler),this.on("mouseover",this,this.onMouseOverHandler),this.on("mouseout",this,this.onMouseOutHandler),this.btndelete.visible=!1,this.frame.visible=!1,this.btndelete.on("click",this,this.onDeleteHandler),this.trytime=0,this.sel.visible=H.instance.haselectPic.hasOwnProperty(this.picInfo.fid)||H.instance.curOperateFile==this.picInfo,this.sel.selected=this.sel.visible,this.yixingimg.visible=!1,this.backimg.visible=!1,this.partWhiteImg.visible=!1,this.warningimg.visible=!1,0!=this.picInfo.picType&&T.checkFileIsImg(this.picInfo)){if(this.fileinfo.visible=!0,this.filename.text=this.picInfo.directName,this.img.x=126,this.picInfo.isProcessing)return this.fileinfo.text="处理中...",this.img.skin="upload1/fold.png",this.picClassTxt.visible=!1,this.colorspacetxt.visible=!1,this.img.width=156,this.img.height=156,void 0;this.picInfo.picWidth>this.picInfo.picHeight?(this.img.width=156,this.img.height=156/this.picInfo.picWidth*this.picInfo.picHeight,this.yixingimg.width=78,this.yixingimg.height=78/this.picInfo.picWidth*this.picInfo.picHeight,this.backimg.width=78,this.backimg.height=this.yixingimg.height,this.partWhiteImg.width=78,this.partWhiteImg.height=this.yixingimg.height):(this.img.height=156,this.img.width=156/this.picInfo.picHeight*this.picInfo.picWidth,this.yixingimg.height=78,this.yixingimg.width=78/this.picInfo.picHeight*this.picInfo.picWidth,this.backimg.height=78,this.backimg.width=this.yixingimg.width,this.partWhiteImg.height=78,this.partWhiteImg.width=this.yixingimg.height),this.warningimg.visible=T.isUnNormalPic(this.picInfo),"upload1/fold.png"!=this.img.skin&&e.loader.clearTextureRes(this.img.skin),this.img.skin=null,this.img.skin=W.smallerrPicUrl+this.picInfo.fid+".jpg";var i="宽:"+this.picInfo.picPhysicWidth+";高:"+this.picInfo.picPhysicHeight+"\n";i+="dpi:"+this.picInfo.dpi,this.fileinfo.text=i,this.picClassTxt.text=this.picInfo.isCdr?"CDR":this.picInfo.picClass.toLocaleUpperCase(),""!=this.picInfo.yixingFid&&"0"!=this.picInfo.yixingFid&&(this.yixingimg.visible=!0,this.yixingimg.skin=W.smallerrPicUrl+this.picInfo.yixingFid+".jpg",this.img.x=87),""!=this.picInfo.backFid&&"0"!=this.picInfo.backFid&&(this.backimg.visible=!0,this.backimg.skin=W.smallerrPicUrl+this.picInfo.backFid+".jpg",this.img.x=87),""!=this.picInfo.partWhiteFid&&"0"!=this.picInfo.partWhiteFid&&(this.partWhiteImg.visible=!0,this.partWhiteImg.skin=W.smallerrPicUrl+this.picInfo.partWhiteFid+".jpg",this.img.x=87),this.picClassTxt.visible=!0,this.colorspacetxt.text=this.picInfo.colorspace.toLocaleUpperCase(),this.colorspacetxt.visible=!0}else this.img.skin="upload1/fold.png",this.filename.text=this.picInfo.directName,this.fileinfo.visible=!1,this.picClassTxt.visible=!1,this.colorspacetxt.visible=!1,this.img.x=126,this.img.width=156,this.img.height=156},n.onDeleteHandler=function(t){t.stopPropagation(),1==this.picInfo.picType?E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该图片吗？",caller:this,callback:this.confirmDelete}):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该目录吗？",caller:this,callback:this.confirmDelete})},n.confirmDelete=function(t){if(t){if(this.sel.visible){var i=[];i.push(this.picInfo),i.push(this.img),i.push(this),Ln.instance.event("SELECT_PIC_ORDER",[i])}1==this.picInfo.picType?W.instance.Request(W.httpUrl+"fs/file/delete?",this,this.onDeleteFileBack,JSON.stringify({fileID:this.picInfo.fid}),"post"):W.instance.Request(W.httpUrl+"fs/dir/delete?",this,this.onDeleteFileBack,JSON.stringify({dirId:this.picInfo.dpath}),"post")}},n.onDeleteFileBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_FILE_LIST")},n.onMouseOutHandler=function(){this.btndelete.visible=!1,this.frame.visible=!1},n.canCelSelected=function(){this.sel.visible=!1,this.sel.selected=!1},n.onMouseOverHandler=function(){this.btndelete.visible=!0,this.frame.visible=!0},n.onClickHandler=function(){if((1!=this.picInfo.picType||"PNG"!=this.picInfo.picClass.toLocaleUpperCase())&&1==this.picInfo.picType&&this.picInfo.picPhysicWidth>0){if(T.isUnNormalPic(this.picInfo))return E.showAlert("图片大小异常，请尝试更换图片处理软件或另存图片，再重新上传。"),void 0;H.instance.haselectPic.hasOwnProperty(this.picInfo.fid)?(this.sel.visible=!1,this.sel.selected=!1):(this.sel.visible=!0,this.sel.selected=!0);var t=[];t.push(this.picInfo),t.push(this.img),t.push(this),Ln.instance.event("SELECT_PIC_ORDER",[t])}},n.getPixelInfo=function(t){var i=t;T.getCutCountLength(i)},n.onDoubleClick=function(){if(0==this.picInfo.picType)Ln.instance.event("SELECT_FOLDER",this.picInfo);else{var t=[];t.push(this.picInfo.fid),t.push(this.picInfo.partWhiteFid),t.push(this.picInfo.backFid),E.instance.openView("VIEW_CBC_PREVIEW_PANEL",!1,t)}},i}(fo),Wl=function(t){function i(){this.address=null,i.__super.call(this)}s(i,"script.order.SelAddressItem",t);var e=i.prototype;return e.setData=function(t){this.address=t,this.addresstxt.text=this.address.addressDetail,this.btnSetDefault.visible=g.instance.defaultAddId!=this.address.id,this.defaultMark.visible=g.instance.defaultAddId==this.address.id,"0"!=this.address.customerId&&(this.btnSetDefault.visible=!1),this.btnSetDefault.on("click",this,this.setDefaultAdd),this.ShowSelected=!1},e.setDefaultAdd=function(){W.instance.Request(W.httpUrl+"org/express/setDefault?",this,this.defaultAddressBack,JSON.stringify({id:this.address.id}),"post")},e.defaultAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&(g.instance.defaultAddId=this.address.id,Ln.instance.event("UPDATE_MYADDRESS_LIST"))},r(0,e,"ShowSelected",null,function(t){this.btnsel.selected=t,this.selCheck.selected=t}),i}(bo),Hl=function(t){function i(){this.conditionVo=null,i.__super.call(this)}s(i,"script.prodCustomer.item.ConditionBtnCell",t);var e=i.prototype;return e.setData=function(t){var i=this;this.conditionVo=t,this.btn.label=t.lblName,this.btn.on("click",this,function(){i.conditionVo.selected=!i.conditionVo.selected,this.btn.selected=i.conditionVo.selected})},i}(Po),Gl=function(t){function i(){this.ordervo=null,this.locked=!0,this.finalWidth=0/0,this.finalHeight=0/0,this.curproductvo=null,i.__super.call(this),this.framesel.visible=!1,this.uploadBtn.on("click",this,this.showSelectPicView),this.picimg.on("click",this,this.showSelectPicView),this.deletebtn.on("click",this,this.reset),this.hideobj.on("change",this,this.onChangeState),this.filename.visible=!1,this.inputnum.text="1",this.inputnum.restrict="0-9",this.inputnum.on("input",this,this.onNumChange),this.subtn.on("click",this,this.onSubItemNum),this.addbtn.on("click",this,this.onAddItemNum),this.editBtn.on("click",this,this.onClickEdit)}s(i,"script.characterpaint.CarvingOrderItemCell",t);var e=i.prototype;return e.onClickEdit=function(){null!=this.ordervo&&(Ln.instance.event("SELECT_CARVING_ITEM",this.ordervo.indexNum),Ti.window.UnityPaintWeb.setCharacterEdgeIndex(this.ordervo.indexNum.toString()))},e.onNumChange=function(){""==this.inputnum.text&&(this.inputnum.text="1"),this.ordervo&&this.ordervo.orderData&&(this.ordervo.orderData.item_number=parseInt(this.inputnum.text)),Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onSubItemNum=function(){var t=parseInt(this.inputnum.text);t>1&&t--,this.inputnum.text=t.toString(),this.onNumChange()},e.onAddItemNum=function(){var t=parseInt(this.inputnum.text);t++,this.inputnum.text=t.toString(),this.onNumChange()},e.showSelectPicView=function(){null==this.ordervo?(Ln.instance.event("HIDE_U3D_DIV",!1),E.instance.openView("VIEW_SELECT_PIC_TO_ORDER")):(Ln.instance.event("SELECT_CARVING_ITEM",this.ordervo.indexNum),Ti.window.UnityPaintWeb.setCharacterEdgeIndex(this.ordervo.indexNum.toString()))},e.onChangeState=function(){null!=this.ordervo&&Ti.window.UnityPaintWeb.setFrontFaceActive(this.hideobj.selected?0:1)
},e.selectItem=function(t){this.framesel.visible=t},e.setData=function(t){if(this.ordervo=t,null!=this.ordervo){this.picimg.skin=W.smallerrPicUrl+this.ordervo.picinfo.fid+".jpg",this.ordervo.picinfo.picWidth>this.ordervo.picinfo.picHeight?(this.picimg.width=124,this.picimg.height=124/this.ordervo.picinfo.picWidth*this.ordervo.picinfo.picHeight):(this.picimg.height=124,this.picimg.width=124/this.ordervo.picinfo.picHeight*this.ordervo.picinfo.picWidth),this.filename.visible=!0,this.uploadBtn.visible=!1,this.filename.text=this.ordervo.picinfo.directName,Ti.window.UnityPaintWeb.setCharacterEdgeIndex(this.ordervo.indexNum.toString()),Ti.window.UnityPaintWeb.changefontSize(this.ordervo.picinfo.picPhysicWidth/100+"&"+this.ordervo.picinfo.picPhysicHeight/100);var i=W.biggerPicUrl+this.ordervo.picinfo.fid+".plt";Ti.window.UnityPaintWeb.createMesh(i)}else this.reset()},e.reset=function(){null!=this.ordervo&&(Ti.window.UnityPaintWeb.setCharacterEdgeIndex(this.ordervo.indexNum.toString()),Ti.window.UnityPaintWeb.setFrontFaceActive(0),this.ordervo.orderData=null,this.ordervo=null,this.picimg.skin="",this.filename.text="",this.filename.visible=!1,this.framesel.visible=!1,this.uploadBtn.visible=!0),this.curproductvo=null},e.resetOrderData=function(){null!=this.ordervo&&(this.ordervo.orderData=null),this.curproductvo=null},e.getPrice=function(){return 0},i}(Ho),zl=function(t){function i(){this.picInfo=null,i.__super.call(this)}s(i,"script.picUpload.PicInfoItem",t);var n=i.prototype;return n.setData=function(t){if(this.picInfo=t,this.offAll(),this.on("doubleclick",this,this.onDoubleClick),this.on("click",this,this.onClickHandler),this.on("mouseover",this,this.onMouseOverHandler),this.on("mouseout",this,this.onMouseOutHandler),this.btndelete.visible=!1,this.frame.visible=!1,this.disableImg.visible=!1,this.selYixingBtn.on("click",this,this.onSelectYixingImg),this.selBackBtn.on("click",this,this.onSelectBackImg),this.selpart.on("click",this,this.onSelectPartImg),this.delBack.on("click",this,this.onSelectBackImg),this.delYixing.on("click",this,this.onSelectYixingImg),this.delPart.on("click",this,this.onSelectPartImg),this.disableItem(!1),this.btndelete.on("click",this,this.onDeleteHandler),this.sel.selected=H.instance.haselectPic.hasOwnProperty(this.picInfo.fid)||H.instance.curOperateFile==this.picInfo,0==this.picInfo.picType&&(this.sel.selected=H.instance.selectFolders.indexOf(this.picInfo.dpath)>=0),this.yixingimg.visible=!1,this.backimg.visible=!1,this.partImg.visible=!1,this.warningimg.visible=!1,this.filename.y=232,this.fileinfo.y=257,this.delBack.visible=!1,this.delYixing.visible=!1,this.delPart.visible=!1,this.yixingimg.on("mouseover",this,this.onShowDelButton,[this.delYixing]),this.backimg.on("mouseover",this,this.onShowDelButton,[this.delBack]),this.partImg.on("mouseover",this,this.onShowDelButton,[this.delPart]),this.yixingimg.on("mouseout",this,this.onHideDelButton,[this.delYixing]),this.backimg.on("mouseout",this,this.onHideDelButton,[this.delBack]),this.partImg.on("mouseout",this,this.onHideDelButton,[this.delPart]),this.aiBtn.visible=!1,this.aiBtn.on("click",this,this.onShowCbcEffect),0!=this.picInfo.picType&&T.checkFileIsImg(this.picInfo)){if(this.fileinfo.visible=!0,this.filename.text=this.picInfo.directName,this.img.y=133,this.countdown.visible=!g.instance.storageNoDel(),this.autodellabel.text=this.picInfo.leftDeleteDays+"天",this.picInfo.isProcessing)return this.fileinfo.text="处理中...",this.img.skin="upload1/fold.png",this.img.width=180,this.img.height=180,void 0;this.picInfo.picWidth>this.picInfo.picHeight?(this.img.width=180,this.img.height=180/this.picInfo.picWidth*this.picInfo.picHeight,this.yixingimg.width=56,this.yixingimg.height=56/this.picInfo.picWidth*this.picInfo.picHeight,this.backimg.width=56,this.backimg.height=this.yixingimg.height,this.partImg.width=56,this.partImg.height=this.yixingimg.height):(this.img.height=180,this.img.width=180/this.picInfo.picHeight*this.picInfo.picWidth,this.yixingimg.height=56,this.yixingimg.width=56/this.picInfo.picHeight*this.picInfo.picWidth,this.backimg.height=56,this.backimg.width=this.yixingimg.width,this.partImg.height=56,this.partImg.width=this.yixingimg.width),this.backlbl.y=59-(56-this.backimg.height)/2,this.yinglbl.y=59-(56-this.yixingimg.height)/2,this.partlbl.y=59-(56-this.partImg.height)/2,this.delYixing.y=(this.yixingimg.height-20)/2,this.delBack.y=(this.yixingimg.height-20)/2,this.delPart.y=(this.yixingimg.height-20)/2,this.warningimg.visible=T.isUnNormalPic(this.picInfo),"iconsNew/defaultImg.png"!=this.img.skin&&"upload1/fold.png"!=this.img.skin&&e.loader.clearTextureRes(this.img.skin),this.img.skin=null,this.img.skin=W.smallerrPicUrl+this.picInfo.fid+this.picInfo.tailFix,""!=this.picInfo.yixingFid&&"0"!=this.picInfo.yixingFid?(this.yixingimg.visible=!0,this.yixingimg.skin=W.smallerrPicUrl+this.picInfo.yixingFid+".jpg",this.selYixingBtn.visible=!1):this.selYixingBtn.visible=!0,""!=this.picInfo.backFid&&"0"!=this.picInfo.backFid?(this.backimg.visible=!0,this.backimg.skin=W.smallerrPicUrl+this.picInfo.backFid+".jpg",this.selBackBtn.visible=!1):this.selBackBtn.visible=!0,""!=this.picInfo.partWhiteFid&&"0"!=this.picInfo.partWhiteFid?(this.partImg.visible=!0,this.partImg.skin=W.smallerrPicUrl+this.picInfo.partWhiteFid+".jpg",this.selpart.visible=!1):this.selpart.visible=!0,(this.yixingimg.visible||this.backimg.visible||this.partImg.visible)&&this.moveImgUp();var i;i=this.picInfo.isCdr?"CDR":this.picInfo.picClass.toLocaleUpperCase(),i+="GRAY"==this.picInfo.colorspace.toLocaleUpperCase()?"|灰度":"|"+this.picInfo.colorspace.toLocaleUpperCase(),i+="|"+this.picInfo.dpi+"DPI|",i+=this.picInfo.picPhysicWidth+"×"+this.picInfo.picPhysicHeight,this.fileinfo.text=i}else this.img.skin="upload1/fold.png",this.filename.text=this.picInfo.directName,this.fileinfo.visible=!1,this.aiBtn.visible=!1,this.img.width=180,this.img.height=180,this.selYixingBtn.visible=!1,this.selBackBtn.visible=!1,this.selpart.visible=!1,this.img.y=133,this.countdown.visible=!1},n.onShowDelButton=function(t,i){t&&(t.visible=!0),i&&(i.visible=!0)},n.onHideDelButton=function(t,i){t&&(t.visible=!1),i&&(i.visible=!1)},n.moveImgUp=function(){this.img.y=106,this.filename.y=178,this.fileinfo.y=203,this.picInfo.picWidth>this.picInfo.picHeight?(this.img.width=126,this.img.height=126/this.picInfo.picWidth*this.picInfo.picHeight):(this.img.height=126,this.img.width=126/this.picInfo.picHeight*this.picInfo.picWidth)},n.onDeleteHandler=function(t){t.stopPropagation(),1==this.picInfo.picType?E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该图片吗？",caller:this,callback:this.confirmDelete}):E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该目录吗？",caller:this,callback:this.confirmDelete})},n.confirmDelete=function(t){if(t){if(this.sel.selected){var i=[];i.push(this.picInfo),i.push(this.img),i.push(this),Ln.instance.event("SELECT_PIC_ORDER",[i])}1==this.picInfo.picType?W.instance.Request(W.httpUrl+"fs/file/delete?",this,this.onDeleteFileBack,JSON.stringify({fileID:this.picInfo.fid}),"post"):W.instance.Request(W.httpUrl+"fs/dir/delete?",this,this.onDeleteFileBack,JSON.stringify({dirId:this.picInfo.dpath}),"post")}},n.onDeleteFileBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_FILE_LIST")},n.onMouseOutHandler=function(){this.btndelete.visible=!1,this.frame.visible=!1,this.aiBtn.visible=!1,""!=this.picInfo.yixingFid&&"0"!=this.picInfo.yixingFid&&(this.selYixingBtn.visible=!1),""!=this.picInfo.backFid&&"0"!=this.picInfo.backFid&&(this.selBackBtn.visible=!1),""!=this.picInfo.partWhiteFid&&"0"!=this.picInfo.partWhiteFid&&(this.selpart.visible=!1)},n.canCelSelected=function(){this.sel.selected=!1},n.onMouseOverHandler=function(){this.btndelete.visible=!0,this.frame.visible=!0,1==this.picInfo.picType&&(this.aiBtn.y=-20,this.aiBtn.visible=!0,this.aiBtn.visible&&Ni.to(this.aiBtn,{y:10},300,dn.backOut))},n.showYixingImg=function(t){this.yixingimg.visible=!0,this.yixingimg.skin=W.smallerrPicUrl+t+".jpg"},n.onClickHandler=function(){if(0==this.picInfo.picType){if(H.instance.selectFolders.indexOf(this.picInfo.dpath)>=0){this.sel.selected=!1;var t=H.instance.selectFolders.indexOf(this.picInfo.dpath);H.instance.selectFolders.splice(t,1)}else this.sel.selected=!0,H.instance.selectFolders.push(this.picInfo.dpath);return Ln.instance.event("UPDATE_SELECT_FOLDER"),void 0}if(1==this.picInfo.picType&&this.picInfo.picPhysicWidth>0){if(null!=H.instance.curOperateFile&&H.instance.curOperateFile.fid==this.picInfo.fid)return;if(T.isUnNormalPic(this.picInfo))return E.showAlert("图片大小异常，请尝试更换图片处理软件或另存图片，再重新上传。"),void 0;this.sel.selected=H.instance.haselectPic.hasOwnProperty(this.picInfo.fid)?!1:!0;var i=[];i.push(this.picInfo),i.push(this.img),i.push(this),Ln.instance.event("SELECT_PIC_ORDER",[i])}},n.onClickImg=function(t){if(1==this.picInfo.picType&&this.picInfo.picPhysicWidth>0&&null!=H.instance.curOperateFile){if(t.stopPropagation(),H.instance.curOperateFile.fid==this.picInfo.fid)return;H.instance.setYingxingImg(this.picInfo),H.instance.curOperateFile=null,Ln.instance.event("STOP_SELECT_RELATE_PIC")}},n.onSetYixingBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_FILE_LIST")},n.onSetFanmianBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_FILE_LIST")},n.onSelectYixingImg=function(t){if("0"==this.picInfo.yixingFid)H.instance.curOperateFile=this.picInfo,H.instance.curOperateSelType=0,this.sel.selected=!0,Ln.instance.event("START_SELECT_YIXING_PIC",[this.picInfo]);else{this.yixingimg.visible=!1;var i={fileId:this.picInfo.fid,targetId:"0"};W.instance.Request(W.httpUrl+"fs/img/setMask",this,this.onSetYixingBack,JSON.stringify(i),"post")}t.stopPropagation()},n.onSelectBackImg=function(t){if("0"==this.picInfo.backFid)H.instance.curOperateFile=this.picInfo,H.instance.curOperateSelType=1,this.sel.selected=!0,Ln.instance.event("START_SELECT_BACK_PIC",[this.picInfo]);else{this.backimg.visible=!1;var i={fileId:this.picInfo.fid,targetId:"0"};W.instance.Request(W.httpUrl+"fs/img/setBack",this,this.onSetFanmianBack,JSON.stringify(i),"post")}t.stopPropagation()},n.onSelectPartImg=function(t){if("0"==this.picInfo.partWhiteFid)H.instance.curOperateFile=this.picInfo,H.instance.curOperateSelType=2,Ln.instance.event("START_SELECT_PARTWHITE_PIC",[this.picInfo]),this.sel.selected=!0;else{this.partImg.visible=!1;var i={fileId:this.picInfo.fid,targetId:"0"};W.instance.Request(W.httpUrl+"fs/img/setPartWhite",this,this.onSetPartWhiteBack,JSON.stringify(i),"post")}t.stopPropagation()},n.resetRelatedBtn=function(){this.selYixingBtn.selected=!1,this.selBackBtn.selected=!1,this.selpart.selected=!1},n.disableItem=function(t){this.disableImg.visible=t,this.mouseEnabled=!t},n.onShowCbcEffect=function(t){t.stopPropagation();var i=[];i.push(this.picInfo.fid),i.push(this.picInfo.partWhiteFid),"0"==this.picInfo.backFid?i.push(this.picInfo.fid):i.push(this.picInfo.backFid),i.push(this.picInfo.yixingFid),i.push(this.picInfo),E.instance.openView("VIEW_CBC_PREVIEW_PANEL",!1,i)},n.onSetPartWhiteBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_FILE_LIST")},n.getPixelInfo=function(t){var i=t;T.getCutCountLength(i)},n.onDoubleClick=function(){0==this.picInfo.picType?Ln.instance.event("SELECT_FOLDER",this.picInfo):E.instance.openView("VIEW_PICTURE_CHECK",!1,this.picInfo)},i}(Mo),Yl=function(t){function i(){this.prodVo=null,i.__super.call(this),this.frame.visible=!1,this.on("mouseover",this,function(){this.frame.visible=!0}),this.on("mouseout",this,function(){this.frame.visible=!1}),this.on("doubleclick",this,this.onChooseProd)}s(i,"script.prodCustomer.item.ProdCell",t);var e=i.prototype;return e.setData=function(t){this.categoryName.text=t.cateName},e.onChooseProd=function(){E.instance.openView("VIEW_PRODUCT_CUSTOMIZATION_PANEL",!0,this.prodVo)},i}(Ua),Xl=function(t){function i(t){if(this.ordervo=null,this.locked=!0,this.finalWidth=0/0,this.finalHeight=0/0,this.curproductvo=null,this.fanmianFid=null,this.discount=1,i.__super.call(this),this.ordervo=t,Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.updateLblPos(g.instance.shrinkState),this.initItem(),null!=this.ordervo.orderData){this.curproductvo=this.ordervo.productVo,this.inputnum.text=this.ordervo.orderData.itemNumber;var e=this.ordervo.orderData.conponent.LWH.split("/");e.length>1&&(this.editwidth.text=e[0],this.editheight.text=e[1],this.finalWidth=parseFloat(e[0]),this.finalHeight=parseFloat(e[1])),this.initEditData()}}s(i,"script.dengxiang.DengxiangOrderItemCell",t);var e=i.prototype;return e.updateLblPos=function(t){0==t?(this.deletBtn.x=1466,this.total.x=1314,this.unitPrice.x=1223):(this.deletBtn.x=1566,this.total.x=1415,this.unitPrice.x=1324)},e.initItem=function(){var t=this.ordervo.picinfo;this.editbox.visible=0==t.rectangleOrCircle,this.dengxiangRaid.visible=1==t.rectangleOrCircle,this.numindex.text=this.ordervo.indexNum.toString(),this.subtn.on("click",this,this.onSubItemNum),this.addbtn.on("click",this,this.onAddItemNum),this.hascomment.visible=!1,this.addmsg.visible=!1,0==this.ordervo.type?(this.fileimg.skin=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,this.ordervo.picinfo.picWidth>this.ordervo.picinfo.picHeight?(this.fileimg.width=108,this.fileimg.height=108/this.ordervo.picinfo.picWidth*this.ordervo.picinfo.picHeight):(this.fileimg.height=108,this.fileimg.width=108/this.ordervo.picinfo.picHeight*this.ordervo.picinfo.picWidth)):this.fileimg.skin=0==t.rectangleOrCircle?"commers/blackbg.png":"commers/circleDx.png",this.yixingimg.width=this.fileimg.width,this.yixingimg.height=this.fileimg.height,this.backimg.width=this.fileimg.width,this.backimg.height=this.fileimg.height,this.yingxback.width=this.fileimg.width,this.yingxback.height=this.fileimg.height,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.fileimg.on("click",this,this.onShowBigImg),this.backimg.on("click",this,this.onShowBackImg),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),this.semiRadius.text=t.picPhysicWidth.toString(),this.editwidth.restrict="0-9.",this.editheight.restrict="0-9.",this.semiRadius.restrict="0-9.",this.filename.text=this.ordervo.picinfo.directName,this.architype.text=this.ordervo.techStr,this.total.text="0",this.deleteorder.underline=!0,this.deleteorder.underlineColor="#222222",this.inputnum.text="1",this.inputnum.restrict="0-9",this.deletBtn.on("click",this,this.onDeleteOrder),this.addmsg.underline=!0,this.addmsg.underlineColor="#222222",this.addmsg.on("click",this,this.onAddComment),this.total.visible=!g.instance.isHidePrice(),this.unitPrice.text="0",this.inputnum.on("input",this,this.onNumChange),this.editwidth.on("input",this,this.onWidthSizeChange),this.editheight.on("input",this,this.onHeightSizeChange),this.semiRadius.on("input",this,this.onRadiusSizeChange),this.lockratio.on("click",this,this.onLockChange),this.architype.height=this.architype.textField.textHeight>124?this.architype.textField.textHeight:124,this.manuicon.visible=!1,this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.setMatBtn.on("click",this,this.onShowMaterialView),this.editmat.on("click",this,this.onShowMaterialView),this.height=this.architype.height>124?this.architype.height+10:134,this.alighComponet()},e.initEditData=function(){this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.manuicon.visible=!0,this.manuicon.skin="commers/"+K.OUTPUT_ICON[k.instance.getManuFactureIndex(this.curproductvo.manufacturerCode)];for(var t=(this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100,this.ordervo.productVo),i=t.getAllSelectedTech(),e="",n="",s=!1,r=0;r<i.length;r++)"SPTE10320"==i[r].procCode||"SPTE230414160834510"==i[r].procCode?(s=!0,this.fanmianFid=this.ordervo.picinfo.fid):K.backSideUnSame(i[r].procCode)?(e=this.ordervo.picinfo.backFid,this.fanmianFid=e):K.yiXingCutProcess(i[r].procCode)&&(n=this.ordervo.picinfo.yixingFid);this.backimg.visible=""!=e||s,this.yingxback.visible=(""!=e||s)&&""!=n,""!=e&&(this.backimg.skin=W.biggerPicUrl+e+".jpg"),s&&(this.backimg.skin=W.biggerPicUrl+this.ordervo.picinfo.fid+".jpg"),this.yixingimg.visible=""!=n,""!=n&&(this.yixingimg.skin=W.biggerPicUrl+n+".jpg",this.yingxback.visible&&(this.yingxback.skin=W.biggerPicUrl+n+".jpg")),this.total.text=(parseInt(this.inputnum.text)*t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+"",this.unitPrice.text=this.ordervo.orderData.unitPrice;var a=t.getTechDes(!1,this.finalWidth,this.finalHeight);a.indexOf("超宽拼接")>=0&&(a=a.replace("超宽拼接","超宽拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("超幅拼接")>=0&&(a=a.replace("超幅拼接","超幅拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("小块裁切")>=0&&(a=a.replace("小块裁切","小块裁切(H-"+this.ordervo.horiCutNum+",V-"+this.ordervo.verCutNum+")")),a.indexOf("正上方打扣")>=0,this.architype.text=t.prodName+"\n"+a,this.architype.height=this.architype.textField.textHeight>134?this.architype.textField.textHeight:134,this.height=this.architype.height>134?this.architype.height+10:134,this.alighComponet()},e.reset=function(){this.architype.text="",this.total.text="0",this.unitPrice.text="0",this.ordervo.orderData=null,this.ordervo.productVo=null,this.curproductvo=null,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.manuicon.visible=!1,this.setMatBtn.visible=!0,this.editmat.visible=!1},e.onLockChange=function(){this.locked?(this.lockratio.skin="commers/unlock.png",this.locked=!1):(this.lockratio.skin="commers/lock.png",this.locked=!0)},e.onWidthSizeChange=function(){var t=Number(this.editwidth.text);if(this.finalWidth=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicWidth*this.ordervo.picinfo.picPhysicHeight;this.finalHeight=i,this.editheight.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onHeightSizeChange=function(){var t=Number(this.editheight.text);if(this.finalHeight=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicHeight*this.ordervo.picinfo.picPhysicWidth;this.finalWidth=i,this.editwidth.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onRadiusSizeChange=function(){var t=Number(this.semiRadius.text);this.finalWidth=t,this.finalHeight=t,this.editheight.text=t.toFixed(2),this.reset(),this.updatePrice()},e.onSubItemNum=function(){var t=parseInt(this.inputnum.text);t>1&&t--,this.inputnum.text=t.toString(),this.onNumChange()},e.onAddItemNum=function(){var t=parseInt(this.inputnum.text);t++,this.inputnum.text=t.toString(),this.onNumChange()},e.onShowBigImg=function(){if(1!=this.ordervo.type)if(this.yixingimg.visible){var t=[];t.push(this.ordervo.picinfo),t.push(this.yixingimg.skin),t.push(1),E.instance.openView("VIEW_PICTURE_CHECK",!1,t)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,this.ordervo.picinfo)},e.onShowBackImg=function(){var t=new p({},1);if(t.fid=this.fanmianFid,t.picWidth=this.ordervo.picinfo.picWidth,t.picHeight=this.ordervo.picinfo.picHeight,this.yingxback.visible){var i=[];i.push(t),i.push(this.yingxback.skin),i.push(-1),E.instance.openView("VIEW_PICTURE_CHECK",!1,i)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,t)},e.onAddComment=function(){E.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordervo.comment,caller:this,callback:this.onAddMsgBack})},e.onAddMsgBack=function(t){this.ordervo.comment=t,this.hascomment.visible=""!=this.ordervo.comment,this.ordervo.orderData&&(this.ordervo.orderData.comments=this.ordervo.comment)},e.alighComponet=function(){this.checkSel.y=(this.height-28)/2,this.numindex.y=(this.height-this.numindex.height)/2,this.fileimg.y=this.height/2,this.backimg.y=this.height/2,this.yingxback.y=this.height/2,this.yixingimg.y=this.height/2,this.filename.y=(this.height-this.filename.height)/2,this.editbox.y=(this.height-this.editbox.height)/2,this.numbox.y=this.height/2-12,this.total.y=(this.height-this.total.height)/2,this.editmat.y=(this.height-this.editmat.height)/2,this.deletBtn.y=(this.height-this.deletBtn.height)/2,this.operatebox.y=(this.height-this.operatebox.height)/2-10},e.updateIndex=function(){this.numindex.text=this.ordervo.indexNum.toString()},e.onDeleteOrder=function(){Ln.instance.event("DELETE_PIC_ORDER",this)},e.updatePrice=function(){if(null!=this.curproductvo){this.updateOrderData(this.curproductvo);{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onNumChange=function(){""==this.inputnum.text&&(this.inputnum.text="1"),this.total.text=(parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice*this.discount).toFixed(1).toString(),this.ordervo.orderData&&(this.ordervo.orderData.itemNumber=parseInt(this.inputnum.text),this.ordervo.orderData.item_payPrice=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))),Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onShowMaterialView=function(){if(null==k.instance.selectAddress)return E.showAlert("请选择收货地址"),void 0;if(null==k.instance.outPutAddr||0==k.instance.outPutAddr.length)return E.showAlert("当前的收货地址没有输出中心，请重新选择收货地址"),void 0;for(var t=0;t<k.instance.outPutAddr.length;t++)if(null==k.instance.allManuFacutreMatProcPrice[k.instance.outPutAddr[t].org_code])return E.showAlert("暂未获取到生产商材料工艺价格，请重新选择收货地址或稍后再试"),void 0;return null==k.instance.productList||0==k.instance.productList.length?(E.showAlert("未获取到材料列表，请重新选择收货地址或者刷新页面"),void 0):null==k.instance.selectAddress?(E.showAlert("请先选择收货地址"),void 0):0!=this.finalHeight&&0==this.ordervo.type&&Math.abs((this.finalWidth/this.finalHeight-this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight)/(this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight))>.2?(E.showAlert("修改图片比例不能超过原图比例的20%"),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),void 0):(k.instance.curSelectOrderItem=this,k.instance.batchChangeMatItems=[],k.instance.curSelectMat=null,"Zipai"==k.instance.orderType?E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!1,this.ordervo.picinfo):E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL",!1,this.ordervo.picinfo),void 0)},e.updateProductPrice=function(){if(null!=this.ordervo.orderData&&null!=this.curproductvo){this.updateOrderDataPrice();{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}},e.changeProduct=function(t){this.curproductvo=t.cloneData(this),this.ordervo.productVo=this.curproductvo,this.fanmianFid="",this.updateOrderData(this.curproductvo);var i=this.height;this.initEditData(),Ln.instance.event("ADJUST_PIC_ORDER_TECH",this.height-i)},e.getPrice=function(){return parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))},e.getNoDiscountPrice=function(){return null!=this.ordervo.orderData?parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice:0},e.updateOrderDataPrice=function(){if(null!=this.curproductvo&&null!=this.ordervo.orderData){{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.ordervo.orderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.orderData.itemPrice=this.ordervo.orderPrice.toString(),this.ordervo.orderData.discountProcessPrice=this.curproductvo.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderData.materialPrice=this.ordervo.orderPrice-this.ordervo.orderData.discountProcessPrice,this.ordervo.orderData.one_mat_cost=this.curproductvo.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var t=this.curproductvo.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);this.ordervo.orderData.one_proc_cost=t[0],this.ordervo.orderData.oneDiscountGrossMargin=t[1],this.ordervo.orderData.oneNoDiscountGrossMargin=t[2]}},e.updateOrderData=function(t){this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100;this.ordervo.orderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.noDiscountOrderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.manufacturer_code=t.manufacturerCode,this.ordervo.manufacturer_name=t.manufacturerName;var i={};if(i.material_code=t.materialCode,i.conponent={},i.conponent.prodName=t.prodName,i.conponent.prodCode=t.prodCode,i.conponent.num=1,i.conponent.LWH=this.finalWidth.toFixed(2)+"/"+this.finalHeight.toFixed(2)+"/1",i.conponent.prodDescription="",i.conponent.weight=t.getOrderSingleWeight(this.finalWidth/100,this.finalHeight/100,this.ordervo).toFixed(2),0==this.ordervo.type)i.conponent.imageFilePath=W.originPicPicUrl+this.ordervo.picinfo.fid+"."+this.ordervo.picinfo.picClass,i.conponent.previewImagePath=W.biggerPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,i.conponent.thumbnailsPath=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix;else{var e=this.ordervo.picinfo;i.conponent.thumbnailsPath=0==e.rectangleOrCircle?"commers/blackbg.png":"commers/circleDx.png"}i.conponent.filename=this.ordervo.picinfo.directName,i.itemNumber=parseInt(this.inputnum.text),i.itemPrice=this.ordervo.orderPrice.toString(),i.actualAmount=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1)).toExponential(),i.isMerchandise=1,i.itemStatus="0",i.fixedDiscount=t.isFixedCustomerRatio,i.discountProcessPrice=t.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.materialPrice=this.ordervo.orderPrice-i.discountProcessPrice,i.unitPrice=this.ordervo.orderPrice-t.getAllAttachPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.unitPrice=i.unitPrice/(this.finalWidth/100*this.finalHeight/100),i.unitPrice=i.unitPrice.toFixed(2),i.one_mat_cost=t.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var n=t.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);i.one_proc_cost=n[0],i.gross_margin=n[1]+n[2],i.oneDiscountGrossMargin=n[1],i.oneNoDiscountGrossMargin=n[2];for(var s="",r=!1,a=this.ordervo.picinfo.directName.length-1;a>=0;a--)"."==this.ordervo.picinfo.directName.charAt(a)&&0==r?r=!0:r&&(s=this.ordervo.picinfo.directName.charAt(a)+s);i.comments=s.substr(0,20),i.conponent.procInfoList=t.getProInfoList(this.ordervo.picinfo,this.finalWidth/100,this.finalHeight/100,this.ordervo);for(var o=99999999,a=0;a<i.conponent.procInfoList.length;a++)(i.conponent.procInfoList[a].procDescription.indexOf("超幅拼接")>=0||i.conponent.procInfoList[a].procDescription.indexOf("超宽拼接")>=0)&&(o=this.ordervo.eachCutLength[0]);i.minSideLength=Math.min(this.finalWidth,this.finalHeight,o).toFixed(2),i.colorFormat=this.ordervo.picinfo.colorspace,this.ordervo.orderData=i},e.getProcessPrice=function(){return null!=this.curproductvo?this.curproductvo.getProcessPrice(this.finalWidth/100,this.finalHeight/100,this.ordervo)*parseInt(this.inputnum.text):0},e.checkCanOrder=function(){if(null==this.ordervo.orderData)return E.showAlert("未选择材料工艺"),!1;if(this.ordervo.orderData.conponent.prodName.indexOf("户内")>=0&&this.architype.text.indexOf("户外")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}if(this.ordervo.orderData.conponent.prodName.indexOf("户外")>=0&&this.architype.text.indexOf("户内")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}return null==this.ordervo.orderData.conponent.procInfoList||0==this.ordervo.orderData.conponent.procInfoList.length?(E.showAlert("未选择工艺"),!1):!0},i}(ho),ql=function(i){function e(t,i){this.factoryVo=null,e.__super.call(this),this.factoryVo=t,this.checkselect.selected=!0,this.qqContact.on("click",this,this.onClickOpenQQ),this.factorytxt.text=t.name,this.holaday.text="",this.outicon.skin="commers/"+K.OUTPUT_ICON[i],this.holaday.visible=""!=t.promotion_desc,""!=t.promotion_desc&&(this.holaday.text="("+t.promotion_desc+")"),this.on("click",this,this.onSelectFactory)}s(e,"script.order.OutputCenterCell",i);var n=e.prototype;return n.onClickOpenQQ=function(){t.open("tencent://message/?uin=10987654321")},n.onSelectFactory=function(){this.checkselect.selected=!this.checkselect.selected,this.factoryVo.isSelected=this.checkselect.selected,Ln.instance.event("UPDATE_SELECTED_FACTORY_PRODCATEGORY")},e}(so),Jl=function(t){function i(){this.adjustHeight=null,this.caller=null,this.ordata=null,this.ordersn=null,this.hasgetState=!1,i.__super.call(this)}s(i,"script.usercenter.item.OrderPriceSettingItem",t);var e=i.prototype;return e.setData=function(t){this.itemseq.text=t.itemSeq,this.picimg.skin=null!=t.conponent.thumbnailsPath&&""!=t.conponent.thumbnailsPath?t.conponent.thumbnailsPath:"commers/blackbg.png",this.isurgent.visible=t.isUrgent,this.ordata=t,this.ordersn=t.orderId,this.matname.text=t.conponent.prodName;var i=t.conponent.LWH.split("/");this.deliverydate.text=null!=t.deliveryDate?T.getNextDayStr(t.deliveryDate+" 00:00:00"):"",this.widthtxt.text=i[0],this.heighttxt.text=i[1];var e=parseFloat(i[0]),n=parseFloat(i[1]);e>n?(this.picimg.width=155,this.picimg.height=155/e*n):(this.picimg.height=155,this.picimg.width=155/n*e),this.pronum.text=t.itemNumber+"";var s="";if(null!=t.conponent.procInfoList)for(var r=0;r<t.conponent.procInfoList.length;r++)s+=t.conponent.procInfoList[r].procDescription+"-";if(this.tech.text=s.substr(0,s.length-1),this.money.text=(Number(t.itemPrice)*Number(t.itemNumber)).toFixed(2),this.unitPriceTxt.text=t.itemPrice,this.measureUnit.text=null!=t.measureUnit?t.measureUnit:"平方米",null!=t.totalMeasureNum&&""!=t.totalMeasureNum)var a=(parseFloat(this.money.text)/parseFloat(t.totalMeasureNum)).toFixed(2);else a=t.itemPrice;this.unitPriceInput.text=null!=this.ordata.unitSalesPrice&&""!=this.ordata.unitSalesPrice?this.ordata.unitSalesPrice:a,this.totalPriceInput.text=null!=this.ordata.totalSalesPrice&&""!=this.ordata.totalSalesPrice?this.ordata.totalSalesPrice:this.money.text,this.unitPriceInput.on("input",this,this.onChangeUnitPrice),this.totalPriceInput.on("input",this,this.onChangeTotalPrice),g.instance.isHidePrice()&&(this.money.text="****"),this.filename.text=null!=t.conponent.filename?t.conponent.filename:""},e.onChangeUnitPrice=function(){if(""!=this.unitPriceInput.text){var t=parseFloat(this.unitPriceInput.text),i=0/0;i=null!=this.ordata.totalMeasureNum&&""!=this.ordata.totalMeasureNum?t*parseFloat(this.ordata.totalMeasureNum):t*parseInt(this.ordata.itemNumber),this.totalPriceInput.text=i.toFixed(2),this.ordata.unitSalesPrice=t.toFixed(2),this.ordata.totalSalesPrice=parseFloat(this.totalPriceInput.text).toFixed(2),this.updateTotalPrice()
}},e.onChangeTotalPrice=function(){if(""!=this.totalPriceInput.text){var t=parseFloat(this.totalPriceInput.text),i=0/0;i=null!=this.ordata.totalMeasureNum&&""!=this.ordata.totalMeasureNum?t/parseFloat(this.ordata.totalMeasureNum):t/parseInt(this.ordata.itemNumber),this.unitPriceInput.text=i.toFixed(2),this.ordata.unitSalesPrice=i.toFixed(2),this.ordata.totalSalesPrice=parseFloat(this.totalPriceInput.text).toFixed(2),this.updateTotalPrice()}},e.updateTotalPrice=function(){Ln.instance.event("UPDATE_ORDER_PRICE")},e.onShowComment=function(){E.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordata.comments})},i}(ko),jl=function(t){function i(){this.matclassvo=null,i.__super.call(this)}s(i,"script.order.MaterialClassBtn",t);var e=i.prototype;return e.setData=function(t){this.matclassvo=t,this.selbtn.label=this.matclassvo.matclassname,this.selfIcon.visible=!1},r(0,e,"ShowSelected",null,function(t){this.selbtn.selected=t}),i}(uo),Kl=function(t){function i(){this.areaVo=null,i.__super.call(this),this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut),this.bg.visible=!1}s(i,"script.login.CityAreaItem",t);var e=i.prototype;return e.onMouseOver=function(){this.bg.visible=!0},e.onMouseOut=function(){this.bg.visible=!1},e.setData=function(t){this.areaVo=t,this.productname.text=this.areaVo.areaName},i}(Fa),Zl=function(t){function i(){this.memberdata=null,i.__super.call(this),this.movebtn.on("click",this,this.onMoveMember),this.deletebtn.on("click",this,this.onDeleteMember),this.authoritytxt.on("click",this,this.onSetAuthority)}s(i,"script.usercenter.item.MemberItem",t);var e=i.prototype;return e.onDeleteMember=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除"+this.memberdata.mobileNumber+"吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){if(t){var i={deptId:"0",userId:this.memberdata.userId};W.instance.Request(W.httpUrl+"org/dept/setMember?",this,this.ondeleteMemberBack,JSON.stringify(i),"post")}},e.ondeleteMemberBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("DELETE_DEPT_MEMBER")},e.onSetAuthority=function(){Ln.instance.event("SET_MEMEBER_AUTHORITY",this.memberdata)},e.onMoveMember=function(){Ln.instance.event("MOVE_MEMBER_DEPT",this.memberdata)},e.setData=function(t){this.memberdata=t,this.nickname.text=t.nickName,this.account.text=t.mobileNumber,this.jointime.text=t.createdAt},i}(Jo),$l=function(t){function i(){this.addvo=null,i.__super.call(this)}s(i,"script.usercenter.item.CustomerAddressCell",t);var e=i.prototype;return e.setData=function(t){this.addvo=t,this.conName.text=t.receiverName,this.phonetxt.text=t.phone,this.detailaddr.text=t.proCityArea,this.defaultDelivery.text=t.defaultDeliveryType,this.btnDel.on("click",this,this.onDeleteAddr),this.editTxt.on("click",this,this.onEditAddr)},e.onDeleteAddr=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该地址吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+W.deleteCustomerAddress,this,this.delMyAddressBack,JSON.stringify({id:this.addvo.id}),"post")},e.delMyAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_MYADDRESS_LIST")},e.onEditAddr=function(){E.instance.openView("VIEW_ADD_NEW_ADDRESS",!1,{address:this.addvo,url:W.updateCustomerAddress})},e.onSetDefaultAddr=function(){W.instance.Request(W.httpUrl+"org/express/setDefault?",this,this.defaultAddressBack,JSON.stringify({id:this.addvo.id}),"post")},e.defaultAddressBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_MYADDRESS_LIST")},i}(eo),Ql=function(t){function i(){this.adjustHeight=null,this.caller=null,this.ordata=null,this.ordersn=null,this.hasgetState=!1,i.__super.call(this)}s(i,"script.usercenter.QuestOrderItem",t);var e=i.prototype;return e.setData=function(t){this.itemseq.text=t.itemSeq,this.picimg.skin=null!=t.conponent.thumbnailsPath&&""!=t.conponent.thumbnailsPath?t.conponent.thumbnailsPath:"commers/blackbg.png",this.isurgent.visible=t.isUrgent,this.ordata=t,this.ordersn=t.orderId,this.matname.text=t.conponent.prodName;var i=t.conponent.LWH.split("/");this.deliverydate.text=null!=t.deliveryDate?T.getNextDayStr(t.deliveryDate+" 00:00:00"):"",this.widthtxt.text=i[0],this.heighttxt.text=i[1];var e=parseFloat(i[0]),n=parseFloat(i[1]);e>n?(this.picimg.width=155,this.picimg.height=155/e*n):(this.picimg.height=155,this.picimg.width=155/n*e),this.pronum.text=t.itemNumber+"";var s="";if(null!=t.conponent.procInfoList)for(var r=0;r<t.conponent.procInfoList.length;r++)s+=t.conponent.procInfoList[r].procDescription+"-";this.tech.text=s.substr(0,s.length-1),this.money.text=(Number(t.itemPrice)*Number(t.itemNumber)).toFixed(2),g.instance.isHidePrice()&&(this.money.text="****"),this.filename.text=null!=t.conponent.filename?t.conponent.filename:"",this.commentmark.visible=""!=t.comments,this.comment.on("click",this,this.onShowComment),this.detailbox.visible=!1,this.detailbtn.on("click",this,this.onClickShowDetail)},e.onShowComment=function(){E.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordata.comments})},e.onClickShowDetail=function(){if(this.detailbox.visible=!this.detailbox.visible,this.detailbox.visible&&0==this.hasgetState){var t="orderItemSn="+this.ordata.orderItemSn;W.instance.Request(W.httpUrl+"business/getOrderItemStatus?"+t,this,this.onGetStateBack,null,null)}},e.onGetStateBack=function(t){try{var i=JSON.parse(t);null!=i&&(this.hasgetState=!0,-1==i.status?this.txtDetailInfo.text="未查询到生产信息":0==i.status?this.txtDetailInfo.text="产品状态：生产未完成":3==i.status&&(this.txtDetailInfo.text="产品状态：生产已完成"))}catch(e){}},e.hideDetail=function(){this.detailbox.visible=!1},i}(Wo),tc=function(t){function i(){this.orderdata=null,i.__super.call(this),this.selectBox.on("click",this,this.changeSelected)}s(i,"script.usercenter.item.WriteOffOrderCell",t);var e=i.prototype;return e.setData=function(t){this.orderdata=t,this.orderid.text=this.orderdata.id,this.ordertime.text=this.orderdata.createdAt,this.selectBox.selected=this.orderdata.selected;try{var i=JSON.parse(this.orderdata.detail);this.sellPrice.text=null!=i.totalSalesPrice&&""!=i.totalSalesPrice?i.totalSalesPrice:Number(i.moneyPaid).toFixed(2),this.productnum.text=i.orderItemList.length+"",this.WriteoffMoney.text=this.orderdata.writeOffMoney.toFixed(2),this.unWriteOffMoney.text=(parseFloat(this.sellPrice.text)-this.orderdata.writeOffMoney).toFixed(2)}catch(e){}},e.changeSelected=function(){Ln.instance.event("CHANGE_WRITEOFF_ORDER_SELECTED",this.orderdata)},e.setWriteOffMoney=function(t){this.orderdata.writeOffMoney=t,this.WriteoffMoney.text=t.toFixed(2),this.unWriteOffMoney.text=(parseFloat(this.sellPrice.text)-t).toFixed(2)},e.setSelected=function(t){null!=this.orderdata&&(this.selectBox.selected=t,this.orderdata.selected=t,t?this.setWriteOffMoney(Number(this.sellPrice.text)):this.setWriteOffMoney(0))},i}(ih),ic=function(t){function i(){this.attachCatVo=null,i.__super.call(this)}s(i,"script.order.SelectAttachBtn",t);var e=i.prototype;return e.setData=function(t){this.attachCatVo=t,this.selbtn.label=this.attachCatVo.accessory_name;var i=this.selbtn.text.textWidth+40;this.width=i,this.selbtn.width=i,this.selbtn.on("doubleclick",this,this.onSelectSure),this.selfIcon.visible=this.attachCatVo.is_belongtoClient},e.onSelectSure=function(){Ln.instance.event("ADD_TECH_ATTACH",this.attachCatVo)},e.ShowSelected=function(t){this.selbtn.selected=t},i}(uo),ec=function(t){function i(){this.orgData=null,i.__super.call(this),this.deltbn.visible=!1,this.on("mouseover",this,this.showDeltbn),this.on("mouseout",this,this.hideDeltbn),this.deltbn.on("click",this,this.ondeleteOrga)}s(i,"script.usercenter.item.OrganizeItem",t);var e=i.prototype;return e.setselected=function(t){null!=this.orgData&&(this.selected=this.orgData.id==t)},e.ondeleteOrga=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除"+this.orgData.name+"吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){if(t){var i={id:this.orgData.id};W.instance.Request(W.httpUrl+"org/dept/del?",this,this.onDeleteBack,JSON.stringify(i),"post")}},e.onDeleteBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("DELETE_ORGANIZE_BACK")},e.showDeltbn=function(){this.deltbn.visible=!0},e.hideDeltbn=function(){this.deltbn.visible=!1},e.setData=function(t){this.orgData=t,this.hotbtm.label=t.name},r(0,e,"selected",null,function(t){this.hotbtm.selected=t}),i}(Va),nc=(function(t){function i(){this.factorydata=null,i.__super.call(this)}s(i,"script.order.FactoryChooseBtn",t);var e=i.prototype;return e.setData=function(t){this.factorydata=t,this.selbtn.label=this.factorydata.name,this.selbtn.skin="commers/btn3.png",this.setSelected(this.factorydata==k.instance.selectFactoryInMat)},e.setSelected=function(t){this.selbtn.selected=t},i}(uo),function(t){function i(t){if(this.ordervo=null,this.locked=!0,this.finalWidth=0/0,this.finalHeight=0/0,this.curproductvo=null,this.fanmianFid=null,this.discount=1,i.__super.call(this),this.ordervo=t,Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateLblPos),this.updateLblPos(g.instance.shrinkState),this.initItem(),null!=this.ordervo.orderData){this.curproductvo=this.ordervo.productVo,this.inputnum.text=this.ordervo.orderData.itemNumber;var e=this.ordervo.orderData.conponent.LWH.split("/");e.length>1&&(this.editwidth.text=e[0],this.editheight.text=e[1],this.finalWidth=parseFloat(e[0]),this.finalHeight=parseFloat(e[1])),this.initEditData()}}s(i,"script.order.PicOrderItem",t);var e=i.prototype;return e.updateLblPos=function(t){0==t?(this.deletBtn.x=1466,this.total.x=1314,this.unitPrice.x=1223):(this.deletBtn.x=1566,this.total.x=1415,this.unitPrice.x=1324)},e.initItem=function(){this.numindex.text=this.ordervo.indexNum.toString(),this.fileimg.skin=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,this.subtn.on("click",this,this.onSubItemNum),this.addbtn.on("click",this,this.onAddItemNum),this.hascomment.visible=!1,this.addmsg.visible=!1,this.ordervo.picinfo.picWidth>this.ordervo.picinfo.picHeight?(this.fileimg.width=108,this.fileimg.height=108/this.ordervo.picinfo.picWidth*this.ordervo.picinfo.picHeight):(this.fileimg.height=108,this.fileimg.width=108/this.ordervo.picinfo.picHeight*this.ordervo.picinfo.picWidth),this.yixingimg.width=this.fileimg.width,this.yixingimg.height=this.fileimg.height,this.backimg.width=this.fileimg.width,this.backimg.height=this.fileimg.height,this.yingxback.width=this.fileimg.width,this.yingxback.height=this.fileimg.height,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.fileimg.on("click",this,this.onShowBigImg),this.backimg.on("click",this,this.onShowBackImg),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),this.editwidth.restrict="0-9.",this.editheight.restrict="0-9.",this.filename.text=this.ordervo.picinfo.directName,this.architype.text=this.ordervo.techStr,this.total.text="0",this.deleteorder.underline=!0,this.deleteorder.underlineColor="#222222",this.inputnum.text="1",this.inputnum.restrict="0-9",this.deletBtn.on("click",this,this.onDeleteOrder),this.addmsg.underline=!0,this.addmsg.underlineColor="#222222",this.addmsg.on("click",this,this.onAddComment),this.total.visible=!g.instance.isHidePrice(),this.unitPrice.text="0",this.inputnum.on("input",this,this.onNumChange),this.editwidth.on("input",this,this.onWidthSizeChange),this.editheight.on("input",this,this.onHeightSizeChange),this.lockratio.on("click",this,this.onLockChange),this.architype.height=this.architype.textField.textHeight>124?this.architype.textField.textHeight:124,this.manuicon.visible=!1,this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.setMatBtn.on("click",this,this.onShowMaterialView),this.editmat.on("click",this,this.onShowMaterialView),this.height=this.architype.height>124?this.architype.height+10:134,this.alighComponet()},e.initEditData=function(){this.setMatBtn.visible=null==this.curproductvo,this.editmat.visible=null!=this.curproductvo,this.manuicon.visible=!0,this.manuicon.skin="commers/"+K.OUTPUT_ICON[k.instance.getManuFactureIndex(this.curproductvo.manufacturerCode)];for(var t=(this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100,this.ordervo.productVo),i=t.getAllSelectedTech(),e="",n="",s=!1,r=0;r<i.length;r++)"SPTE10320"==i[r].procCode||"SPTE230414160834510"==i[r].procCode?(s=!0,this.fanmianFid=this.ordervo.picinfo.fid):K.backSideUnSame(i[r].procCode)?(e=this.ordervo.picinfo.backFid,this.fanmianFid=e):K.yiXingCutProcess(i[r].procCode)&&(n=this.ordervo.picinfo.yixingFid);this.backimg.visible=""!=e||s,this.yingxback.visible=(""!=e||s)&&""!=n,""!=e&&(this.backimg.skin=W.biggerPicUrl+e+".jpg"),s&&(this.backimg.skin=W.biggerPicUrl+this.ordervo.picinfo.fid+".jpg"),this.yixingimg.visible=""!=n,""!=n&&(this.yixingimg.skin=W.biggerPicUrl+n+".jpg",this.yingxback.visible&&(this.yingxback.skin=W.biggerPicUrl+n+".jpg")),this.total.text=(parseInt(this.inputnum.text)*t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+"",this.unitPrice.text=this.ordervo.orderData.unitPrice;var a=t.getTechDes(!1,this.finalWidth,this.finalHeight);a.indexOf("超宽拼接")>=0&&(a=a.replace("超宽拼接","超宽拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("超幅拼接")>=0&&(a=a.replace("超幅拼接","超幅拼接("+["V","H"][this.ordervo.cuttype]+"-"+this.ordervo.cutnum+"-"+this.ordervo.eachCutLength.join(";")+")")),a.indexOf("小块裁切")>=0&&(a=a.replace("小块裁切","小块裁切(H-"+this.ordervo.horiCutNum+",V-"+this.ordervo.verCutNum+")")),a.indexOf("正上方打扣")>=0,this.architype.text=t.prodName+"\n"+a,this.architype.height=this.architype.textField.textHeight>134?this.architype.textField.textHeight:134,this.height=this.architype.height>134?this.architype.height+10:134,this.alighComponet()},e.reset=function(){this.architype.text="",this.total.text="0",this.unitPrice.text="0",this.ordervo.orderData=null,this.ordervo.productVo=null,this.curproductvo=null,this.yixingimg.visible=!1,this.backimg.visible=!1,this.yingxback.visible=!1,this.manuicon.visible=!1,this.setMatBtn.visible=!0,this.editmat.visible=!1},e.onLockChange=function(){this.locked?(this.lockratio.skin="commers/unlock.png",this.locked=!1):(this.lockratio.skin="commers/lock.png",this.locked=!0)},e.onWidthSizeChange=function(){var t=Number(this.editwidth.text);if(this.finalWidth=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicWidth*this.ordervo.picinfo.picPhysicHeight;this.finalHeight=i,this.editheight.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onHeightSizeChange=function(){var t=Number(this.editheight.text);if(this.finalHeight=t,this.locked){var i=t/this.ordervo.picinfo.picPhysicHeight*this.ordervo.picinfo.picPhysicWidth;this.finalWidth=i,this.editwidth.text=i.toFixed(2)}this.reset(),this.updatePrice()},e.onSubItemNum=function(){var t=parseInt(this.inputnum.text);t>1&&t--,this.inputnum.text=t.toString(),this.onNumChange()},e.onAddItemNum=function(){var t=parseInt(this.inputnum.text);t++,this.inputnum.text=t.toString(),this.onNumChange()},e.onShowBigImg=function(){if(this.yixingimg.visible){var t=[];t.push(this.ordervo.picinfo),t.push(this.yixingimg.skin),t.push(1),E.instance.openView("VIEW_PICTURE_CHECK",!1,t)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,this.ordervo.picinfo)},e.onShowBackImg=function(){var t=new p({},1);if(t.fid=this.fanmianFid,t.picWidth=this.ordervo.picinfo.picWidth,t.picHeight=this.ordervo.picinfo.picHeight,this.yingxback.visible){var i=[];i.push(t),i.push(this.yingxback.skin),i.push(-1),E.instance.openView("VIEW_PICTURE_CHECK",!1,i)}else E.instance.openView("VIEW_PICTURE_CHECK",!1,t)},e.onAddComment=function(){E.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordervo.comment,caller:this,callback:this.onAddMsgBack})},e.onAddMsgBack=function(t){this.ordervo.comment=t,this.hascomment.visible=""!=this.ordervo.comment,this.ordervo.orderData&&(this.ordervo.orderData.comments=this.ordervo.comment)},e.alighComponet=function(){this.checkSel.y=(this.height-28)/2,this.numindex.y=(this.height-this.numindex.height)/2,this.fileimg.y=this.height/2,this.backimg.y=this.height/2,this.yingxback.y=this.height/2,this.yixingimg.y=this.height/2,this.filename.y=(this.height-this.filename.height)/2,this.editbox.y=(this.height-this.editbox.height)/2,this.numbox.y=this.height/2-12,this.total.y=(this.height-this.total.height)/2,this.editmat.y=(this.height-this.editmat.height)/2,this.deletBtn.y=(this.height-this.deletBtn.height)/2,this.operatebox.y=(this.height-this.operatebox.height)/2-10},e.updateIndex=function(){this.numindex.text=this.ordervo.indexNum.toString()},e.onDeleteOrder=function(){Ln.instance.event("DELETE_PIC_ORDER",this)},e.updatePrice=function(){if(null!=this.curproductvo){this.updateOrderData(this.curproductvo);{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onNumChange=function(){""==this.inputnum.text&&(this.inputnum.text="1"),this.total.text=(parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice*this.discount).toFixed(1).toString(),this.ordervo.orderData&&(this.ordervo.orderData.itemNumber=parseInt(this.inputnum.text),this.ordervo.orderData.item_payPrice=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))),Ln.instance.event("UPDATE_ORDER_ITEM_TECH")},e.onShowMaterialView=function(){if(null==k.instance.selectAddress)return E.showAlert("请选择收货地址"),void 0;if(null==k.instance.outPutAddr||0==k.instance.outPutAddr.length)return E.showAlert("当前的收货地址没有输出中心，请重新选择收货地址"),void 0;for(var t=0;t<k.instance.outPutAddr.length;t++)if(null==k.instance.allManuFacutreMatProcPrice[k.instance.outPutAddr[t].org_code])return E.showAlert("暂未获取到生产商材料工艺价格，请重新选择收货地址或稍后再试"),void 0;return null==k.instance.productList||0==k.instance.productList.length?(E.showAlert("未获取到材料列表，请重新选择收货地址或者刷新页面"),void 0):null==k.instance.selectAddress?(E.showAlert("请先选择收货地址"),void 0):0!=this.finalHeight&&Math.abs((this.finalWidth/this.finalHeight-this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight)/(this.ordervo.picinfo.picPhysicWidth/this.ordervo.picinfo.picPhysicHeight))>.2?(E.showAlert("修改图片比例不能超过原图比例的20%"),this.finalWidth=this.ordervo.picinfo.picPhysicWidth,this.finalHeight=this.ordervo.picinfo.picPhysicHeight,this.editwidth.text=this.ordervo.picinfo.picPhysicWidth.toString(),this.editheight.text=this.ordervo.picinfo.picPhysicHeight.toString(),void 0):(k.instance.curSelectOrderItem=this,k.instance.batchChangeMatItems=[],k.instance.curSelectMat=null,"Penyin"==k.instance.orderType&&E.instance.openView("VIEW_SET_MATERIAL_PROCESS_PANEL",!1,this.ordervo.picinfo),"Zipai"==k.instance.orderType&&E.instance.openView("VIEW_CHARACTER_DEMONSTRATE_PANEL",!1,this.ordervo.picinfo),void 0)},e.updateProductPrice=function(){if(null!=this.ordervo.orderData&&null!=this.curproductvo){this.updateOrderDataPrice();{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.total.text=(parseInt(this.inputnum.text)*this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0)*this.discount).toFixed(1)+""}},e.changeProduct=function(t){this.curproductvo=t.cloneData(this),this.ordervo.productVo=this.curproductvo,this.fanmianFid="",this.updateOrderData(this.curproductvo);var i=this.height;this.initEditData(),Ln.instance.event("ADJUST_PIC_ORDER_TECH",this.height-i)},e.getPrice=function(){return parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1))},e.getNoDiscountPrice=function(){return null!=this.ordervo.orderData?parseInt(this.inputnum.text)*this.ordervo.noDiscountOrderPrice:0},e.updateOrderDataPrice=function(){if(null!=this.curproductvo&&null!=this.ordervo.orderData){{this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100}this.ordervo.orderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice=this.curproductvo.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.orderData.itemPrice=this.ordervo.orderPrice.toString(),this.ordervo.orderData.discountProcessPrice=this.curproductvo.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.orderData.materialPrice=this.ordervo.orderPrice-this.ordervo.orderData.discountProcessPrice,this.ordervo.orderData.one_mat_cost=this.curproductvo.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var t=this.curproductvo.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);this.ordervo.orderData.one_proc_cost=t[0],this.ordervo.orderData.oneDiscountGrossMargin=t[1],this.ordervo.orderData.oneNoDiscountGrossMargin=t[2]}},e.updateOrderData=function(t){this.finalHeight*this.finalWidth/1e4,2*(this.finalHeight+this.finalWidth)/100;this.ordervo.orderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),this.ordervo.noDiscountOrderPrice=t.getTotalPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo,!0),this.ordervo.orderPrice<.15&&(this.ordervo.orderPrice=.15),this.ordervo.noDiscountOrderPrice<.15&&(this.ordervo.noDiscountOrderPrice=.15),this.ordervo.manufacturer_code=t.manufacturerCode,this.ordervo.manufacturer_name=t.manufacturerName;var i={};i.material_code=t.materialCode,i.conponent={},i.conponent.prodName=t.prodName,i.conponent.prodCode=t.prodCode,i.conponent.num=1,i.conponent.LWH=this.finalWidth.toFixed(2)+"/"+this.finalHeight.toFixed(2)+"/1",i.conponent.prodDescription="",i.conponent.weight=t.getOrderSingleWeight(this.finalWidth/100,this.finalHeight/100,this.ordervo).toFixed(2),i.conponent.imageFilePath=W.originPicPicUrl+this.ordervo.picinfo.fid+"."+this.ordervo.picinfo.picClass,i.conponent.previewImagePath=W.biggerPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,i.conponent.thumbnailsPath=W.smallerrPicUrl+this.ordervo.picinfo.fid+this.ordervo.picinfo.tailFix,i.conponent.filename=this.ordervo.picinfo.directName,i.itemNumber=parseInt(this.inputnum.text),i.itemPrice=this.ordervo.orderPrice.toString(),i.actualAmount=parseFloat((parseInt(this.inputnum.text)*this.ordervo.orderPrice*this.discount).toFixed(1)).toExponential(),i.isMerchandise=0,i.itemStatus="0",i.fixedDiscount=t.isFixedCustomerRatio,i.discountProcessPrice=t.getDiscountProcessPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.materialPrice=this.ordervo.orderPrice-i.discountProcessPrice,i.unitPrice=this.ordervo.orderPrice-t.getAllAttachPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo),i.unitPrice=i.unitPrice/(this.finalWidth/100*this.finalHeight/100),i.unitPrice=i.unitPrice.toFixed(2),i.one_mat_cost=t.getMaterialPrice(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);var e=t.getProcessAndGrossPrices(this.finalWidth/100,this.finalHeight/100,!1,this.ordervo);i.one_proc_cost=e[0],i.gross_margin=e[1]+e[2],i.oneDiscountGrossMargin=e[1],i.oneNoDiscountGrossMargin=e[2],i.measureUnit=t.getFirstTechMeasureUnit(),i.totalMeasureNum=(t.getTotalMeasureNum(this.finalWidth/100,this.finalHeight/100)*i.itemNumber).toFixed(2);for(var n="",s=!1,r=this.ordervo.picinfo.directName.length-1;r>=0;r--)"."==this.ordervo.picinfo.directName.charAt(r)&&0==s?s=!0:s&&(n=this.ordervo.picinfo.directName.charAt(r)+n);i.comments=n.substr(0,20),i.conponent.procInfoList=t.getProInfoList(this.ordervo.picinfo,this.finalWidth/100,this.finalHeight/100,this.ordervo);for(var a=99999999,r=0;r<i.conponent.procInfoList.length;r++)(i.conponent.procInfoList[r].procDescription.indexOf("超幅拼接")>=0||i.conponent.procInfoList[r].procDescription.indexOf("超宽拼接")>=0)&&(a=this.ordervo.eachCutLength[0]);i.minSideLength=Math.min(this.finalWidth,this.finalHeight,a).toFixed(2),i.colorFormat=this.ordervo.picinfo.colorspace,this.ordervo.orderData=i},e.getProcessPrice=function(){return null!=this.curproductvo?this.curproductvo.getProcessPrice(this.finalWidth/100,this.finalHeight/100,this.ordervo)*parseInt(this.inputnum.text):0},e.checkCanOrder=function(){if(null==this.ordervo.orderData)return E.showAlert("未选择材料工艺"),!1;if(this.ordervo.orderData.conponent.prodName.indexOf("户内")>=0&&this.architype.text.indexOf("户外")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}if(this.ordervo.orderData.conponent.prodName.indexOf("户外")>=0&&this.architype.text.indexOf("户内")>=0){var t="user_phone="+g.instance.userAccount+"&error_msg="+this.ordervo.orderData.conponent.prodName+",工厂："+this.ordervo.manufacturer_name+",材料不匹配&request_url=下单验证";return W.instance.Request(W.httpUrl+"group/add-error-log?",null,null,t,"post"),E.showAlert("材料和工艺不匹配，请重新选择材料和工艺"),!1}return null==this.ordervo.orderData.conponent.procInfoList||0==this.ordervo.orderData.conponent.procInfoList.length?(E.showAlert("未选择工艺"),!1):!0},i}(ho)),sc=function(t){function i(){this.factoryvo=null,i.__super.call(this)}s(i,"script.order.SelFactoryItem",t);var e=i.prototype;return e.setData=function(t){this.factoryvo=t,this.addresstxt.text=this.factoryvo.name+"("+this.factoryvo.addr+")",this.ShowSelected=null!=k.instance.selectFactoryAddress&&k.instance.selectFactoryAddress.indexOf(this.factoryvo)>=0?!0:!1,this.on("click",this,this.onClickSelect)},e.onClickSelect=function(){this.btnsel.selected?null!=k.instance.selectFactoryAddress&&k.instance.selectFactoryAddress.indexOf(this.factoryvo)>=0&&k.instance.selectFactoryAddress.splice(k.instance.selectFactoryAddress.indexOf(this.factoryvo),1):(null==k.instance.selectFactoryAddress&&(k.instance.selectFactoryAddress=[]),k.instance.selectFactoryAddress.indexOf(this.factoryvo)<0&&k.instance.selectFactoryAddress.push(this.factoryvo)),this.ShowSelected=!this.btnsel.selected},r(0,e,"ShowSelected",null,function(t){this.btnsel.selected=t,this.selCheck.selected=t}),i}(bo),rc=function(t){function i(){i.__super.call(this)}s(i,"script.usercenter.PublicChargeCell",t);var e=i.prototype;return e.setData=function(t){this.chargemoney.text=t.checkAmount+"",this.transfermoney.text=t.amount+"",this.confirmtime.text=t.logDate+"",this.chargetime.text="0"==t.status.toString()?"":t.checkDate+"","0"==t.status.toString()?(this.state.text="待确认",this.state.color="#223322"):"1"==t.status.toString()&&(this.state.text="已确认",this.state.color="#003dc6"),"2"==t.status.toString()&&(this.state.text="已拒绝",this.state.color="#FF1122")},i}(oh),ac=function(t){function i(){this.orderdata=null,i.__super.call(this)}s(i,"script.usercenter.OrderCheckListItem",t);var n=i.prototype;return n.setData=function(t){this.orderdata=t,this.orderid.text=this.orderdata.id,this.ordertime.text=this.orderdata.createdAt,this.customeName.text=null!=this.orderdata.customerName?this.orderdata.customerName:"";var i=parseInt(this.orderdata.status);if(this.retrybtn.visible=!1,this.deletebtn.visible=!1,this.deleteorder.visible=!1,this.sellPriceSet.visible=!1,e.timer.clearAll(this),0==i){this.orderstatus.text="未支付",this.orderstatus.color="#FF0000",this.payagain.visible=!0;var n=JSON.parse(this.orderdata.detail);if(null!=this.orderdata.createdAt)var s=new Date(Date.parse(T.convertDateStr(this.orderdata.createdAt)));else s=new Date(Date.parse(T.convertDateStr(n.pay_timeStr)));var r=(new Date).getTime()-s.getTime()+288e5;this.deleteorder.visible=r>432e6,this.sellPriceSet.visible=!0}else if(10==i){this.orderstatus.text="支付中",this.orderstatus.color="#52B232",this.payagain.visible=!1,this.countDownPayTime(),e.timer.loop(1e3,this,this.countDownPayTime);var s=new Date(Date.parse(T.convertDateStr(this.orderdata.createdAt))),r=(new Date).getTime()-s.getTime()+288e5;this.deleteorder.visible=r>432e6}else 1==i?(this.orderstatus.text="已支付排产成功",this.orderstatus.text+=0==this.orderdata.cleared?"(未销账)":"(已销账)",this.orderstatus.color="#52B232",this.payagain.visible=!1,this.deletebtn.visible=!0,this.sellPriceSet.visible=!0):102==i||103==i?(this.orderstatus.text="已支付排产中",this.orderstatus.color="#0022EE",this.payagain.visible=!1,this.deletebtn.visible=!1):4==i?(this.orderstatus.text="已撤单",this.orderstatus.color="#52B232",this.payagain.visible=!1,this.deletebtn.visible=!1):100==i?(this.orderstatus.text="已支付排产失败",this.orderstatus.color="#EE4400",this.payagain.visible=!1,this.deletebtn.visible=!0,this.retrybtn.visible=!0,this.deletebtn.visible=!0):(this.orderstatus.text="订单异常",this.orderstatus.color="#52B232",this.payagain.visible=!1);try{var a=JSON.parse(this.orderdata.detail);this.paymoney.text=null!=a.moneyPaid?Number(a.moneyPaid).toFixed(2):Number(a.money_paidStr).toFixed(2),this.sellPrice.text=null!=a.totalSalesPrice&&""!=a.totalSalesPrice?a.totalSalesPrice:this.paymoney.text,this.productnum.text=a.orderItemList.length+"",g.instance.isHidePrice()&&(this.paymoney.text="****"),this.detailbtn.on("click",this,this.onShowDetail),this.deletebtn.on("click",this,this.onClickDelete),this.payagain.on("click",this,this.onClickPay),this.retrybtn.on("click",this,this.onClickRetry),this.deleteorder.on("click",this,this.onClickDeleteOrder),this.sellPriceSet.on("click",this,this.onShowSettingView)}catch(o){}C.getInstance().addTips(this.deletebtn,"未开始生产的订单可原价撤回")},n.countDownPayTime=function(){if(null!=this.orderdata.payDate){var t=new Date(Date.parse(T.convertDateStr(this.orderdata.payDate))),i=Math.ceil((t.getTime()-(new Date).getTime())/1e3);if(i>0){var n=T.getCountDownString(i);this.orderstatus.text="支付中("+n+"后可继续支付)"}else this.payagain.visible=!0,this.orderstatus.text="未支付",e.timer.clear(this,this.countDownPayTime),this.orderstatus.color="#FF0000"}},n.onShowDetail=function(){E.instance.openView("VIEW_ORDER_DETAIL_PANEL",!1,this.orderdata)},n.onClickDelete=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"订单撤回之后将无法恢复，确定删除吗？",caller:this,callback:this.confirmDelete,ok:"确定",cancel:"取消"})},n.confirmDelete=function(t){if(t){var i=parseInt(this.orderdata.status);if(100==i){var e={orderSn:this.orderdata.id};return W.instance.Request(W.httpUrl+"group/cancel-exception-order?",this,this.deleteExceptOrderBack,JSON.stringify(e),"post"),void 0}var n={orderSn:this.orderdata.id};W.instance.Request(W.httpUrl+"order/cancel?",this,this.deleteOrderBack,JSON.stringify(n),"post")}},n.onClickDeleteOrder=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"订单删除之后将无法恢复，确定删除吗？",caller:this,callback:this.confirmDeleteOrders,ok:"确定",cancel:"取消"})},n.getInvoinceBack=function(t){JSON.parse(t)},n.confirmDeleteOrders=function(t){if(t){var i="id="+this.orderdata.id;W.instance.Request(W.httpUrl+"account/delete-unpaid-order?",this,this.deleteOrderListBack,i,"post")}},n.deleteOrderListBack=function(){Ln.instance.event("DELETE_ORDER_BACK")},n.deleteExceptOrderBack=function(t){var i=JSON.parse(t);0==i.status?Ln.instance.event("DELETE_ORDER_BACK"):E.showAlert("订单取消失败")},n.deleteOrderBack=function(t){var i=JSON.parse(t);if(0==i.data.code)Ln.instance.event("DELETE_ORDER_BACK");else if(1==i.data.code){var e=JSON.parse(this.orderdata.detail);E.showAlert("订单已开始生产，请联系厂家取消订单，联系电话"+e.contact_phone)}else E.showAlert("撤回订单失败")},n.onClickPay=function(){var t=this,i=JSON.parse(this.orderdata.detail),e=new Date(Date.parse(T.convertDateStr(i.payTime))),n=(new Date).getTime()-e.getTime()+288e5;return n>432e6?(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"超过5天的订单不能重新支付"}),void 0):(null==k.instance.allManuFacutreMatProcPrice[i.manufacturerCode]?W.instance.Request(W.httpUrl+"business/getmatprocprice?manufacturer_code="+i.manufacturerCode,this,function(e){k.instance.initManuFacuturePrice(i.manufacturerCode,e),t.requestAvailableDate(i)
},null,null):this.requestAvailableDate(i),void 0)},n.requestAvailableDate=function(t){for(var i=t.orderItemList,e=0;e<i.length;e++)delete i[e].lefttime,delete i[e].deliveryDate,delete i[e].isUrgent;k.instance.finalOrderData=[t];var n=T.getLocalVar("timePrefer","2");parseInt(n)<2&&(n="2"),k.instance.curTimePrefer=parseInt(n);var s=k.instance.getOrderCapcaityData(t,k.instance.curTimePrefer);W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,s,"post")},n.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t),i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(var e=i,n=0;n<e.length;n++){var s=e[n].current_date,r=Date.parse(s.replace("-","/"));R.instance.serverDate=r/1e3,s=s.split(" ")[0],k.instance.currentDayStr=s;for(var a=k.instance.getProductOrderDataList(e[n].orderItem_sn),o=0;o<a.length;o++){var h=a[o];k.instance.availableDeliveryDates[h.orderItemSn]={},k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList=[],null!=h&&null!=e[n].default_deliveryDate&&""!=e[n].default_deliveryDate&&(h.deliveryDate=e[n].default_deliveryDate,h.isUrgent=h.deliveryDate==s&&1==k.instance.curTimePrefer?1:0,h.lefttime=150);for(var l=0;l<e[n].deliveryDateList.length;l++)0==e[n].deliveryDateList[l].urgent?(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),k.instance.availableDeliveryDates[h.orderItemSn].deliveryDateList.push(e[n].deliveryDateList[l]),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&0==h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount)):s==e[n].deliveryDateList[l].availableDate&&(0==e[n].deliveryDateList[l].discount&&(e[n].deliveryDateList[l].discount=1),h.deliveryDate==e[n].deliveryDateList[l].availableDate&&h.isUrgent&&(h.discount=e[n].deliveryDateList[l].discount),k.instance.availableDeliveryDates[h.orderItemSn].urgentDate=e[n].deliveryDateList[l])}}Ln.instance.event("SHOW_CONTENT_PANEL",[gh,0,{orders:k.instance.finalOrderData[0].orderItemList,delaypay:!0,firstOrder:1==this.orderdata.kind,customerName:this.orderdata.customerName,defaultPayType:this.orderdata.customerPayment}])}}},n.onClickRetry=function(){W.instance.Request(W.httpUrl+"group/pay-exception-order?",this,this.payMoneyBack,"orderid="+this.orderdata.or_id,"post")},n.payMoneyBack=function(t){var i=JSON.parse(t);0==i.status?(E.showAlert("订单排产成功"),Ln.instance.event("PAY_ORDER_SUCESS")):E.showAlert("订单排产失败，您可以撤回订单，重新下单")},n.onShowSettingView=function(){E.instance.openView("ORDER_PRICE_SETTING_PANEL",!1,this.orderdata)},i}(Ko),oc=function(t){function i(){this.customerVo=null,i.__super.call(this),this.btmLine.visible=!1,this.on("mouseover",this,function(){this.btmLine.visible=!0}),this.on("mouseout",this,function(){this.btmLine.visible=!1})}s(i,"script.picUpload.CustomeSimpleCell",t);var e=i.prototype;return e.setData=function(t){this.customerVo=t,this.customName.text=this.customerVo.customerName,parseInt(this.customerVo.id)>0&&(this.customName.text+="("+m.PAY_TYPE_NAME[this.customerVo.defaultPayment-1]+")"),this.phoneNum.text=this.customerVo.mobileNumber},i}(dh),hc=function(t){function i(){this.packageVo=null,i.__super.call(this),this.deletebtn.on("click",this,this.onDeletePackage),this.comment.maxChars=16,this.comment.on("input",this,this.onChangeComment)}s(i,"script.order.PackageEditCell",t);var e=i.prototype;return e.onChangeComment=function(){this.packageVo.packageName=this.comment.text},e.setData=function(t){for(this.packageVo=t,this.addresstxt.text=this.packageVo.address.receiverName+"-"+this.packageVo.address.phone,this.comment.text=this.packageVo.packageName;this.itembox.numChildren>0;)this.itembox.removeChildAt(0);for(var i=0;i<this.packageVo.itemlist.length;i++){var e=new pa;e.numInput.text=this.packageVo.itemlist[i].itemCount+"",0==k.instance.packageList.indexOf(this.packageVo)?(e.numInput.editable=!1,e.addBtn.visible=!1,e.subBtn.visible=!1):(e.numInput.editable=!0,e.addBtn.visible=!0,e.subBtn.visible=!0),e.addBtn.on("click",this,this.onaddnum,[e.numInput,this.packageVo.itemlist[i]]),e.subBtn.on("click",this,this.onsubnum,[e.numInput,this.packageVo.itemlist[i]]),e.numInput.on("input",this,this.onChangeNums,[e.numInput,this.packageVo.itemlist[i]]),e.numInput.on("focus",this,this.onSelectInput,[e.numInput]),this.itembox.addChild(e)}this.cutline.height=140*this.packageVo.itemlist.length+110},e.onaddnum=function(t,i){for(var e=k.instance.packageList[0],n=0;n<e.itemlist.length;n++)if(e.itemlist[n].itemId==i.itemId){if(e.itemlist[n].itemCount>0){var s=parseInt(t.text);s++,i.itemCount=s,t.text=s+"",e.itemlist[n].itemCount--,Ln.instance.event("UPDATE_PACKAGE_ORDER_ITEM_COUNT")}break}},e.onsubnum=function(t,i){var e=parseInt(t.text);if(!(1>e)){e--,i.itemCount=e,t.text=e+"";for(var n=k.instance.packageList[0],s=0;s<n.itemlist.length;s++)if(n.itemlist[s].itemId==i.itemId){n.itemlist[s].itemCount++;break}Ln.instance.event("UPDATE_PACKAGE_ORDER_ITEM_COUNT")}},e.onChangeNums=function(t,i){""==t.text&&(t.text="0");var e=parseInt(t.text);0>e&&(e=0);for(var n=k.instance.packageList[0],s=0;s<n.itemlist.length;s++)if(n.itemlist[s].itemId==i.itemId){var r=i.itemCount+n.itemlist[s].itemCount;e>r?(e=r,n.itemlist[s].itemCount=0,i.itemCount=e,t.text=e+""):(n.itemlist[s].itemCount=r-e,i.itemCount=e,t.text=e+"");break}Ln.instance.event("UPDATE_PACKAGE_ORDER_ITEM_COUNT")},e.onSelectInput=function(t){t.select()},e.updateNum=function(){for(var t=0;t<this.itembox.numChildren;t++)this.itembox.getChildAt(t).numInput.text=this.packageVo.itemlist[t].itemCount+""},e.onDeletePackage=function(){var t=k.instance.packageList.indexOf(this.packageVo);if(0==t)return E.showAlert("第一个包裹不能删"),void 0;var i=k.instance.packageList[1];1==t&&k.instance.packageList.length>2?i=k.instance.packageList[2]:1==t&&k.instance.packageList.length<=2&&(i=k.instance.packageList[0]);for(var e=0;e<i.itemlist.length;e++)i.itemlist[e].itemCount+=this.packageVo.itemlist[e].itemCount;k.instance.packageList.splice(t,1),Ln.instance.event("DELETE_PACKAGE_ITEM")},i}(_h),lc=function(t){function i(){this.deliveryData=null,i.__super.call(this)}s(i,"script.order.DeliverySelCell",t);var n=i.prototype;return n.setData=function(t){if(this.deliveryData=t,this.commondelType.labels=k.instance.getDeliveryTypeStr(this.deliveryData.deliveryVoArr,!1),this.urgentdeltype.labels=k.instance.getDeliveryTypeStr(this.deliveryData.deliveryVoArr,!0),this.backsp.graphics.drawRect(0,0,1280,48,K.OUTPUT_COLOR[k.instance.getManuFactureIndex(this.deliveryData.manufacturer_code)]),k.instance.hasCommonOrderItem(this.deliveryData.manufacturer_code)){for(var i=this.commondelType.labels.split(","),e=0;e<i.length;e++){if(null!=k.instance.curOrderCustomer&&null!=k.instance.selectAddress&&""!=k.instance.selectAddress.defaultDeliveryType&&i[e].indexOf(k.instance.selectAddress.defaultDeliveryType)>=0){this.commondelType.selectedIndex=e,k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]=k.instance.selectAddress.defaultDeliveryType;break}i[e].indexOf("送货上门")>=0&&(this.commondelType.selectedIndex=e,k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]="送货上门")}null==k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]&&i.length>0&&(k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]=i[0].split("(")[0],this.commondelType.selectedIndex=0)}if(k.instance.hasUrgentOrderItem(this.deliveryData.manufacturer_code)){var n=this.urgentdeltype.labels.split(",");for(e=0;e<n.length;e++)if(n[e].indexOf("送货上门")>=0){this.urgentdeltype.selectedIndex=e,k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]="送货上门";break}null==k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]&&n.length>0&&(k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]=n[0].split("(")[0],this.urgentdeltype.selectedIndex=0)}Ln.instance.event("UPDATE_PRICE_BY_DELIVERYDATE"),this.urgentdeltype.selectHandler=new c(this,this.selectUrgentDelType),this.commondelType.selectHandler=new c(this,this.selectCommonDelType)},n.refreshLabel=function(){null!=this.deliveryData&&(this.commondelType.labels=k.instance.getDeliveryTypeStr(this.deliveryData.deliveryVoArr,!1))},n.selectUrgentDelType=function(t){var i=this;if(-1!=t){var n=this.getDelivertyType(this.urgentdeltype);k.instance.isValidDeliveryType(this.deliveryData.deliveryVoArr,n)?(k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]=n,Ln.instance.event("UPDATE_PRICE_BY_DELIVERYDATE")):(E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"送货上门班次没有了，请选择其他配送方式"}),e.timer.frameOnce(2,this,function(){i.urgentdeltype.selectedIndex=-1}))}},n.refreshRadio=function(){if(null!=this.deliveryData){if(k.instance.hasCommonOrderItem(this.deliveryData.manufacturer_code)){if(this.commondelType.selectedIndex<0){for(var t=this.commondelType.labels.split(","),i=0;i<t.length;i++){if(null!=k.instance.curOrderCustomer&&null!=k.instance.selectAddress&&t[i].indexOf(k.instance.selectAddress.defaultDeliveryType)>=0){this.commondelType.selectedIndex=i,k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]=k.instance.selectAddress.defaultDeliveryType;break}t[i].indexOf("送货上门")>=0&&(this.commondelType.selectedIndex=i,k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]="送货上门")}this.commondelType.selectedIndex<0&&t.length>0&&(k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]=t[0].split("(")[0],this.commondelType.selectedIndex=0)}}else this.commondelType.selectedIndex=-1;if(k.instance.hasUrgentOrderItem(this.deliveryData.manufacturer_code)){if(this.urgentdeltype.selectedIndex<0){var e=this.urgentdeltype.labels.split(",");for(i=0;i<e.length;i++)if(e[i].indexOf("送货上门")>=0){this.urgentdeltype.selectedIndex=i,k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]="送货上门";break}this.urgentdeltype.selectedIndex<0&&e.length>0&&(k.instance.curUrgentDeliveryType[this.deliveryData.manufacturer_code]=e[0].split("(")[0],this.urgentdeltype.selectedIndex=0)}}else this.urgentdeltype.selectedIndex=-1}},n.selectCommonDelType=function(t){-1!=t&&(k.instance.curCommmonDeliveryType[this.deliveryData.manufacturer_code]=this.getDelivertyType(this.commondelType),Ln.instance.event("UPDATE_PRICE_BY_DELIVERYDATE"))},n.getDelivertyType=function(t){var i=t.labels.split(","),e=t.selectedIndex;return i[e].split("(")[0]},i}(Vo),cc=function(t){function i(){this.paramVo=null,i.__super.call(this),this.btnList.itemRender=Hl,this.btnList.spaceX=10,this.btnList.renderHandler=new c(this,this.updateParamItem)}s(i,"script.prodCustomer.item.ProdParamCell",t);var e=i.prototype;return e.setData=function(t){this.paramVo=t,this.conLbl.text=this.paramVo.paramName,this.btnList.array=this.paramVo.paramList},e.updateParamItem=function(t){t.setData(t.dataSource)},i}(rh),uc=function(t){function i(){this.groupVo=null,i.__super.call(this),this.on("click",this,this.onSelectGroup)}s(i,"script.order.item.AddressGroupSelCell",t);var e=i.prototype;return e.setData=function(t){this.groupVo=t,this.btn.label=this.groupVo.groupName+"("+this.groupVo.count+")",this.sel.selected=this.groupVo.selected},e.onSelectGroup=function(){this.groupVo.selected=!this.groupVo.selected,this.sel.selected=this.groupVo.selected,Ln.instance.event("CHANGE_ADDRESS_GROUP_SELECTED_STATE",[this,this.groupVo])},i}(uh),dc=function(t){function i(){this.fileobj=null,this.fileSize=0/0,this.unit=null,i.__super.call(this)}s(i,"script.picUpload.FileUpLoadItem",t);var e=i.prototype;return e.setData=function(t){this.fileobj=t,this.filename.text=t.name,this.prog.text="0%",this.finishimg.visible=!1;var i=Math.floor(t.size/1048576),e="";i>0?(e=(t.size/1048576).toFixed(2).toString()+"m",this.fileSize=t.size/1048576,this.unit="m"):(e=(t.size/1024).toFixed(2).toString()+"k",this.fileSize=t.size/1024,this.unit="k"),this.reUploadBtn.visible=!1,this.unnormal.visible=t.unNormal,this.prog.text=0+this.unit+"/"+this.fileSize.toFixed(2)+this.unit,this.btncancel.on("click",this,this.onCancelUpload),this.reUploadBtn.on("click",this,this.onReUpload),this.updateProgress()},e.showReUploadbtn=function(){this.reUploadBtn.visible=!0},e.onReUpload=function(){Ln.instance.event("RE_UPLOAD_FILE",this)},e.onCancelUpload=function(){Ln.instance.event("CANCAEL_UPLOAD_ITEM",this)},e.updateProgress=function(t){if(void 0===t&&(t=!1),null!=this.fileobj){t&&(this.isuploading.color="#BF6A2C",this.isuploading.text="正在上传...");var i=Number(this.fileobj.progress);i>=100?(i=100,this.finishimg.visible=!0,this.prog.visible=!1):this.prog.visible=!0,this.prgbar.width=i/100*1614;var e=(this.fileSize*i/100).toFixed(2)+this.unit;this.prog.text=e+"/"+this.fileSize.toFixed(2)+this.unit}},i}(wo),_c=function(t){function i(){this.matvo=null,i.__super.call(this)}s(i,"script.product.ProductCategoryItem",t);var e=i.prototype;return e.setData=function(t){this.matvo=t,this.catebtn.label=t.matclassname},r(0,e,"ShowSelected",null,function(t){this.catebtn.selected=t}),i}(Sh),pc=function(t){function i(){this.deliveryData=null,i.__super.call(this)}s(i,"script.usercenter.item.DeliveryPackageCell",t);var e=i.prototype;return e.setData=function(t){this.deliveryData=t,this.btn.label=t.packageName;var i={orderSn:this.deliveryData.deliverySn};W.instance.Request(W.httpUrl+"order/deliveryRecord?",this,this.onGetOrderNumberBack,JSON.stringify(i),"post"),this.btn.on("click",this,this.showDeliveryMap)},e.onGetOrderNumberBack=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&null!=i.data.data.expressname&&(this.btn.label=this.deliveryData.packageName+"\n"+i.data.data.expressname+"\n订单号:"+i.data.data.kuaidinum)}},e.showDeliveryMap=function(){var t={orderSn:this.deliveryData.deliverySn};W.instance.Request(W.httpUrl+"order/delivery?",this,this.onGetOrderDeliveryBack,JSON.stringify(t),"post")},e.onGetOrderDeliveryBack=function(t){var i=JSON.parse(t);if("0"==i.code){var e=i.data.data.trailUrl;if(null==e||""==e)return E.showAlert("已打包，待取件"),void 0;Ti.window.open(e,null,null,!0)}},i}(No),fc=function(t){function i(){this.transactionVo=null,i.__super.call(this),this.deleteBtn.on("click",this,this.onDeleteTransaction)}s(i,"script.usercenter.item.CustomerTransacCell",t);var e=i.prototype;return e.setData=function(t){this.transactionVo=t,this.customerNamelbl.text=this.transactionVo.customerName,this.transacNum.text=this.transactionVo.transactionSn,this.transacType.text=this.transactionVo.transactionTypeName,this.transactDate.text=this.transactionVo.transactionTime,this.money.text=this.transactionVo.amount,this.transactName.text=this.transactionVo.transactionChannel,this.userNamelbl.text=this.transactionVo.userName,this.commentlbl.text=this.transactionVo.comment,this.deleteBtn.visible="2"==this.transactionVo.transactionType},e.onWriteOff=function(){E.instance.openView("WRITE_OFF_ORDER_PANEL",!1,this.transactionVo)},e.onDeleteTransaction=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该条收款记录吗？",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+"org/collection/delete?",this,this.deletecollectback,JSON.stringify({id:this.transactionVo.id}),"post")},e.deletecollectback=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("DELETE_CUSTOMER_TRANSACTION")},i}($o),mc=function(t){function i(){this.orderdata=null,this.curselectIndex=-1,i.__super.call(this);for(var t=0;5>t;t++)this["deltime"+t].on("click",this,this.onSelectTime,[t]);this.urgentcheck.on("click",this,this.onClickUrgent),e.timer.loop(1e3,this,this.countDownPayTime),Ln.instance.on("FIRST_PAGE_SHRINK",this,this.updateDeliveryBox),this.updateDeliveryBox(g.instance.shrinkState)}s(i,"script.order.ChooseDelTimeOrderItem",t);var n=i.prototype;return n.updateDeliveryBox=function(t){0==t?(this.dateBox.space=25,this.linebox.space=132):(this.dateBox.space=70,this.linebox.space=178),this.dateBox.refresh()},n.onSelectTime=function(t){if(!this["deltime"+t].selected){this.resetDeliveryTime();var i=k.instance.getManufacturerCode(this.orderdata.orderItemSn);this.curselectIndex=t;var e=0,n="";if(""==this.orderdata.batchOrderItemSn?n=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].deliveryDateList[t].availableDate:(n=k.instance.availableDeliveryDates[this.orderdata.batchOrderItemSn].deliveryDateList[t].availableDate,e=k.instance.availableDeliveryDates[this.orderdata.batchOrderItemSn].deliveryDateList[this.curselectIndex].discount),""==this.orderdata.batchOrderItemSn){var s="orderItem_sn="+this.orderdata.orderItemSn+"&manufacturer_code="+i+"&prod_code="+this.orderdata.conponent.prodCode+"&isUrgent=0&delivery_date="+n;W.instance.Request(W.httpUrl+"business/setCapacityPreOccupy?"+s,this,this.onOccupyCapacityBack,null,null)}else{var r=[this.orderdata.batchOrderItemSn,i,this.orderdata.conponent.prodCode,0,n,e];Ln.instance.event("BATCH_CHANGE_OCCUPY_DATE",r)}}},n.resetDeliveryTime=function(){this.orderdata.isUrgent=0,this.orderdata.deliveryDate=null,this.orderdata.outtime=!1,this.orderdata.lefttime=0,this.orderdata.discount=1;for(var t=0;5>t;t++)this["deltime"+t].selected=!1;this.urgentcheck.selected=!1,this.urgentcheck.disabled=!1,this.urgentback.visible=this.urgentcheck.selected},n.onOccupyCapacityBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){if(1==i.feedBack){for(var e=0;5>e;e++)this["deltime"+e].selected=e==this.curselectIndex;this.urgentcheck.selected=!1,this.urgentcheck.disabled=!1,this.urgentback.visible=this.urgentcheck.selected,this.orderdata.outtime=!1,this.orderdata.lefttime=150,this.orderdata.isUrgent=0,this.orderdata.deliveryDate=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].deliveryDateList[this.curselectIndex].availableDate,this.orderdata.discount=this.orderdata.fixedDiscount?1:k.instance.availableDeliveryDates[this.orderdata.orderItemSn].deliveryDateList[this.curselectIndex].discount}else this.orderdata.isUrgent=0,this.orderdata.deliveryDate=null,this.orderdata.discount=1,this.retryGetAvailableDate();this.updatePrice(),Ln.instance.event("UPDATE_PRICE_BY_DELIVERYDATE")}}},n.retryGetAvailableDate=function(){var t=k.instance.getSingleOrderItemCapcaityData(this.orderdata);W.instance.Request(W.httpUrl+"business/getAvailebleDeliveryDates?",this,this.ongetAvailableDateBack,t,"post")},n.ongetAvailableDateBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){for(var e=i,n=0;n<e.length;n++){k.instance.availableDeliveryDates[e[n].orderItem_sn]={},k.instance.availableDeliveryDates[e[n].orderItem_sn].deliveryDateList=[];for(var s=0;s<e[n].deliveryDateList.length;s++)0==e[n].deliveryDateList[s].urgent?(0==e[n].deliveryDateList[s].discount&&(e[n].deliveryDateList[s].discount=1),k.instance.availableDeliveryDates[e[n].orderItem_sn].deliveryDateList.push(e[n].deliveryDateList[s])):(0==e[n].deliveryDateList[s].discount&&(e[n].deliveryDateList[s].discount=1),k.instance.availableDeliveryDates[e[n].orderItem_sn].urgentDate=e[n].deliveryDateList[s])}if(this.destroyed)return;this.resetDeliveryDates()}}},n.onClickUrgent=function(){var t=k.instance.getManufacturerCode(this.orderdata.orderItemSn);this.resetDeliveryTime();var i=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate.availableDate,e=0,i="";if(""!=this.orderdata.batchOrderItemSn&&(i=k.instance.availableDeliveryDates[this.orderdata.batchOrderItemSn].urgentDate.availableDate,e=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate.discount),""==this.orderdata.batchOrderItemSn){var n="orderItem_sn="+this.orderdata.orderItemSn+"&manufacturer_code="+t+"&prod_code="+this.orderdata.conponent.prodCode+"&isUrgent=1&delivery_date="+i;W.instance.Request(W.httpUrl+"business/setCapacityPreOccupy?"+n,this,this.onOccupyUrgentCapacityBack,null,null)}else{var s=[this.orderdata.batchOrderItemSn,t,this.orderdata.conponent.prodCode,1,i,e];Ln.instance.event("BATCH_CHANGE_OCCUPY_DATE",s)}},n.onOccupyUrgentCapacityBack=function(t){if(!this.destroyed){var i=JSON.parse(t);if(!i.hasOwnProperty("status")){if(1==i.feedBack){for(var e=0;5>e;e++)this["deltime"+e].selected=!1;this.urgentcheck.selected=!0,this.urgentcheck.disabled=!0,this.urgentback.visible=this.urgentcheck.selected,this.orderdata.outtime=!1,this.orderdata.lefttime=150,this.orderdata.isUrgent=1,this.orderdata.deliveryDate=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate.availableDate,this.orderdata.discount=this.orderdata.fixedDiscount?1:k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate.discount}else this.orderdata.isUrgent=0,this.orderdata.deliveryDate=null,this.orderdata.discount=1,this.retryGetAvailableDate();this.updatePrice(),Ln.instance.event("UPDATE_PRICE_BY_DELIVERYDATE")}}},n.setData=function(t){this.orderdata=t,this.numindex.text=t.itemSeq.toString(),this.fileimg.skin=t.conponent.thumbnailsPath,this.circle.visible=!1,this.rectangle.visible=!1;k.instance.getManufacturerCode(this.orderdata.orderItemSn);"圆形灯箱产品"==t.conponent.filename?this.circle.visible=!0:this.rectangle.visible=!0;var i=t.conponent.LWH.split("/"),e=parseFloat(i[0]),n=parseFloat(i[1]);e>n?(this.fileimg.width=155,this.fileimg.height=155/e*n):(this.fileimg.height=155,this.fileimg.width=155/n*e),this.manufacName.text=k.instance.getManufacturerNameBySn(t.orderItemSn),this.filenametxt.text=t.conponent.filename,this.mattext.text=t.conponent.prodName,this.picwidth.text=i[0],this.picheight.text=i[1],this.radius.text=i[0];var s="";if(null!=t.conponent.procInfoList)for(var r=0;r<t.conponent.procInfoList.length;r++)s+=t.conponent.procInfoList[r].procDescription+"-";this.proctext.text=s.substr(0,s.length-1),this.numtxt.text=t.itemNumber+"",this.resetDeliveryDates(),this.updatePrice()},n.updatePrice=function(){var t=Number(this.orderdata.itemPrice)*Number(this.orderdata.itemNumber),i=this.orderdata.discountProcessPrice*this.orderdata.itemNumber,e=this.orderdata.materialPrice*this.orderdata.itemNumber;this.pricetext.text=1==this.orderdata.isUrgent||null!=this.orderdata.deliveryDate?(i*this.orderdata.discount+e).toFixed(1):t.toFixed(1),g.instance.isHidePrice()&&(this.pricetext.text="***")},n.resetDeliveryDates=function(){for(var t=0;5>t;t++)this["deltime"+t].selected=!1,this["gray"+t].visible=!0;var i=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].deliveryDateList,e=T.getNextFiveDays(k.instance.currentDayStr+" 00:00:00");for(t=0;t<e.length;t++){this["deltime"+t].disabled=!0,this["discount"+t].text="1";for(var n=0;n<i.length;n++){this["deltime"+t].label=i[n].discount>=1?i[n].discount+"":100*i[n].discount+"折";var s=T.getNextDayStr(i[n].availableDate+" 00:00:00");if(s==e[t]){this["deltime"+t].disabled=!1;var r=this.getPayDicountStr(i[n].discount);r>0?(this["discount"+t].color="#FF0000",this["discount"+t].text="+"+this.getPayDicountStr(i[n].discount)):(this["discount"+t].color="#569356",this["discount"+t].text=""+this.getPayDicountStr(i[n].discount)),this["gray"+t].visible=!1;break}}if(this["deltime"+t].disabled&&i.length<5&&i.splice(t,0,0),null!=this.orderdata.deliveryDate){var a=T.getNextDayStr(this.orderdata.deliveryDate+" 00:00:00");a==e[t]&&1!=this.orderdata.isUrgent&&(this["deltime"+t].selected=!0)}}if(this.urgentcheck.visible=null!=k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate,this.urgentdiscount.visible=this.urgentcheck.visible,this.urgentcheck.visible){var r=this.getPayDicountStr(k.instance.availableDeliveryDates[this.orderdata.orderItemSn].urgentDate.discount);r>0?(this.urgentdiscount.color="#FF0000",this.urgentdiscount.text="￥+"+this.getPayDicountStr(i[n].discount)):(this.urgentdiscount.color="#569356",this.urgentdiscount.text="￥"+this.getPayDicountStr(i[n].discount))}this.urgentcheck.selected=1==this.orderdata.isUrgent,this.urgentcheck.disabled=this.urgentcheck.selected?!0:!1,this.urgentback.visible=this.urgentcheck.selected},n.countDownPayTime=function(){null!=this.orderdata&&(this.paycountdown.text=1==this.orderdata.isUrgent||null!=this.orderdata.deliveryDate?T.getCountDownString(this.orderdata.lefttime):this.orderdata.outtime?"支付超时":"00:00")},n.getPayDicountStr=function(t){this.orderdata.fixedDiscount&&(t=1);var i=this.orderdata.discountProcessPrice*t*this.orderdata.itemNumber,e=this.orderdata.materialPrice*this.orderdata.itemNumber,n=parseFloat((i+e).toFixed(1)),s=Number(this.orderdata.itemPrice)*Number(this.orderdata.itemNumber),r=n-parseFloat(s.toFixed(1));return parseFloat(r.toFixed(1))},i}(jo),gc=function(t){function i(){this.addressVo=null,i.__super.call(this),this.checksel.on("change",this,this.selectData),this.btnDel.on("click",this,this.onDel)}s(i,"script.usercenter.item.GroupAddressCell",t);var e=i.prototype;return e.setData=function(t){this.addressVo=t,this.checksel.selected=this.addressVo.selected,this.conName.text=this.addressVo.receiverName,this.phonetxt.text=this.addressVo.phone,this.detailaddr.text=this.addressVo.proCityArea},e.selectData=function(){null!=this.addressVo&&(this.addressVo.selected=this.checksel.selected)},e.changeSelectState=function(t){null!=this.addressVo&&(this.checksel.selected=t,this.addressVo.selected=t)},e.onDel=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.onConfirmDel,msg:"确定移出该地址吗？"})},e.onConfirmDel=function(t){t&&Ln.instance.event("DELETE_ADDRESS_FROM_GROUP",[this.addressVo.id])},i}(Ch),vc=function(t){function i(){this.matclassvo=null,i.__super.call(this)}s(i,"script.workpanel.items.MaterialCategoryCell",t);var e=i.prototype;return e.setData=function(t){this.matclassvo=t,this.selbtn.label=this.matclassvo.matclassname,this.selbtn.width=this.selbtn.text.textWidth+40,this.width=this.selbtn.width,this.selfIcon.visible=!1},r(0,e,"ShowSelected",null,function(t){this.selbtn.selected=t}),i}(ch),Sc=function(t){function i(){this.customData=null,i.__super.call(this),this.deleteTxt.on("click",this,this.onDelete),this.updateInfoTxt.on("click",this,this.onEditCustomer),this.addressTxt.on("click",this,this.onSelectAddress),this.updateInfoTxt.visible=!0}s(i,"script.usercenter.item.CustomCell",t);var e=i.prototype;return e.setData=function(t){this.customData=t,this.customName.text=this.customData.customerName,this.phoneNumber.text=this.customData.mobileNumber,this.selectImg.visible=!1,this.businessManlbl.text=this.customData.salerName,this.balancelbl.text=this.customData.balanceMoney.toFixed(2),this.defaultPayType.text=m.PAY_TYPE_NAME[this.customData.defaultPayment-1]},e.selected=function(t){this.selectImg.visible=null!=this.customData&&this.customData.id==t},e.onEditCustomer=function(){Ln.instance.event("EDIT_CUSTOMER_INFO",this.customData)},e.onDelete=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除【"+this.customData.customerName+"】客户吗?",caller:this,callback:this.confirmDelete})},e.confirmDelete=function(t){t&&W.instance.Request(W.httpUrl+W.deleteCustomer,this,this.deleteCustomerback,JSON.stringify({id:this.customData.id}),"post")},e.deleteCustomerback=function(t){if(!this.destroyed){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_CUSTOMER_LIST")}},e.onSelectAddress=function(){Ln.instance.event("SELECT_CUSTOMER",this.customData)},i}(Ah),yc=function(t){function i(){this.cutdata=null,this.leastCutNum=0,this.cuttype=0,this.linelist=null,this.linenum=19,this.color1="#000000",this.color2="#ffffff",this.linethick=2,this.curColorIndex=0,this.hinputlist=null,this.vinputlist=null,this.inputCount=7,this.horiCutNumBtnList=null,this.vertCutNumBtnList=null,this.linelist=[],i.__super.call(this),this.hinputlist=[],this.vinputlist=[],this.horiCutNumBtnList=[],this.vertCutNumBtnList=[];for(var t=0;t<this.inputCount;t++)this.hinputlist.push(this["hinput"+t]),this.vinputlist.push(this["vinput"+t]),this.hinputlist[t].on("input",this,this.onHoriInput,[t]),this.vinputlist[t].on("input",this,this.onVertInput,[t]),this.hinputlist[t].type="number",this.vinputlist[t].type="number";for(var t=0;5>t;t++)this.horiCutNumBtnList.push(this["hori"+t]),this.vertCutNumBtnList.push(this["vert"+t]),this.horiCutNumBtnList[t].on("click",this,this.onHoriNumChange,[t]),this.vertCutNumBtnList[t].on("click",this,this.onVertNumChange,[t]);this.cutNumInput.maxChars=2,this.cutNumInput.on("input",this,this.onNumberChange),this.vertCutNumInput.on("input",this,this.onVertNumberChange)}s(i,"script.order.ImageCutItem",t);var n=i.prototype;return n.setData=function(t){this.cutdata=t,this.cuttype=this.cutdata.orderitemvo.cuttype,this.initView(),e.timer.clearAll(this),e.timer.loop(500,this,this.onReDrawLine)},n.onReDrawLine=function(){this.drawLines(),this.curColorIndex=(this.curColorIndex+1)%2},n.onCutTypeChange=function(){var t=this.cutdata.finalWidth+this.cutdata.border,i=this.cutdata.finalHeight+this.cutdata.border,e=(k.instance.curSelectMat,this.cutdata.maxwidth);1==this.cuttype?(this.leastCutNum=Math.ceil(i/e),this.cutdata.maxwidth<160?(this.cutdata.orderitemvo.cutnum=Math.ceil(i/120),this.cutdata.orderitemvo.cutnum<2&&(this.cutdata.orderitemvo.cutnum=2)):this.cutdata.orderitemvo.cutnum=this.leastCutNum):(this.leastCutNum=Math.ceil(t/e),this.cutdata.maxwidth<160?(this.cutdata.orderitemvo.cutnum=Math.ceil(t/120),this.cutdata.orderitemvo.cutnum<2&&(this.cutdata.orderitemvo.cutnum=2)):this.cutdata.orderitemvo.cutnum=this.leastCutNum),this.cutdata.orderitemvo.cuttype=this.cuttype,this.initCutNum(),this.resetCutlen(),this.updateInputText()},n.initView=function(){var t=this.cutdata.finalWidth,i=this.cutdata.finalHeight,e=this.cutdata.border;if(this.borderimg.visible=e>0,t>i?(this.borderimg.width=375,this.borderimg.height=375*(i+e)/(t+e),this.paintimg.width=375*t/(t+e),this.paintimg.height=this.paintimg.width*i/t):(this.borderimg.height=375,this.borderimg.width=375*(t+e)/(i+e),this.paintimg.height=375*i/(i+e),this.paintimg.width=this.paintimg.height*t/i),this.hbox.width=this.paintimg.width,this.vbox.height=this.paintimg.height,this.hbox.x=48+(375-this.hbox.width)/2,this.vbox.y=65+(375-this.vbox.height)/2,this.paintimg.skin=W.biggerPicUrl+this.cutdata.fid+("PNG"==this.cutdata.orderitemvo.picinfo.picClass.toUpperCase()?".png":".jpg"),0==this.cuttype)for(var n=0;n<this.cutdata.orderitemvo.cutnum;n++)this.hinputlist.length>n&&(this.hinputlist[n].text=this.cutdata.orderitemvo.eachCutLength[n]+"");else for(var n=0;n<this.cutdata.orderitemvo.cutnum;n++)this.vinputlist.length>n&&(this.vinputlist[n].text=this.cutdata.orderitemvo.eachCutLength[n]+"");this.updateInputText(),this.initCutNum()},n.onHoriInput=function(t){if(t==this.cutdata.orderitemvo.cutnum-1)return this.hinputlist[t].text=this.cutdata.orderitemvo.eachCutLength[t]+"",void 0;if(""!=this.hinputlist[t].text){for(var i=this.cutdata.maxwidth,e=0,n=0;t>n;n++)e+=this.cutdata.orderitemvo.eachCutLength[n];var s=parseFloat(parseFloat(this.hinputlist[t].text).toFixed(2));this.hinputlist[t].text=s+"";{Math.min(i,this.cutdata.finalWidth+this.cutdata.border-e-this.cutdata.orderitemvo.cutnum+t+1),Math.max(1,this.cutdata.finalWidth+this.cutdata.border-e-i*(this.cutdata.orderitemvo.cutnum-t-1))}e+=parseFloat(this.hinputlist[t].text);for(var r=(this.cutdata.finalWidth+this.cutdata.border-e)/(this.cutdata.orderitemvo.cutnum-t-1),n=t+1;n<this.cutdata.orderitemvo.cutnum;n++)n<this.vinputlist.length&&(this.hinputlist[n].text=r.toFixed(2));for(var n=0;n<this.cutdata.orderitemvo.cutnum;n++)n<this.vinputlist.length&&(this.cutdata.orderitemvo.eachCutLength[n]=parseFloat(this.hinputlist[n].text));this.drawLines()}},n.onVertInput=function(t){if(t==this.cutdata.orderitemvo.cutnum-1)return this.vinputlist[t].text=this.cutdata.orderitemvo.eachCutLength[t]+"",void 0;if(""!=this.vinputlist[t].text){for(var i=this.cutdata.maxwidth,e=0,n=0;t>n;n++)e+=this.cutdata.orderitemvo.eachCutLength[n];var s=parseFloat(parseFloat(this.vinputlist[t].text).toFixed(2));this.vinputlist[t].text=s+"";{Math.min(i,this.cutdata.finalHeight+this.cutdata.border-e-this.cutdata.orderitemvo.cutnum+t+1),Math.max(1,this.cutdata.finalHeight+this.cutdata.border-e-i*(this.cutdata.orderitemvo.cutnum-t-1))}e+=parseFloat(this.vinputlist[t].text);for(var r=(this.cutdata.finalHeight+this.cutdata.border-e)/(this.cutdata.orderitemvo.cutnum-t-1),n=t+1;n<this.cutdata.orderitemvo.cutnum;n++)n<this.vinputlist.length&&(this.vinputlist[n].text=r.toFixed(2));
for(var n=0;n<this.cutdata.orderitemvo.cutnum;n++)n<this.vinputlist.length&&(this.cutdata.orderitemvo.eachCutLength[n]=parseFloat(this.vinputlist[n].text));this.drawLines()}},n.resetCutlen=function(){var t=0;t=0==this.cuttype?(this.cutdata.finalWidth+this.cutdata.border)/this.cutdata.orderitemvo.cutnum:(this.cutdata.finalHeight+this.cutdata.border)/this.cutdata.orderitemvo.cutnum,t=parseFloat(t.toFixed(2)),this.cutdata.orderitemvo.eachCutLength=[];for(var i=0;i<this.cutdata.orderitemvo.cutnum;i++)this.cutdata.orderitemvo.eachCutLength.push(t);if(0==this.cuttype)for(var e=0;e<this.cutdata.orderitemvo.cutnum;e++)this.hinputlist.length>e&&(this.hinputlist[e].text=this.cutdata.orderitemvo.eachCutLength[e]+"");else for(var e=0;e<this.cutdata.orderitemvo.cutnum;e++)this.hinputlist.length>e&&(this.vinputlist[e].text=this.cutdata.orderitemvo.eachCutLength[e]+"")},n.updateInputText=function(){this.hbox.visible=0==this.cuttype,this.vbox.visible=1==this.cuttype;for(var t=0;t<this.hinputlist.length;t++)this.hinputlist[t].visible=t<this.cutdata.orderitemvo.cutnum&&this.cutdata.orderitemvo.cutnum<=7,this.vinputlist[t].visible=t<this.cutdata.orderitemvo.cutnum&&this.cutdata.orderitemvo.cutnum<=7;this.hbox.space=(this.hbox.width-this.hinput0.width*this.cutdata.orderitemvo.cutnum)/(this.cutdata.orderitemvo.cutnum-1),this.vbox.space=(this.vbox.height-this.vinput0.height*this.cutdata.orderitemvo.cutnum)/(this.cutdata.orderitemvo.cutnum-1)},n.initCutNum=function(){var t=this.cutdata.finalWidth+this.cutdata.border,i=this.cutdata.finalHeight+this.cutdata.border,e=(k.instance.curSelectMat,this.cutdata.maxwidth);this.leastCutNum=Math.ceil(t/e);for(var n=0;5>n;n++)this.horiCutNumBtnList[n].label=this.leastCutNum+n+"";0==this.cuttype&&(this.horiCutNumBtnList[this.cutdata.orderitemvo.cutnum-this.leastCutNum].selected=!0,this.cutNumInput.text=this.cutdata.orderitemvo.cutnum+""),this.leastCutNum=Math.ceil(i/e);for(var n=0;5>n;n++)this.vertCutNumBtnList[n].label=this.leastCutNum+n+"";1==this.cuttype&&(this.vertCutNumBtnList[this.cutdata.orderitemvo.cutnum-this.leastCutNum].selected=!0,this.vertCutNumInput.text=this.cutdata.orderitemvo.cutnum+""),this.drawLines()},n.onCutNumChange=function(){this.updateInputText(),this.resetCutlen(),this.drawLines()},n.onHoriNumChange=function(t){for(var i=0;i<this.horiCutNumBtnList.length;i++)this.horiCutNumBtnList[i].selected=!1;for(var i=0;i<this.vertCutNumBtnList.length;i++)this.vertCutNumBtnList[i].selected=!1;this.horiCutNumBtnList[t].selected=!0,this.cuttype=0,this.cutdata.orderitemvo.cuttype=this.cuttype;var e=parseInt(this.horiCutNumBtnList[t].text.text);this.cutdata.orderitemvo.cutnum=e,this.cutNumInput.text=e+"",this.updateInputText(),this.resetCutlen(),this.drawLines()},n.onVertNumChange=function(t){for(var i=0;i<this.vertCutNumBtnList.length;i++)this.vertCutNumBtnList[i].selected=!1;for(var i=0;i<this.horiCutNumBtnList.length;i++)this.horiCutNumBtnList[i].selected=!1;this.vertCutNumBtnList[t].selected=!0,this.cuttype=1,this.cutdata.orderitemvo.cuttype=this.cuttype;var e=parseInt(this.vertCutNumBtnList[t].text.text);this.cutdata.orderitemvo.cutnum=e,this.vertCutNumInput.text=e+"",this.updateInputText(),this.resetCutlen(),this.drawLines()},n.onNumberChange=function(){if(1!=this.cuttype&&""!=this.cutNumInput.text){var t=parseInt(this.cutNumInput.text);if(!(0>=t)){for(var i=t-this.leastCutNum,e=0;e<this.horiCutNumBtnList.length;e++)this.horiCutNumBtnList[e].selected=!1;i>=0&&5>i&&(this.horiCutNumBtnList[i].selected=!0),this.cutdata.orderitemvo.cutnum=t,this.updateInputText(),this.resetCutlen(),this.drawLines()}}},n.onVertNumberChange=function(){if(0!=this.cuttype&&""!=this.cutNumInput.text){var t=parseInt(this.vertCutNumInput.text);if(!(0>=t)){for(var i=t-this.leastCutNum,e=0;e<this.vertCutNumBtnList.length;e++)this.vertCutNumBtnList[e].selected=!1;i>=0&&5>i&&(this.vertCutNumBtnList[i].selected=!0),this.cutdata.orderitemvo.cutnum=t,this.updateInputText(),this.resetCutlen(),this.drawLines()}}},n.drawLines=function(){for(var t=0;t<this.linelist.length;t++)this.linelist[t].graphics.clear(!0),this.linelist[t].removeSelf(),this.linelist.splice(t,1),t--;null==this.cutdata.orderitemvo&&console.log("null");var i=this.cutdata.orderitemvo.cutnum,e=0;if(0==this.cuttype){e=this.borderimg.width/i;for(var t=0;2>t;t++){var n=new ls;this.paintimg.addChild(n),n.x=(this.paintimg.width-this.borderimg.width)/2,n.y=(this.paintimg.height-this.borderimg.height)/2;for(var s=this.borderimg.width/this.linenum,r=0;r<this.linenum;r++)r%2==0?n.graphics.drawLine(r*s,t*this.borderimg.height,(r+1)*s,t*this.borderimg.height,0==this.curColorIndex?this.color1:this.color2,this.linethick):n.graphics.drawLine(r*s,t*this.borderimg.height,(r+1)*s,t*this.borderimg.height,1==this.curColorIndex?this.color1:this.color2,this.linethick);this.linelist.push(n)}}else{e=this.borderimg.height/i;for(var t=0;2>t;t++){var n=new ls;this.paintimg.addChild(n),n.x=(this.paintimg.width-this.borderimg.width)/2,n.y=(this.paintimg.height-this.borderimg.height)/2;for(var s=this.borderimg.height/this.linenum,r=0;r<this.linenum;r++)r%2==0?n.graphics.drawLine(t*this.borderimg.width,r*s,t*this.borderimg.width,(r+1)*s,0==this.curColorIndex?this.color1:this.color2,this.linethick):n.graphics.drawLine(t*this.borderimg.width,r*s,t*this.borderimg.width,(r+1)*s,1==this.curColorIndex?this.color1:this.color2,this.linethick);this.linelist.push(n)}}for(var t=0;i+1>t;t++){var n=new ls;if(this.paintimg.addChild(n),n.x=(this.paintimg.width-this.borderimg.width)/2,n.y=(this.paintimg.height-this.borderimg.height)/2,0==this.cuttype){for(var s=this.borderimg.height/this.linenum,a=0,o=0;t>o;o++)a+=this.cutdata.orderitemvo.eachCutLength[o];for(var h=a/this.cutdata.finalWidth*this.paintimg.width,r=0;r<this.linenum;r++)r%2==0?n.graphics.drawLine(h,r*s,h,(r+1)*s,0==this.curColorIndex?this.color1:this.color2,this.linethick):n.graphics.drawLine(h,r*s,h,(r+1)*s,1==this.curColorIndex?this.color1:this.color2,this.linethick)}else{for(var s=this.borderimg.width/this.linenum,a=0,o=0;t>o;o++)a+=this.cutdata.orderitemvo.eachCutLength[o];for(var h=a/(this.cutdata.finalHeight+this.cutdata.border)*this.borderimg.height,r=0;r<this.linenum;r++)r%2==0?n.graphics.drawLine(r*s,h,(r+1)*s,h,0==this.curColorIndex?this.color1:this.color2,this.linethick):n.graphics.drawLine(r*s,h,(r+1)*s,h,1==this.curColorIndex?this.color1:this.color2,this.linethick)}this.linelist.push(n)}},i}(th),Cc=function(t){function i(){i.__super.call(this),this.selFrame.visible=!1,this.on("doubleclick",this,function(){Ln.instance.event("SHOW_CONTENT_PANEL",[Ih,1])})}s(i,"script.workpanel.items.LatestPicItem",t);var e=i.prototype;return e.setData=function(t){this.pic.skin=W.smallerrPicUrl+t.fid+".jpg",t.picWidth>t.picHeight?(this.pic.width=120,this.pic.height=120/t.picWidth*t.picHeight):(this.pic.height=120,this.pic.width=120/t.picHeight*t.picWidth)},i}(Nh),Ec=function(t){function i(){i.__super.call(this)}s(i,"script.characterpaint.ColorItem",t);var e=i.prototype;return e.setData=function(t){this.lblcolor.bgColor="#"+t},i}(Dh),bc=function(t){function i(){this.groupVo=null,i.__super.call(this),this.deletbtn.visible=!1,this.on("mouseover",this,this.onMouseOverHandler),this.on("mouseout",this,this.onMouseOutHandler),this.deletbtn.on("click",this,this.onclickDelete),this.on("doubleclick",this,this.showGroupMgr)}s(i,"script.usercenter.item.AddressGroupCell",t);var e=i.prototype;return e.setData=function(t){this.groupVo=t,this.btn.label=this.groupVo.groupName+"("+this.groupVo.count+")"},e.onChangeName=function(){},e.onMouseOverHandler=function(){this.deletbtn.visible=!0},e.onMouseOutHandler=function(){this.deletbtn.visible=!1},e.onclickDelete=function(){E.instance.openView("VIEW_POPUPDIALOG",!1,{caller:this,callback:this.confirmDelete,msg:"确定删除"+this.groupVo.groupName+"分组吗？"})},e.confirmDelete=function(t){if(t){var i={id:this.groupVo.groupId};W.instance.Request(W.httpUrl+"org/express/group/delete?",this,this.delGroupBack,JSON.stringify(i),"post")}},e.delGroupBack=function(t){var i=JSON.parse(t);"0"==i.code&&Ln.instance.event("UPDATE_ADDRESS_GROUP_LIST")},e.showGroupMgr=function(){E.instance.openView("VIEW_ADDRESS_GROUP_MGR_PANEL",!1,this.groupVo)},i}(Rh),Ic=function(t){function i(){i.__super.call(this),this.width=80,this.height=80,this.selFrame.visible=!1}s(i,"script.workpanel.items.OriginFileCell",t);var e=i.prototype;return e.setData=function(t){this.selFrame.visible=A.instance.curOriginFile==t,this.pic.skin=W.smallerrPicUrl+t.fid+".jpg",this.pic.x=40,this.pic.y=40,t.picWidth>t.picHeight?(this.pic.width=80,this.pic.height=80/t.picWidth*t.picHeight):(this.pic.height=80,this.pic.width=80/t.picHeight*t.picWidth)},e.setChoose=function(t){this.selFrame.visible=t},i}(Nh),xc=function(t){function i(){this.urlpath=null,i.__super.call(this)}s(i,"script.characterpaint.BackGroundItem",t);var e=i.prototype;return e.setData=function(t){this.img.skin="textureU3d/"+t+".jpg",this.urlpath=t,this.setSelected(!1)},e.setSelected=function(t){this.frame.visible=t},i}(Zh),Pc=function(t){function i(){this.picInfo=null,i.__super.call(this),this.selframe.visible=!1}s(i,"script.workpanel.items.SimpleFilePicCell",t);var e=i.prototype;return e.setData=function(t){this.picInfo=t,this.fileName.text=t.directName,this.pic.skin=W.smallerrPicUrl+t.fid+".jpg",this.picInfo.picWidth>this.picInfo.picHeight?(this.pic.width=240,this.pic.height=240/this.picInfo.picWidth*this.picInfo.picHeight):(this.pic.height=240,this.pic.width=240/this.picInfo.picHeight*this.picInfo.picWidth)},e.setChoose=function(t){this.selframe.visible=t},i}(Kh),Dc=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.HBox",t);var n=i.prototype;return n.sortItem=function(t){t&&t.sort(function(t,i){return t.x-i.x})},n.changeItems=function(){this._itemChanged=!1;for(var t=[],i=0,e=0,n=this.numChildren;n>e;e++){var s=this.getChildAt(e);s&&(t.push(s),i=this._height?this._height:Math.max(i,s.height*s.scaleY))}this.sortItem(t);var r=0;for(e=0,n=t.length;n>e;e++)s=t[e],s.x=r,r+=s.width*s.scaleX+this._space,"top"==this._align?s.y=0:"middle"==this._align?s.y=.5*(i-s.height*s.scaleY):"bottom"==this._align&&(s.y=i-s.height*s.scaleY);this._sizeChanged()},r(0,n,"height",t.prototype._$get_height,function(t){this._height!=t&&(e.superSet(rl,this,"height",t),this.callLater(this.changeItems))}),i.NONE="none",i.TOP="top",i.MIDDLE="middle",i.BOTTOM="bottom",i}(rl),Ac=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.VBox",t);var n=i.prototype;return n.changeItems=function(){this._itemChanged=!1;for(var t=[],i=0,e=0,n=this.numChildren;n>e;e++){var s=this.getChildAt(e);s&&(t.push(s),i=this._width?this._width:Math.max(i,s.width*s.scaleX))}this.sortItem(t);var r=0;for(e=0,n=t.length;n>e;e++)s=t[e],s.y=r,r+=s.height*s.scaleY+this._space,"left"==this._align?s.x=0:"center"==this._align?s.x=.5*(i-s.width*s.scaleX):"right"==this._align&&(s.x=i-s.width*s.scaleX);this._sizeChanged()},r(0,n,"width",t.prototype._$get_width,function(t){this._width!=t&&(e.superSet(rl,this,"width",t),this.callLater(this.changeItems))}),i.NONE="none",i.LEFT="left",i.CENTER="center",i.RIGHT="right",i}(rl),Lc=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.RadioGroup",t);var e=i.prototype;return e.createItem=function(t,i){return new _l(t,i)},i}(dl),kc=function(t){function i(){i.__super.call(this)}s(i,"laya.ui.Tab",t);var e=i.prototype;return e.createItem=function(t,i){return new Ca(t,i)},i}(dl),Tc=function(t){function i(t){this._vScrollBar=null,this._hScrollBar=null,void 0===t&&(t=""),i.__super.call(this,t),this.on("change",this,this._onTextChange)}s(i,"laya.ui.TextArea",t);var n=i.prototype;return n._onTextChange=function(){this.callLater(this.changeScroll)},n.destroy=function(i){void 0===i&&(i=!0),t.prototype.destroy.call(this,i),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},n.onVBarChanged=function(){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},n.onHBarChanged=function(){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},n.changeScroll=function(){var t=this._vScrollBar&&this._tf.maxScrollY>0,i=this._hScrollBar&&this._tf.maxScrollX>0,e=t?this._width-this._vScrollBar.width:this._width,n=i?this._height-this._hScrollBar.height:this._height,s=this._tf.padding||je.labelPadding;this._tf.width=e,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-s[2],this._vScrollBar.y=s[1],this._vScrollBar.height=this._height-(i?this._hScrollBar.height:0)-s[1]-s[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=s[0],this._hScrollBar.y=this._height-this._hScrollBar.height-s[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-s[0]-s[2],this._hScrollBar.scrollSize=Math.max(.033*e,1),this._hScrollBar.thumbPercent=e/Math.max(this._tf.textWidth,e),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=i)},n.scrollTo=function(t){this.commitMeasure(),this._tf.scrollY=t},r(0,n,"scrollY",function(){return this._tf.scrollY}),r(0,n,"width",t.prototype._$get_width,function(t){e.superSet(Sl,this,"width",t),this.callLater(this.changeScroll)}),r(0,n,"hScrollBar",function(){return this._hScrollBar}),r(0,n,"height",t.prototype._$get_height,function(t){e.superSet(Sl,this,"height",t),this.callLater(this.changeScroll)}),r(0,n,"maxScrollX",function(){return this._tf.maxScrollX}),r(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new pl),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),r(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new ml),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),r(0,n,"vScrollBar",function(){return this._vScrollBar}),r(0,n,"maxScrollY",function(){return this._tf.maxScrollY}),r(0,n,"scrollX",function(){return this._tf.scrollX}),i}(Sl),Rc=function(t){function i(){i.__super.call(this),this.operateBox.visible=!1}return s(i,"script.usercenter.item.VipAddressNoEditCell",t),i}(Dl),wc=function(t){function i(){i.__super.call(this)}s(i,"script.order.item.MoreMaterialItem",t);var e=i.prototype;return e.setData=function(i){t.prototype.setData.call(this,i),this.moreBtn.visible=!1,this.moreBtn.label="设为默认",this.moreBtn.on("click",this,this.setDefaultMaterial),this.on("mouseover",this,function(){this.moreBtn.visible=!0}),this.on("mouseout",this,function(){this.moreBtn.visible=!1})},e.setDefaultMaterial=function(t){t.stopPropagation(),Ln.instance.event("SET_DEFAULT_PRODUCT",this.matvo)},i}(Tl),Oc=function(t){function i(){i.__super.call(this),this.width=120,this.productname.fontSize=16}return s(i,"script.usercenter.item.CitySearchItem",t),i}(Kl);e.__init([l,Cn,Ln,la,rs,ci,S,R,Hi,Yi,Ki,gl,Gn,Mi]),new X}(window,document,t)},{}]},{},[1]);